"use strict";var OP=Object.create;var Zp=Object.defineProperty;var $P=Object.getOwnPropertyDescriptor;var PP=Object.getOwnPropertyNames;var IP=Object.getPrototypeOf,NP=Object.prototype.hasOwnProperty;var E=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var AP=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of PP(t))!NP.call(e,s)&&s!==r&&Zp(e,s,{get:()=>t[s],enumerable:!(n=$P(t,s))||n.enumerable});return e};var em=(e,t,r)=>(r=e!=null?OP(IP(e)):{},AP(t||!e||!e.__esModule?Zp(r,"default",{value:e,enumerable:!0}):r,e));var rm=E((x6,tm)=>{"use strict";function CP(e){var t=new e,r=t;function n(){var i=t;return i.next?t=i.next:(t=new e,r=t),i.next=null,i}function s(i){r.next=i,r=i}return{get:n,release:s}}tm.exports=CP});var sm=E((F6,Xu)=>{"use strict";var kP=rm();function nm(e,t,r){if(typeof e=="function"&&(r=t,t=e,e=null),!(r>=1))throw new Error("fastqueue concurrency must be equal to or greater than 1");var n=kP(qP),s=null,i=null,o=0,a=null,u={push:y,drain:_t,saturated:_t,pause:l,paused:!1,get concurrency(){return r},set concurrency(w){if(!(w>=1))throw new Error("fastqueue concurrency must be equal to or greater than 1");if(r=w,!u.paused)for(;s&&o<r;)o++,S()},running:c,resume:f,idle:h,length:d,getQueue:p,unshift:_,empty:_t,kill:v,killAndDrain:g,error:m};return u;function c(){return o}function l(){u.paused=!0}function d(){for(var w=s,T=0;w;)w=w.next,T++;return T}function p(){for(var w=s,T=[];w;)T.push(w.value),w=w.next;return T}function f(){if(u.paused){if(u.paused=!1,s===null){o++,S();return}for(;s&&o<r;)o++,S()}}function h(){return o===0&&u.length()===0}function y(w,T){var b=n.get();b.context=e,b.release=S,b.value=w,b.callback=T||_t,b.errorHandler=a,o>=r||u.paused?i?(i.next=b,i=b):(s=b,i=b,u.saturated()):(o++,t.call(e,b.value,b.worked))}function _(w,T){var b=n.get();b.context=e,b.release=S,b.value=w,b.callback=T||_t,b.errorHandler=a,o>=r||u.paused?s?(b.next=s,s=b):(s=b,i=b,u.saturated()):(o++,t.call(e,b.value,b.worked))}function S(w){w&&n.release(w);var T=s;T&&o<=r?u.paused?o--:(i===s&&(i=null),s=T.next,T.next=null,t.call(e,T.value,T.worked),i===null&&u.empty()):--o===0&&u.drain()}function v(){s=null,i=null,u.drain=_t}function g(){s=null,i=null,u.drain(),u.drain=_t}function m(w){a=w}}function _t(){}function qP(){this.value=null,this.callback=_t,this.next=null,this.release=_t,this.context=null,this.errorHandler=null;var e=this;this.worked=function(r,n){var s=e.callback,i=e.errorHandler,o=e.value;e.value=null,e.callback=_t,e.errorHandler&&i(r,o),s.call(e.context,r,n),e.release(e)}}function LP(e,t,r){typeof e=="function"&&(r=t,t=e,e=null);function n(l,d){t.call(this,l).then(function(p){d(null,p)},d)}var s=nm(e,n,r),i=s.push,o=s.unshift;return s.push=a,s.unshift=u,s.drained=c,s;function a(l){var d=new Promise(function(p,f){i(l,function(h,y){if(h){f(h);return}p(y)})});return d.catch(_t),d}function u(l){var d=new Promise(function(p,f){o(l,function(h,y){if(h){f(h);return}p(y)})});return d.catch(_t),d}function c(){var l=new Promise(function(d){process.nextTick(function(){if(s.idle())d();else{var p=s.drain;s.drain=function(){typeof p=="function"&&p(),d(),s.drain=p}}})});return l}}Xu.exports=nm;Xu.exports.promise=LP});var Qu=E((M6,uo)=>{"use strict";var{format:jP}=require("node:util");function DP(){return`${this.name} [${this.code}]: ${this.message}`}function $s(e,t,r=500,n=Error,s=$s.captureStackTrace){if(!e)throw new Error("Fastify error code must not be empty");if(!t)throw new Error("Fastify error message must not be empty");e=e.toUpperCase(),!r&&(r=void 0);function i(...o){if(!new.target)return new i(...o);this.code=e,this.name="FastifyError",this.statusCode=r;let a=o.length-1;a!==-1&&o[a]&&typeof o[a]=="object"&&"cause"in o[a]&&(this.cause=o.pop().cause),this.message=jP(t,...o),Error.stackTraceLimit&&s&&Error.captureStackTrace(this,i)}return i.prototype=Object.create(n.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),i.prototype[Symbol.toStringTag]="Error",i.prototype.toString=DP,i}$s.captureStackTrace=!0;uo.exports=$s;uo.exports.default=$s;uo.exports.createError=$s});var lo=E((H6,im)=>{"use strict";var{createError:wr}=Qu();im.exports={AVV_ERR_EXPOSE_ALREADY_DEFINED:wr("AVV_ERR_EXPOSE_ALREADY_DEFINED","'%s' is already defined, specify an expose option for '%s'"),AVV_ERR_ATTRIBUTE_ALREADY_DEFINED:wr("AVV_ERR_ATTRIBUTE_ALREADY_DEFINED","'%s' is already defined"),AVV_ERR_CALLBACK_NOT_FN:wr("AVV_ERR_CALLBACK_NOT_FN","Callback for '%s' hook is not a function. Received: '%s'"),AVV_ERR_PLUGIN_NOT_VALID:wr("AVV_ERR_PLUGIN_NOT_VALID","Plugin must be a function or a promise. Received: '%s'"),AVV_ERR_ROOT_PLG_BOOTED:wr("AVV_ERR_ROOT_PLG_BOOTED","Root plugin has already booted"),AVV_ERR_PARENT_PLG_LOADED:wr("AVV_ERR_PARENT_PLG_LOADED","Impossible to load '%s' plugin because the parent '%s' was already loaded"),AVV_ERR_READY_TIMEOUT:wr("AVV_ERR_READY_TIMEOUT","Plugin did not start in time: '%s'. You may have forgotten to call 'done' function or to resolve a Promise"),AVV_ERR_PLUGIN_EXEC_TIMEOUT:wr("AVV_ERR_PLUGIN_EXEC_TIMEOUT","Plugin did not start in time: '%s'. You may have forgotten to call 'done' function or to resolve a Promise")}});var In=E((V6,om)=>{"use strict";var xP=Symbol("avvio.Boot"),FP=Symbol("isOnCloseHandler"),MP=Symbol("avvio.ThenifyDoNotWrap"),HP=Symbol("avvio.TimeTree.untrackNode"),VP=Symbol("avvio.TimeTree.trackNode"),zP=Symbol("avvio.TimeTree.getParent"),UP=Symbol("avvio.TimeTree.getNode"),BP=Symbol("avvio.TimeTree.addNode"),GP=Symbol.for("plugin-meta");om.exports={kAvvio:xP,kIsOnCloseHandler:FP,kThenifyDoNotWrap:MP,kUntrackNode:HP,kTrackNode:VP,kGetParent:zP,kGetNode:UP,kAddNode:BP,kPluginMeta:GP}});var hm=E((z6,dm)=>{"use strict";var{kUntrackNode:am,kTrackNode:Zu,kGetParent:um,kGetNode:lm,kAddNode:cm}=In(),el=class{constructor(){this.root=null,this.tableId=new Map,this.tableLabel=new Map}[Zu](t){this.tableId.set(t.id,t),this.tableLabel.has(t.label)?this.tableLabel.get(t.label).push(t):this.tableLabel.set(t.label,[t])}[am](t){this.tableId.delete(t.id);let r=this.tableLabel.get(t.label);r.pop(),r.length===0&&this.tableLabel.delete(t.label)}[um](t){if(t===null)return null;if(this.tableLabel.has(t)){let r=this.tableLabel.get(t);return r[r.length-1]}else return null}[lm](t){return this.tableId.get(t)}[cm](t,r,n){let s=this[um](t);if(s===null)return this.root={parent:null,id:"root",label:r,nodes:[],start:n,stop:null,diff:-1},this[Zu](this.root),this.root.id;let o=`${r}-${Math.random()}`,a={parent:t,id:o,label:r,nodes:[],start:n,stop:null,diff:-1};return s.nodes.push(a),this[Zu](a),o}start(t,r,n=Date.now()){return this[cm](t,r,n)}stop(t,r=Date.now()){let n=this[lm](t);n&&(n.stop=r,n.diff=n.stop-n.start||0,this[am](n))}toJSON(){return Object.assign({},this.root)}prettyPrint(){return fm(this.toJSON())}};function fm(e,t=""){let r=t,n=e.nodes.length,s=n-1;r+=`${e.label} ${e.diff} ms
`;for(let i=0;i<n;++i){let o=e.nodes[i],a=t+(i===s?"  ":"\u2502 ");r+=t,r+=i===s?"\u2514\u2500":"\u251C\u2500",r+=o.nodes.length===0?"\u2500 ":"\u252C ",r+=fm(o,a).slice(t.length+2)}return r}dm.exports={TimeTree:el}});var co=E((U6,pm)=>{"use strict";var{debuglog:JP}=require("node:util"),KP=JP("avvio");pm.exports={debug:KP}});var ym=E((B6,mm)=>{"use strict";function WP(){let e={resolve:null,reject:null,promise:null};return e.promise=new Promise((t,r)=>{e.resolve=t,e.reject=r}),e}mm.exports={createPromise:WP}});var _m=E((G6,gm)=>{"use strict";var{kPluginMeta:tl}=In();function YP(e,t){return e[tl]&&e[tl].name?e[tl].name:t&&t.name?t.name:e.name?e.name:e.toString().split(`
`).slice(0,2).map(r=>r.trim()).join(" -- ")}gm.exports={getPluginName:YP}});var fo=E((J6,Sm)=>{"use strict";function XP(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}Sm.exports={isPromiseLike:XP}});var vm=E((K6,Em)=>{"use strict";var{EventEmitter:QP}=require("node:events"),{inherits:ZP}=require("node:util"),{debug:He}=co(),{createPromise:eI}=ym(),{AVV_ERR_PLUGIN_EXEC_TIMEOUT:tI}=lo(),{getPluginName:rI}=_m(),{isPromiseLike:nI}=fo();function Nn(e,t,r,n,s){this.queue=e,this.func=t,this.options=r,this.isAfter=n,this.timeout=s,this.started=!1,this.name=rI(t,r),this.queue.pause(),this._error=null,this.loaded=!1,this._promise=null,this.startTime=null}ZP(Nn,QP);Nn.prototype.exec=function(e,t){He("exec",this.name),this.server=e;let r=this.func,n=this.name,s=!1;this.options=typeof this.options=="function"?this.options(this.server):this.options;let i=null,o=u=>{if(s){He("loading complete",n);return}this._error=u,He(u?"exec errored":"exec completed",n),s=!0,i&&clearTimeout(i),t(u)};this.timeout>0&&(He("setting up timeout",n,this.timeout),i=setTimeout(function(){He("timed out",n),i=null;let u=new tI(n);u.fn=r,o(u)},this.timeout)),this.started=!0,this.startTime=Date.now(),this.emit("start",this.server?this.server.name:null,this.name,Date.now());let a=r(this.server,this.options,o);nI(a)?(He("exec: resolving promise",n),a.then(()=>process.nextTick(o),u=>process.nextTick(o,u))):r.length<3&&o()};Nn.prototype.loadedSoFar=function(){if(He("loadedSoFar",this.name),this.loaded)return Promise.resolve();let e=()=>{this.server.after((r,n)=>{this._error=r,this.queue.pause(),this._promise&&(r?(He("rejecting promise",this.name,r),this._promise.reject(r)):(He("resolving promise",this.name),this._promise.resolve()),this._promise=null),process.nextTick(n,r)}),this.queue.resume()},t;return this._promise?t=Promise.resolve():(this._promise=eI(),t=this._promise.promise,this.server?e():this.on("start",e)),t};Nn.prototype.enqueue=function(e,t){He("enqueue",this.name,e.name),this.emit("enqueue",this.server?this.server.name:null,this.name,Date.now()),this.queue.push(e,t)};Nn.prototype.finish=function(e,t){He("finish",this.name,e);let r=()=>{this.loaded||(He("loaded",this.name),this.emit("loaded",this.server?this.server.name:null,this.name,Date.now()),this.loaded=!0,t(e))};if(e){this._promise&&(this._promise.reject(e),this._promise=null),r();return}let n=()=>{if(He("check",this.name,this.queue.length(),this.queue.running(),this._promise),this.queue.length()===0&&this.queue.running()===0)if(this._promise){let s=()=>{He("wrap"),queueMicrotask(n)};this._promise.resolve(),this._promise.promise.then(s,s),this._promise=null}else r();else He("delayed",this.name),this.queue.drain=()=>{He("drain",this.name),this.queue.drain=sI,queueMicrotask(n)}};queueMicrotask(n),this.queue.resume()};function sI(){}Em.exports={Plugin:Nn}});var Rm=E((W6,bm)=>{"use strict";var{AVV_ERR_PLUGIN_NOT_VALID:rl}=lo();function iI(e){if(!(e&&(typeof e=="function"||typeof e.then=="function")))throw Array.isArray(e)?new rl("array"):e===null?new rl("null"):new rl(typeof e)}bm.exports={validatePlugin:iI}});var Tm=E((Y6,wm)=>{"use strict";function oI(e){return e!==null&&typeof e=="object"&&typeof e.default=="function"}wm.exports={isBundledOrTypescriptPlugin:oI}});var Pm=E((X6,$m)=>{"use strict";var{debug:Om}=co(),{kThenifyDoNotWrap:nl}=In();function aI(){if(this.booted){Om("thenify returning undefined because we are already booted");return}if(this[nl]){this[nl]=!1;return}return Om("thenify"),(e,t)=>this._loadRegistered().then(()=>(this[nl]=!0,e(this._server)),t)}$m.exports={thenify:aI}});var Nm=E((Q6,Im)=>{"use strict";var{isPromiseLike:uI}=fo(),{kAvvio:lI}=In();function cI(e,t,r){let n=e.apply(e,t);uI(n)&&!n[lI]?n.then(()=>process.nextTick(r),s=>process.nextTick(r,s)):r&&process.nextTick(r)}Im.exports={executeWithThenable:cI}});var Fm=E((Z6,xm)=>{"use strict";var ho=sm(),fI=require("node:events").EventEmitter,dI=require("node:util").inherits,{AVV_ERR_EXPOSE_ALREADY_DEFINED:Ps,AVV_ERR_CALLBACK_NOT_FN:An,AVV_ERR_ROOT_PLG_BOOTED:hI,AVV_ERR_READY_TIMEOUT:pI,AVV_ERR_ATTRIBUTE_ALREADY_DEFINED:mI}=lo(),{kAvvio:km,kIsOnCloseHandler:qm}=In(),{TimeTree:yI}=hm(),{Plugin:Lm}=vm(),{debug:Cn}=co(),{validatePlugin:gI}=Rm(),{isBundledOrTypescriptPlugin:_I}=Tm(),{isPromiseLike:SI}=fo(),{thenify:jm}=Pm(),{executeWithThenable:Am}=Nm();function qe(e,t,r){if(typeof e=="function"&&arguments.length===1&&(r=e,t={},e=null),typeof t=="function"&&(r=t,t={}),t=t||{},t.autostart=t.autostart!==!1,t.timeout=Number(t.timeout)||0,t.expose=t.expose||{},!new.target)return new qe(e,t,r);this._server=e||this,this._opts=t,e&&this._expose(),this._current=[],this._error=null,this._lastUsed=null,this.setMaxListeners(0),r&&this.once("start",r),this.started=!1,this.booted=!1,this.pluginTree=new yI,this._readyQ=ho(this,Dm,1),this._readyQ.pause(),this._readyQ.drain=()=>{this.emit("start"),this._readyQ.drain=Cm},this._closeQ=ho(this,vI,1),this._closeQ.pause(),this._closeQ.drain=()=>{this.emit("close"),this._closeQ.drain=Cm},this._doStart=null;let n=this;this._root=new Lm(ho(this,this._loadPluginNextTick,1),function(i,o,a){n._doStart=a,o.autostart&&n.start()},t,!1,0),this._trackPluginLoading(this._root),this._loadPlugin(this._root,s=>{Cn("root plugin ready");try{this.emit("preReady"),this._root=null}catch(i){s=s||this._error||i}if(s){if(this._error=s,this._readyQ.length()===0)throw s}else this.booted=!0;this._readyQ.resume()})}dI(qe,fI);qe.prototype.start=function(){return this.started=!0,process.nextTick(this._doStart),this};qe.prototype.override=function(e,t,r){return e};qe.prototype[km]=!0;qe.prototype.use=function(e,t){return this._lastUsed=this._addPlugin(e,t,!1),this};qe.prototype._loadRegistered=function(){let e=this._current[0];return!this.started&&!this.booted&&process.nextTick(()=>this._root.queue.resume()),e?e.loadedSoFar():Promise.resolve()};Object.defineProperty(qe.prototype,"then",{get:jm});qe.prototype._addPlugin=function(e,t,r){if(_I(e)&&(e=e.default),gI(e),t=t||{},this.booted)throw new hI;let n=this._current[0],s=this._opts.timeout;if(!n.loaded&&n.timeout>0){let o=Date.now()-n.startTime;s=n.timeout-(o+3)}let i=new Lm(ho(this,this._loadPluginNextTick,1),e,t,r,s);if(this._trackPluginLoading(i),n.loaded)throw new Error(i.name,n.name);return n.enqueue(i,o=>{o&&(this._error=o)}),i};qe.prototype._expose=function(){let t=this,r=t._server,{use:n="use",after:s="after",ready:i="ready",onClose:o="onClose",close:a="close"}=this._opts.expose;if(r[n])throw new Ps(n,"use");if(r[n]=function(u,c){return t.use(u,c),this},r[s])throw new Ps(s,"after");if(r[s]=function(u){return typeof u!="function"?t._loadRegistered():(t.after(sl(u,this)),this)},r[i])throw new Ps(i,"ready");if(r[i]=function(u){if(u&&typeof u!="function")throw new An(i,typeof u);return t.ready(u?sl(u,this):void 0)},r[o])throw new Ps(o,"onClose");if(r[o]=function(u){if(typeof u!="function")throw new An(o,typeof u);return t.onClose(bI(u,this)),this},r[a])throw new Ps(a,"close");if(r[a]=function(u){if(u&&typeof u!="function")throw new An(a,typeof u);return u?(t.close(sl(u,this)),this):t.close()},r.then)throw new mI("then");Object.defineProperty(r,"then",{get:jm.bind(t)}),r[km]=!0};qe.prototype.after=function(e){if(!e)return this._loadRegistered();this._addPlugin(t.bind(this),{},!0);function t(r,n,s){Dm.call(this,e,s)}return this};qe.prototype.onClose=function(e){if(typeof e!="function")throw new An("onClose",typeof e);return e[qm]=!0,this._closeQ.unshift(e,t=>{t&&(this._error=t)}),this};qe.prototype.close=function(e){let t;if(e){if(typeof e!="function")throw new An("close",typeof e)}else t=new Promise(function(r,n){e=function(s){if(s)return n(s);r()}});return this.ready(()=>{this._error=null,this._closeQ.push(e),process.nextTick(this._closeQ.resume.bind(this._closeQ))}),t};qe.prototype.ready=function(e){if(e){if(typeof e!="function")throw new An("ready",typeof e);this._readyQ.push(e),queueMicrotask(this.start.bind(this));return}return new Promise((t,r)=>{this._readyQ.push(s),this.start();let n=this._current[0].server;function s(i,o,a){i?r(i):t(n),process.nextTick(a)}})};qe.prototype._trackPluginLoading=function(e){let t=this._current[0]?.name||null;e.once("start",(r,n,s)=>{let i=this.pluginTree.start(t||null,n,s);e.once("loaded",(o,a,u)=>{this.pluginTree.stop(i,u)})})};qe.prototype.prettyPrint=function(){return this.pluginTree.prettyPrint()};qe.prototype.toJSON=function(){return this.pluginTree.toJSON()};qe.prototype._loadPlugin=function(e,t){let r=this;if(SI(e.func)){e.func.then(o=>{typeof o.default=="function"&&(o=o.default),e.func=o,this._loadPlugin(e,t)},t);return}let n=r._current[0];if(r._current.unshift(e),r._error&&!e.isAfter){Cn("skipping loading of plugin as instance errored and it is not an after",e.name),process.nextTick(i);return}let s=n&&n.server||r._server;if(!e.isAfter)try{s=r.override(s,e.func,e.options)}catch(o){return Cn("override errored",e.name),i(o)}e.exec(s,i);function i(o){e.finish(o,a=>{r._current.shift(),t(a)})}};qe.prototype._loadPluginNextTick=function(e,t){process.nextTick(this._loadPlugin.bind(this),e,t)};function Cm(){}function Dm(e,t){let r=this._server,n=this._error;if(this._error=null,e.length===0)this._error=n,Am(e,[],t);else if(e.length===1)Am(e,[n],t);else if(this._opts.timeout===0){let s=i=>{this._error=i,t(this._error)};e.length===2?e(n,s):e(n,r,s)}else EI.call(this,e,n,r,t)}function EI(e,t,r,n){let s=e.unwrappedName??e.name;Cn("setting up ready timeout",s,this._opts.timeout);let i=setTimeout(()=>{Cn("timed out",s),i=null;let a=new pI(s);a.fn=e,this._error=a,n(a)},this._opts.timeout);e.length===2?e(t,o.bind(this)):e(t,r,o.bind(this));function o(a){i&&(clearTimeout(i),this._error=a,n(this._error))}}function vI(e,t){let r=this._server,n=e[qm];if(e.length===0||e.length===1){let s;n?s=e(r):s=e(this._error),s&&typeof s.then=="function"?(Cn("resolving close/onClose promise"),s.then(()=>process.nextTick(t),i=>process.nextTick(t,i))):process.nextTick(t)}else e.length===2?e(n?r:this._error,t):n?e(r,t):e(this._error,r,t)}function bI(e,t){return r.bind(t);function r(n,s){let i;e.length===0?(i=e(),i&&i.then?i.then(function(){process.nextTick(s)},s):process.nextTick(s)):e.length===1?(i=e(this),i&&i.then?i.then(function(){process.nextTick(s)},s):process.nextTick(s)):e(this,s)}}function sl(e,t){let r=n.bind(t);return r.unwrappedName=e.name,r;function n(s,i){let o;e?e.length===0?(o=e(),o&&o.then?o.then(function(){process.nextTick(i,s)},i):process.nextTick(i,s)):e.length===1?(o=e(s),o&&o.then?o.then(function(){process.nextTick(i)},i):process.nextTick(i)):e.length===2?e(s,i):e(s,this,i):process.nextTick(i)}}xm.exports=qe});var De=E((eJ,Mm)=>{"use strict";var RI={kAvvioBoot:Symbol("fastify.avvioBoot"),kChildren:Symbol("fastify.children"),kServerBindings:Symbol("fastify.serverBindings"),kBodyLimit:Symbol("fastify.bodyLimit"),kSupportedHTTPMethods:Symbol("fastify.acceptedHTTPMethods"),kRoutePrefix:Symbol("fastify.routePrefix"),kLogLevel:Symbol("fastify.logLevel"),kLogSerializers:Symbol("fastify.logSerializers"),kHooks:Symbol("fastify.hooks"),kContentTypeParser:Symbol("fastify.contentTypeParser"),kState:Symbol("fastify.state"),kOptions:Symbol("fastify.options"),kDisableRequestLogging:Symbol("fastify.disableRequestLogging"),kPluginNameChain:Symbol("fastify.pluginNameChain"),kRouteContext:Symbol("fastify.context"),kGenReqId:Symbol("fastify.genReqId"),kSchemaController:Symbol("fastify.schemaController"),kSchemaHeaders:Symbol("headers-schema"),kSchemaParams:Symbol("params-schema"),kSchemaQuerystring:Symbol("querystring-schema"),kSchemaBody:Symbol("body-schema"),kSchemaResponse:Symbol("response-schema"),kSchemaErrorFormatter:Symbol("fastify.schemaErrorFormatter"),kSchemaVisited:Symbol("fastify.schemas.visited"),kRequest:Symbol("fastify.Request"),kRequestPayloadStream:Symbol("fastify.RequestPayloadStream"),kRequestAcceptVersion:Symbol("fastify.RequestAcceptVersion"),kRequestCacheValidateFns:Symbol("fastify.request.cache.validateFns"),kRequestOriginalUrl:Symbol("fastify.request.originalUrl"),kFourOhFour:Symbol("fastify.404"),kCanSetNotFoundHandler:Symbol("fastify.canSetNotFoundHandler"),kFourOhFourLevelInstance:Symbol("fastify.404LogLevelInstance"),kFourOhFourContext:Symbol("fastify.404ContextKey"),kDefaultJsonParse:Symbol("fastify.defaultJSONParse"),kReply:Symbol("fastify.Reply"),kReplySerializer:Symbol("fastify.reply.serializer"),kReplyIsError:Symbol("fastify.reply.isError"),kReplyHeaders:Symbol("fastify.reply.headers"),kReplyTrailers:Symbol("fastify.reply.trailers"),kReplyHasStatusCode:Symbol("fastify.reply.hasStatusCode"),kReplyHijacked:Symbol("fastify.reply.hijacked"),kReplyStartTime:Symbol("fastify.reply.startTime"),kReplyNextErrorHandler:Symbol("fastify.reply.nextErrorHandler"),kReplyEndTime:Symbol("fastify.reply.endTime"),kReplyErrorHandlerCalled:Symbol("fastify.reply.errorHandlerCalled"),kReplyIsRunningOnErrorHook:Symbol("fastify.reply.isRunningOnErrorHook"),kReplySerializerDefault:Symbol("fastify.replySerializerDefault"),kReplyCacheSerializeFns:Symbol("fastify.reply.cache.serializeFns"),kTestInternals:Symbol("fastify.testInternals"),kErrorHandler:Symbol("fastify.errorHandler"),kChildLoggerFactory:Symbol("fastify.childLoggerFactory"),kHasBeenDecorated:Symbol("fastify.hasBeenDecorated"),kKeepAliveConnections:Symbol("fastify.keepAliveConnections"),kRouteByFastify:Symbol("fastify.routeByFastify")};Mm.exports=RI});var Vm=E((tJ,po)=>{"use strict";var{format:il}=require("node:util");function wI(e){return Hm({...e,name:"DeprecationWarning"})}function Hm({name:e,code:t,message:r,unlimited:n=!1}={}){if(!e)throw new Error("Warning name must not be empty");if(!t)throw new Error("Warning code must not be empty");if(!r)throw new Error("Warning message must not be empty");if(typeof n!="boolean")throw new Error("Warning opts.unlimited must be a boolean");t=t.toUpperCase();let s={[e]:function(o,a,u){i.emitted===!0&&i.unlimited!==!0||(i.emitted=!0,process.emitWarning(i.format(o,a,u),i.name,i.code))}};n&&(s={[e]:function(o,a,u){i.emitted=!0,process.emitWarning(i.format(o,a,u),i.name,i.code)}});let i=s[e];return i.emitted=!1,i.message=r,i.unlimited=n,i.code=t,i.format=function(o,a,u){let c;return o&&a&&u?c=il(r,o,a,u):o&&a?c=il(r,o,a):o?c=il(r,o):c=r,c},i}var ol={createWarning:Hm,createDeprecation:wI};po.exports=ol;po.exports.default=ol;po.exports.processWarning=ol});var mo=E((rJ,zm)=>{"use strict";var{createWarning:al}=Vm(),TI=al({name:"FastifyWarning",code:"FSTWRN001",message:"The %s schema for %s: %s is missing. This may indicate the schema is not well specified.",unlimited:!0}),OI=al({name:"FastifyWarning",code:"FSTWRN003",message:"The %s mixes async and callback styles that may lead to unhandled rejections. Please use only one of them.",unlimited:!0}),$I=al({name:"FastifySecurity",code:"FSTSEC001",message:'You are using /%s/ Content-Type which may be vulnerable to CORS attack. Please make sure your RegExp start with "^" or include ";?" to proper detection of the essence MIME type.',unlimited:!0});zm.exports={FSTWRN001:TI,FSTWRN003:OI,FSTSEC001:$I}});var Ve=E((nJ,yo)=>{"use strict";var q=Qu(),Kr={FST_ERR_NOT_FOUND:q("FST_ERR_NOT_FOUND","Not Found",404),FST_ERR_OPTIONS_NOT_OBJ:q("FST_ERR_OPTIONS_NOT_OBJ","Options must be an object",500,TypeError),FST_ERR_QSP_NOT_FN:q("FST_ERR_QSP_NOT_FN","querystringParser option should be a function, instead got '%s'",500,TypeError),FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN:q("FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN","schemaController.bucket option should be a function, instead got '%s'",500,TypeError),FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN:q("FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN","schemaErrorFormatter option should be a non async function. Instead got '%s'.",500,TypeError),FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ:q("FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ","ajv.customOptions option should be an object, instead got '%s'",500,TypeError),FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR:q("FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR","ajv.plugins option should be an array, instead got '%s'",500,TypeError),FST_ERR_VALIDATION:q("FST_ERR_VALIDATION","%s",400),FST_ERR_LISTEN_OPTIONS_INVALID:q("FST_ERR_LISTEN_OPTIONS_INVALID","Invalid listen options: '%s'",500,TypeError),FST_ERR_ERROR_HANDLER_NOT_FN:q("FST_ERR_ERROR_HANDLER_NOT_FN","Error Handler must be a function",500,TypeError),FST_ERR_CTP_ALREADY_PRESENT:q("FST_ERR_CTP_ALREADY_PRESENT","Content type parser '%s' already present."),FST_ERR_CTP_INVALID_TYPE:q("FST_ERR_CTP_INVALID_TYPE","The content type should be a string or a RegExp",500,TypeError),FST_ERR_CTP_EMPTY_TYPE:q("FST_ERR_CTP_EMPTY_TYPE","The content type cannot be an empty string",500,TypeError),FST_ERR_CTP_INVALID_HANDLER:q("FST_ERR_CTP_INVALID_HANDLER","The content type handler should be a function",500,TypeError),FST_ERR_CTP_INVALID_PARSE_TYPE:q("FST_ERR_CTP_INVALID_PARSE_TYPE","The body parser can only parse your data as 'string' or 'buffer', you asked '%s' which is not supported.",500,TypeError),FST_ERR_CTP_BODY_TOO_LARGE:q("FST_ERR_CTP_BODY_TOO_LARGE","Request body is too large",413,RangeError),FST_ERR_CTP_INVALID_MEDIA_TYPE:q("FST_ERR_CTP_INVALID_MEDIA_TYPE","Unsupported Media Type: %s",415),FST_ERR_CTP_INVALID_CONTENT_LENGTH:q("FST_ERR_CTP_INVALID_CONTENT_LENGTH","Request body size did not match Content-Length",400,RangeError),FST_ERR_CTP_EMPTY_JSON_BODY:q("FST_ERR_CTP_EMPTY_JSON_BODY","Body cannot be empty when content-type is set to 'application/json'",400),FST_ERR_CTP_INSTANCE_ALREADY_STARTED:q("FST_ERR_CTP_INSTANCE_ALREADY_STARTED",'Cannot call "%s" when fastify instance is already started!',400),FST_ERR_DEC_ALREADY_PRESENT:q("FST_ERR_DEC_ALREADY_PRESENT","The decorator '%s' has already been added!"),FST_ERR_DEC_DEPENDENCY_INVALID_TYPE:q("FST_ERR_DEC_DEPENDENCY_INVALID_TYPE","The dependencies of decorator '%s' must be of type Array.",500,TypeError),FST_ERR_DEC_MISSING_DEPENDENCY:q("FST_ERR_DEC_MISSING_DEPENDENCY","The decorator is missing dependency '%s'."),FST_ERR_DEC_AFTER_START:q("FST_ERR_DEC_AFTER_START","The decorator '%s' has been added after start!"),FST_ERR_DEC_REFERENCE_TYPE:q("FST_ERR_DEC_REFERENCE_TYPE","The decorator '%s' of type '%s' is a reference type. Use the { getter, setter } interface instead."),FST_ERR_DEC_UNDECLARED:q("FST_ERR_DEC_UNDECLARED","No decorator '%s' has been declared on %s."),FST_ERR_HOOK_INVALID_TYPE:q("FST_ERR_HOOK_INVALID_TYPE","The hook name must be a string",500,TypeError),FST_ERR_HOOK_INVALID_HANDLER:q("FST_ERR_HOOK_INVALID_HANDLER","%s hook should be a function, instead got %s",500,TypeError),FST_ERR_HOOK_INVALID_ASYNC_HANDLER:q("FST_ERR_HOOK_INVALID_ASYNC_HANDLER","Async function has too many arguments. Async hooks should not use the 'done' argument.",500,TypeError),FST_ERR_HOOK_NOT_SUPPORTED:q("FST_ERR_HOOK_NOT_SUPPORTED","%s hook not supported!",500,TypeError),FST_ERR_MISSING_MIDDLEWARE:q("FST_ERR_MISSING_MIDDLEWARE","You must register a plugin for handling middlewares, visit fastify.dev/docs/latest/Reference/Middleware/ for more info.",500),FST_ERR_HOOK_TIMEOUT:q("FST_ERR_HOOK_TIMEOUT","A callback for '%s' hook%s timed out. You may have forgotten to call 'done' function or to resolve a Promise"),FST_ERR_LOG_INVALID_DESTINATION:q("FST_ERR_LOG_INVALID_DESTINATION","Cannot specify both logger.stream and logger.file options"),FST_ERR_LOG_INVALID_LOGGER:q("FST_ERR_LOG_INVALID_LOGGER","Invalid logger object provided. The logger instance should have these functions(s): '%s'.",500,TypeError),FST_ERR_LOG_INVALID_LOGGER_INSTANCE:q("FST_ERR_LOG_INVALID_LOGGER_INSTANCE","loggerInstance only accepts a logger instance.",500,TypeError),FST_ERR_LOG_INVALID_LOGGER_CONFIG:q("FST_ERR_LOG_INVALID_LOGGER_CONFIG","logger options only accepts a configuration object.",500,TypeError),FST_ERR_LOG_LOGGER_AND_LOGGER_INSTANCE_PROVIDED:q("FST_ERR_LOG_LOGGER_AND_LOGGER_INSTANCE_PROVIDED","You cannot provide both logger and loggerInstance. Please provide only one.",500,TypeError),FST_ERR_REP_INVALID_PAYLOAD_TYPE:q("FST_ERR_REP_INVALID_PAYLOAD_TYPE","Attempted to send payload of invalid type '%s'. Expected a string or Buffer.",500,TypeError),FST_ERR_REP_RESPONSE_BODY_CONSUMED:q("FST_ERR_REP_RESPONSE_BODY_CONSUMED","Response.body is already consumed."),FST_ERR_REP_READABLE_STREAM_LOCKED:q("FST_ERR_REP_READABLE_STREAM_LOCKED","ReadableStream was locked. You should call releaseLock() method on reader before sending."),FST_ERR_REP_ALREADY_SENT:q("FST_ERR_REP_ALREADY_SENT",'Reply was already sent, did you forget to "return reply" in "%s" (%s)?'),FST_ERR_REP_SENT_VALUE:q("FST_ERR_REP_SENT_VALUE","The only possible value for reply.sent is true.",500,TypeError),FST_ERR_SEND_INSIDE_ONERR:q("FST_ERR_SEND_INSIDE_ONERR","You cannot use `send` inside the `onError` hook"),FST_ERR_SEND_UNDEFINED_ERR:q("FST_ERR_SEND_UNDEFINED_ERR","Undefined error has occurred"),FST_ERR_BAD_STATUS_CODE:q("FST_ERR_BAD_STATUS_CODE","Called reply with an invalid status code: %s"),FST_ERR_BAD_TRAILER_NAME:q("FST_ERR_BAD_TRAILER_NAME","Called reply.trailer with an invalid header name: %s"),FST_ERR_BAD_TRAILER_VALUE:q("FST_ERR_BAD_TRAILER_VALUE","Called reply.trailer('%s', fn) with an invalid type: %s. Expected a function."),FST_ERR_FAILED_ERROR_SERIALIZATION:q("FST_ERR_FAILED_ERROR_SERIALIZATION","Failed to serialize an error. Error: %s. Original error: %s"),FST_ERR_MISSING_SERIALIZATION_FN:q("FST_ERR_MISSING_SERIALIZATION_FN",'Missing serialization function. Key "%s"'),FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN:q("FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN",'Missing serialization function. Key "%s:%s"'),FST_ERR_REQ_INVALID_VALIDATION_INVOCATION:q("FST_ERR_REQ_INVALID_VALIDATION_INVOCATION",'Invalid validation invocation. Missing validation function for HTTP part "%s" nor schema provided.'),FST_ERR_SCH_MISSING_ID:q("FST_ERR_SCH_MISSING_ID","Missing schema $id property"),FST_ERR_SCH_ALREADY_PRESENT:q("FST_ERR_SCH_ALREADY_PRESENT","Schema with id '%s' already declared!"),FST_ERR_SCH_CONTENT_MISSING_SCHEMA:q("FST_ERR_SCH_CONTENT_MISSING_SCHEMA","Schema is missing for the content type '%s'"),FST_ERR_SCH_DUPLICATE:q("FST_ERR_SCH_DUPLICATE","Schema with '%s' already present!"),FST_ERR_SCH_VALIDATION_BUILD:q("FST_ERR_SCH_VALIDATION_BUILD","Failed building the validation schema for %s: %s, due to error %s"),FST_ERR_SCH_SERIALIZATION_BUILD:q("FST_ERR_SCH_SERIALIZATION_BUILD","Failed building the serialization schema for %s: %s, due to error %s"),FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX:q("FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX",'response schemas should be nested under a valid status code, e.g { 2xx: { type: "object" } }'),FST_ERR_INIT_OPTS_INVALID:q("FST_ERR_INIT_OPTS_INVALID","Invalid initialization options: '%s'"),FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE:q("FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE","Cannot set forceCloseConnections to 'idle' as your HTTP server does not support closeIdleConnections method"),FST_ERR_DUPLICATED_ROUTE:q("FST_ERR_DUPLICATED_ROUTE","Method '%s' already declared for route '%s'"),FST_ERR_BAD_URL:q("FST_ERR_BAD_URL","'%s' is not a valid url component",400,URIError),FST_ERR_ASYNC_CONSTRAINT:q("FST_ERR_ASYNC_CONSTRAINT","Unexpected error from async constraint",500),FST_ERR_INVALID_URL:q("FST_ERR_INVALID_URL","URL must be a string. Received '%s'",400,TypeError),FST_ERR_ROUTE_OPTIONS_NOT_OBJ:q("FST_ERR_ROUTE_OPTIONS_NOT_OBJ",'Options for "%s:%s" route must be an object',500,TypeError),FST_ERR_ROUTE_DUPLICATED_HANDLER:q("FST_ERR_ROUTE_DUPLICATED_HANDLER",'Duplicate handler for "%s:%s" route is not allowed!',500),FST_ERR_ROUTE_HANDLER_NOT_FN:q("FST_ERR_ROUTE_HANDLER_NOT_FN","Error Handler for %s:%s route, if defined, must be a function",500,TypeError),FST_ERR_ROUTE_MISSING_HANDLER:q("FST_ERR_ROUTE_MISSING_HANDLER",'Missing handler function for "%s:%s" route.',500),FST_ERR_ROUTE_METHOD_INVALID:q("FST_ERR_ROUTE_METHOD_INVALID","Provided method is invalid!",500,TypeError),FST_ERR_ROUTE_METHOD_NOT_SUPPORTED:q("FST_ERR_ROUTE_METHOD_NOT_SUPPORTED","%s method is not supported.",500),FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED:q("FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED","Body validation schema for %s:%s route is not supported!",500),FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT:q("FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT","'bodyLimit' option must be an integer > 0. Got '%s'",500,TypeError),FST_ERR_ROUTE_REWRITE_NOT_STR:q("FST_ERR_ROUTE_REWRITE_NOT_STR",'Rewrite url for "%s" needs to be of type "string" but received "%s"',500,TypeError),FST_ERR_REOPENED_CLOSE_SERVER:q("FST_ERR_REOPENED_CLOSE_SERVER","Fastify has already been closed and cannot be reopened"),FST_ERR_REOPENED_SERVER:q("FST_ERR_REOPENED_SERVER","Fastify is already listening"),FST_ERR_INSTANCE_ALREADY_LISTENING:q("FST_ERR_INSTANCE_ALREADY_LISTENING","Fastify instance is already listening. %s"),FST_ERR_PLUGIN_VERSION_MISMATCH:q("FST_ERR_PLUGIN_VERSION_MISMATCH","fastify-plugin: %s - expected '%s' fastify version, '%s' is installed"),FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE:q("FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE","The decorator '%s'%s is not present in %s"),FST_ERR_PLUGIN_INVALID_ASYNC_HANDLER:q("FST_ERR_PLUGIN_INVALID_ASYNC_HANDLER","The %s plugin being registered mixes async and callback styles. Async plugin should not mix async and callback style.",500,TypeError),FST_ERR_PLUGIN_CALLBACK_NOT_FN:q("FST_ERR_PLUGIN_CALLBACK_NOT_FN","fastify-plugin: %s",500,TypeError),FST_ERR_PLUGIN_NOT_VALID:q("FST_ERR_PLUGIN_NOT_VALID","fastify-plugin: %s"),FST_ERR_ROOT_PLG_BOOTED:q("FST_ERR_ROOT_PLG_BOOTED","fastify-plugin: %s"),FST_ERR_PARENT_PLUGIN_BOOTED:q("FST_ERR_PARENT_PLUGIN_BOOTED","fastify-plugin: %s"),FST_ERR_PLUGIN_TIMEOUT:q("FST_ERR_PLUGIN_TIMEOUT","fastify-plugin: %s")};function PI(e,t){return t.cause=e,t}yo.exports=Kr;yo.exports.appendStackTrace=PI;yo.exports.AVVIO_ERRORS_MAP={AVV_ERR_CALLBACK_NOT_FN:Kr.FST_ERR_PLUGIN_CALLBACK_NOT_FN,AVV_ERR_PLUGIN_NOT_VALID:Kr.FST_ERR_PLUGIN_NOT_VALID,AVV_ERR_ROOT_PLG_BOOTED:Kr.FST_ERR_ROOT_PLG_BOOTED,AVV_ERR_PARENT_PLG_LOADED:Kr.FST_ERR_PARENT_PLUGIN_BOOTED,AVV_ERR_READY_TIMEOUT:Kr.FST_ERR_PLUGIN_TIMEOUT,AVV_ERR_PLUGIN_EXEC_TIMEOUT:Kr.FST_ERR_PLUGIN_TIMEOUT}});var Tr=E((sJ,Qm)=>{"use strict";var II=["onRoute","onRegister","onReady","onListen","preClose","onClose"],Jm=["onTimeout","onRequest","preParsing","preValidation","preSerialization","preHandler","onSend","onResponse","onError","onRequestAbort"],NI=Jm.concat(II),{FST_ERR_HOOK_INVALID_TYPE:AI,FST_ERR_HOOK_INVALID_HANDLER:CI,FST_ERR_SEND_UNDEFINED_ERR:go,FST_ERR_HOOK_TIMEOUT:kI,FST_ERR_HOOK_NOT_SUPPORTED:qI,AVVIO_ERRORS_MAP:Um,appendStackTrace:Bm}=Ve(),{kChildren:Is,kHooks:Km,kRequestPayloadStream:Gm}=De();function Ns(){this.onRequest=[],this.preParsing=[],this.preValidation=[],this.preSerialization=[],this.preHandler=[],this.onResponse=[],this.onSend=[],this.onError=[],this.onRoute=[],this.onRegister=[],this.onReady=[],this.onListen=[],this.onTimeout=[],this.onRequestAbort=[],this.preClose=[]}Ns.prototype=Object.create(null);Ns.prototype.validate=function(e,t){if(typeof e!="string")throw new AI;if(Array.isArray(this[e])===!1)throw new qI(e);if(typeof t!="function")throw new CI(e,Object.prototype.toString.call(t))};Ns.prototype.add=function(e,t){this.validate(e,t),this[e].push(t)};function LI(e){let t=new Ns;return t.onRequest=e.onRequest.slice(),t.preParsing=e.preParsing.slice(),t.preValidation=e.preValidation.slice(),t.preSerialization=e.preSerialization.slice(),t.preHandler=e.preHandler.slice(),t.onSend=e.onSend.slice(),t.onResponse=e.onResponse.slice(),t.onError=e.onError.slice(),t.onRoute=e.onRoute.slice(),t.onRegister=e.onRegister.slice(),t.onTimeout=e.onTimeout.slice(),t.onRequestAbort=e.onRequestAbort.slice(),t.onReady=[],t.onListen=[],t.preClose=[],t}function Wm(e,t,r,n){let s=r[Km][e],i=0,o=0;u();function a(l){let d=s[i-1]?.name,p=d?` "${d}"`:"";if(l){l.code==="AVV_ERR_READY_TIMEOUT"?l=Bm(l,new kI(e,p)):l=Um[l.code]!=null?Bm(l,new Um[l.code](l.message)):l,n(l);return}n()}function u(l){if(l){a(l);return}if(i===s.length&&o===r[Is].length){i===0&&o===0?a():t(function(p,f){a(p),f(p)});return}if(i===s.length&&o<r[Is].length){let d=r[Is][o++];Wm(e,t,d,u);return}t(c(s[i++],r)),u()}function c(l,d){return function(p,f){if(p){f(p);return}if(l.length===1){try{l.call(d,f)}catch(h){f(h)}return}try{let h=l.call(d);if(h&&typeof h.then=="function"){h.then(f,f);return}}catch(h){p=h}f(p)}}}function Ym(e){let t=e[Km].onListen,r=t.length,n=0,s=0;i();function i(a){if(a&&e.log.error(a),n===r){for(;s<e[Is].length;){let u=e[Is][s++];Ym(u)}return}o(t[n++],e,i)}async function o(a,u,c){if(a.length===1){try{a.call(u,c)}catch(l){c(l)}return}try{let l=a.call(u);if(l&&typeof l.then=="function"){l.then(c,c);return}c()}catch(l){c(l)}}}function kn(e){return function(r,n,s,i){let o=0;function a(l){if(l||o===r.length){i(l,n,s);return}let d;try{d=e(r[o++],n,s,a)}catch(p){i(p,n,s);return}d&&typeof d.then=="function"&&d.then(u,c)}function u(){a()}function c(l){l||(l=new go),i(l,n,s)}a()}}function jI(e,t,r,n){return e(t,r,n)}var DI=kn(jI),xI=kn(As),FI=kn(As),MI=kn(As),HI=kn(As);function Xm(e,t,r,n,s){let i=0;function o(c,l){if(c){s(c,t,r,n);return}if(l!==void 0&&(n=l),i===e.length){s(null,t,r,n);return}let d;try{d=e[i++](t,r,n,o)}catch(p){s(p,t,r);return}d&&typeof d.then=="function"&&d.then(a,u)}function a(c){o(null,c)}function u(c){c||(c=new go),s(c,t,r,n)}o()}var VI=Xm;function zI(e,t,r,n){let s=0;function i(u,c){if(r.sent)return;if(c!==void 0&&(t[Gm]=c),u||s===e.length){n(u,t,r);return}let l;try{l=e[s++](t,r,t[Gm],i)}catch(d){n(d,t,r);return}l&&typeof l.then=="function"&&l.then(o,a)}function o(u){i(null,u)}function a(u){u||(u=new go),n(u,t,r)}i()}function UI(e,t,r){let n=0;function s(a){if(a||n===e.length){r(a,t);return}let u;try{u=e[n++](t,s)}catch(c){r(c,t);return}u&&typeof u.then=="function"&&u.then(i,o)}function i(){s()}function o(a){a||(a=new go),r(a,t)}s()}function As(e,t,r,n){if(r.sent!==!0)return e(t,r,n)}Qm.exports={Hooks:Ns,buildHooks:LI,hookRunnerGenerator:kn,preParsingHookRunner:zI,onResponseHookRunner:DI,onSendHookRunner:Xm,preSerializationHookRunner:VI,onRequestAbortHookRunner:UI,hookIterator:As,hookRunnerApplication:Wm,onListenHookRunner:Ym,preHandlerHookRunner:FI,preValidationHookRunner:xI,onRequestHookRunner:HI,onTimeoutHookRunner:MI,lifecycleHooks:Jm,supportedHooks:NI}});var uy=E((iJ,ay)=>{"use strict";var BI=require("node:http"),GI=require("node:https"),Zm=require("node:http2"),JI=require("node:dns"),KI=require("node:os"),{kState:Je,kOptions:WI,kServerBindings:YI}=De(),{FSTWRN003:XI}=mo(),{onListenHookRunner:_o}=Tr(),{FST_ERR_REOPENED_CLOSE_SERVER:ty,FST_ERR_REOPENED_SERVER:ry,FST_ERR_LISTEN_OPTIONS_INVALID:QI}=Ve();ay.exports.createServer=ZI;function ny(e){return`Server listening at ${e}`}function ZI(e,t){let r=iy(e,t);function n(s={port:0,host:"localhost"},i=void 0){if(typeof i=="function"&&(i.constructor.name==="AsyncFunction"&&XI("listen method"),s.cb=i),s.signal){if(typeof s.signal.on!="function"&&typeof s.signal.addEventListener!="function")throw new QI("Invalid options.signal");if(s.signal.aborted)this.close();else{let a=()=>{this.close()};s.signal.addEventListener("abort",a,{once:!0})}}let o;if(s.path==null?o=s.host??"localhost":o=s.host,(!Object.hasOwn(s,"host")||s.host==null)&&(s.host=o),o==="localhost"?s.cb=(a,u)=>{if(a){i(a,u);return}ey.call(this,r,t,e,s,()=>{this[Je].listening=!0,i(null,u),_o(this)})}:s.cb=(a,u)=>{if(a){i(a,u);return}this[Je].listening=!0,i(null,u),_o(this)},i===void 0)return e1.call(this,r,s).then(u=>new Promise((c,l)=>{o==="localhost"?ey.call(this,r,t,e,s,()=>{this[Je].listening=!0,c(u),_o(this)}):(c(u),_o(this))}));this.ready(sy.call(this,r,s))}return{server:r,listen:n}}function ey(e,t,r,n,s){this[Je].listening=!1,JI.lookup(n.host,{all:!0},(i,o)=>{if(i){s();return}let a=e.listening&&r.serverFactory,u=0,c=0;if(!a){let d=e.address();for(let p of o)if(p.address!==d.address){u++;let f=Object.assign({},n,{host:p.address,port:d.port,cb:_=>{c++,_||this[YI].push(h),c===u&&s()}}),h=iy(r,t),y=()=>{h.close(()=>{}),typeof h.closeAllConnections=="function"&&r.forceCloseConnections===!0&&h.closeAllConnections()};h.on("upgrade",e.emit.bind(e,"upgrade")),e.on("unref",y),e.on("close",y),e.on("error",y),this[Je].listening=!1,sy.call(this,h,f)()}}if(u===0){s();return}let l=e.unref;e.unref=function(){l.call(e),e.emit("unref")}})}function sy(e,t){let r=n=>{if(e.removeListener("error",r),e.removeListener("listening",r),n)this[Je].listening=!1,t.cb(n,null);else{let s=oy.call(this,e,t.listenTextResolver||ny);t.cb(null,s)}};return n=>{if(n!=null)return t.cb(n);if(this[Je].listening&&this[Je].closing)return t.cb(new ty,null);if(this[Je].listening)return t.cb(new ry,null);e.once("error",r),this[Je].closing||(e.once("listening",r),e.listen(t),this[Je].listening=!0)}}function e1(e,t){return this[Je].listening&&this[Je].closing?Promise.reject(new ty):this[Je].listening?Promise.reject(new ry):this.ready().then(()=>{let r,n;function s(){e.removeListener("error",r),e.removeListener("listening",n)}let i=new Promise((a,u)=>{r=c=>{s(),this[Je].listening=!1,u(c)},e.once("error",r)}),o=new Promise((a,u)=>{n=()=>{s(),this[Je].listening=!0,a(oy.call(this,e,t.listenTextResolver||ny))},e.once("listening",n)});return e.listen(t),Promise.race([i,o])})}function iy(e,t){if(e.serverFactory)return e.serverFactory(t,e);let r=e.https===!0?{}:e.https;if(e.http2){let s=typeof r=="object"?Zm.createSecureServer(r,t):Zm.createServer(e.http,t);return s.on("session",i=>i.setTimeout(e.http2SessionTimeout,function(){this.close()})),s.setTimeout(e.connectionTimeout),s}let n=r?GI.createServer(r,t):BI.createServer(e.http,t);return n.keepAliveTimeout=e.keepAliveTimeout,n.requestTimeout=e.requestTimeout,n.setTimeout(e.connectionTimeout),e.maxRequestsPerSocket>0&&(n.maxRequestsPerSocket=e.maxRequestsPerSocket),n}function t1(e){return e.address==="0.0.0.0"?Object.values(KI.networkInterfaces()).flatMap(t=>t.filter(r=>r.family==="IPv4")).sort(t=>t.internal?-1:1).map(t=>t.address):[e.address]}function oy(e,t){let r;typeof e.address()=="string"?r=[e.address()]:(e.address().address.indexOf(":")===-1?r=t1(e.address()).map(s=>s+":"+e.address().port):r=["["+e.address().address+"]:"+e.address().port],r=r.map(s=>"http"+(this[WI].https?"s":"")+"://"+s));for(let s of r)this.log.info(t(s));return r[0]}});var cl=E((oJ,cy)=>{"use strict";var{kSchemaHeaders:vo,kSchemaParams:ul,kSchemaQuerystring:ll,kSchemaBody:Wr,kSchemaResponse:ly}=De(),r1=/^[1-5](?:\d{2}|xx)$|^default$/,{FST_ERR_SCH_RESPONSE_SCHEMA_NOT_NESTED_2XX:n1}=Ve(),{FSTWRN001:So}=mo();function s1(e,t){if(!e.schema||!e.schema.response)return;let{method:r,url:n}=e.config||{};e[ly]=Object.keys(e.schema.response).reduce(function(s,i){let o=e.schema.response[i];if(i=i.toLowerCase(),!r1.test(i))throw new n1;if(o.content){let a={};for(let u of Object.keys(o.content)){let c=o.content[u].schema;a[u]=t({schema:c,url:n,method:r,httpStatus:i,contentType:u})}s[i]=a}else s[i]=t({schema:o,url:n,method:r,httpStatus:i});return s},{})}function i1(e,t,r){let{schema:n}=e;if(!n)return;let{method:s,url:i}=e.config||{},o=n.headers;if(o&&(r||Object.getPrototypeOf(o)!==Object.prototype))e[vo]=t({schema:o,method:s,url:i,httpPart:"headers"});else if(o){let a={};Object.keys(o).forEach(u=>{a[u]=o[u]}),a.required instanceof Array&&(a.required=a.required.map(u=>u.toLowerCase())),o.properties&&(a.properties={},Object.keys(o.properties).forEach(u=>{a.properties[u.toLowerCase()]=o.properties[u]})),e[vo]=t({schema:a,method:s,url:i,httpPart:"headers"})}else Object.hasOwn(n,"headers")&&So("headers",s,i);if(n.body){let a=n.body.content;if(a){let u={};for(let c of Object.keys(a)){let l=a[c].schema;u[c]=t({schema:l,method:s,url:i,httpPart:"body",contentType:c})}e[Wr]=u}else e[Wr]=t({schema:n.body,method:s,url:i,httpPart:"body"})}else Object.hasOwn(n,"body")&&So("body",s,i);n.querystring?e[ll]=t({schema:n.querystring,method:s,url:i,httpPart:"querystring"}):Object.hasOwn(n,"querystring")&&So("querystring",s,i),n.params?e[ul]=t({schema:n.params,method:s,url:i,httpPart:"params"}):Object.hasOwn(n,"params")&&So("params",s,i)}function Eo(e,t,r){let n=t[r]===void 0,s=e&&e(n?null:t[r]);if(s&&typeof s.then=="function")return s.then(o=>i(o)).catch(o=>o);return i(s);function i(o){return o===!1?e.errors:o&&o.error?o.error:(o&&o.value&&(t[r]=o.value),!1)}}function bo(e,t,r){let n=r===void 0;if(n||!r.skipParams){let i=Eo(e[ul],t,"params");if(i)return typeof i.then!="function"?Or(i,"params",e.schemaErrorFormatter):o1(i,e,t)}if(n||!r.skipBody){let i=null;if(typeof e[Wr]=="function")i=e[Wr];else if(e[Wr]){let a=c1(t.headers["content-type"]),u=e[Wr][a];u&&(i=u)}let o=Eo(i,t,"body");if(o)return typeof o.then!="function"?Or(o,"body",e.schemaErrorFormatter):a1(o,e,t)}if(n||!r.skipQuery){let i=Eo(e[ll],t,"query");if(i)return typeof i.then!="function"?Or(i,"querystring",e.schemaErrorFormatter):u1(i,e,t)}let s=Eo(e[vo],t,"headers");return s?typeof s.then!="function"?Or(s,"headers",e.schemaErrorFormatter):l1(s,e,t):!1}function o1(e,t,r){return e.then(n=>n?Or(n,"params",t.schemaErrorFormatter):bo(t,r,{skipParams:!0}))}function a1(e,t,r){return e.then(n=>n?Or(n,"body",t.schemaErrorFormatter):bo(t,r,{skipParams:!0,skipBody:!0}))}function u1(e,t,r){return e.then(n=>n?Or(n,"querystring",t.schemaErrorFormatter):bo(t,r,{skipParams:!0,skipBody:!0,skipQuery:!0}))}function l1(e,t,r){return e.then(n=>n?Or(n,"headers",t.schemaErrorFormatter):!1)}function Or(e,t,r){if(e instanceof Error)return e.statusCode=e.statusCode||400,e.code=e.code||"FST_ERR_VALIDATION",e.validationContext=e.validationContext||t,e;let n=r(e,t);return n.statusCode=n.statusCode||400,n.code=n.code||"FST_ERR_VALIDATION",n.validation=e,n.validationContext=t,n}function c1(e){return e?e.split(/[ ;]/,1)[0].trim().toLowerCase():""}cy.exports={symbols:{bodySchema:Wr,querystringSchema:ll,responseSchema:ly,paramsSchema:ul,headersSchema:vo},compileSchemasForValidation:i1,compileSchemasForSerialization:s1,validate:bo}});var fl=E((aJ,dy)=>{"use strict";var{kReplyIsError:fy,kReplyHijacked:f1}=De(),d1=require("node:diagnostics_channel"),Cs=d1.tracingChannel("fastify.request.handler");function h1(e,t,r){r&&(r.async=!0),e.then(function(n){if(t[f1]!==!0){r&&Cs.asyncStart.publish(r);try{if(n!==void 0||t.sent===!1&&t.raw.headersSent===!1&&t.request.raw.aborted===!1&&t.request.socket&&!t.request.socket.destroyed)try{t.send(n)}catch(s){t[fy]=!0,t.send(s)}}finally{r&&Cs.asyncEnd.publish(r)}}},function(n){r&&(r.error=n,Cs.error.publish(r),Cs.asyncStart.publish(r));try{if(t.sent===!0){t.log.error({err:n},"Promise errored, but reply.sent = true was set");return}t[fy]=!0,t.send(n)}catch(s){t.send(s)}finally{r&&Cs.asyncEnd.publish(r)}})}dy.exports=h1});var ml=E((uJ,pl)=>{"use strict";var p1=require("node:diagnostics_channel"),{validate:m1}=cl(),{preValidationHookRunner:y1,preHandlerHookRunner:g1}=Tr(),_1=fl(),{kReplyIsError:Ro,kRouteContext:or,kFourOhFourContext:S1,kSupportedHTTPMethods:hy}=De(),ks=p1.tracingChannel("fastify.request.handler");function E1(e,t,r){if(r.sent===!0)return;if(e!=null){r[Ro]=!0,r.send(e);return}let n=t.raw.method,s=t.headers,i=t[or];if(this[hy].bodyless.has(n)){Yr(t,r);return}if(this[hy].bodywith.has(n)){let o=s["content-type"],a=s["content-length"],u=s["transfer-encoding"];if(o===void 0)(a===void 0||a==="0")&&u===void 0?Yr(t,r):i.contentTypeParser.run("",Yr,t,r);else{if(a===void 0&&u===void 0&&n==="OPTIONS"){Yr(t,r);return}i.contentTypeParser.run(o,Yr,t,r)}return}Yr(t,r)}function Yr(e,t){try{e[or].preValidation!==null?y1(e[or].preValidation,e,t,dl):dl(null,e,t)}catch(r){dl(r,e,t)}}function dl(e,t,r){if(r.sent===!0)return;if(e!=null){r[Ro]=!0,r.send(e);return}let n=m1(r[or],t);if(n&&typeof n.then=="function"||!1){let i=py.bind(null,t,r);n.then(i,i)}else py(t,r,n)}function py(e,t,r){if(r){if(t[or].attachValidation===!1){t.send(r);return}t.request.validationError=r}e[or].preHandler!==null?g1(e[or].preHandler,e,t,hl):hl(null,e,t)}function hl(e,t,r){if(r.sent)return;let n=t[or];if(!ks.hasSubscribers||n[S1]===null)my(e,t,r);else{let s={request:t,reply:r,async:!1,route:{url:n.config.url,method:n.config.method}};ks.start.runStores(s,my,void 0,e,t,r,s)}}function my(e,t,r,n){let s=t[or];try{if(e!=null){r[Ro]=!0,r.send(e),n&&(n.error=e,ks.error.publish(n));return}let i;try{i=s.handler(t,r)}catch(o){n&&(n.error=o,ks.error.publish(n)),r[Ro]=!0,r.send(o);return}i!==void 0&&(i!==null&&typeof i.then=="function"?_1(i,r,n):r.send(i))}finally{n&&ks.end.publish(n)}}pl.exports=E1;pl.exports[Symbol.for("internals")]={handler:Yr,preHandlerCallback:hl}});var gy=E((lJ,yy)=>{"use strict";function qn(){}var v1={fatal:qn,error:qn,warn:qn,info:qn,debug:qn,trace:qn};Object.defineProperty(yy,"exports",{get(){return Object.create(v1)}})});var gl=E((cJ,Ey)=>{"use strict";var qs=e=>e&&typeof e.message=="string",yl=e=>{if(!e)return;let t=e.cause;if(typeof t=="function"){let r=e.cause();return qs(r)?r:void 0}else return qs(t)?t:void 0},_y=(e,t)=>{if(!qs(e))return"";let r=e.stack||"";if(t.has(e))return r+`
causes have become circular...`;let n=yl(e);return n?(t.add(e),r+`
caused by: `+_y(n,t)):r},b1=e=>_y(e,new Set),Sy=(e,t,r)=>{if(!qs(e))return"";let n=r?"":e.message||"";if(t.has(e))return n+": ...";let s=yl(e);if(s){t.add(e);let i=typeof e.cause=="function";return n+(i?"":": ")+Sy(s,t,i)}else return n},R1=e=>Sy(e,new Set);Ey.exports={isErrorLike:qs,getErrorCause:yl,stackWithCauses:b1,messageWithCauses:R1}});var _l=E((fJ,by)=>{"use strict";var w1=Symbol("circular-ref-tag"),wo=Symbol("pino-raw-err-ref"),vy=Object.create({},{type:{enumerable:!0,writable:!0,value:void 0},message:{enumerable:!0,writable:!0,value:void 0},stack:{enumerable:!0,writable:!0,value:void 0},aggregateErrors:{enumerable:!0,writable:!0,value:void 0},raw:{enumerable:!1,get:function(){return this[wo]},set:function(e){this[wo]=e}}});Object.defineProperty(vy,wo,{writable:!0,value:{}});by.exports={pinoErrProto:vy,pinoErrorSymbols:{seen:w1,rawSymbol:wo}}});var Ty=E((dJ,wy)=>{"use strict";wy.exports=El;var{messageWithCauses:T1,stackWithCauses:O1,isErrorLike:Ry}=gl(),{pinoErrProto:$1,pinoErrorSymbols:P1}=_l(),{seen:Sl}=P1,{toString:I1}=Object.prototype;function El(e){if(!Ry(e))return e;e[Sl]=void 0;let t=Object.create($1);t.type=I1.call(e.constructor)==="[object Function]"?e.constructor.name:e.name,t.message=T1(e),t.stack=O1(e),Array.isArray(e.errors)&&(t.aggregateErrors=e.errors.map(r=>El(r)));for(let r in e)if(t[r]===void 0){let n=e[r];Ry(n)?r!=="cause"&&!Object.prototype.hasOwnProperty.call(n,Sl)&&(t[r]=El(n)):t[r]=n}return delete e[Sl],t.raw=e,t}});var $y=E((hJ,Oy)=>{"use strict";Oy.exports=Oo;var{isErrorLike:vl}=gl(),{pinoErrProto:N1,pinoErrorSymbols:A1}=_l(),{seen:To}=A1,{toString:C1}=Object.prototype;function Oo(e){if(!vl(e))return e;e[To]=void 0;let t=Object.create(N1);t.type=C1.call(e.constructor)==="[object Function]"?e.constructor.name:e.name,t.message=e.message,t.stack=e.stack,Array.isArray(e.errors)&&(t.aggregateErrors=e.errors.map(r=>Oo(r))),vl(e.cause)&&!Object.prototype.hasOwnProperty.call(e.cause,To)&&(t.cause=Oo(e.cause));for(let r in e)if(t[r]===void 0){let n=e[r];vl(n)?Object.prototype.hasOwnProperty.call(n,To)||(t[r]=Oo(n)):t[r]=n}return delete e[To],t.raw=e,t}});var Ay=E((pJ,Ny)=>{"use strict";Ny.exports={mapHttpRequest:k1,reqSerializer:Iy};var bl=Symbol("pino-raw-req-ref"),Py=Object.create({},{id:{enumerable:!0,writable:!0,value:""},method:{enumerable:!0,writable:!0,value:""},url:{enumerable:!0,writable:!0,value:""},query:{enumerable:!0,writable:!0,value:""},params:{enumerable:!0,writable:!0,value:""},headers:{enumerable:!0,writable:!0,value:{}},remoteAddress:{enumerable:!0,writable:!0,value:""},remotePort:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[bl]},set:function(e){this[bl]=e}}});Object.defineProperty(Py,bl,{writable:!0,value:{}});function Iy(e){let t=e.info||e.socket,r=Object.create(Py);if(r.id=typeof e.id=="function"?e.id():e.id||(e.info?e.info.id:void 0),r.method=e.method,e.originalUrl)r.url=e.originalUrl;else{let n=e.path;r.url=typeof n=="string"?n:e.url?e.url.path||e.url:void 0}return e.query&&(r.query=e.query),e.params&&(r.params=e.params),r.headers=e.headers,r.remoteAddress=t&&t.remoteAddress,r.remotePort=t&&t.remotePort,r.raw=e.raw||e,r}function k1(e){return{req:Iy(e)}}});var Ly=E((mJ,qy)=>{"use strict";qy.exports={mapHttpResponse:q1,resSerializer:ky};var Rl=Symbol("pino-raw-res-ref"),Cy=Object.create({},{statusCode:{enumerable:!0,writable:!0,value:0},headers:{enumerable:!0,writable:!0,value:""},raw:{enumerable:!1,get:function(){return this[Rl]},set:function(e){this[Rl]=e}}});Object.defineProperty(Cy,Rl,{writable:!0,value:{}});function ky(e){let t=Object.create(Cy);return t.statusCode=e.headersSent?e.statusCode:null,t.headers=e.getHeaders?e.getHeaders():e._headers,t.raw=e,t}function q1(e){return{res:ky(e)}}});var Tl=E((yJ,jy)=>{"use strict";var wl=Ty(),L1=$y(),$o=Ay(),Po=Ly();jy.exports={err:wl,errWithCause:L1,mapHttpRequest:$o.mapHttpRequest,mapHttpResponse:Po.mapHttpResponse,req:$o.reqSerializer,res:Po.resSerializer,wrapErrorSerializer:function(t){return t===wl?t:function(n){return t(wl(n))}},wrapRequestSerializer:function(t){return t===$o.reqSerializer?t:function(n){return t($o.reqSerializer(n))}},wrapResponseSerializer:function(t){return t===Po.resSerializer?t:function(n){return t(Po.resSerializer(n))}}}});var Ol=E((gJ,Dy)=>{"use strict";function j1(e,t){return t}Dy.exports=function(){let t=Error.prepareStackTrace;Error.prepareStackTrace=j1;let r=new Error().stack;if(Error.prepareStackTrace=t,!Array.isArray(r))return;let n=r.slice(2),s=[];for(let i of n)i&&s.push(i.getFileName());return s}});var Fy=E((_J,xy)=>{"use strict";xy.exports=D1;function D1(e={}){let{ERR_PATHS_MUST_BE_STRINGS:t=()=>"fast-redact - Paths must be (non-empty) strings",ERR_INVALID_PATH:r=n=>`fast-redact \u2013 Invalid path (${n})`}=e;return function({paths:s}){s.forEach(i=>{if(typeof i!="string")throw Error(t());try{if(//.test(i))throw Error();let o=(i[0]==="["?"":".")+i.replace(/^\*/,"\u3007").replace(/\.\*/g,".\u3007").replace(/\[\*\]/g,"[\u3007]");if(/\n|\r|;/.test(o)||/\/\*/.test(o))throw Error();Function(`
            'use strict'
            const o = new Proxy({}, { get: () => o, set: () => { throw Error() } });
            const \u3007 = null;
            o${o}
            if ([o${o}].length !== 1) throw Error()`)()}catch{throw Error(r(i))}})}}});var Io=E((SJ,My)=>{"use strict";My.exports=/[^.[\]]+|\[((?:.)*?)\]/g});var Vy=E((EJ,Hy)=>{"use strict";var x1=Io();Hy.exports=F1;function F1({paths:e}){let t=[];var r=0;let n=e.reduce(function(s,i,o){var a=i.match(x1).map(l=>l.replace(/'|"|`/g,""));let u=i[0]==="[";a=a.map(l=>l[0]==="["?l.substr(1,l.length-2):l);let c=a.indexOf("*");if(c>-1){let l=a.slice(0,c),d=l.join("."),p=a.slice(c+1,a.length),f=p.length>0;r++,t.push({before:l,beforeStr:d,after:p,nested:f})}else s[i]={path:a,val:void 0,precensored:!1,circle:"",escPath:JSON.stringify(i),leadingBracket:u};return s},{});return{wildcards:t,wcLen:r,secret:n}}});var Uy=E((vJ,zy)=>{"use strict";var M1=Io();zy.exports=H1;function H1({secret:e,serialize:t,wcLen:r,strict:n,isCensorFct:s,censorFctTakesPath:i},o){let a=Function("o",`
    if (typeof o !== 'object' || o == null) {
      ${B1(n,t)}
    }
    const { censor, secret } = this
    const originalSecret = {}
    const secretKeys = Object.keys(secret)
    for (var i = 0; i < secretKeys.length; i++) {
      originalSecret[secretKeys[i]] = secret[secretKeys[i]]
    }

    ${V1(e,s,i)}
    this.compileRestore()
    ${z1(r>0,s,i)}
    this.secret = originalSecret
    ${U1(t)}
  `).bind(o);return a.state=o,t===!1&&(a.restore=u=>o.restore(u)),a}function V1(e,t,r){return Object.keys(e).map(n=>{let{escPath:s,leadingBracket:i,path:o}=e[n],a=i?1:0,u=i?"":".",c=[];for(var l;(l=M1.exec(n))!==null;){let[,h]=l,{index:y,input:_}=l;y>a&&c.push(_.substring(0,y-(h?0:1)))}var d=c.map(h=>`o${u}${h}`).join(" && ");d.length===0?d+=`o${u}${n} != null`:d+=` && o${u}${n} != null`;let p=`
      switch (true) {
        ${c.reverse().map(h=>`
          case o${u}${h} === censor:
            secret[${s}].circle = ${JSON.stringify(h)}
            break
        `).join(`
`)}
      }
    `,f=r?`val, ${JSON.stringify(o)}`:"val";return`
      if (${d}) {
        const val = o${u}${n}
        if (val === censor) {
          secret[${s}].precensored = true
        } else {
          secret[${s}].val = val
          o${u}${n} = ${t?`censor(${f})`:"censor"}
          ${p}
        }
      }
    `}).join(`
`)}function z1(e,t,r){return e===!0?`
    {
      const { wildcards, wcLen, groupRedact, nestedRedact } = this
      for (var i = 0; i < wcLen; i++) {
        const { before, beforeStr, after, nested } = wildcards[i]
        if (nested === true) {
          secret[beforeStr] = secret[beforeStr] || []
          nestedRedact(secret[beforeStr], o, before, after, censor, ${t}, ${r})
        } else secret[beforeStr] = groupRedact(o, before, censor, ${t}, ${r})
      }
    }
  `:""}function U1(e){return e===!1?"return o":`
    var s = this.serialize(o)
    this.restore(o)
    return s
  `}function B1(e,t){return e===!0?"throw Error('fast-redact: primitives cannot be redacted')":t===!1?"return o":"return this.serialize(o)"}});var Pl=E((bJ,Jy)=>{"use strict";Jy.exports={groupRedact:J1,groupRestore:G1,nestedRedact:W1,nestedRestore:K1};function G1({keys:e,values:t,target:r}){if(r==null||typeof r=="string")return;let n=e.length;for(var s=0;s<n;s++){let i=e[s];r[i]=t[s]}}function J1(e,t,r,n,s){let i=By(e,t);if(i==null||typeof i=="string")return{keys:null,values:null,target:i,flat:!0};let o=Object.keys(i),a=o.length,u=t.length,c=s?[...t]:void 0,l=new Array(a);for(var d=0;d<a;d++){let p=o[d];l[d]=i[p],s?(c[u]=p,i[p]=r(i[p],c)):n?i[p]=r(i[p]):i[p]=r}return{keys:o,values:l,target:i,flat:!0}}function K1(e){for(let t=0;t<e.length;t++){let{target:r,path:n,value:s}=e[t],i=r;for(let o=n.length-1;o>0;o--)i=i[n[o]];i[n[0]]=s}}function W1(e,t,r,n,s,i,o){let a=By(t,r);if(a==null)return;let u=Object.keys(a),c=u.length;for(var l=0;l<c;l++){let d=u[l];Y1(e,a,d,r,n,s,i,o)}return e}function $l(e,t){return e!=null?"hasOwn"in Object?Object.hasOwn(e,t):Object.prototype.hasOwnProperty.call(e,t):!1}function Y1(e,t,r,n,s,i,o,a){let u=s.length,c=u-1,l=r;var d=-1,p,f,h,y=null,_=null,S,v,g=!1,m=0,w=0,T=X1();if(h=p=t[r],typeof p=="object"){for(;p!=null&&++d<u&&(w+=1,r=s[d],y=h,!(r!=="*"&&!_&&!(typeof p=="object"&&r in p)));)if(!(r==="*"&&(_==="*"&&(g=!0),_=r,d!==c))){if(_){let O=Object.keys(p);for(var b=0;b<O.length;b++){let R=O[b];if(v=p[R],S=r==="*",g)T=ar(T,R,w),m=d,h=Gy(v,m-1,r,n,s,i,o,a,l,p,f,h,S,R,d,c,T,e,t[l],w+1);else if(S||typeof v=="object"&&v!==null&&r in v){if(S?h=v:h=v[r],f=d!==c?h:o?a?i(h,[...n,l,...s]):i(h):i,S){let P=Ls(ar(T,R,w),h,t[l]);e.push(P),p[R]=f}else if(v[r]!==f)if(f===void 0&&i!==void 0||$l(v,r)&&f===h)T=ar(T,R,w);else{T=ar(T,R,w);let P=Ls(ar(T,r,w+1),h,t[l]);e.push(P),v[r]=f}}}_=null}else{if(h=p[r],T=ar(T,r,w),f=d!==c?h:o?a?i(h,[...n,l,...s]):i(h):i,!($l(p,r)&&f===h||f===void 0&&i!==void 0)){let O=Ls(T,h,t[l]);e.push(O),p[r]=f}p=p[r]}if(typeof p!="object")break}}}function By(e,t){for(var r=-1,n=t.length,s=e;s!=null&&++r<n;)s=s[t[r]];return s}function Gy(e,t,r,n,s,i,o,a,u,c,l,d,p,f,h,y,_,S,v,g){if(t===0&&(p||typeof e=="object"&&e!==null&&r in e)){if(p?d=e:d=e[r],l=h!==y?d:o?a?i(d,[...n,u,...s]):i(d):i,p){let m=Ls(_,d,v);S.push(m),c[f]=l}else if(e[r]!==l){if(!(l===void 0&&i!==void 0||$l(e,r)&&l===d)){let m=Ls(ar(_,r,g+1),d,v);S.push(m),e[r]=l}}}for(let m in e)typeof e[m]=="object"&&(_=ar(_,m,g),Gy(e[m],t-1,r,n,s,i,o,a,u,c,l,d,p,f,h,y,_,S,v,g+1))}function X1(){return{parent:null,key:null,children:[],depth:0}}function ar(e,t,r){if(e.depth===r)return ar(e.parent,t,r);var n={parent:e,key:t,depth:r,children:[]};return e.children.push(n),n}function Ls(e,t,r){let n=e,s=[];do s.push(n.key),n=n.parent;while(n.parent!=null);return{path:s,value:t,target:r}}});var Wy=E((RJ,Ky)=>{"use strict";var{groupRestore:Q1,nestedRestore:Z1}=Pl();Ky.exports=eN;function eN(){return function(){if(this.restore){this.restore.state.secret=this.secret;return}let{secret:t,wcLen:r}=this,n=Object.keys(t),s=tN(t,n),i=r>0,o=i?{secret:t,groupRestore:Q1,nestedRestore:Z1}:{secret:t};this.restore=Function("o",rN(s,n,i)).bind(o),this.restore.state=o}}function tN(e,t){return t.map(r=>{let{circle:n,escPath:s,leadingBracket:i}=e[r],a=n?`o.${n} = secret[${s}].val`:`o${i?"":"."}${r} = secret[${s}].val`,u=`secret[${s}].val = undefined`;return`
      if (secret[${s}].val !== undefined) {
        try { ${a} } catch (e) {}
        ${u}
      }
    `}).join("")}function rN(e,t,r){return`
    const secret = this.secret
    ${r===!0?`
    const keys = Object.keys(secret)
    const len = keys.length
    for (var i = len - 1; i >= ${t.length}; i--) {
      const k = keys[i]
      const o = secret[k]
      if (o) {
        if (o.flat === true) this.groupRestore(o)
        else this.nestedRestore(o)
        secret[k] = null
      }
    }
  `:""}
    ${e}
    return o
  `}});var Xy=E((wJ,Yy)=>{"use strict";Yy.exports=nN;function nN(e){let{secret:t,censor:r,compileRestore:n,serialize:s,groupRedact:i,nestedRedact:o,wildcards:a,wcLen:u}=e,c=[{secret:t,censor:r,compileRestore:n}];return s!==!1&&c.push({serialize:s}),u>0&&c.push({groupRedact:i,nestedRedact:o,wildcards:a,wcLen:u}),Object.assign(...c)}});var eg=E((TJ,Zy)=>{"use strict";var Qy=Fy(),sN=Vy(),iN=Uy(),oN=Wy(),{groupRedact:aN,nestedRedact:uN}=Pl(),lN=Xy(),cN=Io(),fN=Qy(),Il=e=>e;Il.restore=Il;var dN="[REDACTED]";Nl.rx=cN;Nl.validator=Qy;Zy.exports=Nl;function Nl(e={}){let t=Array.from(new Set(e.paths||[])),r="serialize"in e&&(e.serialize===!1||typeof e.serialize=="function")?e.serialize:JSON.stringify,n=e.remove;if(n===!0&&r!==JSON.stringify)throw Error("fast-redact \u2013 remove option may only be set when serializer is JSON.stringify");let s=n===!0?void 0:"censor"in e?e.censor:dN,i=typeof s=="function",o=i&&s.length>1;if(t.length===0)return r||Il;fN({paths:t,serialize:r,censor:s});let{wildcards:a,wcLen:u,secret:c}=sN({paths:t,censor:s}),l=oN(),d="strict"in e?e.strict:!0;return iN({secret:c,wcLen:u,serialize:r,strict:d,isCensorFct:i,censorFctTakesPath:o},lN({secret:c,censor:s,compileRestore:l,serialize:r,groupRedact:aN,nestedRedact:uN,wildcards:a,wcLen:u}))}});var Ln=E((OJ,tg)=>{"use strict";var hN=Symbol("pino.setLevel"),pN=Symbol("pino.getLevel"),mN=Symbol("pino.levelVal"),yN=Symbol("pino.levelComp"),gN=Symbol("pino.useLevelLabels"),_N=Symbol("pino.useOnlyCustomLevels"),SN=Symbol("pino.mixin"),EN=Symbol("pino.lsCache"),vN=Symbol("pino.chindings"),bN=Symbol("pino.asJson"),RN=Symbol("pino.write"),wN=Symbol("pino.redactFmt"),TN=Symbol("pino.time"),ON=Symbol("pino.timeSliceIndex"),$N=Symbol("pino.stream"),PN=Symbol("pino.stringify"),IN=Symbol("pino.stringifySafe"),NN=Symbol("pino.stringifiers"),AN=Symbol("pino.end"),CN=Symbol("pino.formatOpts"),kN=Symbol("pino.messageKey"),qN=Symbol("pino.errorKey"),LN=Symbol("pino.nestedKey"),jN=Symbol("pino.nestedKeyStr"),DN=Symbol("pino.mixinMergeStrategy"),xN=Symbol("pino.msgPrefix"),FN=Symbol("pino.wildcardFirst"),MN=Symbol.for("pino.serializers"),HN=Symbol.for("pino.formatters"),VN=Symbol.for("pino.hooks"),zN=Symbol.for("pino.metadata");tg.exports={setLevelSym:hN,getLevelSym:pN,levelValSym:mN,levelCompSym:yN,useLevelLabelsSym:gN,mixinSym:SN,lsCacheSym:EN,chindingsSym:vN,asJsonSym:bN,writeSym:RN,serializersSym:MN,redactFmtSym:wN,timeSym:TN,timeSliceIndexSym:ON,streamSym:$N,stringifySym:PN,stringifySafeSym:IN,stringifiersSym:NN,endSym:AN,formatOptsSym:CN,messageKeySym:kN,errorKeySym:qN,nestedKeySym:LN,wildcardFirstSym:FN,needsMetadataGsym:zN,useOnlyCustomLevelsSym:_N,formattersSym:HN,hooksSym:VN,nestedKeyStrSym:jN,mixinMergeStrategySym:DN,msgPrefixSym:xN}});var kl=E(($J,ig)=>{"use strict";var Cl=eg(),{redactFmtSym:UN,wildcardFirstSym:No}=Ln(),{rx:Al,validator:BN}=Cl,rg=BN({ERR_PATHS_MUST_BE_STRINGS:()=>"pino \u2013 redacted paths must be strings",ERR_INVALID_PATH:e=>`pino \u2013 redact paths array contains an invalid path (${e})`}),ng="[Redacted]",sg=!1;function GN(e,t){let{paths:r,censor:n}=JN(e),s=r.reduce((a,u)=>{Al.lastIndex=0;let c=Al.exec(u),l=Al.exec(u),d=c[1]!==void 0?c[1].replace(/^(?:"|'|`)(.*)(?:"|'|`)$/,"$1"):c[0];if(d==="*"&&(d=No),l===null)return a[d]=null,a;if(a[d]===null)return a;let{index:p}=l,f=`${u.substr(p,u.length-1)}`;return a[d]=a[d]||[],d!==No&&a[d].length===0&&a[d].push(...a[No]||[]),d===No&&Object.keys(a).forEach(function(h){a[h]&&a[h].push(f)}),a[d].push(f),a},{}),i={[UN]:Cl({paths:r,censor:n,serialize:t,strict:sg})},o=(...a)=>t(typeof n=="function"?n(...a):n);return[...Object.keys(s),...Object.getOwnPropertySymbols(s)].reduce((a,u)=>{if(s[u]===null)a[u]=c=>o(c,[u]);else{let c=typeof n=="function"?(l,d)=>n(l,[u,...d]):n;a[u]=Cl({paths:s[u],censor:c,serialize:t,strict:sg})}return a},i)}function JN(e){if(Array.isArray(e))return e={paths:e,censor:ng},rg(e),e;let{paths:t,censor:r=ng,remove:n}=e;if(Array.isArray(t)===!1)throw Error("pino \u2013 redact must contain an array of strings");return n===!0&&(r=void 0),rg({paths:t,censor:r}),{paths:t,censor:r}}ig.exports=GN});var ag=E((PJ,og)=>{"use strict";var KN=()=>"",WN=()=>`,"time":${Date.now()}`,YN=()=>`,"time":${Math.round(Date.now()/1e3)}`,XN=()=>`,"time":"${new Date(Date.now()).toISOString()}"`;og.exports={nullTime:KN,epochTime:WN,unixTime:YN,isoTime:XN}});var lg=E((IJ,ug)=>{"use strict";function QN(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}ug.exports=ZN;function ZN(e,t,r){var n=r&&r.stringify||QN,s=1;if(typeof e=="object"&&e!==null){var i=t.length+s;if(i===1)return e;var o=new Array(i);o[0]=n(e);for(var a=1;a<i;a++)o[a]=n(t[a]);return o.join(" ")}if(typeof e!="string")return e;var u=t.length;if(u===0)return e;for(var c="",l=1-s,d=-1,p=e&&e.length||0,f=0;f<p;){if(e.charCodeAt(f)===37&&f+1<p){switch(d=d>-1?d:0,e.charCodeAt(f+1)){case 100:case 102:if(l>=u||t[l]==null)break;d<f&&(c+=e.slice(d,f)),c+=Number(t[l]),d=f+2,f++;break;case 105:if(l>=u||t[l]==null)break;d<f&&(c+=e.slice(d,f)),c+=Math.floor(Number(t[l])),d=f+2,f++;break;case 79:case 111:case 106:if(l>=u||t[l]===void 0)break;d<f&&(c+=e.slice(d,f));var h=typeof t[l];if(h==="string"){c+="'"+t[l]+"'",d=f+2,f++;break}if(h==="function"){c+=t[l].name||"<anonymous>",d=f+2,f++;break}c+=n(t[l]),d=f+2,f++;break;case 115:if(l>=u)break;d<f&&(c+=e.slice(d,f)),c+=String(t[l]),d=f+2,f++;break;case 37:d<f&&(c+=e.slice(d,f)),c+="%",d=f+2,f++,l--;break}++l}++f}return d===-1?e:(d<p&&(c+=e.slice(d)),c)}});var Ll=E((NJ,ql)=>{"use strict";if(typeof SharedArrayBuffer<"u"&&typeof Atomics<"u"){let t=function(r){if((r>0&&r<1/0)===!1)throw typeof r!="number"&&typeof r!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");Atomics.wait(e,0,0,Number(r))},e=new Int32Array(new SharedArrayBuffer(4));ql.exports=t}else{let e=function(t){if((t>0&&t<1/0)===!1)throw typeof t!="number"&&typeof t!="bigint"?TypeError("sleep: ms must be a number"):RangeError("sleep: ms must be a number that is greater than 0 but less than Infinity");let n=Date.now()+Number(t);for(;n>Date.now(););};ql.exports=e}});var gg=E((AJ,yg)=>{"use strict";var Ie=require("fs"),eA=require("events"),tA=require("util").inherits,cg=require("path"),Dl=Ll(),rA=require("assert"),Ao=100,Co=Buffer.allocUnsafe(0),nA=16*1024,fg="buffer",dg="utf8",[sA,iA]=(process.versions.node||"0.0").split(".").map(Number),oA=sA>=22&&iA>=7;function hg(e,t){t._opening=!0,t._writing=!0,t._asyncDrainScheduled=!1;function r(i,o){if(i){t._reopening=!1,t._writing=!1,t._opening=!1,t.sync?process.nextTick(()=>{t.listenerCount("error")>0&&t.emit("error",i)}):t.emit("error",i);return}let a=t._reopening;t.fd=o,t.file=e,t._reopening=!1,t._opening=!1,t._writing=!1,t.sync?process.nextTick(()=>t.emit("ready")):t.emit("ready"),!t.destroyed&&(!t._writing&&t._len>t.minLength||t._flushPending?t._actualWrite():a&&process.nextTick(()=>t.emit("drain")))}let n=t.append?"a":"w",s=t.mode;if(t.sync)try{t.mkdir&&Ie.mkdirSync(cg.dirname(e),{recursive:!0});let i=Ie.openSync(e,n,s);r(null,i)}catch(i){throw r(i),i}else t.mkdir?Ie.mkdir(cg.dirname(e),{recursive:!0},i=>{if(i)return r(i);Ie.open(e,n,s,r)}):Ie.open(e,n,s,r)}function Ct(e){if(!(this instanceof Ct))return new Ct(e);let{fd:t,dest:r,minLength:n,maxLength:s,maxWrite:i,periodicFlush:o,sync:a,append:u=!0,mkdir:c,retryEAGAIN:l,fsync:d,contentMode:p,mode:f}=e||{};t=t||r,this._len=0,this.fd=-1,this._bufs=[],this._lens=[],this._writing=!1,this._ending=!1,this._reopening=!1,this._asyncDrainScheduled=!1,this._flushPending=!1,this._hwm=Math.max(n||0,16387),this.file=null,this.destroyed=!1,this.minLength=n||0,this.maxLength=s||0,this.maxWrite=i||nA,this._periodicFlush=o||0,this._periodicFlushTimer=void 0,this.sync=a||!1,this.writable=!0,this._fsync=d||!1,this.append=u||!1,this.mode=f,this.retryEAGAIN=l||(()=>!0),this.mkdir=c||!1;let h,y;if(p===fg)this._writingBuf=Co,this.write=lA,this.flush=fA,this.flushSync=hA,this._actualWrite=mA,h=()=>Ie.writeSync(this.fd,this._writingBuf),y=()=>Ie.write(this.fd,this._writingBuf,this.release);else if(p===void 0||p===dg)this._writingBuf="",this.write=uA,this.flush=cA,this.flushSync=dA,this._actualWrite=pA,h=()=>Ie.writeSync(this.fd,this._writingBuf,"utf8"),y=()=>Ie.write(this.fd,this._writingBuf,"utf8",this.release);else throw new Error(`SonicBoom supports "${dg}" and "${fg}", but passed ${p}`);if(typeof t=="number")this.fd=t,process.nextTick(()=>this.emit("ready"));else if(typeof t=="string")hg(t,this);else throw new Error("SonicBoom supports only file descriptors and files");if(this.minLength>=this.maxWrite)throw new Error(`minLength should be smaller than maxWrite (${this.maxWrite})`);this.release=(_,S)=>{if(_){if((_.code==="EAGAIN"||_.code==="EBUSY")&&this.retryEAGAIN(_,this._writingBuf.length,this._len-this._writingBuf.length))if(this.sync)try{Dl(Ao),this.release(void 0,0)}catch(m){this.release(m)}else setTimeout(y,Ao);else this._writing=!1,this.emit("error",_);return}this.emit("write",S);let v=jl(this._writingBuf,this._len,S);if(this._len=v.len,this._writingBuf=v.writingBuf,this._writingBuf.length){if(!this.sync){y();return}try{do{let m=h(),w=jl(this._writingBuf,this._len,m);this._len=w.len,this._writingBuf=w.writingBuf}while(this._writingBuf.length)}catch(m){this.release(m);return}}this._fsync&&Ie.fsyncSync(this.fd);let g=this._len;this._reopening?(this._writing=!1,this._reopening=!1,this.reopen()):g>this.minLength?this._actualWrite():this._ending?g>0?this._actualWrite():(this._writing=!1,ko(this)):(this._writing=!1,this.sync?this._asyncDrainScheduled||(this._asyncDrainScheduled=!0,process.nextTick(aA,this)):this.emit("drain"))},this.on("newListener",function(_){_==="drain"&&(this._asyncDrainScheduled=!1)}),this._periodicFlush!==0&&(this._periodicFlushTimer=setInterval(()=>this.flush(null),this._periodicFlush),this._periodicFlushTimer.unref())}function jl(e,t,r){return typeof e=="string"&&Buffer.byteLength(e)!==r&&(r=Buffer.from(e).subarray(0,r).toString().length),t=Math.max(t-r,0),e=e.slice(r),{writingBuf:e,len:t}}function aA(e){e.listenerCount("drain")>0&&(e._asyncDrainScheduled=!1,e.emit("drain"))}tA(Ct,eA);function pg(e,t){return e.length===0?Co:e.length===1?e[0]:Buffer.concat(e,t)}function uA(e){if(this.destroyed)throw new Error("SonicBoom destroyed");let t=this._len+e.length,r=this._bufs;return this.maxLength&&t>this.maxLength?(this.emit("drop",e),this._len<this._hwm):(r.length===0||r[r.length-1].length+e.length>this.maxWrite?r.push(""+e):r[r.length-1]+=e,this._len=t,!this._writing&&this._len>=this.minLength&&this._actualWrite(),this._len<this._hwm)}function lA(e){if(this.destroyed)throw new Error("SonicBoom destroyed");let t=this._len+e.length,r=this._bufs,n=this._lens;return this.maxLength&&t>this.maxLength?(this.emit("drop",e),this._len<this._hwm):(r.length===0||n[n.length-1]+e.length>this.maxWrite?(r.push([e]),n.push(e.length)):(r[r.length-1].push(e),n[n.length-1]+=e.length),this._len=t,!this._writing&&this._len>=this.minLength&&this._actualWrite(),this._len<this._hwm)}function mg(e){this._flushPending=!0;let t=()=>{if(this._fsync)this._flushPending=!1,e();else try{Ie.fsync(this.fd,n=>{this._flushPending=!1,e(n)})}catch(n){e(n)}this.off("error",r)},r=n=>{this._flushPending=!1,e(n),this.off("drain",t)};this.once("drain",t),this.once("error",r)}function cA(e){if(e!=null&&typeof e!="function")throw new Error("flush cb must be a function");if(this.destroyed){let t=new Error("SonicBoom destroyed");if(e){e(t);return}throw t}if(this.minLength<=0){e?.();return}e&&mg.call(this,e),!this._writing&&(this._bufs.length===0&&this._bufs.push(""),this._actualWrite())}function fA(e){if(e!=null&&typeof e!="function")throw new Error("flush cb must be a function");if(this.destroyed){let t=new Error("SonicBoom destroyed");if(e){e(t);return}throw t}if(this.minLength<=0){e?.();return}e&&mg.call(this,e),!this._writing&&(this._bufs.length===0&&(this._bufs.push([]),this._lens.push(0)),this._actualWrite())}Ct.prototype.reopen=function(e){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.reopen(e)});return}if(this._ending)return;if(!this.file)throw new Error("Unable to reopen a file descriptor, you must pass a file to SonicBoom");if(e&&(this.file=e),this._reopening=!0,this._writing)return;let t=this.fd;this.once("ready",()=>{t!==this.fd&&Ie.close(t,r=>{if(r)return this.emit("error",r)})}),hg(this.file,this)};Ct.prototype.end=function(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this._opening){this.once("ready",()=>{this.end()});return}this._ending||(this._ending=!0,!this._writing&&(this._len>0&&this.fd>=0?this._actualWrite():ko(this)))};function dA(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift(this._writingBuf),this._writingBuf="");let e="";for(;this._bufs.length||e;){e.length<=0&&(e=this._bufs[0]);try{let t=Ie.writeSync(this.fd,e,"utf8"),r=jl(e,this._len,t);e=r.writingBuf,this._len=r.len,e.length<=0&&this._bufs.shift()}catch(t){if((t.code==="EAGAIN"||t.code==="EBUSY")&&!this.retryEAGAIN(t,e.length,this._len-e.length))throw t;Dl(Ao)}}try{Ie.fsyncSync(this.fd)}catch{}}function hA(){if(this.destroyed)throw new Error("SonicBoom destroyed");if(this.fd<0)throw new Error("sonic boom is not ready yet");!this._writing&&this._writingBuf.length>0&&(this._bufs.unshift([this._writingBuf]),this._writingBuf=Co);let e=Co;for(;this._bufs.length||e.length;){e.length<=0&&(e=pg(this._bufs[0],this._lens[0]));try{let t=Ie.writeSync(this.fd,e);e=e.subarray(t),this._len=Math.max(this._len-t,0),e.length<=0&&(this._bufs.shift(),this._lens.shift())}catch(t){if((t.code==="EAGAIN"||t.code==="EBUSY")&&!this.retryEAGAIN(t,e.length,this._len-e.length))throw t;Dl(Ao)}}}Ct.prototype.destroy=function(){this.destroyed||ko(this)};function pA(){let e=this.release;if(this._writing=!0,this._writingBuf=this._writingBuf||this._bufs.shift()||"",this.sync)try{let t=Ie.writeSync(this.fd,this._writingBuf,"utf8");e(null,t)}catch(t){e(t)}else Ie.write(this.fd,this._writingBuf,"utf8",e)}function mA(){let e=this.release;if(this._writing=!0,this._writingBuf=this._writingBuf.length?this._writingBuf:pg(this._bufs.shift(),this._lens.shift()),this.sync)try{let t=Ie.writeSync(this.fd,this._writingBuf);e(null,t)}catch(t){e(t)}else oA&&(this._writingBuf=Buffer.from(this._writingBuf)),Ie.write(this.fd,this._writingBuf,e)}function ko(e){if(e.fd===-1){e.once("ready",ko.bind(null,e));return}e._periodicFlushTimer!==void 0&&clearInterval(e._periodicFlushTimer),e.destroyed=!0,e._bufs=[],e._lens=[],rA(typeof e.fd=="number",`sonic.fd must be a number, got ${typeof e.fd}`);try{Ie.fsync(e.fd,t)}catch{}function t(){e.fd!==1&&e.fd!==2?Ie.close(e.fd,r):r()}function r(n){if(n){e.emit("error",n);return}e._ending&&!e._writing&&e.emit("finish"),e.emit("close")}}Ct.SonicBoom=Ct;Ct.default=Ct;yg.exports=Ct});var xl=E((CJ,bg)=>{"use strict";var kt={exit:[],beforeExit:[]},_g={exit:_A,beforeExit:SA},jn;function yA(){jn===void 0&&(jn=new FinalizationRegistry(EA))}function gA(e){kt[e].length>0||process.on(e,_g[e])}function Sg(e){kt[e].length>0||(process.removeListener(e,_g[e]),kt.exit.length===0&&kt.beforeExit.length===0&&(jn=void 0))}function _A(){Eg("exit")}function SA(){Eg("beforeExit")}function Eg(e){for(let t of kt[e]){let r=t.deref(),n=t.fn;r!==void 0&&n(r,e)}kt[e]=[]}function EA(e){for(let t of["exit","beforeExit"]){let r=kt[t].indexOf(e);kt[t].splice(r,r+1),Sg(t)}}function vg(e,t,r){if(t===void 0)throw new Error("the object can't be undefined");gA(e);let n=new WeakRef(t);n.fn=r,yA(),jn.register(t,n),kt[e].push(n)}function vA(e,t){vg("exit",e,t)}function bA(e,t){vg("beforeExit",e,t)}function RA(e){if(jn!==void 0){jn.unregister(e);for(let t of["exit","beforeExit"])kt[t]=kt[t].filter(r=>{let n=r.deref();return n&&n!==e}),Sg(t)}}bg.exports={register:vA,registerBeforeExit:bA,unregister:RA}});var Rg=E((kJ,wA)=>{wA.exports={name:"thread-stream",version:"3.1.0",description:"A streaming way to send data to a Node.js Worker Thread",main:"index.js",types:"index.d.ts",dependencies:{"real-require":"^0.2.0"},devDependencies:{"@types/node":"^20.1.0","@types/tap":"^15.0.0","@yao-pkg/pkg":"^5.11.5",desm:"^1.3.0",fastbench:"^1.0.1",husky:"^9.0.6","pino-elasticsearch":"^8.0.0","sonic-boom":"^4.0.1",standard:"^17.0.0",tap:"^16.2.0","ts-node":"^10.8.0",typescript:"^5.3.2","why-is-node-running":"^2.2.2"},scripts:{build:"tsc --noEmit",test:'standard && npm run build && npm run transpile && tap "test/**/*.test.*js" && tap --ts test/*.test.*ts',"test:ci":"standard && npm run transpile && npm run test:ci:js && npm run test:ci:ts","test:ci:js":'tap --no-check-coverage --timeout=120 --coverage-report=lcovonly "test/**/*.test.*js"',"test:ci:ts":'tap --ts --no-check-coverage --coverage-report=lcovonly "test/**/*.test.*ts"',"test:yarn":'npm run transpile && tap "test/**/*.test.js" --no-check-coverage',transpile:"sh ./test/ts/transpile.sh",prepare:"husky install"},standard:{ignore:["test/ts/**/*","test/syntax-error.mjs"]},repository:{type:"git",url:"git+https://github.com/mcollina/thread-stream.git"},keywords:["worker","thread","threads","stream"],author:"Matteo Collina <hello@matteocollina.com>",license:"MIT",bugs:{url:"https://github.com/mcollina/thread-stream/issues"},homepage:"https://github.com/mcollina/thread-stream#readme"}});var Tg=E((qJ,wg)=>{"use strict";function TA(e,t,r,n,s){let i=Date.now()+n,o=Atomics.load(e,t);if(o===r){s(null,"ok");return}let a=o,u=c=>{Date.now()>i?s(null,"timed-out"):setTimeout(()=>{a=o,o=Atomics.load(e,t),o===a?u(c>=1e3?1e3:c*2):o===r?s(null,"ok"):s(null,"not-equal")},c)};u(1)}function OA(e,t,r,n,s){let i=Date.now()+n,o=Atomics.load(e,t);if(o!==r){s(null,"ok");return}let a=u=>{Date.now()>i?s(null,"timed-out"):setTimeout(()=>{o=Atomics.load(e,t),o!==r?s(null,"ok"):a(u>=1e3?1e3:u*2)},u)};a(1)}wg.exports={wait:TA,waitDiff:OA}});var $g=E((LJ,Og)=>{"use strict";Og.exports={WRITE_INDEX:4,READ_INDEX:8}});var Cg=E((jJ,Ag)=>{"use strict";var{version:$A}=Rg(),{EventEmitter:PA}=require("events"),{Worker:IA}=require("worker_threads"),{join:NA}=require("path"),{pathToFileURL:AA}=require("url"),{wait:CA}=Tg(),{WRITE_INDEX:ut,READ_INDEX:zt}=$g(),kA=require("buffer"),qA=require("assert"),A=Symbol("kImpl"),LA=kA.constants.MAX_STRING_LENGTH,js=class{constructor(t){this._value=t}deref(){return this._value}},Lo=class{register(){}unregister(){}},jA=process.env.NODE_V8_COVERAGE?Lo:global.FinalizationRegistry||Lo,DA=process.env.NODE_V8_COVERAGE?js:global.WeakRef||js,Pg=new jA(e=>{e.exited||e.terminate()});function xA(e,t){let{filename:r,workerData:n}=t,i=("__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{})["thread-stream-worker"]||NA(__dirname,"lib","worker.js"),o=new IA(i,{...t.workerOpts,trackUnmanagedFds:!1,workerData:{filename:r.indexOf("file://")===0?r:AA(r).href,dataBuf:e[A].dataBuf,stateBuf:e[A].stateBuf,workerData:{$context:{threadStreamVersion:$A},...n}}});return o.stream=new js(e),o.on("message",FA),o.on("exit",Ng),Pg.register(e,o),o}function Ig(e){qA(!e[A].sync),e[A].needDrain&&(e[A].needDrain=!1,e.emit("drain"))}function qo(e){let t=Atomics.load(e[A].state,ut),r=e[A].data.length-t;if(r>0){if(e[A].buf.length===0){e[A].flushing=!1,e[A].ending?zl(e):e[A].needDrain&&process.nextTick(Ig,e);return}let n=e[A].buf.slice(0,r),s=Buffer.byteLength(n);s<=r?(e[A].buf=e[A].buf.slice(r),jo(e,n,qo.bind(null,e))):e.flush(()=>{if(!e.destroyed){for(Atomics.store(e[A].state,zt,0),Atomics.store(e[A].state,ut,0);s>e[A].data.length;)r=r/2,n=e[A].buf.slice(0,r),s=Buffer.byteLength(n);e[A].buf=e[A].buf.slice(r),jo(e,n,qo.bind(null,e))}})}else if(r===0){if(t===0&&e[A].buf.length===0)return;e.flush(()=>{Atomics.store(e[A].state,zt,0),Atomics.store(e[A].state,ut,0),qo(e)})}else Ut(e,new Error("overwritten"))}function FA(e){let t=this.stream.deref();if(t===void 0){this.exited=!0,this.terminate();return}switch(e.code){case"READY":this.stream=new DA(t),t.flush(()=>{t[A].ready=!0,t.emit("ready")});break;case"ERROR":Ut(t,e.err);break;case"EVENT":Array.isArray(e.args)?t.emit(e.name,...e.args):t.emit(e.name,e.args);break;case"WARNING":process.emitWarning(e.err);break;default:Ut(t,new Error("this should not happen: "+e.code))}}function Ng(e){let t=this.stream.deref();t!==void 0&&(Pg.unregister(t),t.worker.exited=!0,t.worker.off("exit",Ng),Ut(t,e!==0?new Error("the worker thread exited"):null))}var Ml=class extends PA{constructor(t={}){if(super(),t.bufferSize<4)throw new Error("bufferSize must at least fit a 4-byte utf-8 char");this[A]={},this[A].stateBuf=new SharedArrayBuffer(128),this[A].state=new Int32Array(this[A].stateBuf),this[A].dataBuf=new SharedArrayBuffer(t.bufferSize||4*1024*1024),this[A].data=Buffer.from(this[A].dataBuf),this[A].sync=t.sync||!1,this[A].ending=!1,this[A].ended=!1,this[A].needDrain=!1,this[A].destroyed=!1,this[A].flushing=!1,this[A].ready=!1,this[A].finished=!1,this[A].errored=null,this[A].closed=!1,this[A].buf="",this.worker=xA(this,t),this.on("message",(r,n)=>{this.worker.postMessage(r,n)})}write(t){if(this[A].destroyed)return Hl(this,new Error("the worker has exited")),!1;if(this[A].ending)return Hl(this,new Error("the worker is ending")),!1;if(this[A].flushing&&this[A].buf.length+t.length>=LA)try{Fl(this),this[A].flushing=!0}catch(r){return Ut(this,r),!1}if(this[A].buf+=t,this[A].sync)try{return Fl(this),!0}catch(r){return Ut(this,r),!1}return this[A].flushing||(this[A].flushing=!0,setImmediate(qo,this)),this[A].needDrain=this[A].data.length-this[A].buf.length-Atomics.load(this[A].state,ut)<=0,!this[A].needDrain}end(){this[A].destroyed||(this[A].ending=!0,zl(this))}flush(t){if(this[A].destroyed){typeof t=="function"&&process.nextTick(t,new Error("the worker has exited"));return}let r=Atomics.load(this[A].state,ut);CA(this[A].state,zt,r,1/0,(n,s)=>{if(n){Ut(this,n),process.nextTick(t,n);return}if(s==="not-equal"){this.flush(t);return}process.nextTick(t)})}flushSync(){this[A].destroyed||(Fl(this),Vl(this))}unref(){this.worker.unref()}ref(){this.worker.ref()}get ready(){return this[A].ready}get destroyed(){return this[A].destroyed}get closed(){return this[A].closed}get writable(){return!this[A].destroyed&&!this[A].ending}get writableEnded(){return this[A].ending}get writableFinished(){return this[A].finished}get writableNeedDrain(){return this[A].needDrain}get writableObjectMode(){return!1}get writableErrored(){return this[A].errored}};function Hl(e,t){setImmediate(()=>{e.emit("error",t)})}function Ut(e,t){e[A].destroyed||(e[A].destroyed=!0,t&&(e[A].errored=t,Hl(e,t)),e.worker.exited?setImmediate(()=>{e[A].closed=!0,e.emit("close")}):e.worker.terminate().catch(()=>{}).then(()=>{e[A].closed=!0,e.emit("close")}))}function jo(e,t,r){let n=Atomics.load(e[A].state,ut),s=Buffer.byteLength(t);return e[A].data.write(t,n),Atomics.store(e[A].state,ut,n+s),Atomics.notify(e[A].state,ut),r(),!0}function zl(e){if(!(e[A].ended||!e[A].ending||e[A].flushing)){e[A].ended=!0;try{e.flushSync();let t=Atomics.load(e[A].state,zt);Atomics.store(e[A].state,ut,-1),Atomics.notify(e[A].state,ut);let r=0;for(;t!==-1;){if(Atomics.wait(e[A].state,zt,t,1e3),t=Atomics.load(e[A].state,zt),t===-2){Ut(e,new Error("end() failed"));return}if(++r===10){Ut(e,new Error("end() took too long (10s)"));return}}process.nextTick(()=>{e[A].finished=!0,e.emit("finish")})}catch(t){Ut(e,t)}}}function Fl(e){let t=()=>{e[A].ending?zl(e):e[A].needDrain&&process.nextTick(Ig,e)};for(e[A].flushing=!1;e[A].buf.length!==0;){let r=Atomics.load(e[A].state,ut),n=e[A].data.length-r;if(n===0){Vl(e),Atomics.store(e[A].state,zt,0),Atomics.store(e[A].state,ut,0);continue}else if(n<0)throw new Error("overwritten");let s=e[A].buf.slice(0,n),i=Buffer.byteLength(s);if(i<=n)e[A].buf=e[A].buf.slice(n),jo(e,s,t);else{for(Vl(e),Atomics.store(e[A].state,zt,0),Atomics.store(e[A].state,ut,0);i>e[A].buf.length;)n=n/2,s=e[A].buf.slice(0,n),i=Buffer.byteLength(s);e[A].buf=e[A].buf.slice(n),jo(e,s,t)}}}function Vl(e){if(e[A].flushing)throw new Error("unable to flush while flushing");let t=Atomics.load(e[A].state,ut),r=0;for(;;){let n=Atomics.load(e[A].state,zt);if(n===-2)throw Error("_flushSync failed");if(n!==t)Atomics.wait(e[A].state,zt,n,1e3);else break;if(++r===10)throw new Error("_flushSync took too long (10s)")}}Ag.exports=Ml});var Gl=E((DJ,kg)=>{"use strict";var{createRequire:MA}=require("module"),HA=Ol(),{join:Ul,isAbsolute:VA,sep:zA}=require("node:path"),UA=Ll(),Bl=xl(),BA=Cg();function GA(e){Bl.register(e,KA),Bl.registerBeforeExit(e,WA),e.on("close",function(){Bl.unregister(e)})}function JA(e,t,r,n){let s=new BA({filename:e,workerData:t,workerOpts:r,sync:n});s.on("ready",i),s.on("close",function(){process.removeListener("exit",o)}),process.on("exit",o);function i(){process.removeListener("exit",o),s.unref(),r.autoEnd!==!1&&GA(s)}function o(){s.closed||(s.flushSync(),UA(100),s.end())}return s}function KA(e){e.ref(),e.flushSync(),e.end(),e.once("close",function(){e.unref()})}function WA(e){e.flushSync()}function YA(e){let{pipeline:t,targets:r,levels:n,dedupe:s,worker:i={},caller:o=HA(),sync:a=!1}=e,u={...e.options},c=typeof o=="string"?[o]:o,l="__bundlerPathsOverrides"in globalThis?globalThis.__bundlerPathsOverrides:{},d=e.target;if(d&&r)throw new Error("only one of target or targets can be specified");return r?(d=l["pino-worker"]||Ul(__dirname,"worker.js"),u.targets=r.filter(f=>f.target).map(f=>({...f,target:p(f.target)})),u.pipelines=r.filter(f=>f.pipeline).map(f=>f.pipeline.map(h=>({...h,level:f.level,target:p(h.target)})))):t&&(d=l["pino-worker"]||Ul(__dirname,"worker.js"),u.pipelines=[t.map(f=>({...f,target:p(f.target)}))]),n&&(u.levels=n),s&&(u.dedupe=s),u.pinoWillSendConfig=!0,JA(p(d),u,i,a);function p(f){if(f=l[f]||f,VA(f)||f.indexOf("file://")===0)return f;if(f==="pino/file")return Ul(__dirname,"..","file.js");let h;for(let y of c)try{let _=y==="node:repl"?process.cwd()+zA:y;h=MA(_).resolve(f);break}catch{continue}if(!h)throw new Error(`unable to determine transport target for "${f}"`);return h}}kg.exports=YA});var Fo=E((xJ,Ug)=>{"use strict";var qg=lg(),{mapHttpRequest:XA,mapHttpResponse:QA}=Tl(),Kl=gg(),Lg=xl(),{lsCacheSym:ZA,chindingsSym:xg,writeSym:jg,serializersSym:Fg,formatOptsSym:Dg,endSym:eC,stringifiersSym:Mg,stringifySym:Hg,stringifySafeSym:Wl,wildcardFirstSym:Vg,nestedKeySym:tC,formattersSym:zg,messageKeySym:rC,errorKeySym:nC,nestedKeyStrSym:sC,msgPrefixSym:Do}=Ln(),{isMainThread:iC}=require("worker_threads"),oC=Gl();function Dn(){}function aC(e,t){if(!t)return r;return function(...s){t.call(this,s,r,e)};function r(n,...s){if(typeof n=="object"){let i=n;n!==null&&(n.method&&n.headers&&n.socket?n=XA(n):typeof n.setHeader=="function"&&(n=QA(n)));let o;i===null&&s.length===0?o=[null]:(i=s.shift(),o=s),typeof this[Do]=="string"&&i!==void 0&&i!==null&&(i=this[Do]+i),this[jg](n,qg(i,o,this[Dg]),e)}else{let i=n===void 0?s.shift():n;typeof this[Do]=="string"&&i!==void 0&&i!==null&&(i=this[Do]+i),this[jg](null,qg(i,s,this[Dg]),e)}}}function Jl(e){let t="",r=0,n=!1,s=255,i=e.length;if(i>100)return JSON.stringify(e);for(var o=0;o<i&&s>=32;o++)s=e.charCodeAt(o),(s===34||s===92)&&(t+=e.slice(r,o)+"\\",r=o,n=!0);return n?t+=e.slice(r):t=e,s<32?JSON.stringify(e):'"'+t+'"'}function uC(e,t,r,n){let s=this[Hg],i=this[Wl],o=this[Mg],a=this[eC],u=this[xg],c=this[Fg],l=this[zg],d=this[rC],p=this[nC],f=this[ZA][r]+n;f=f+u;let h;l.log&&(e=l.log(e));let y=o[Vg],_="";for(let v in e)if(h=e[v],Object.prototype.hasOwnProperty.call(e,v)&&h!==void 0){c[v]?h=c[v](h):v===p&&c.err&&(h=c.err(h));let g=o[v]||y;switch(typeof h){case"undefined":case"function":continue;case"number":Number.isFinite(h)===!1&&(h=null);case"boolean":g&&(h=g(h));break;case"string":h=(g||Jl)(h);break;default:h=(g||s)(h,i)}if(h===void 0)continue;let m=Jl(v);_+=","+m+":"+h}let S="";if(t!==void 0){h=c[d]?c[d](t):t;let v=o[d]||y;switch(typeof h){case"function":break;case"number":Number.isFinite(h)===!1&&(h=null);case"boolean":v&&(h=v(h)),S=',"'+d+'":'+h;break;case"string":h=(v||Jl)(h),S=',"'+d+'":'+h;break;default:h=(v||s)(h,i),S=',"'+d+'":'+h}}return this[tC]&&_?f+this[sC]+_.slice(1)+"}"+S+a:f+_+S+a}function lC(e,t){let r,n=e[xg],s=e[Hg],i=e[Wl],o=e[Mg],a=o[Vg],u=e[Fg],c=e[zg].bindings;t=c(t);for(let l in t)if(r=t[l],(l!=="level"&&l!=="serializers"&&l!=="formatters"&&l!=="customLevels"&&t.hasOwnProperty(l)&&r!==void 0)===!0){if(r=u[l]?u[l](r):r,r=(o[l]||a||s)(r,i),r===void 0)continue;n+=',"'+l+'":'+r}return n}function cC(e){return e.write!==e.constructor.prototype.write}function xo(e){let t=new Kl(e);return t.on("error",r),!e.sync&&iC&&(Lg.register(t,fC),t.on("close",function(){Lg.unregister(t)})),t;function r(n){if(n.code==="EPIPE"){t.write=Dn,t.end=Dn,t.flushSync=Dn,t.destroy=Dn;return}t.removeListener("error",r),t.emit("error",n)}}function fC(e,t){e.destroyed||(t==="beforeExit"?(e.flush(),e.on("drain",function(){e.end()})):e.flushSync())}function dC(e){return function(r,n,s={},i){if(typeof s=="string")i=xo({dest:s}),s={};else if(typeof i=="string"){if(s&&s.transport)throw Error("only one of option.transport or stream can be specified");i=xo({dest:i})}else if(s instanceof Kl||s.writable||s._writableState)i=s,s={};else if(s.transport){if(s.transport instanceof Kl||s.transport.writable||s.transport._writableState)throw Error("option.transport do not allow stream, please pass to option directly. e.g. pino(transport)");if(s.transport.targets&&s.transport.targets.length&&s.formatters&&typeof s.formatters.level=="function")throw Error("option.transport.targets do not allow custom level formatters");let u;s.customLevels&&(u=s.useOnlyCustomLevels?s.customLevels:Object.assign({},s.levels,s.customLevels)),i=oC({caller:n,...s.transport,levels:u})}if(s=Object.assign({},e,s),s.serializers=Object.assign({},e.serializers,s.serializers),s.formatters=Object.assign({},e.formatters,s.formatters),s.prettyPrint)throw new Error("prettyPrint option is no longer supported, see the pino-pretty package (https://github.com/pinojs/pino-pretty)");let{enabled:o,onChild:a}=s;return o===!1&&(s.level="silent"),a||(s.onChild=Dn),i||(cC(process.stdout)?i=process.stdout:i=xo({fd:process.stdout.fd||1})),{opts:s,stream:i}}}function hC(e,t){try{return JSON.stringify(e)}catch{try{return(t||this[Wl])(e)}catch{return'"[unable to serialize, circular reference is too complex to analyze]"'}}}function pC(e,t,r){return{level:e,bindings:t,log:r}}function mC(e){let t=Number(e);return typeof e=="string"&&Number.isFinite(t)?t:e===void 0?1:e}Ug.exports={noop:Dn,buildSafeSonicBoom:xo,asChindings:lC,asJson:uC,genLog:aC,createArgsNormalizer:dC,stringify:hC,buildFormatters:pC,normalizeDestFileDescriptor:mC}});var Mo=E((FJ,Bg)=>{var yC={trace:10,debug:20,info:30,warn:40,error:50,fatal:60},gC={ASC:"ASC",DESC:"DESC"};Bg.exports={DEFAULT_LEVELS:yC,SORTING_ORDER:gC}});var Ql=E((MJ,Wg)=>{"use strict";var{lsCacheSym:_C,levelValSym:Yl,useOnlyCustomLevelsSym:SC,streamSym:EC,formattersSym:vC,hooksSym:bC,levelCompSym:Gg}=Ln(),{noop:RC,genLog:Xr}=Fo(),{DEFAULT_LEVELS:Bt,SORTING_ORDER:Jg}=Mo(),Kg={fatal:e=>{let t=Xr(Bt.fatal,e);return function(...r){let n=this[EC];if(t.call(this,...r),typeof n.flushSync=="function")try{n.flushSync()}catch{}}},error:e=>Xr(Bt.error,e),warn:e=>Xr(Bt.warn,e),info:e=>Xr(Bt.info,e),debug:e=>Xr(Bt.debug,e),trace:e=>Xr(Bt.trace,e)},Xl=Object.keys(Bt).reduce((e,t)=>(e[Bt[t]]=t,e),{}),wC=Object.keys(Xl).reduce((e,t)=>(e[t]='{"level":'+Number(t),e),{});function TC(e){let t=e[vC].level,{labels:r}=e.levels,n={};for(let s in r){let i=t(r[s],Number(s));n[s]=JSON.stringify(i).slice(0,-1)}return e[_C]=n,e}function OC(e,t){if(t)return!1;switch(e){case"fatal":case"error":case"warn":case"info":case"debug":case"trace":return!0;default:return!1}}function $C(e){let{labels:t,values:r}=this.levels;if(typeof e=="number"){if(t[e]===void 0)throw Error("unknown level value"+e);e=t[e]}if(r[e]===void 0)throw Error("unknown level "+e);let n=this[Yl],s=this[Yl]=r[e],i=this[SC],o=this[Gg],a=this[bC].logMethod;for(let u in r){if(o(r[u],s)===!1){this[u]=RC;continue}this[u]=OC(u,i)?Kg[u](a):Xr(r[u],a)}this.emit("level-change",e,s,t[n],n,this)}function PC(e){let{levels:t,levelVal:r}=this;return t&&t.labels?t.labels[r]:""}function IC(e){let{values:t}=this.levels,r=t[e];return r!==void 0&&this[Gg](r,this[Yl])}function NC(e,t,r){return e===Jg.DESC?t<=r:t>=r}function AC(e){return typeof e=="string"?NC.bind(null,e):e}function CC(e=null,t=!1){let r=e?Object.keys(e).reduce((i,o)=>(i[e[o]]=o,i),{}):null,n=Object.assign(Object.create(Object.prototype,{Infinity:{value:"silent"}}),t?null:Xl,r),s=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),t?null:Bt,e);return{labels:n,values:s}}function kC(e,t,r){if(typeof e=="number"){if(![].concat(Object.keys(t||{}).map(i=>t[i]),r?[]:Object.keys(Xl).map(i=>+i),1/0).includes(e))throw Error(`default level:${e} must be included in custom levels`);return}let n=Object.assign(Object.create(Object.prototype,{silent:{value:1/0}}),r?null:Bt,t);if(!(e in n))throw Error(`default level:${e} must be included in custom levels`)}function qC(e,t){let{labels:r,values:n}=e;for(let s in t){if(s in n)throw Error("levels cannot be overridden");if(t[s]in r)throw Error("pre-existing level values cannot be used for new levels")}}function LC(e){if(typeof e!="function"&&!(typeof e=="string"&&Object.values(Jg).includes(e)))throw new Error('Levels comparison should be one of "ASC", "DESC" or "function" type')}Wg.exports={initialLsCache:wC,genLsCache:TC,levelMethods:Kg,getLevel:PC,setLevel:$C,isLevelEnabled:IC,mappings:CC,assertNoLevelCollisions:qC,assertDefaultLevelFound:kC,genLevelComparison:AC,assertLevelComparison:LC}});var Zl=E((HJ,Yg)=>{"use strict";Yg.exports={version:"9.7.0"}});var a0=E((zJ,o0)=>{"use strict";var{EventEmitter:jC}=require("node:events"),{lsCacheSym:DC,levelValSym:xC,setLevelSym:tc,getLevelSym:Xg,chindingsSym:rc,parsedChindingsSym:FC,mixinSym:MC,asJsonSym:r0,writeSym:HC,mixinMergeStrategySym:VC,timeSym:zC,timeSliceIndexSym:UC,streamSym:n0,serializersSym:Qr,formattersSym:ec,errorKeySym:BC,messageKeySym:GC,useOnlyCustomLevelsSym:JC,needsMetadataGsym:KC,redactFmtSym:WC,stringifySym:YC,formatOptsSym:XC,stringifiersSym:QC,msgPrefixSym:Qg,hooksSym:ZC}=Ln(),{getLevel:ek,setLevel:tk,isLevelEnabled:rk,mappings:nk,initialLsCache:sk,genLsCache:ik,assertNoLevelCollisions:ok}=Ql(),{asChindings:s0,asJson:ak,buildFormatters:Zg,stringify:e0}=Fo(),{version:uk}=Zl(),lk=kl(),ck=class{},i0={constructor:ck,child:fk,bindings:dk,setBindings:hk,flush:gk,isLevelEnabled:rk,version:uk,get level(){return this[Xg]()},set level(e){this[tc](e)},get levelVal(){return this[xC]},set levelVal(e){throw Error("levelVal is read-only")},[DC]:sk,[HC]:mk,[r0]:ak,[Xg]:ek,[tc]:tk};Object.setPrototypeOf(i0,jC.prototype);o0.exports=function(){return Object.create(i0)};var t0=e=>e;function fk(e,t){if(!e)throw Error("missing bindings for child Pino");t=t||{};let r=this[Qr],n=this[ec],s=Object.create(this);if(t.hasOwnProperty("serializers")===!0){s[Qr]=Object.create(null);for(let l in r)s[Qr][l]=r[l];let u=Object.getOwnPropertySymbols(r);for(var i=0;i<u.length;i++){let l=u[i];s[Qr][l]=r[l]}for(let l in t.serializers)s[Qr][l]=t.serializers[l];let c=Object.getOwnPropertySymbols(t.serializers);for(var o=0;o<c.length;o++){let l=c[o];s[Qr][l]=t.serializers[l]}}else s[Qr]=r;if(t.hasOwnProperty("formatters")){let{level:u,bindings:c,log:l}=t.formatters;s[ec]=Zg(u||n.level,c||t0,l||n.log)}else s[ec]=Zg(n.level,t0,n.log);if(t.hasOwnProperty("customLevels")===!0&&(ok(this.levels,t.customLevels),s.levels=nk(t.customLevels,s[JC]),ik(s)),typeof t.redact=="object"&&t.redact!==null||Array.isArray(t.redact)){s.redact=t.redact;let u=lk(s.redact,e0),c={stringify:u[WC]};s[YC]=e0,s[QC]=u,s[XC]=c}typeof t.msgPrefix=="string"&&(s[Qg]=(this[Qg]||"")+t.msgPrefix),s[rc]=s0(s,e);let a=t.level||this.level;return s[tc](a),this.onChild(s),s}function dk(){let t=`{${this[rc].substr(1)}}`,r=JSON.parse(t);return delete r.pid,delete r.hostname,r}function hk(e){let t=s0(this,e);this[rc]=t,delete this[FC]}function pk(e,t){return Object.assign(t,e)}function mk(e,t,r){let n=this[zC](),s=this[MC],i=this[BC],o=this[GC],a=this[VC]||pk,u,c=this[ZC].streamWrite;e==null?u={}:e instanceof Error?(u={[i]:e},t===void 0&&(t=e.message)):(u=e,t===void 0&&e[o]===void 0&&e[i]&&(t=e[i].message)),s&&(u=a(u,s(u,r,this)));let l=this[r0](u,t,r,n),d=this[n0];d[KC]===!0&&(d.lastLevel=r,d.lastObj=u,d.lastMsg=t,d.lastTime=n.slice(this[UC]),d.lastLogger=this),d.write(c?c(l):l)}function yk(){}function gk(e){if(e!=null&&typeof e!="function")throw Error("callback must be a function");let t=this[n0];typeof t.flush=="function"?t.flush(e||yk):e&&e()}});var f0=E((oc,c0)=>{"use strict";var{hasOwnProperty:Ds}=Object.prototype,en=ic();en.configure=ic;en.stringify=en;en.default=en;oc.stringify=en;oc.configure=ic;c0.exports=en;var _k=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]/;function $r(e){return e.length<5e3&&!_k.test(e)?`"${e}"`:JSON.stringify(e)}function nc(e,t){if(e.length>200||t)return e.sort(t);for(let r=1;r<e.length;r++){let n=e[r],s=r;for(;s!==0&&e[s-1]>n;)e[s]=e[s-1],s--;e[s]=n}return e}var Sk=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function sc(e){return Sk.call(e)!==void 0&&e.length!==0}function u0(e,t,r){e.length<r&&(r=e.length);let n=t===","?"":" ",s=`"0":${n}${e[0]}`;for(let i=1;i<r;i++)s+=`${t}"${i}":${n}${e[i]}`;return s}function Ek(e){if(Ds.call(e,"circularValue")){let t=e.circularValue;if(typeof t=="string")return`"${t}"`;if(t==null)return t;if(t===Error||t===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function vk(e){let t;if(Ds.call(e,"deterministic")&&(t=e.deterministic,typeof t!="boolean"&&typeof t!="function"))throw new TypeError('The "deterministic" argument must be of type boolean or comparator function');return t===void 0?!0:t}function bk(e,t){let r;if(Ds.call(e,t)&&(r=e[t],typeof r!="boolean"))throw new TypeError(`The "${t}" argument must be of type boolean`);return r===void 0?!0:r}function l0(e,t){let r;if(Ds.call(e,t)){if(r=e[t],typeof r!="number")throw new TypeError(`The "${t}" argument must be of type number`);if(!Number.isInteger(r))throw new TypeError(`The "${t}" argument must be an integer`);if(r<1)throw new RangeError(`The "${t}" argument must be >= 1`)}return r===void 0?1/0:r}function Zr(e){return e===1?"1 item":`${e} items`}function Rk(e){let t=new Set;for(let r of e)(typeof r=="string"||typeof r=="number")&&t.add(String(r));return t}function wk(e){if(Ds.call(e,"strict")){let t=e.strict;if(typeof t!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(t)return r=>{let n=`Object can not safely be stringified. Received type ${typeof r}`;throw typeof r!="function"&&(n+=` (${r.toString()})`),new Error(n)}}}function ic(e){e={...e};let t=wk(e);t&&(e.bigint===void 0&&(e.bigint=!1),"circularValue"in e||(e.circularValue=Error));let r=Ek(e),n=bk(e,"bigint"),s=vk(e),i=typeof s=="function"?s:void 0,o=l0(e,"maximumDepth"),a=l0(e,"maximumBreadth");function u(f,h,y,_,S,v){let g=h[f];switch(typeof g=="object"&&g!==null&&typeof g.toJSON=="function"&&(g=g.toJSON(f)),g=_.call(h,f,g),typeof g){case"string":return $r(g);case"object":{if(g===null)return"null";if(y.indexOf(g)!==-1)return r;let m="",w=",",T=v;if(Array.isArray(g)){if(g.length===0)return"[]";if(o<y.length+1)return'"[Array]"';y.push(g),S!==""&&(v+=S,m+=`
${v}`,w=`,
${v}`);let I=Math.min(g.length,a),N=0;for(;N<I-1;N++){let re=u(String(N),g,y,_,S,v);m+=re!==void 0?re:"null",m+=w}let z=u(String(N),g,y,_,S,v);if(m+=z!==void 0?z:"null",g.length-1>a){let re=g.length-a-1;m+=`${w}"... ${Zr(re)} not stringified"`}return S!==""&&(m+=`
${T}`),y.pop(),`[${m}]`}let b=Object.keys(g),O=b.length;if(O===0)return"{}";if(o<y.length+1)return'"[Object]"';let R="",P="";S!==""&&(v+=S,w=`,
${v}`,R=" ");let D=Math.min(O,a);s&&!sc(g)&&(b=nc(b,i)),y.push(g);for(let I=0;I<D;I++){let N=b[I],z=u(N,g,y,_,S,v);z!==void 0&&(m+=`${P}${$r(N)}:${R}${z}`,P=w)}if(O>a){let I=O-a;m+=`${P}"...":${R}"${Zr(I)} not stringified"`,P=w}return S!==""&&P.length>1&&(m=`
${v}${m}
${T}`),y.pop(),`{${m}}`}case"number":return isFinite(g)?String(g):t?t(g):"null";case"boolean":return g===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(g);default:return t?t(g):void 0}}function c(f,h,y,_,S,v){switch(typeof h=="object"&&h!==null&&typeof h.toJSON=="function"&&(h=h.toJSON(f)),typeof h){case"string":return $r(h);case"object":{if(h===null)return"null";if(y.indexOf(h)!==-1)return r;let g=v,m="",w=",";if(Array.isArray(h)){if(h.length===0)return"[]";if(o<y.length+1)return'"[Array]"';y.push(h),S!==""&&(v+=S,m+=`
${v}`,w=`,
${v}`);let O=Math.min(h.length,a),R=0;for(;R<O-1;R++){let D=c(String(R),h[R],y,_,S,v);m+=D!==void 0?D:"null",m+=w}let P=c(String(R),h[R],y,_,S,v);if(m+=P!==void 0?P:"null",h.length-1>a){let D=h.length-a-1;m+=`${w}"... ${Zr(D)} not stringified"`}return S!==""&&(m+=`
${g}`),y.pop(),`[${m}]`}y.push(h);let T="";S!==""&&(v+=S,w=`,
${v}`,T=" ");let b="";for(let O of _){let R=c(O,h[O],y,_,S,v);R!==void 0&&(m+=`${b}${$r(O)}:${T}${R}`,b=w)}return S!==""&&b.length>1&&(m=`
${v}${m}
${g}`),y.pop(),`{${m}}`}case"number":return isFinite(h)?String(h):t?t(h):"null";case"boolean":return h===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(h);default:return t?t(h):void 0}}function l(f,h,y,_,S){switch(typeof h){case"string":return $r(h);case"object":{if(h===null)return"null";if(typeof h.toJSON=="function"){if(h=h.toJSON(f),typeof h!="object")return l(f,h,y,_,S);if(h===null)return"null"}if(y.indexOf(h)!==-1)return r;let v=S;if(Array.isArray(h)){if(h.length===0)return"[]";if(o<y.length+1)return'"[Array]"';y.push(h),S+=_;let R=`
${S}`,P=`,
${S}`,D=Math.min(h.length,a),I=0;for(;I<D-1;I++){let z=l(String(I),h[I],y,_,S);R+=z!==void 0?z:"null",R+=P}let N=l(String(I),h[I],y,_,S);if(R+=N!==void 0?N:"null",h.length-1>a){let z=h.length-a-1;R+=`${P}"... ${Zr(z)} not stringified"`}return R+=`
${v}`,y.pop(),`[${R}]`}let g=Object.keys(h),m=g.length;if(m===0)return"{}";if(o<y.length+1)return'"[Object]"';S+=_;let w=`,
${S}`,T="",b="",O=Math.min(m,a);sc(h)&&(T+=u0(h,w,a),g=g.slice(h.length),O-=h.length,b=w),s&&(g=nc(g,i)),y.push(h);for(let R=0;R<O;R++){let P=g[R],D=l(P,h[P],y,_,S);D!==void 0&&(T+=`${b}${$r(P)}: ${D}`,b=w)}if(m>a){let R=m-a;T+=`${b}"...": "${Zr(R)} not stringified"`,b=w}return b!==""&&(T=`
${S}${T}
${v}`),y.pop(),`{${T}}`}case"number":return isFinite(h)?String(h):t?t(h):"null";case"boolean":return h===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(h);default:return t?t(h):void 0}}function d(f,h,y){switch(typeof h){case"string":return $r(h);case"object":{if(h===null)return"null";if(typeof h.toJSON=="function"){if(h=h.toJSON(f),typeof h!="object")return d(f,h,y);if(h===null)return"null"}if(y.indexOf(h)!==-1)return r;let _="",S=h.length!==void 0;if(S&&Array.isArray(h)){if(h.length===0)return"[]";if(o<y.length+1)return'"[Array]"';y.push(h);let T=Math.min(h.length,a),b=0;for(;b<T-1;b++){let R=d(String(b),h[b],y);_+=R!==void 0?R:"null",_+=","}let O=d(String(b),h[b],y);if(_+=O!==void 0?O:"null",h.length-1>a){let R=h.length-a-1;_+=`,"... ${Zr(R)} not stringified"`}return y.pop(),`[${_}]`}let v=Object.keys(h),g=v.length;if(g===0)return"{}";if(o<y.length+1)return'"[Object]"';let m="",w=Math.min(g,a);S&&sc(h)&&(_+=u0(h,",",a),v=v.slice(h.length),w-=h.length,m=","),s&&(v=nc(v,i)),y.push(h);for(let T=0;T<w;T++){let b=v[T],O=d(b,h[b],y);O!==void 0&&(_+=`${m}${$r(b)}:${O}`,m=",")}if(g>a){let T=g-a;_+=`${m}"...":"${Zr(T)} not stringified"`}return y.pop(),`{${_}}`}case"number":return isFinite(h)?String(h):t?t(h):"null";case"boolean":return h===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(h);default:return t?t(h):void 0}}function p(f,h,y){if(arguments.length>1){let _="";if(typeof y=="number"?_=" ".repeat(Math.min(y,10)):typeof y=="string"&&(_=y.slice(0,10)),h!=null){if(typeof h=="function")return u("",{"":f},[],h,_,"");if(Array.isArray(h))return c("",f,[],Rk(h),_,"")}if(_.length!==0)return l("",f,[],_,"")}return d("",f,[])}return p}});var p0=E((UJ,h0)=>{"use strict";var ac=Symbol.for("pino.metadata"),{DEFAULT_LEVELS:d0}=Mo(),Tk=d0.info;function Ok(e,t){let r=0;e=e||[],t=t||{dedupe:!1};let n=Object.create(d0);n.silent=1/0,t.levels&&typeof t.levels=="object"&&Object.keys(t.levels).forEach(d=>{n[d]=t.levels[d]});let s={write:i,add:u,emit:o,flushSync:a,end:c,minLevel:0,streams:[],clone:l,[ac]:!0,streamLevels:n};return Array.isArray(e)?e.forEach(u,s):u.call(s,e),e=null,s;function i(d){let p,f=this.lastLevel,{streams:h}=this,y=0,_;for(let S=Pk(h.length,t.dedupe);Nk(S,h.length,t.dedupe);S=Ik(S,t.dedupe))if(p=h[S],p.level<=f){if(y!==0&&y!==p.level)break;if(_=p.stream,_[ac]){let{lastTime:v,lastMsg:g,lastObj:m,lastLogger:w}=this;_.lastLevel=f,_.lastTime=v,_.lastMsg=g,_.lastObj=m,_.lastLogger=w}_.write(d),t.dedupe&&(y=p.level)}else if(!t.dedupe)break}function o(...d){for(let{stream:p}of this.streams)typeof p.emit=="function"&&p.emit(...d)}function a(){for(let{stream:d}of this.streams)typeof d.flushSync=="function"&&d.flushSync()}function u(d){if(!d)return s;let p=typeof d.write=="function"||d.stream,f=d.write?d:d.stream;if(!p)throw Error("stream object needs to implement either StreamEntry or DestinationStream interface");let{streams:h,streamLevels:y}=this,_;typeof d.levelVal=="number"?_=d.levelVal:typeof d.level=="string"?_=y[d.level]:typeof d.level=="number"?_=d.level:_=Tk;let S={stream:f,level:_,levelVal:void 0,id:r++};return h.unshift(S),h.sort($k),this.minLevel=h[0].level,s}function c(){for(let{stream:d}of this.streams)typeof d.flushSync=="function"&&d.flushSync(),d.end()}function l(d){let p=new Array(this.streams.length);for(let f=0;f<p.length;f++)p[f]={level:d,stream:this.streams[f].stream};return{write:i,add:u,minLevel:d,streams:p,clone:l,emit:o,flushSync:a,[ac]:!0}}}function $k(e,t){return e.level-t.level}function Pk(e,t){return t?e-1:0}function Ik(e,t){return t?e-1:e+1}function Nk(e,t,r){return r?e>=0:e<t}h0.exports=Ok});var P0=E((BJ,St)=>{"use strict";var Ak=require("node:os"),b0=Tl(),Ck=Ol(),kk=kl(),R0=ag(),qk=a0(),w0=Ln(),{configure:Lk}=f0(),{assertDefaultLevelFound:jk,mappings:T0,genLsCache:Dk,genLevelComparison:xk,assertLevelComparison:Fk}=Ql(),{DEFAULT_LEVELS:O0,SORTING_ORDER:Mk}=Mo(),{createArgsNormalizer:Hk,asChindings:Vk,buildSafeSonicBoom:m0,buildFormatters:zk,stringify:uc,normalizeDestFileDescriptor:y0,noop:Uk}=Fo(),{version:Bk}=Zl(),{chindingsSym:g0,redactFmtSym:Gk,serializersSym:_0,timeSym:Jk,timeSliceIndexSym:Kk,streamSym:Wk,stringifySym:S0,stringifySafeSym:lc,stringifiersSym:E0,setLevelSym:Yk,endSym:Xk,formatOptsSym:Qk,messageKeySym:Zk,errorKeySym:eq,nestedKeySym:tq,mixinSym:rq,levelCompSym:nq,useOnlyCustomLevelsSym:sq,formattersSym:v0,hooksSym:iq,nestedKeyStrSym:oq,mixinMergeStrategySym:aq,msgPrefixSym:uq}=w0,{epochTime:$0,nullTime:lq}=R0,{pid:cq}=process,fq=Ak.hostname(),dq=b0.err,hq={level:"info",levelComparison:Mk.ASC,levels:O0,messageKey:"msg",errorKey:"err",nestedKey:null,enabled:!0,base:{pid:cq,hostname:fq},serializers:Object.assign(Object.create(null),{err:dq}),formatters:Object.assign(Object.create(null),{bindings(e){return e},level(e,t){return{level:t}}}),hooks:{logMethod:void 0,streamWrite:void 0},timestamp:$0,name:void 0,redact:null,customLevels:null,useOnlyCustomLevels:!1,depthLimit:5,edgeLimit:100},pq=Hk(hq),mq=Object.assign(Object.create(null),b0);function cc(...e){let t={},{opts:r,stream:n}=pq(t,Ck(),...e);r.level&&typeof r.level=="string"&&O0[r.level.toLowerCase()]!==void 0&&(r.level=r.level.toLowerCase());let{redact:s,crlf:i,serializers:o,timestamp:a,messageKey:u,errorKey:c,nestedKey:l,base:d,name:p,level:f,customLevels:h,levelComparison:y,mixin:_,mixinMergeStrategy:S,useOnlyCustomLevels:v,formatters:g,hooks:m,depthLimit:w,edgeLimit:T,onChild:b,msgPrefix:O}=r,R=Lk({maximumDepth:w,maximumBreadth:T}),P=zk(g.level,g.bindings,g.log),D=uc.bind({[lc]:R}),I=s?kk(s,D):{},N=s?{stringify:I[Gk]}:{stringify:D},z="}"+(i?`\r
`:`
`),re=Vk.bind(null,{[g0]:"",[_0]:o,[E0]:I,[S0]:uc,[lc]:R,[v0]:P}),L="";d!==null&&(p===void 0?L=re(d):L=re(Object.assign({},d,{name:p})));let J=a instanceof Function?a:a?$0:lq,Fe=J().indexOf(":")+1;if(v&&!h)throw Error("customLevels is required if useOnlyCustomLevels is set true");if(_&&typeof _!="function")throw Error(`Unknown mixin type "${typeof _}" - expected "function"`);if(O&&typeof O!="string")throw Error(`Unknown msgPrefix type "${typeof O}" - expected "string"`);jk(f,h,v);let H=T0(h,v);typeof n.emit=="function"&&n.emit("message",{code:"PINO_CONFIG",config:{levels:H,messageKey:u,errorKey:c}}),Fk(y);let je=xk(y);return Object.assign(t,{levels:H,[nq]:je,[sq]:v,[Wk]:n,[Jk]:J,[Kk]:Fe,[S0]:uc,[lc]:R,[E0]:I,[Xk]:z,[Qk]:N,[Zk]:u,[eq]:c,[tq]:l,[oq]:l?`,${JSON.stringify(l)}:{`:"",[_0]:o,[rq]:_,[aq]:S,[g0]:L,[v0]:P,[iq]:m,silent:Uk,onChild:b,[uq]:O}),Object.setPrototypeOf(t,qk()),Dk(t),t[Yk](f),t}St.exports=cc;St.exports.destination=(e=process.stdout.fd)=>typeof e=="object"?(e.dest=y0(e.dest||process.stdout.fd),m0(e)):m0({dest:y0(e),minLength:0});St.exports.transport=Gl();St.exports.multistream=p0();St.exports.levels=T0();St.exports.stdSerializers=mq;St.exports.stdTimeFunctions=Object.assign({},R0);St.exports.symbols=w0;St.exports.version=Bk;St.exports.default=cc;St.exports.pino=cc});var A0=E((GJ,N0)=>{"use strict";var Ho=P0(),{serializersSym:I0}=Ho.symbols,{FST_ERR_LOG_INVALID_DESTINATION:yq}=Ve();function gq(e){if(e.stream&&e.file)throw new yq;e.file&&(e.stream=Ho.destination(e.file),delete e.file);let t=e.logger,r=e.genReqId,n=null;return t?(e.logger=void 0,e.genReqId=void 0,t[I0]&&(e.serializers=Object.assign({},e.serializers,t[I0])),n=t.child({},e),e.logger=t,e.genReqId=r):n=Ho(e,e.stream),n}var _q={req:function(t){return{method:t.method,url:t.url,version:t.headers&&t.headers["accept-version"],host:t.host,remoteAddress:t.ip,remotePort:t.socket?t.socket.remotePort:void 0}},err:Ho.stdSerializers.err,res:function(t){return{statusCode:t.statusCode}}};N0.exports={serializers:_q,createPinoLogger:gq}});var xs=E((JJ,k0)=>{"use strict";var{FST_ERR_LOG_LOGGER_AND_LOGGER_INSTANCE_PROVIDED:Sq,FST_ERR_LOG_INVALID_LOGGER_CONFIG:Eq,FST_ERR_LOG_INVALID_LOGGER_INSTANCE:vq,FST_ERR_LOG_INVALID_LOGGER:bq}=Ve();function Rq(e,t,r,n,s){let i={[e.requestIdLogLabel]:n},o=e.childLoggerFactory.call(e.server,t,i,s||{},r);return e.childLoggerFactory!==C0&&Vo(o,!0),o}function C0(e,t,r){return e.child(t,r)}function Vo(e,t){let r=["info","error","debug","fatal","warn","trace","child"],n=e?r.filter(s=>!e[s]||typeof e[s]!="function"):r;if(n.length){if(n.length===r.length&&!t)return!1;throw bq(n.join(","))}else return!0}function wq(e){if(e.logger&&e.loggerInstance)throw new Sq;if(!e.loggerInstance&&!e.logger){let o=gy();return o.child=()=>o,{logger:o,hasLogger:!1}}let{createPinoLogger:t,serializers:r}=A0();if(Vo(e.loggerInstance))return{logger:t({logger:e.loggerInstance,serializers:Object.assign({},r,e.loggerInstance.serializers)}),hasLogger:!0};if(Vo(e.logger))throw Eq();if(e.loggerInstance)throw vq();let n={};return Object.prototype.toString.call(e.logger)==="[object Object]"&&Reflect.ownKeys(e.logger).forEach(i=>{Object.defineProperty(n,i,{value:e.logger[i],writable:!0,enumerable:!0,configurable:!0})}),n.level=n.level||"info",n.serializers=Object.assign({},r,n.serializers),e.logger=n,{logger:t(e.logger),hasLogger:!0}}function Tq(){let e=process.hrtime();return e[0]*1e3+e[1]/1e6}k0.exports={createChildLogger:Rq,defaultChildLoggerFactory:C0,createLogger:wq,validateLogger:Vo,now:Tq}});var zo=E((KJ,q0)=>{"use strict";q0.exports=Oq;function xn(e){return e instanceof Buffer?Buffer.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}function Oq(e){if(e=e||{},e.circles)return $q(e);let t=new Map;if(t.set(Date,o=>new Date(o)),t.set(Map,(o,a)=>new Map(n(Array.from(o),a))),t.set(Set,(o,a)=>new Set(n(Array.from(o),a))),e.constructorHandlers)for(let o of e.constructorHandlers)t.set(o[0],o[1]);let r=null;return e.proto?i:s;function n(o,a){let u=Object.keys(o),c=new Array(u.length);for(let l=0;l<u.length;l++){let d=u[l],p=o[d];typeof p!="object"||p===null?c[d]=p:p.constructor!==Object&&(r=t.get(p.constructor))?c[d]=r(p,a):ArrayBuffer.isView(p)?c[d]=xn(p):c[d]=a(p)}return c}function s(o){if(typeof o!="object"||o===null)return o;if(Array.isArray(o))return n(o,s);if(o.constructor!==Object&&(r=t.get(o.constructor)))return r(o,s);let a={};for(let u in o){if(Object.hasOwnProperty.call(o,u)===!1)continue;let c=o[u];typeof c!="object"||c===null?a[u]=c:c.constructor!==Object&&(r=t.get(c.constructor))?a[u]=r(c,s):ArrayBuffer.isView(c)?a[u]=xn(c):a[u]=s(c)}return a}function i(o){if(typeof o!="object"||o===null)return o;if(Array.isArray(o))return n(o,i);if(o.constructor!==Object&&(r=t.get(o.constructor)))return r(o,i);let a={};for(let u in o){let c=o[u];typeof c!="object"||c===null?a[u]=c:c.constructor!==Object&&(r=t.get(c.constructor))?a[u]=r(c,i):ArrayBuffer.isView(c)?a[u]=xn(c):a[u]=i(c)}return a}}function $q(e){let t=[],r=[],n=new Map;if(n.set(Date,u=>new Date(u)),n.set(Map,(u,c)=>new Map(i(Array.from(u),c))),n.set(Set,(u,c)=>new Set(i(Array.from(u),c))),e.constructorHandlers)for(let u of e.constructorHandlers)n.set(u[0],u[1]);let s=null;return e.proto?a:o;function i(u,c){let l=Object.keys(u),d=new Array(l.length);for(let p=0;p<l.length;p++){let f=l[p],h=u[f];if(typeof h!="object"||h===null)d[f]=h;else if(h.constructor!==Object&&(s=n.get(h.constructor)))d[f]=s(h,c);else if(ArrayBuffer.isView(h))d[f]=xn(h);else{let y=t.indexOf(h);y!==-1?d[f]=r[y]:d[f]=c(h)}}return d}function o(u){if(typeof u!="object"||u===null)return u;if(Array.isArray(u))return i(u,o);if(u.constructor!==Object&&(s=n.get(u.constructor)))return s(u,o);let c={};t.push(u),r.push(c);for(let l in u){if(Object.hasOwnProperty.call(u,l)===!1)continue;let d=u[l];if(typeof d!="object"||d===null)c[l]=d;else if(d.constructor!==Object&&(s=n.get(d.constructor)))c[l]=s(d,o);else if(ArrayBuffer.isView(d))c[l]=xn(d);else{let p=t.indexOf(d);p!==-1?c[l]=r[p]:c[l]=o(d)}}return t.pop(),r.pop(),c}function a(u){if(typeof u!="object"||u===null)return u;if(Array.isArray(u))return i(u,a);if(u.constructor!==Object&&(s=n.get(u.constructor)))return s(u,a);let c={};t.push(u),r.push(c);for(let l in u){let d=u[l];if(typeof d!="object"||d===null)c[l]=d;else if(d.constructor!==Object&&(s=n.get(d.constructor)))c[l]=s(d,a);else if(ArrayBuffer.isView(d))c[l]=xn(d);else{let p=t.indexOf(d);p!==-1?c[l]=r[p]:c[l]=a(d)}}return t.pop(),r.pop(),c}}});var Fs=E((WJ,F0)=>{"use strict";var Pq=zo()({circles:!1,proto:!0}),{kSchemaVisited:L0,kSchemaResponse:Iq}=De(),fc=Symbol.for("fluent-schema-object"),{FST_ERR_SCH_MISSING_ID:Nq,FST_ERR_SCH_ALREADY_PRESENT:Aq,FST_ERR_SCH_DUPLICATE:Cq,FST_ERR_SCH_CONTENT_MISSING_SCHEMA:j0}=Ve(),x0=["params","body","querystring","query","headers"];function Uo(e){this.store=e||{}}Uo.prototype.add=function(e){let t=Pq(e.isFluentSchema||e.isFluentJSONSchema||e[fc]?e.valueOf():e),r=t.$id;if(!r)throw new Nq;if(this.store[r])throw new Aq(r);this.store[r]=t};Uo.prototype.getSchemas=function(){return Object.assign({},this.store)};Uo.prototype.getSchema=function(e){return this.store[e]};function D0(e){return typeof e=="object"&&Object.getPrototypeOf(e)!==Object.prototype}function kq(e,t){if(e[L0])return e;if(e.query){if(e.querystring)throw new Cq("querystring");e.querystring=e.query}qq(e);for(let r of x0){let n=e[r];if(n&&!D0(n)&&r==="body"&&n.content){let s=n.content,i=Object.keys(s);for(let o=0;o<i.length;o++){let a=i[o];if(!s[a].schema)throw new j0(a)}continue}}if(e.response){let r=Object.keys(e.response);for(let n of r){if(D0(e.response[n]))continue;let s=e.response[n].content;if(s){let i=Object.keys(s);for(let o=0;o<i.length;o++){let a=i[o];if(!s[a].schema)throw new j0(a)}}}}return e[L0]=!0,e}function qq(e){for(let t of x0)e[t]&&(e[t].isFluentSchema||e[t][fc])&&(e[t]=e[t].valueOf());if(e.response){let t=Object.keys(e.response);for(let r of t)(e.response[r].isFluentSchema||e.response[r][fc])&&(e.response[r]=e.response[r].valueOf())}}function Lq(e,t,r){let n=e[Iq];if(!n)return!1;if(n[t]){if(n[t].constructor===Object&&r){let i=r.split(";",1)[0];return n[t][i]?n[t][i]:n[t]["*/*"]?n[t]["*/*"]:!1}return n[t]}let s=(t+"")[0]+"xx";if(n[s]){if(n[s].constructor===Object&&r){let i=r.split(";",1)[0];return n[s][i]?n[s][i]:n[s]["*/*"]?n[s]["*/*"]:!1}return n[s]}if(n.default){if(n.default.constructor===Object&&r){let i=r.split(";",1)[0];return n.default[i]?n.default[i]:n.default["*/*"]?n.default["*/*"]:!1}return n.default}return!1}F0.exports={buildSchemas(e){return new Uo(e)},getSchemaSerializer:Lq,normalizeSchema:kq}});var Bo=E((YJ,H0)=>{"use strict";var jq=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]/;H0.exports=class M0{constructor(t){switch(t&&t.rounding){case"floor":this.parseInteger=Math.floor;break;case"ceil":this.parseInteger=Math.ceil;break;case"round":this.parseInteger=Math.round;break;case"trunc":default:this.parseInteger=Math.trunc;break}this._options=t}asInteger(t){if(Number.isInteger(t))return""+t;if(typeof t=="bigint")return t.toString();let r=this.parseInteger(t);if(r===1/0||r===-1/0||r!==r)throw new Error(`The value "${t}" cannot be converted to an integer.`);return""+r}asNumber(t){let r=Number(t);if(r!==r)throw new Error(`The value "${t}" cannot be converted to a number.`);return r===1/0||r===-1/0?"null":""+r}asBoolean(t){return t&&"true"||"false"}asDateTime(t){if(t===null)return'""';if(t instanceof Date)return'"'+t.toISOString()+'"';if(typeof t=="string")return'"'+t+'"';throw new Error(`The value "${t}" cannot be converted to a date-time.`)}asDate(t){if(t===null)return'""';if(t instanceof Date)return'"'+new Date(t.getTime()-t.getTimezoneOffset()*6e4).toISOString().slice(0,10)+'"';if(typeof t=="string")return'"'+t+'"';throw new Error(`The value "${t}" cannot be converted to a date.`)}asTime(t){if(t===null)return'""';if(t instanceof Date)return'"'+new Date(t.getTime()-t.getTimezoneOffset()*6e4).toISOString().slice(11,19)+'"';if(typeof t=="string")return'"'+t+'"';throw new Error(`The value "${t}" cannot be converted to a time.`)}asString(t){let r=t.length;if(r<42){let n="",s=-1,i=255;for(let o=0;o<r;o++)if(i=t.charCodeAt(o),i===34||i===92)s===-1&&(s=0),n+=t.slice(s,o)+"\\",s=o;else if(i<32||i>=55296&&i<=57343)return JSON.stringify(t);return s===-1&&'"'+t+'"'||'"'+n+t.slice(s)+'"'}else return r<5e3&&jq.test(t)===!1?'"'+t+'"':JSON.stringify(t)}asUnsafeString(t){return'"'+t+'"'}getState(){return this._options}static restoreFromState(t){return new M0(t)}}});var z0=E((XJ,V0)=>{"use strict";var Dq=Bo(),xq={mode:"standalone"},Fq=Dq.restoreFromState(xq),Mq=null;V0.exports=function(t,r){let n="{",s="}",i="[",o="]",a=",",u=":",c='"',l=n+s,d=i+o,p=c+c,f="null";function h(_){let S=_&&typeof _.toJSON=="function"?_.toJSON():_;if(S===null)return l;let v,g=n,m=!1;return v=S.statusCode,v!==void 0&&(!m&&(m=!0)||(g+=a),g+='"statusCode":',g+=r.asNumber(v)),v=S.code,v!==void 0&&(!m&&(m=!0)||(g+=a),g+='"code":',typeof v!="string"?v===null?g+=p:v instanceof Date?g+=c+v.toISOString()+c:v instanceof RegExp?g+=r.asString(v.source):g+=r.asString(v.toString()):g+=r.asString(v)),v=S.error,v!==void 0&&(!m&&(m=!0)||(g+=a),g+='"error":',typeof v!="string"?v===null?g+=p:v instanceof Date?g+=c+v.toISOString()+c:v instanceof RegExp?g+=r.asString(v.source):g+=r.asString(v.toString()):g+=r.asString(v)),v=S.message,v!==void 0&&(!m&&(m=!0)||(g+=a),g+='"message":',typeof v!="string"?v===null?g+=p:v instanceof Date?g+=c+v.toISOString()+c:v instanceof RegExp?g+=r.asString(v.source):g+=r.asString(v.toString()):g+=r.asString(v)),g+s}return h}(Mq,Fq)});var Ms=E((QJ,J0)=>{"use strict";var U0=require("node:http").STATUS_CODES,Hq=fl(),{kReplyHeaders:tn,kReplyNextErrorHandler:Go,kReplyIsRunningOnErrorHook:Vq,kReplyHasStatusCode:zq,kRouteContext:G0,kDisableRequestLogging:Jo}=De(),{FST_ERR_REP_INVALID_PAYLOAD_TYPE:Uq,FST_ERR_FAILED_ERROR_SERIALIZATION:Bq}=Ve(),{getSchemaSerializer:Gq}=Fs(),dc=z0(),Jq={func:Wq,toJSON(){return this.func.name.toString()+"()"}};function Kq(e,t,r){e[Vq]=!1;let n=e[G0];if(e[Go]===!1){B0(t,e,function(o,a){try{o.raw.writeHead(o.raw.statusCode,o[tn])}catch(u){o.log[Jo]||o.log.warn({req:o.request,res:o,err:u},u&&u.message),o.raw.writeHead(o.raw.statusCode)}o.raw.end(a)});return}let s=e[Go]||n.errorHandler;e[Go]=Object.getPrototypeOf(s),delete e[tn]["content-type"],delete e[tn]["content-length"];let i=s.func;if(!i){e[Go]=!1,B0(t,e,r);return}try{let o=i(t,e.request,e);o!==void 0&&(o!==null&&typeof o.then=="function"?Hq(o,e):e.send(o))}catch(o){e.send(o)}}function Wq(e,t,r){if(Xq(e,r),!r[zq]||r.statusCode===200){let n=e.statusCode||e.status;r.code(n>=400?n:500)}r.statusCode<500?r.log[Jo]||r.log.info({res:r,err:e},e&&e.message):r.log[Jo]||r.log.error({req:t,res:r,err:e},e&&e.message),r.send(e)}function B0(e,t,r){let n=t.raw,s=t.statusCode;t[tn]["content-type"]=t[tn]["content-type"]??"application/json; charset=utf-8";let i;try{let o=Gq(t[G0],s,t[tn]["content-type"]);o===!1?i=dc({error:U0[s+""],code:e.code,message:e.message,statusCode:s}):i=o(Object.create(e,{error:{value:U0[s+""]},message:{value:e.message},statusCode:{value:s}}))}catch(o){t.log[Jo]||t.log.error({err:o,statusCode:n.statusCode},"The serializer for the given status code failed"),t.code(500),i=dc(new Bq(o.message,e.message))}typeof i!="string"&&!Buffer.isBuffer(i)&&(i=dc(new Uq(typeof i))),t[tn]["content-length"]=""+Buffer.byteLength(i),r(t,i)}function Yq(e=Jq,t){if(!t)return e;let r=Object.create(e);return r.func=t,r}function Xq(e,t){let r=t.raw,n=r.statusCode;n=n>=400?n:500,e!=null&&(e.headers!==void 0&&t.headers(e.headers),e.status>=400?n=e.status:e.statusCode>=400&&(n=e.statusCode)),r.statusCode=n}J0.exports={buildErrorHandler:Yq,handleError:Kq}});var zs=E((ZJ,X0)=>{"use strict";var{kReply:hc,kRequest:pc,kState:Qq,kHasBeenDecorated:Zq}=De(),{FST_ERR_DEC_ALREADY_PRESENT:K0,FST_ERR_DEC_MISSING_DEPENDENCY:eL,FST_ERR_DEC_AFTER_START:tL,FST_ERR_DEC_REFERENCE_TYPE:rL,FST_ERR_DEC_DEPENDENCY_INVALID_TYPE:nL,FST_ERR_DEC_UNDECLARED:sL}=Ve();function iL(e,t,r,n){if(Object.hasOwn(e,t))throw new K0(t);mc(e,t,n),r&&(typeof r.getter=="function"||typeof r.setter=="function")?Object.defineProperty(e,t,{get:r.getter,set:r.setter}):e[t]=r}function oL(e){if(!Hs(this,e))throw new sL(e,"instance");return typeof this[e]=="function"?this[e].bind(this):this[e]}function W0(e,t,r,n){let s=e.prototype;if(Object.hasOwn(s,t)||Vs(e,t))throw new K0(t);e[Zq]=!0,mc(e,t,n),r&&(typeof r.getter=="function"||typeof r.setter=="function")?Object.defineProperty(s,t,{get:r.getter,set:r.setter}):typeof r=="function"?s[t]=r:e.props.push({key:t,value:r})}function Y0(e,t){if(typeof t=="object"&&t&&!(typeof t.getter=="function"||typeof t.setter=="function"))throw new rL(e,typeof t)}function aL(e,t,r){return yc(this,e),iL(this,e,t,r),this}function Hs(e,t){return t?t in e||e.prototype&&t in e.prototype||Vs(e,t):e in this}function Vs(e,t){return e.props?e.props.find(({key:r})=>r===t):!1}function uL(e){return e&&Vs(this[pc],e)?!0:Hs(this[pc].prototype,e)}function lL(e){return e&&Vs(this[hc],e)?!0:Hs(this[hc].prototype,e)}function mc(e,t,r){if(r!=null){if(!Array.isArray(r))throw new nL(t);for(let n=0;n!==r.length;++n)if(!Hs(e,r[n]))throw new eL(r[n])}}function cL(e,t,r){return yc(this,e),Y0(e,t),W0(this[hc],e,t,r),this}function fL(e,t,r){return yc(this,e),Y0(e,t),W0(this[pc],e,t,r),this}function yc(e,t){if(e[Qq].started)throw new tL(t)}X0.exports={add:aL,exist:Hs,existRequest:uL,existReply:lL,dependencies:mc,decorateReply:cL,decorateRequest:fL,getInstanceDecorator:oL,hasKey:Vs}});var Zo=E((eK,Qo)=>{"use strict";var Ec=require("node:stream").finished,dL=require("node:stream").Readable,{kFourOhFourContext:Q0,kReplyErrorHandlerCalled:o_,kReplyHijacked:bc,kReplyStartTime:Us,kReplyEndTime:Rc,kReplySerializer:ur,kReplySerializerDefault:Wo,kReplyIsError:Yo,kReplyHeaders:ge,kReplyTrailers:xe,kReplyHasStatusCode:wc,kReplyIsRunningOnErrorHook:Tc,kReplyNextErrorHandler:hL,kDisableRequestLogging:a_,kSchemaResponse:Xo,kReplyCacheSerializeFns:Pr,kSchemaController:gc,kOptions:pL,kRouteContext:ne}=De(),{onSendHookRunner:u_,onResponseHookRunner:mL,preHandlerHookRunner:yL,preSerializationHookRunner:gL}=Tr(),Z0=ml()[Symbol.for("internals")],_L=xs(),vc=_L.now,{handleError:e_}=Ms(),{getSchemaSerializer:SL}=Fs(),_c={JSON:"application/json; charset=utf-8",PLAIN:"text/plain; charset=utf-8",OCTET:"application/octet-stream"},{FST_ERR_REP_INVALID_PAYLOAD_TYPE:EL,FST_ERR_REP_RESPONSE_BODY_CONSUMED:vL,FST_ERR_REP_READABLE_STREAM_LOCKED:bL,FST_ERR_REP_ALREADY_SENT:RL,FST_ERR_SEND_INSIDE_ONERR:wL,FST_ERR_BAD_STATUS_CODE:TL,FST_ERR_BAD_TRAILER_NAME:OL,FST_ERR_BAD_TRAILER_VALUE:$L,FST_ERR_MISSING_SERIALIZATION_FN:PL,FST_ERR_MISSING_CONTENTTYPE_SERIALIZATION_FN:IL,FST_ERR_DEC_UNDECLARED:NL}=Ve(),t_=zs(),l_=Object.prototype.toString;function pe(e,t,r){this.raw=e,this[ur]=null,this[o_]=!1,this[Yo]=!1,this[Tc]=!1,this.request=t,this[ge]={},this[xe]=null,this[wc]=!1,this[Us]=void 0,this.log=r}pe.props=[];Object.defineProperties(pe.prototype,{[ne]:{get(){return this.request[ne]}},elapsedTime:{get(){return this[Us]===void 0?0:(this[Rc]||vc())-this[Us]}},server:{get(){return this.request[ne].server}},sent:{enumerable:!0,get(){return(this[bc]||this.raw.writableEnded)===!0}},statusCode:{get(){return this.raw.statusCode},set(e){this.code(e)}},routeOptions:{get(){return this.request.routeOptions}}});pe.prototype.writeEarlyHints=function(e,t){return this.raw.writeEarlyHints(e,t),this};pe.prototype.hijack=function(){return this[bc]=!0,this};pe.prototype.send=function(e){if(this[Tc]===!0)throw new wL;if(this.sent)return this.log.warn({err:new RL(this.request.url,this.request.method)}),this;if(e instanceof Error||this[Yo]===!0)return this[Yo]=!1,Bs(this,e,rn),this;if(e===void 0)return rn(this,e),this;let t=this.getHeader("content-type"),r=t!==void 0;if(e!==null){if(typeof e.pipe=="function"||typeof e.getReader=="function"||l_.call(e)==="[object Response]")return rn(this,e),this;if(e?.buffer instanceof ArrayBuffer){r===!1&&(this[ge]["content-type"]=_c.OCTET);let n=Buffer.isBuffer(e)?e:Buffer.from(e.buffer,e.byteOffset,e.byteLength);return rn(this,n),this}if(r===!1&&typeof e=="string")return this[ge]["content-type"]=_c.PLAIN,rn(this,e),this}if(this[ur]!==null){if(typeof e!="string")return r_(this,e),this;e=this[ur](e)}else if(r===!1||t.indexOf("json")>-1){if(r===!1)this[ge]["content-type"]=_c.JSON;else if(t.indexOf("charset")===-1){let n=t.trim();n.endsWith(";")?this[ge]["content-type"]=`${n} charset=utf-8`:this[ge]["content-type"]=`${n}; charset=utf-8`}if(typeof e!="string")return r_(this,e),this}return rn(this,e),this};pe.prototype.getHeader=function(e){e=e.toLowerCase();let t=this.raw,r=this[ge][e];return r===void 0&&t.hasHeader(e)&&(r=t.getHeader(e)),r};pe.prototype.getHeaders=function(){return{...this.raw.getHeaders(),...this[ge]}};pe.prototype.hasHeader=function(e){return e=e.toLowerCase(),this[ge][e]!==void 0||this.raw.hasHeader(e)};pe.prototype.removeHeader=function(e){return delete this[ge][e.toLowerCase()],this};pe.prototype.header=function(e,t=""){return e=e.toLowerCase(),this[ge][e]&&e==="set-cookie"?(typeof this[ge][e]=="string"&&(this[ge][e]=[this[ge][e]]),Array.isArray(t)?Array.prototype.push.apply(this[ge][e],t):this[ge][e].push(t)):this[ge][e]=t,this};pe.prototype.headers=function(e){let t=Object.keys(e);for(let r=0;r!==t.length;++r){let n=t[r];this.header(n,e[n])}return this};var AL=new Set(["transfer-encoding","content-length","host","cache-control","max-forwards","te","authorization","set-cookie","content-encoding","content-type","content-range","trailer"]);pe.prototype.trailer=function(e,t){if(e=e.toLowerCase(),AL.has(e))throw new OL(e);if(typeof t!="function")throw new $L(e,typeof t);return this[xe]===null&&(this[xe]={}),this[xe][e]=t,this};pe.prototype.hasTrailer=function(e){return this[xe]?.[e.toLowerCase()]!==void 0};pe.prototype.removeTrailer=function(e){return this[xe]===null?this:(this[xe][e.toLowerCase()]=void 0,this)};pe.prototype.code=function(e){let t=Number(e);if(isNaN(t)||t<100||t>599)throw new TL(e||String(e));return this.raw.statusCode=t,this[wc]=!0,this};pe.prototype.status=pe.prototype.code;pe.prototype.getSerializationFunction=function(e,t){let r;return typeof e=="string"||typeof e=="number"?typeof t=="string"?r=this[ne][Xo]?.[e]?.[t]:r=this[ne][Xo]?.[e]:typeof e=="object"&&(r=this[ne][Pr]?.get(e)),r};pe.prototype.compileSerializationSchema=function(e,t=null,r=null){let{request:n}=this,{method:s,url:i}=n;if(this[ne][Pr]?.has(e))return this[ne][Pr].get(e);let a=(this[ne].serializerCompiler||this.server[gc].serializerCompiler||this.server[gc].setupSerializer(this.server[pL])||this.server[gc].serializerCompiler)({schema:e,method:s,url:i,httpStatus:t,contentType:r});return this[ne][Pr]==null&&(this[ne][Pr]=new WeakMap),this[ne][Pr].set(e,a),a};pe.prototype.serializeInput=function(e,t,r,n){let s=r,i;if(r=typeof t=="string"||typeof t=="number"?t:r,n=r&&s!==r?s:n,r!=null){if(n!=null?i=this[ne][Xo]?.[r]?.[n]:i=this[ne][Xo]?.[r],i==null)throw n?new IL(r,n):new PL(r)}else this[ne][Pr]?.has(t)?i=this[ne][Pr].get(t):i=this.compileSerializationSchema(t,r,n);return i(e)};pe.prototype.serialize=function(e){return this[ur]!==null?this[ur](e):this[ne]&&this[ne][Wo]?this[ne][Wo](e,this.raw.statusCode):d_(this[ne],e,this.raw.statusCode)};pe.prototype.serializer=function(e){return this[ur]=e,this};pe.prototype.type=function(e){return this[ge]["content-type"]=e,this};pe.prototype.redirect=function(e,t){return t||(t=this[wc]?this.raw.statusCode:302),this.header("location",e).code(t).send()};pe.prototype.callNotFound=function(){return xL(this),this};pe.prototype.then=function(e,t){if(this.sent){e();return}Ec(this.raw,r=>{r&&r.code!=="ERR_STREAM_PREMATURE_CLOSE"?t?t(r):this.log&&this.log.warn("unhandled rejection on reply.then"):e()})};pe.prototype.getDecorator=function(e){if(!t_.hasKey(this,e)&&!t_.exist(this,e))throw new NL(e,"reply");let t=this[e];return typeof t=="function"?t.bind(this):t};function r_(e,t){e[ne].preSerialization!==null?gL(e[ne].preSerialization,e.request,e,t,n_):n_(null,e.request,e,t)}function n_(e,t,r,n){if(e!=null){Bs(r,e);return}try{r[ur]!==null?n=r[ur](n):r[ne]&&r[ne][Wo]?n=r[ne][Wo](n,r.raw.statusCode):n=d_(r[ne],n,r.raw.statusCode,r[ge]["content-type"])}catch(s){CL(s,r),Bs(r,s);return}rn(r,n)}function CL(e,t){e.serialization=t[ne].config}function rn(e,t){e[ne].onSend!==null?u_(e[ne].onSend,e.request,e,t,kL):c_(e,t)}function kL(e,t,r,n){e!=null?Bs(r,e):c_(r,n)}function Sc(e,t){let r=e.raw;try{r.writeHead(t,e[ge])}catch(n){throw n.code==="ERR_HTTP_HEADERS_SENT"&&e.log.warn(`Reply was already sent, did you forget to "return reply" in the "${e.request.raw.url}" (${e.request.raw.method}) route?`),n}}function c_(e,t){let r=e.raw,n=e.request;if(e[xe]!==null){let i=Object.keys(e[xe]),o="";for(let a of i)typeof e[xe][a]=="function"&&(o+=" ",o+=a);e.header("Transfer-Encoding","chunked"),e.header("Trailer",o.trim())}if(l_.call(t)==="[object Response]"){if(typeof t.status=="number"&&e.code(t.status),typeof t.headers=="object"&&typeof t.headers.forEach=="function")for(let[i,o]of t.headers)e.header(i,o);if(t.body!==null&&t.bodyUsed)throw new vL;t=t.body}let s=r.statusCode;if(t==null){s>=200&&s!==204&&s!==304&&n.method!=="HEAD"&&e[xe]===null&&(e[ge]["content-length"]="0"),Sc(e,s),Ko(t,r,e);return}if(s>=100&&s<200||s===204){e.removeHeader("content-type"),e.removeHeader("content-length"),Sc(e,s),Ko(void 0,r,e),typeof t.resume=="function"&&(t.on("error",h_),t.resume());return}if(typeof t.pipe=="function"){f_(t,r,e);return}if(typeof t.getReader=="function"){qL(t,r,e);return}if(typeof t!="string"&&!Buffer.isBuffer(t))throw new EL(typeof t);if(e[xe]===null){let i=e[ge]["content-length"];(!i||n.raw.method!=="HEAD"&&Number(i)!==Buffer.byteLength(t))&&(e[ge]["content-length"]=""+Buffer.byteLength(t))}Sc(e,s),r.write(t),Ko(t,r,e)}function s_(e,t,r){t.code==="ERR_STREAM_PREMATURE_CLOSE"?e[a_]||e.info({res:r},"stream closed prematurely"):e.warn({err:t},"response terminated with an error with headers already sent")}function qL(e,t,r){if(e.locked)throw bL();let n=dL.fromWeb(e);f_(n,t,r)}function f_(e,t,r){let n=!0,s=!1;if(LL(e,t,r),Ec(e,{readable:!0,writable:!1},function(i){n=!1,i!=null&&(t.headersSent||r.request.raw.aborted===!0?(s||(s=!0,s_(r.log,i,r)),t.destroy()):Bs(r,i))}),Ec(t,function(i){n&&(i!=null&&t.headersSent&&!s&&(s=!0,s_(r.log,i,t)),typeof e.destroy=="function"?e.destroy():typeof e.close=="function"?e.close(h_):typeof e.abort=="function"?e.abort():r.log.warn("stream payload does not end properly"))}),t.headersSent)r.log.warn("response will send, but you shouldn't use res.writeHead in stream mode");else for(let i in r[ge])t.setHeader(i,r[ge][i]);e.pipe(t)}function Ko(e,t,r){if(r[xe]===null){t.end(null,null,null);return}let n=Object.keys(r[xe]),s={},i=0,o=!0;function a(){i===0&&(t.addTrailers(s),t.end(null,null,null))}for(let u of n){let c=function(d,p){i++,d?r.log.debug(d):s[u]=p,process.nextTick(a)};if(typeof r[xe][u]!="function")continue;o=!1,i--;let l=r[xe][u](r,e,c);typeof l=="object"&&typeof l.then=="function"&&l.then(d=>c(null,d),c)}o&&t.end(null,null,null)}function LL(e,t,r){r[xe]!==null&&e.on("end",()=>Ko(null,t,r))}function Bs(e,t,r){e[ne].onError!==null&&!e[hL]?(e[Tc]=!0,u_(e[ne].onError,e.request,e,t,()=>e_(e,t,r))):e_(e,t,r)}function jL(e){e[Us]=vc();let t=r=>{e[Rc]=vc(),e.raw.removeListener("finish",t),e.raw.removeListener("error",t);let n=e[ne];n&&n.onResponse!==null?mL(n.onResponse,e.request,e,i_):i_(r,e.request,e)};e.raw.on("finish",t),e.raw.on("error",t)}function i_(e,t,r){if(r.log[a_])return;let n=r.elapsedTime;if(e!=null){r.log.error({res:r,err:e,responseTime:n},"request errored");return}r.log.info({res:r,responseTime:n},"request completed")}function DL(e){let t=e.props.slice();function r(n,s,i){this.raw=n,this[Yo]=!1,this[o_]=!1,this[bc]=!1,this[ur]=null,this.request=s,this[ge]={},this[xe]=null,this[Us]=void 0,this[Rc]=void 0,this.log=i;let o;for(let a=0;a<t.length;a++)o=t[a],this[o.key]=o.value}return Object.setPrototypeOf(r.prototype,e.prototype),Object.setPrototypeOf(r,e),r.parent=e,r.props=t,r}function xL(e){if(e[ne][Q0]===null){e.log.warn("Trying to send a NotFound error inside a 404 handler. Sending basic 404 response."),e.code(404).send("404 Not Found");return}e.request[ne]=e[ne][Q0],e[ne].preHandler!==null?yL(e[ne].preHandler,e.request,e,Z0.preHandlerCallback):Z0.preHandlerCallback(null,e.request,e)}function d_(e,t,r,n){let s=SL(e,r,n);return s?s(t):JSON.stringify(t)}function h_(){}Qo.exports=pe;Qo.exports.buildReply=DL;Qo.exports.setupResponseListeners=jL});var p_=E((tK,ea)=>{"use strict";function Oc(e){if(!e)throw new TypeError("argument req is required");let t=e.headers["x-forwarded-for"],r=e.socket.remoteAddress;if(!t||typeof t!="string")return[r];if(t.indexOf(",")===-1){let n=t.trim();return n.length?[r,n]:[r]}else return FL(t,r)}function FL(e,t){let r=[t],n=e.length,s=n,i,o;for(o=n-1;o>=0;--o)i=e[o],i===" "?s===n&&(s=n=o):i===","?(s!==n&&r.push(e.slice(s,n)),s=n=o):s=o;return s!==n&&r.push(e.substring(s,n)),r}ea.exports=Oc;ea.exports.default=Oc;ea.exports.forwarded=Oc});var y_=E((m_,ta)=>{(function(e){"use strict";let t="(0?\\d+|0x[a-f0-9]+)",r={fourOctet:new RegExp(`^${t}\\.${t}\\.${t}\\.${t}$`,"i"),threeOctet:new RegExp(`^${t}\\.${t}\\.${t}$`,"i"),twoOctet:new RegExp(`^${t}\\.${t}$`,"i"),longValue:new RegExp(`^${t}$`,"i")},n=new RegExp("^0[0-7]+$","i"),s=new RegExp("^0x[a-f0-9]+$","i"),i="%[0-9a-z]{1,}",o="(?:[0-9a-f]+::?)+",a={zoneIndex:new RegExp(i,"i"),native:new RegExp(`^(::)?(${o})?([0-9a-f]+)?(::)?(${i})?$`,"i"),deprecatedTransitional:new RegExp(`^(?:::)(${t}\\.${t}\\.${t}\\.${t}(${i})?)$`,"i"),transitional:new RegExp(`^((?:${o})|(?:::)(?:${o})?)${t}\\.${t}\\.${t}\\.${t}(${i})?$`,"i")};function u(f,h){if(f.indexOf("::")!==f.lastIndexOf("::"))return null;let y=0,_=-1,S=(f.match(a.zoneIndex)||[])[0],v,g;for(S&&(S=S.substring(1),f=f.replace(/%.+$/,""));(_=f.indexOf(":",_+1))>=0;)y++;if(f.substr(0,2)==="::"&&y--,f.substr(-2,2)==="::"&&y--,y>h)return null;for(g=h-y,v=":";g--;)v+="0:";return f=f.replace("::",v),f[0]===":"&&(f=f.slice(1)),f[f.length-1]===":"&&(f=f.slice(0,-1)),h=function(){let m=f.split(":"),w=[];for(let T=0;T<m.length;T++)w.push(parseInt(m[T],16));return w}(),{parts:h,zoneId:S}}function c(f,h,y,_){if(f.length!==h.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");let S=0,v;for(;_>0;){if(v=y-_,v<0&&(v=0),f[S]>>v!==h[S]>>v)return!1;_-=y,S+=1}return!0}function l(f){if(s.test(f))return parseInt(f,16);if(f[0]==="0"&&!isNaN(parseInt(f[1],10))){if(n.test(f))return parseInt(f,8);throw new Error(`ipaddr: cannot parse ${f} as octal`)}return parseInt(f,10)}function d(f,h){for(;f.length<h;)f=`0${f}`;return f}let p={};p.IPv4=function(){function f(h){if(h.length!==4)throw new Error("ipaddr: ipv4 octet count should be 4");let y,_;for(y=0;y<h.length;y++)if(_=h[y],!(0<=_&&_<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=h}return f.prototype.SpecialRanges={unspecified:[[new f([0,0,0,0]),8]],broadcast:[[new f([255,255,255,255]),32]],multicast:[[new f([224,0,0,0]),4]],linkLocal:[[new f([169,254,0,0]),16]],loopback:[[new f([127,0,0,0]),8]],carrierGradeNat:[[new f([100,64,0,0]),10]],private:[[new f([10,0,0,0]),8],[new f([172,16,0,0]),12],[new f([192,168,0,0]),16]],reserved:[[new f([192,0,0,0]),24],[new f([192,0,2,0]),24],[new f([192,88,99,0]),24],[new f([198,18,0,0]),15],[new f([198,51,100,0]),24],[new f([203,0,113,0]),24],[new f([240,0,0,0]),4]],as112:[[new f([192,175,48,0]),24],[new f([192,31,196,0]),24]],amt:[[new f([192,52,193,0]),24]]},f.prototype.kind=function(){return"ipv4"},f.prototype.match=function(h,y){let _;if(y===void 0&&(_=h,h=_[0],y=_[1]),h.kind()!=="ipv4")throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return c(this.octets,h.octets,8,y)},f.prototype.prefixLengthFromSubnetMask=function(){let h=0,y=!1,_={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0},S,v,g;for(S=3;S>=0;S-=1)if(v=this.octets[S],v in _){if(g=_[v],y&&g!==0)return null;g!==8&&(y=!0),h+=g}else return null;return 32-h},f.prototype.range=function(){return p.subnetMatch(this,this.SpecialRanges)},f.prototype.toByteArray=function(){return this.octets.slice(0)},f.prototype.toIPv4MappedAddress=function(){return p.IPv6.parse(`::ffff:${this.toString()}`)},f.prototype.toNormalizedString=function(){return this.toString()},f.prototype.toString=function(){return this.octets.join(".")},f}(),p.IPv4.broadcastAddressFromCIDR=function(f){try{let h=this.parseCIDR(f),y=h[0].toByteArray(),_=this.subnetMaskFromPrefixLength(h[1]).toByteArray(),S=[],v=0;for(;v<4;)S.push(parseInt(y[v],10)|parseInt(_[v],10)^255),v++;return new this(S)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},p.IPv4.isIPv4=function(f){return this.parser(f)!==null},p.IPv4.isValid=function(f){try{return new this(this.parser(f)),!0}catch{return!1}},p.IPv4.isValidCIDR=function(f){try{return this.parseCIDR(f),!0}catch{return!1}},p.IPv4.isValidFourPartDecimal=function(f){return!!(p.IPv4.isValid(f)&&f.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},p.IPv4.networkAddressFromCIDR=function(f){let h,y,_,S,v;try{for(h=this.parseCIDR(f),_=h[0].toByteArray(),v=this.subnetMaskFromPrefixLength(h[1]).toByteArray(),S=[],y=0;y<4;)S.push(parseInt(_[y],10)&parseInt(v[y],10)),y++;return new this(S)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},p.IPv4.parse=function(f){let h=this.parser(f);if(h===null)throw new Error("ipaddr: string is not formatted like an IPv4 Address");return new this(h)},p.IPv4.parseCIDR=function(f){let h;if(h=f.match(/^(.+)\/(\d+)$/)){let y=parseInt(h[2]);if(y>=0&&y<=32){let _=[this.parse(h[1]),y];return Object.defineProperty(_,"toString",{value:function(){return this.join("/")}}),_}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},p.IPv4.parser=function(f){let h,y,_;if(h=f.match(r.fourOctet))return function(){let S=h.slice(1,6),v=[];for(let g=0;g<S.length;g++)y=S[g],v.push(l(y));return v}();if(h=f.match(r.longValue)){if(_=l(h[1]),_>4294967295||_<0)throw new Error("ipaddr: address outside defined range");return function(){let S=[],v;for(v=0;v<=24;v+=8)S.push(_>>v&255);return S}().reverse()}else return(h=f.match(r.twoOctet))?function(){let S=h.slice(1,4),v=[];if(_=l(S[1]),_>16777215||_<0)throw new Error("ipaddr: address outside defined range");return v.push(l(S[0])),v.push(_>>16&255),v.push(_>>8&255),v.push(_&255),v}():(h=f.match(r.threeOctet))?function(){let S=h.slice(1,5),v=[];if(_=l(S[2]),_>65535||_<0)throw new Error("ipaddr: address outside defined range");return v.push(l(S[0])),v.push(l(S[1])),v.push(_>>8&255),v.push(_&255),v}():null},p.IPv4.subnetMaskFromPrefixLength=function(f){if(f=parseInt(f),f<0||f>32)throw new Error("ipaddr: invalid IPv4 prefix length");let h=[0,0,0,0],y=0,_=Math.floor(f/8);for(;y<_;)h[y]=255,y++;return _<4&&(h[_]=Math.pow(2,f%8)-1<<8-f%8),new this(h)},p.IPv6=function(){function f(h,y){let _,S;if(h.length===16)for(this.parts=[],_=0;_<=14;_+=2)this.parts.push(h[_]<<8|h[_+1]);else if(h.length===8)this.parts=h;else throw new Error("ipaddr: ipv6 part count should be 8 or 16");for(_=0;_<this.parts.length;_++)if(S=this.parts[_],!(0<=S&&S<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");y&&(this.zoneId=y)}return f.prototype.SpecialRanges={unspecified:[new f([0,0,0,0,0,0,0,0]),128],linkLocal:[new f([65152,0,0,0,0,0,0,0]),10],multicast:[new f([65280,0,0,0,0,0,0,0]),8],loopback:[new f([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new f([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new f([0,0,0,0,0,65535,0,0]),96],discard:[new f([256,0,0,0,0,0,0,0]),64],rfc6145:[new f([0,0,0,0,65535,0,0,0]),96],rfc6052:[new f([100,65435,0,0,0,0,0,0]),96],"6to4":[new f([8194,0,0,0,0,0,0,0]),16],teredo:[new f([8193,0,0,0,0,0,0,0]),32],benchmarking:[new f([8193,2,0,0,0,0,0,0]),48],amt:[new f([8193,3,0,0,0,0,0,0]),32],as112v6:[[new f([8193,4,274,0,0,0,0,0]),48],[new f([9760,79,32768,0,0,0,0,0]),48]],deprecated:[new f([8193,16,0,0,0,0,0,0]),28],orchid2:[new f([8193,32,0,0,0,0,0,0]),28],droneRemoteIdProtocolEntityTags:[new f([8193,48,0,0,0,0,0,0]),28],reserved:[[new f([8193,0,0,0,0,0,0,0]),23],[new f([8193,3512,0,0,0,0,0,0]),32]]},f.prototype.isIPv4MappedAddress=function(){return this.range()==="ipv4Mapped"},f.prototype.kind=function(){return"ipv6"},f.prototype.match=function(h,y){let _;if(y===void 0&&(_=h,h=_[0],y=_[1]),h.kind()!=="ipv6")throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return c(this.parts,h.parts,16,y)},f.prototype.prefixLengthFromSubnetMask=function(){let h=0,y=!1,_={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0},S,v;for(let g=7;g>=0;g-=1)if(S=this.parts[g],S in _){if(v=_[S],y&&v!==0)return null;v!==16&&(y=!0),h+=v}else return null;return 128-h},f.prototype.range=function(){return p.subnetMatch(this,this.SpecialRanges)},f.prototype.toByteArray=function(){let h,y=[],_=this.parts;for(let S=0;S<_.length;S++)h=_[S],y.push(h>>8),y.push(h&255);return y},f.prototype.toFixedLengthString=function(){let h=function(){let _=[];for(let S=0;S<this.parts.length;S++)_.push(d(this.parts[S].toString(16),4));return _}.call(this).join(":"),y="";return this.zoneId&&(y=`%${this.zoneId}`),h+y},f.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");let h=this.parts.slice(-2),y=h[0],_=h[1];return new p.IPv4([y>>8,y&255,_>>8,_&255])},f.prototype.toNormalizedString=function(){let h=function(){let _=[];for(let S=0;S<this.parts.length;S++)_.push(this.parts[S].toString(16));return _}.call(this).join(":"),y="";return this.zoneId&&(y=`%${this.zoneId}`),h+y},f.prototype.toRFC5952String=function(){let h=/((^|:)(0(:|$)){2,})/g,y=this.toNormalizedString(),_=0,S=-1,v;for(;v=h.exec(y);)v[0].length>S&&(_=v.index,S=v[0].length);return S<0?y:`${y.substring(0,_)}::${y.substring(_+S)}`},f.prototype.toString=function(){return this.toRFC5952String()},f}(),p.IPv6.broadcastAddressFromCIDR=function(f){try{let h=this.parseCIDR(f),y=h[0].toByteArray(),_=this.subnetMaskFromPrefixLength(h[1]).toByteArray(),S=[],v=0;for(;v<16;)S.push(parseInt(y[v],10)|parseInt(_[v],10)^255),v++;return new this(S)}catch(h){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${h})`)}},p.IPv6.isIPv6=function(f){return this.parser(f)!==null},p.IPv6.isValid=function(f){if(typeof f=="string"&&f.indexOf(":")===-1)return!1;try{let h=this.parser(f);return new this(h.parts,h.zoneId),!0}catch{return!1}},p.IPv6.isValidCIDR=function(f){if(typeof f=="string"&&f.indexOf(":")===-1)return!1;try{return this.parseCIDR(f),!0}catch{return!1}},p.IPv6.networkAddressFromCIDR=function(f){let h,y,_,S,v;try{for(h=this.parseCIDR(f),_=h[0].toByteArray(),v=this.subnetMaskFromPrefixLength(h[1]).toByteArray(),S=[],y=0;y<16;)S.push(parseInt(_[y],10)&parseInt(v[y],10)),y++;return new this(S)}catch(g){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${g})`)}},p.IPv6.parse=function(f){let h=this.parser(f);if(h.parts===null)throw new Error("ipaddr: string is not formatted like an IPv6 Address");return new this(h.parts,h.zoneId)},p.IPv6.parseCIDR=function(f){let h,y,_;if((y=f.match(/^(.+)\/(\d+)$/))&&(h=parseInt(y[2]),h>=0&&h<=128))return _=[this.parse(y[1]),h],Object.defineProperty(_,"toString",{value:function(){return this.join("/")}}),_;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},p.IPv6.parser=function(f){let h,y,_,S,v,g;if(_=f.match(a.deprecatedTransitional))return this.parser(`::ffff:${_[1]}`);if(a.native.test(f))return u(f,8);if((_=f.match(a.transitional))&&(g=_[6]||"",h=_[1],_[1].endsWith("::")||(h=h.slice(0,-1)),h=u(h+g,6),h.parts)){for(v=[parseInt(_[2]),parseInt(_[3]),parseInt(_[4]),parseInt(_[5])],y=0;y<v.length;y++)if(S=v[y],!(0<=S&&S<=255))return null;return h.parts.push(v[0]<<8|v[1]),h.parts.push(v[2]<<8|v[3]),{parts:h.parts,zoneId:h.zoneId}}return null},p.IPv6.subnetMaskFromPrefixLength=function(f){if(f=parseInt(f),f<0||f>128)throw new Error("ipaddr: invalid IPv6 prefix length");let h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],y=0,_=Math.floor(f/8);for(;y<_;)h[y]=255,y++;return _<16&&(h[_]=Math.pow(2,f%8)-1<<8-f%8),new this(h)},p.fromByteArray=function(f){let h=f.length;if(h===4)return new p.IPv4(f);if(h===16)return new p.IPv6(f);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},p.isValid=function(f){return p.IPv6.isValid(f)||p.IPv4.isValid(f)},p.isValidCIDR=function(f){return p.IPv6.isValidCIDR(f)||p.IPv4.isValidCIDR(f)},p.parse=function(f){if(p.IPv6.isValid(f))return p.IPv6.parse(f);if(p.IPv4.isValid(f))return p.IPv4.parse(f);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},p.parseCIDR=function(f){try{return p.IPv6.parseCIDR(f)}catch{try{return p.IPv4.parseCIDR(f)}catch{throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},p.process=function(f){let h=this.parse(f);return h.kind()==="ipv6"&&h.isIPv4MappedAddress()?h.toIPv4Address():h},p.subnetMatch=function(f,h,y){let _,S,v,g;y==null&&(y="unicast");for(S in h)if(Object.prototype.hasOwnProperty.call(h,S)){for(v=h[S],v[0]&&!(v[0]instanceof Array)&&(v=[v]),_=0;_<v.length;_++)if(g=v[_],f.kind()===g[0].kind()&&f.match.apply(f,g))return S}return y},typeof ta<"u"&&ta.exports?ta.exports=p:e.ipaddr=p})(m_)});var v_=E((rK,Fn)=>{"use strict";Fn.exports=$c;Fn.exports.default=$c;Fn.exports.proxyaddr=$c;Fn.exports.all=S_;Fn.exports.compile=E_;var ML=p_(),__=y_(),HL=/^\d+$/u,ra=__.isValid,na=__.parse,g_={linklocal:["169.254.0.0/16","fe80::/10"],loopback:["127.0.0.1/8","::1/128"],uniquelocal:["10.0.0.0/8","172.16.0.0/12","192.168.0.0/16","fc00::/7"]};function S_(e,t){let r=ML(e);if(!t)return r;typeof t!="function"&&(t=E_(t));for(var n=0;n<r.length-1;n++)t(r[n],n)||(r.length=n+1);return r}function E_(e){if(!e)throw new TypeError("argument is required");let t;if(typeof e=="string")t=[e];else if(Array.isArray(e))t=e.slice();else throw new TypeError("unsupported trust argument");for(var r=0;r<t.length;r++)e=t[r],Object.prototype.hasOwnProperty.call(g_,e)&&(e=g_[e],t.splice.apply(t,[r,1].concat(e)),r+=e.length-1);return zL(VL(t))}function VL(e){let t=new Array(e.length);for(var r=0;r<e.length;r++)t[r]=UL(e[r]);return t}function zL(e){let t=e.length;return t===0?GL:t===1?KL(e[0]):JL(e)}function UL(e){let t=e.lastIndexOf("/"),r=t!==-1?e.substring(0,t):e;if(!ra(r))throw new TypeError("invalid IP address: "+r);let n=na(r);t===-1&&n.kind()==="ipv6"&&n.isIPv4MappedAddress()&&(n=n.toIPv4Address());let s=n.kind()==="ipv6"?128:32,i=t!==-1?e.substring(t+1,e.length):null;if(i===null?i=s:HL.test(i)?i=parseInt(i,10):n.kind()==="ipv4"&&ra(i)?i=BL(i):i=null,i<=0||i>s)throw new TypeError("invalid range on address: "+e);return[n,i]}function BL(e){let t=na(e);return t.kind()==="ipv4"?t.prefixLengthFromSubnetMask():null}function $c(e,t){if(!e)throw new TypeError("req argument is required");if(!t)throw new TypeError("trust argument is required");let r=S_(e,t);return r[r.length-1]}function GL(){return!1}function JL(e){return function(r){if(!ra(r))return!1;let n=na(r),s,i=n.kind();for(var o=0;o<e.length;o++){let a=e[o],u=a[0],c=u.kind(),l=a[1],d=n;if(i!==c){if(c==="ipv4"&&!n.isIPv4MappedAddress())continue;s||(s=c==="ipv4"?n.toIPv4Address():n.toIPv4MappedAddress()),d=s}if(d.match(u,l))return!0}return!1}}function KL(e){let t=e[0],r=t.kind(),n=r==="ipv4",s=e[1];return function(o){if(!ra(o))return!1;let a=na(o);if(a.kind()!==r){if(n&&!a.isIPv4MappedAddress())return!1;a=n?a.toIPv4Address():a.toIPv4MappedAddress()}return a.match(t,s)}}});var ia=E((nK,Ac)=>{"use strict";var sa=v_(),{kHasBeenDecorated:WL,kSchemaBody:YL,kSchemaHeaders:XL,kSchemaParams:QL,kSchemaQuerystring:b_,kSchemaController:Pc,kOptions:ZL,kRequestCacheValidateFns:Ir,kRouteContext:Ke,kRequestOriginalUrl:Ic}=De(),{FST_ERR_REQ_INVALID_VALIDATION_INVOCATION:ej,FST_ERR_DEC_UNDECLARED:tj}=Ve(),R_=zs(),w_={body:YL,headers:XL,params:QL,querystring:b_,query:b_};function Nc(e,t,r,n,s,i){this.id=e,this[Ke]=i,this.params=t,this.raw=r,this.query=n,this.log=s,this.body=void 0}Nc.props=[];function rj(e){if(typeof e=="function")return e;if(e===!0)return null;if(typeof e=="number")return function(t,r){return r<e};if(typeof e=="string"){let t=e.split(",").map(r=>r.trim());return sa.compile(t)}return sa.compile(e)}function nj(e,t){return t?sj(e,t):$_(e)}function $_(e){let t=e.props.slice();function r(n,s,i,o,a,u){this.id=n,this[Ke]=u,this.params=s,this.raw=i,this.query=o,this.log=a,this.body=void 0;let c;for(let l=0;l<t.length;l++)c=t[l],this[c.key]=c.value}return Object.setPrototypeOf(r.prototype,e.prototype),Object.setPrototypeOf(r,e),r.props=t,r.parent=e,r}function T_(e){let t=e.lastIndexOf(",");return t===-1?e.trim():e.slice(t+1).trim()}function sj(e,t){let r=$_(e),n=rj(t);return r[WL]=!0,Object.defineProperties(r.prototype,{ip:{get(){let s=sa.all(this.raw,n);return s[s.length-1]}},ips:{get(){return sa.all(this.raw,n)}},host:{get(){return this.ip!==void 0&&this.headers["x-forwarded-host"]?T_(this.headers["x-forwarded-host"]):this.headers.host??this.headers[":authority"]??""}},protocol:{get(){if(this.headers["x-forwarded-proto"])return T_(this.headers["x-forwarded-proto"]);if(this.socket)return this.socket.encrypted?"https":"http"}}}),r}function O_(e,t){if(!R_.hasKey(e,t)&&!R_.exist(e,t))throw new tj(t,"request")}Object.defineProperties(Nc.prototype,{server:{get(){return this[Ke].server}},url:{get(){return this.raw.url}},originalUrl:{get(){return this[Ic]||(this[Ic]=this.raw.originalUrl||this.raw.url),this[Ic]}},method:{get(){return this.raw.method}},routeOptions:{get(){let e=this[Ke],t=e._parserOptions.limit,r=e.server.initialConfig.bodyLimit,n=e.server.hasConstraintStrategy("version")?this.raw.headers["accept-version"]:void 0,s={method:e.config?.method,url:e.config?.url,bodyLimit:t||r,attachValidation:e.attachValidation,logLevel:e.logLevel,exposeHeadRoute:e.exposeHeadRoute,prefixTrailingSlash:e.prefixTrailingSlash,handler:e.handler,version:n};return Object.defineProperties(s,{config:{get:()=>e.config},schema:{get:()=>e.schema}}),Object.freeze(s)}},is404:{get(){return this[Ke].config?.url===void 0}},socket:{get(){return this.raw.socket}},ip:{get(){if(this.socket)return this.socket.remoteAddress}},host:{get(){return this.raw.headers.host??this.raw.headers[":authority"]??""}},hostname:{get(){return this.host.split(":",1)[0]}},port:{get(){let e=parseInt(this.host.split(":").slice(-1)[0]);if(!isNaN(e))return e;let t=this.headers.host??this.headers[":authority"]??"",r=parseInt(t.split(":").slice(-1)[0]);return isNaN(r)?null:r}},protocol:{get(){if(this.socket)return this.socket.encrypted?"https":"http"}},headers:{get(){return this.additionalHeaders?Object.assign({},this.raw.headers,this.additionalHeaders):this.raw.headers},set(e){this.additionalHeaders=e}},getValidationFunction:{value:function(e){if(typeof e=="string"){let t=w_[e];return this[Ke][t]}else if(typeof e=="object")return this[Ke][Ir]?.get(e)}},compileValidationSchema:{value:function(e,t=null){let{method:r,url:n}=this;if(this[Ke][Ir]?.has(e))return this[Ke][Ir].get(e);let i=(this[Ke].validatorCompiler||this.server[Pc].validatorCompiler||this.server[Pc].setupValidator(this.server[ZL])||this.server[Pc].validatorCompiler)({schema:e,method:r,url:n,httpPart:t});return this[Ke][Ir]==null&&(this[Ke][Ir]=new WeakMap),this[Ke][Ir].set(e,i),i}},validateInput:{value:function(e,t,r){r=typeof t=="string"?t:r;let n=r!=null&&typeof r=="string"&&w_[r],s;if(n&&(s=this[Ke][n]),s==null&&(t==null||typeof t!="object"||Array.isArray(t)))throw new ej(r);return s==null&&(this[Ke][Ir]?.has(t)?s=this[Ke][Ir].get(t):s=this.compileValidationSchema(t,r)),s(e)}},getDecorator:{value:function(e){O_(this,e);let t=this[e];return typeof t=="function"?t.bind(this):t}},setDecorator:{value:function(e,t){O_(this,e),this[e]=t}}});Ac.exports=Nc;Ac.exports.buildRequest=nj});var oa=E((sK,P_)=>{"use strict";var{kFourOhFourContext:ij,kReplySerializerDefault:oj,kSchemaErrorFormatter:aj,kErrorHandler:uj,kChildLoggerFactory:lj,kOptions:cj,kReply:fj,kRequest:dj,kBodyLimit:hj,kLogLevel:pj,kContentTypeParser:mj,kRouteByFastify:yj,kRequestCacheValidateFns:gj,kReplyCacheSerializeFns:_j}=De();function Sj({schema:e,handler:t,config:r,requestIdLogLabel:n,childLoggerFactory:s,errorHandler:i,bodyLimit:o,logLevel:a,logSerializers:u,attachValidation:c,validatorCompiler:l,serializerCompiler:d,replySerializer:p,schemaErrorFormatter:f,exposeHeadRoute:h,prefixTrailingSlash:y,server:_,isFastify:S}){this.schema=e,this.handler=t,this.Reply=_[fj],this.Request=_[dj],this.contentTypeParser=_[mj],this.onRequest=null,this.onSend=null,this.onError=null,this.onTimeout=null,this.preHandler=null,this.onResponse=null,this.preSerialization=null,this.onRequestAbort=null,this.config=r,this.errorHandler=i||_[uj],this.requestIdLogLabel=n||_[cj].requestIdLogLabel,this.childLoggerFactory=s||_[lj],this._middie=null,this._parserOptions={limit:o||_[hj]},this.exposeHeadRoute=h,this.prefixTrailingSlash=y,this.logLevel=a||_[pj],this.logSerializers=u,this[ij]=null,this.attachValidation=c,this[oj]=p,this.schemaErrorFormatter=f||_[aj]||Ej,this[yj]=S,this[gj]=null,this[_j]=null,this.validatorCompiler=l||null,this.serializerCompiler=d||null,this.server=_}function Ej(e,t){let r="",n=", ";for(let s=0;s!==e.length;++s){let i=e[s];r+=t+(i.instancePath||"")+" "+i.message+n}return new Error(r.slice(0,-n.length))}P_.exports=Sj});var N_=E(Gt=>{"use strict";var Cc=class{constructor(t=1e3,r=0){if(isNaN(t)||t<0)throw new Error("Invalid max value");if(isNaN(r)||r<0)throw new Error("Invalid ttl value");this.first=null,this.items=new Map,this.last=null,this.max=t,this.ttl=r}get size(){return this.items.size}clear(){this.items=new Map,this.first=null,this.last=null}delete(t){if(this.items.has(t)){let r=this.items.get(t);this.items.delete(t),r.prev!==null&&(r.prev.next=r.next),r.next!==null&&(r.next.prev=r.prev),this.first===r&&(this.first=r.next),this.last===r&&(this.last=r.prev)}}deleteMany(t){for(var r=0;r<t.length;r++)this.delete(t[r])}evict(){if(this.size>0){let t=this.first;this.items.delete(t.key),this.size===0?(this.first=null,this.last=null):(this.first=t.next,this.first.prev=null)}}expiresAt(t){if(this.items.has(t))return this.items.get(t).expiry}get(t){if(this.items.has(t)){let r=this.items.get(t);if(this.ttl>0&&r.expiry<=Date.now()){this.delete(t);return}return r.value}}getMany(t){let r=[];for(var n=0;n<t.length;n++)r.push(this.get(t[n]));return r}keys(){return this.items.keys()}set(t,r){if(this.items.has(t)){let s=this.items.get(t);s.value=r,s.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl;return}this.max>0&&this.size===this.max&&this.evict();let n={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:t,prev:this.last,next:null,value:r};this.items.set(t,n),this.size===1?this.first=n:this.last.next=n,this.last=n}},kc=class{constructor(t=1e3,r=0){if(isNaN(t)||t<0)throw new Error("Invalid max value");if(isNaN(r)||r<0)throw new Error("Invalid ttl value");this.first=null,this.items=new Map,this.last=null,this.max=t,this.ttl=r}get size(){return this.items.size}bumpLru(t){if(this.last===t)return;let r=this.last,n=t.next,s=t.prev;this.first===t&&(this.first=n),t.next=null,t.prev=r,r.next=t,s!==null&&(s.next=n),n!==null&&(n.prev=s),this.last=t}clear(){this.items=new Map,this.first=null,this.last=null}delete(t){if(this.items.has(t)){let r=this.items.get(t);this.items.delete(t),r.prev!==null&&(r.prev.next=r.next),r.next!==null&&(r.next.prev=r.prev),this.first===r&&(this.first=r.next),this.last===r&&(this.last=r.prev)}}deleteMany(t){for(var r=0;r<t.length;r++)this.delete(t[r])}evict(){if(this.size>0){let t=this.first;this.items.delete(t.key),this.size===0?(this.first=null,this.last=null):(this.first=t.next,this.first.prev=null)}}expiresAt(t){if(this.items.has(t))return this.items.get(t).expiry}get(t){if(this.items.has(t)){let r=this.items.get(t);if(this.ttl>0&&r.expiry<=Date.now()){this.delete(t);return}return this.bumpLru(r),r.value}}getMany(t){let r=[];for(var n=0;n<t.length;n++)r.push(this.get(t[n]));return r}keys(){return this.items.keys()}set(t,r){if(this.items.has(t)){let s=this.items.get(t);s.value=r,s.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl,this.last!==s&&this.bumpLru(s);return}this.max>0&&this.size===this.max&&this.evict();let n={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:t,prev:this.last,next:null,value:r};this.items.set(t,n),this.size===1?this.first=n:this.last.next=n,this.last=n}},Gs=class{constructor(t=1e3,r=0){if(isNaN(t)||t<0)throw new Error("Invalid max value");if(isNaN(r)||r<0)throw new Error("Invalid ttl value");this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this.max=t,this.ttl=r}bumpLru(t){if(this.last===t)return;let r=this.last,n=t.next,s=t.prev;this.first===t&&(this.first=n),t.next=null,t.prev=r,r.next=t,s!==null&&(s.next=n),n!==null&&(n.prev=s),this.last=t}clear(){this.items=Object.create(null),this.first=null,this.last=null,this.size=0}delete(t){if(Object.prototype.hasOwnProperty.call(this.items,t)){let r=this.items[t];delete this.items[t],this.size--,r.prev!==null&&(r.prev.next=r.next),r.next!==null&&(r.next.prev=r.prev),this.first===r&&(this.first=r.next),this.last===r&&(this.last=r.prev)}}deleteMany(t){for(var r=0;r<t.length;r++)this.delete(t[r])}evict(){if(this.size>0){let t=this.first;delete this.items[t.key],--this.size===0?(this.first=null,this.last=null):(this.first=t.next,this.first.prev=null)}}expiresAt(t){if(Object.prototype.hasOwnProperty.call(this.items,t))return this.items[t].expiry}get(t){if(Object.prototype.hasOwnProperty.call(this.items,t)){let r=this.items[t];if(this.ttl>0&&r.expiry<=Date.now()){this.delete(t);return}return this.bumpLru(r),r.value}}getMany(t){let r=[];for(var n=0;n<t.length;n++)r.push(this.get(t[n]));return r}keys(){return Object.keys(this.items)}set(t,r){if(Object.prototype.hasOwnProperty.call(this.items,t)){let s=this.items[t];s.value=r,s.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl,this.last!==s&&this.bumpLru(s);return}this.max>0&&this.size===this.max&&this.evict();let n={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:t,prev:this.last,next:null,value:r};this.items[t]=n,++this.size===1?this.first=n:this.last.next=n,this.last=n}},aa=class{constructor(){this.records={}}initForCache(t,r){this.records[t]={[r]:{cacheSize:0,hits:0,falsyHits:0,emptyHits:0,misses:0,expirations:0,evictions:0,invalidateOne:0,invalidateAll:0,sets:0}}}resetForCache(t){for(let r of Object.keys(this.records[t]))this.records[t][r]={cacheSize:0,hits:0,falsyHits:0,emptyHits:0,misses:0,expirations:0,evictions:0,invalidateOne:0,invalidateAll:0,sets:0}}getStatistics(){return this.records}};function I_(e){return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}`}var qc=class{constructor(t,r,n){this.cacheId=t,this.statisticTtlInHours=r,this.collectionStart=new Date,this.currentTimeStamp=I_(this.collectionStart),this.records=n||new aa,this.records.initForCache(this.cacheId,this.currentTimeStamp)}get currentRecord(){return this.records.records[this.cacheId][this.currentTimeStamp]||(this.records.records[this.cacheId][this.currentTimeStamp]={cacheSize:0,hits:0,falsyHits:0,emptyHits:0,misses:0,expirations:0,evictions:0,sets:0,invalidateOne:0,invalidateAll:0}),this.records.records[this.cacheId][this.currentTimeStamp]}hoursPassed(){return(Date.now()-this.collectionStart)/1e3/60/60}addHit(){this.archiveIfNeeded(),this.currentRecord.hits++}addFalsyHit(){this.archiveIfNeeded(),this.currentRecord.falsyHits++}addEmptyHit(){this.archiveIfNeeded(),this.currentRecord.emptyHits++}addMiss(){this.archiveIfNeeded(),this.currentRecord.misses++}addEviction(){this.archiveIfNeeded(),this.currentRecord.evictions++}setCacheSize(t){this.archiveIfNeeded(),this.currentRecord.cacheSize=t}addExpiration(){this.archiveIfNeeded(),this.currentRecord.expirations++}addSet(){this.archiveIfNeeded(),this.currentRecord.sets++}addInvalidateOne(){this.archiveIfNeeded(),this.currentRecord.invalidateOne++}addInvalidateAll(){this.archiveIfNeeded(),this.currentRecord.invalidateAll++}getStatistics(){return this.records.getStatistics()}archiveIfNeeded(){this.hoursPassed()>=this.statisticTtlInHours&&(this.collectionStart=new Date,this.currentTimeStamp=I_(this.collectionStart),this.records.initForCache(this.cacheId,this.currentTimeStamp))}},ua=class extends Gs{constructor(t,r,n,s,i){if(super(t||1e3,r||0),!n)throw new Error("Cache id is mandatory");this.hitStatistics=new qc(n,i!==void 0?i:24,s)}getStatistics(){return this.hitStatistics.getStatistics()}set(t,r){super.set(t,r),this.hitStatistics.addSet(),this.hitStatistics.setCacheSize(this.size)}evict(){super.evict(),this.hitStatistics.addEviction(),this.hitStatistics.setCacheSize(this.size)}delete(t,r=!1){super.delete(t),r||this.hitStatistics.addInvalidateOne(),this.hitStatistics.setCacheSize(this.size)}clear(){super.clear(),this.hitStatistics.addInvalidateAll(),this.hitStatistics.setCacheSize(this.size)}get(t){if(Object.prototype.hasOwnProperty.call(this.items,t)){let r=this.items[t];if(this.ttl>0&&r.expiry<=Date.now()){this.delete(t,!0),this.hitStatistics.addExpiration();return}return this.bumpLru(r),r.value||this.hitStatistics.addFalsyHit(),(r.value===void 0||r.value===null||r.value==="")&&this.hitStatistics.addEmptyHit(),this.hitStatistics.addHit(),r.value}this.hitStatistics.addMiss()}},la=class{constructor(t=1e3,r=0){if(isNaN(t)||t<0)throw new Error("Invalid max value");if(isNaN(r)||r<0)throw new Error("Invalid ttl value");this.first=null,this.items=Object.create(null),this.last=null,this.size=0,this.max=t,this.ttl=r}clear(){this.items=Object.create(null),this.first=null,this.last=null,this.size=0}delete(t){if(Object.prototype.hasOwnProperty.call(this.items,t)){let r=this.items[t];delete this.items[t],this.size--,r.prev!==null&&(r.prev.next=r.next),r.next!==null&&(r.next.prev=r.prev),this.first===r&&(this.first=r.next),this.last===r&&(this.last=r.prev)}}deleteMany(t){for(var r=0;r<t.length;r++)this.delete(t[r])}evict(){if(this.size>0){let t=this.first;delete this.items[t.key],--this.size===0?(this.first=null,this.last=null):(this.first=t.next,this.first.prev=null)}}expiresAt(t){if(Object.prototype.hasOwnProperty.call(this.items,t))return this.items[t].expiry}get(t){if(Object.prototype.hasOwnProperty.call(this.items,t)){let r=this.items[t];if(this.ttl>0&&r.expiry<=Date.now()){this.delete(t);return}return r.value}}getMany(t){let r=[];for(var n=0;n<t.length;n++)r.push(this.get(t[n]));return r}keys(){return Object.keys(this.items)}set(t,r){if(Object.prototype.hasOwnProperty.call(this.items,t)){let s=this.items[t];s.value=r,s.expiry=this.ttl>0?Date.now()+this.ttl:this.ttl;return}this.max>0&&this.size===this.max&&this.evict();let n={expiry:this.ttl>0?Date.now()+this.ttl:this.ttl,key:t,prev:this.last,next:null,value:r};this.items[t]=n,++this.size===1?this.first=n:this.last.next=n,this.last=n}};Gt.Fifo=la;Gt.FifoMap=Cc;Gt.FifoObject=la;Gt.HitStatisticsRecord=aa;Gt.Lru=Gs;Gt.LruHitStatistics=ua;Gt.LruMap=kc;Gt.LruObject=Gs;Gt.LruObjectHitStatistics=ua});var L_=E((oK,Mn)=>{"use strict";var vj=typeof Buffer<"u",A_=/"(?:_|\\u005[Ff])(?:_|\\u005[Ff])(?:p|\\u0070)(?:r|\\u0072)(?:o|\\u006[Ff])(?:t|\\u0074)(?:o|\\u006[Ff])(?:_|\\u005[Ff])(?:_|\\u005[Ff])"\s*:/,C_=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/;function k_(e,t,r){r==null&&t!==null&&typeof t=="object"&&(r=t,t=void 0),vj&&Buffer.isBuffer(e)&&(e=e.toString()),e&&e.charCodeAt(0)===65279&&(e=e.slice(1));let n=JSON.parse(e,t);if(n===null||typeof n!="object")return n;let s=r&&r.protoAction||"error",i=r&&r.constructorAction||"error";if(s==="ignore"&&i==="ignore")return n;if(s!=="ignore"&&i!=="ignore"){if(A_.test(e)===!1&&C_.test(e)===!1)return n}else if(s!=="ignore"&&i==="ignore"){if(A_.test(e)===!1)return n}else if(C_.test(e)===!1)return n;return q_(n,{protoAction:s,constructorAction:i,safe:r&&r.safe})}function q_(e,{protoAction:t="error",constructorAction:r="error",safe:n}={}){let s=[e];for(;s.length;){let i=s;s=[];for(let o of i){if(t!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"__proto__")){if(n===!0)return null;if(t==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.__proto__}if(r!=="ignore"&&Object.prototype.hasOwnProperty.call(o,"constructor")&&Object.prototype.hasOwnProperty.call(o.constructor,"prototype")){if(n===!0)return null;if(r==="error")throw new SyntaxError("Object contains forbidden prototype property");delete o.constructor}for(let a in o){let u=o[a];u&&typeof u=="object"&&s.push(u)}}}return e}function Lc(e,t,r){let{stackTraceLimit:n}=Error;Error.stackTraceLimit=0;try{return k_(e,t,r)}finally{Error.stackTraceLimit=n}}function bj(e,t){let{stackTraceLimit:r}=Error;Error.stackTraceLimit=0;try{return k_(e,t,{safe:!0})}catch{return}finally{Error.stackTraceLimit=r}}Mn.exports=Lc;Mn.exports.default=Lc;Mn.exports.parse=Lc;Mn.exports.safeParse=bj;Mn.exports.scan=q_});var Hc=E((aK,Ks)=>{"use strict";var{AsyncResource:Rj}=require("node:async_hooks"),{FifoMap:D_}=N_(),{parse:wj}=L_(),{kDefaultJsonParse:Js,kContentTypeParser:Hn,kBodyLimit:Tj,kRequestPayloadStream:x_,kState:Dc,kTestInternals:Oj,kReplyIsError:F_,kRouteContext:$j}=De(),{FST_ERR_CTP_INVALID_TYPE:xc,FST_ERR_CTP_EMPTY_TYPE:Pj,FST_ERR_CTP_ALREADY_PRESENT:Ij,FST_ERR_CTP_INVALID_HANDLER:Nj,FST_ERR_CTP_INVALID_PARSE_TYPE:Aj,FST_ERR_CTP_BODY_TOO_LARGE:j_,FST_ERR_CTP_INVALID_MEDIA_TYPE:Cj,FST_ERR_CTP_INVALID_CONTENT_LENGTH:kj,FST_ERR_CTP_EMPTY_JSON_BODY:qj,FST_ERR_CTP_INSTANCE_ALREADY_STARTED:Fc}=Ve(),{FSTSEC001:Lj}=mo();function lr(e,t,r){this[Js]=H_(t,r),this.customParsers=new Map,this.customParsers.set("application/json",new jc(!0,!1,e,this[Js])),this.customParsers.set("text/plain",new jc(!0,!1,e,Mc)),this.parserList=["application/json","text/plain"],this.parserRegExpList=[],this.cache=new D_(100)}lr.prototype.add=function(e,t,r){let n=typeof e=="string";if(n){if(e=e.trim().toLowerCase(),e.length===0)throw new Pj}else if(!(e instanceof RegExp))throw new xc;if(typeof r!="function")throw new Nj;if(this.existingParser(e))throw new Ij(e);if(t.parseAs!==void 0&&t.parseAs!=="string"&&t.parseAs!=="buffer")throw new Aj(t.parseAs);let s=new jc(t.parseAs==="string",t.parseAs==="buffer",t.bodyLimit,r);e==="*"?this.customParsers.set("",s):n?(this.parserList.unshift(e),this.customParsers.set(e,s)):(Hj(e),this.parserRegExpList.unshift(e),this.customParsers.set(e.toString(),s))};lr.prototype.hasParser=function(e){if(typeof e=="string")e=e.trim().toLowerCase();else{if(!(e instanceof RegExp))throw new xc;e=e.toString()}return this.customParsers.has(e)};lr.prototype.existingParser=function(e){return e==="application/json"&&this.customParsers.has(e)?this.customParsers.get(e).fn!==this[Js]:e==="text/plain"&&this.customParsers.has(e)?this.customParsers.get(e).fn!==Mc:this.hasParser(e)};lr.prototype.getParser=function(e){let t=this.customParsers.get(e);if(t!==void 0||(t=this.cache.get(e),t!==void 0))return t;let r=e.toLowerCase();for(let n=0;n!==this.parserList.length;++n){let s=this.parserList[n];if(r.slice(0,s.length)===s&&(r.length===s.length||r.charCodeAt(s.length)===59||r.charCodeAt(s.length)===32))return t=this.customParsers.get(s),this.cache.set(e,t),t}for(let n=0;n!==this.parserRegExpList.length;++n){let s=this.parserRegExpList[n];if(s.test(e))return t=this.customParsers.get(s.toString()),this.cache.set(e,t),t}return this.customParsers.get("")};lr.prototype.removeAll=function(){this.customParsers=new Map,this.parserRegExpList=[],this.parserList=[],this.cache=new D_(100)};lr.prototype.remove=function(e){let t;if(typeof e=="string")e=e.trim().toLowerCase(),t=this.parserList;else{if(!(e instanceof RegExp))throw new xc;e=e.toString(),t=this.parserRegExpList}let r=this.customParsers.delete(e),n=t.findIndex(s=>s.toString()===e);return n>-1&&t.splice(n,1),r||n>-1};lr.prototype.run=function(e,t,r,n){let s=this.getParser(e);if(s===void 0){r.is404?t(r,n):n.send(new Cj(e||void 0));return}let i=new Rj("content-type-parser:run",r);if(s.asString===!0||s.asBuffer===!0)M_(r,n,n[$j]._parserOptions,s,o);else{let a=s.fn(r,r[x_],o);a&&typeof a.then=="function"&&a.then(u=>o(null,u),o)}function o(a,u){i.runInAsyncScope(()=>{i.emitDestroy(),a?(n[F_]=!0,n.send(a)):(r.body=u,t(r,n))})}};function M_(e,t,r,n,s){let i=n.asString,o=r.limit===null?n.bodyLimit:r.limit,a=Number(e.headers["content-length"]);if(a>o){t.header("connection","close"),t.send(new j_);return}let u=0,c=i===!0?"":[],l=e[x_]||e.raw;i===!0&&l.setEncoding("utf8"),l.on("data",d),l.on("end",p),l.on("error",p),l.resume();function d(f){u+=f.length;let{receivedEncodedLength:h=0}=l;if(u>o||h>o){l.removeListener("data",d),l.removeListener("end",p),l.removeListener("error",p),t.send(new j_);return}i===!0?c+=f:c.push(f)}function p(f){if(l.removeListener("data",d),l.removeListener("end",p),l.removeListener("error",p),f!==void 0){typeof f.statusCode=="number"&&f.statusCode>=400||(f.statusCode=400),t[F_]=!0,t.code(f.statusCode).send(f);return}if(i===!0&&(u=Buffer.byteLength(c)),!Number.isNaN(a)&&(l.receivedEncodedLength||u)!==a){t.header("connection","close"),t.send(new kj);return}i===!1&&(c=Buffer.concat(c));let h=n.fn(e,c,s);h&&typeof h.then=="function"&&h.then(y=>s(null,y),s)}}function H_(e,t){return r;function r(n,s,i){if(s.length===0){i(new qj,void 0);return}try{i(null,wj(s,{protoAction:e,constructorAction:t}))}catch(o){o.statusCode=400,i(o,void 0)}}}function Mc(e,t,r){r(null,t)}function jc(e,t,r,n){this.asString=e,this.asBuffer=t,this.bodyLimit=r,this.fn=n}function jj(e){let t=new lr;return t[Js]=e[Js],t.customParsers=new Map(e.customParsers.entries()),t.parserList=e.parserList.slice(),t.parserRegExpList=e.parserRegExpList.slice(),t}function Dj(e,t,r){if(this[Dc].started)throw new Fc("addContentTypeParser");return typeof t=="function"&&(r=t,t={}),t||(t={}),t.bodyLimit||(t.bodyLimit=this[Tj]),Array.isArray(e)?e.forEach(n=>this[Hn].add(n,t,r)):this[Hn].add(e,t,r),this}function xj(e){return this[Hn].hasParser(e)}function Fj(e){if(this[Dc].started)throw new Fc("removeContentTypeParser");if(Array.isArray(e))for(let t of e)this[Hn].remove(t);else this[Hn].remove(e)}function Mj(){if(this[Dc].started)throw new Fc("removeAllContentTypeParsers");this[Hn].removeAll()}function Hj(e){e.source[0]!=="^"&&e.source.includes(";?")===!1&&Lj(e.source)}Ks.exports=lr;Ks.exports.helpers={buildContentTypeParser:jj,addContentTypeParser:Dj,hasContentTypeParser:xj,removeContentTypeParser:Fj,removeAllContentTypeParsers:Mj};Ks.exports.defaultParsers={getDefaultJsonParser:H_,defaultTextParser:Mc};Ks.exports[Oj]={rawBody:M_}});var ca=E(U_=>{var V_=Object.prototype.hasOwnProperty;function z_(e,t,r){for(r of e.keys())if(Ws(r,t))return r}function Ws(e,t){var r,n,s;if(e===t)return!0;if(e&&t&&(r=e.constructor)===t.constructor){if(r===Date)return e.getTime()===t.getTime();if(r===RegExp)return e.toString()===t.toString();if(r===Array){if((n=e.length)===t.length)for(;n--&&Ws(e[n],t[n]););return n===-1}if(r===Set){if(e.size!==t.size)return!1;for(n of e)if(s=n,s&&typeof s=="object"&&(s=z_(t,s),!s)||!t.has(s))return!1;return!0}if(r===Map){if(e.size!==t.size)return!1;for(n of e)if(s=n[0],s&&typeof s=="object"&&(s=z_(t,s),!s)||!Ws(n[1],t.get(s)))return!1;return!0}if(r===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(r===DataView){if((n=e.byteLength)===t.byteLength)for(;n--&&e.getInt8(n)===t.getInt8(n););return n===-1}if(ArrayBuffer.isView(e)){if((n=e.byteLength)===t.byteLength)for(;n--&&e[n]===t[n];);return n===-1}if(!r||typeof e=="object"){n=0;for(r in e)if(V_.call(e,r)&&++n&&!V_.call(t,r)||!(r in t)||!Ws(e[r],t[r]))return!1;return Object.keys(t).length===n}}return e!==e&&t!==t}U_.dequal=Ws});var K_=E((lK,J_)=>{"use strict";var{dequal:B_}=ca(),Vj=Symbol.for("json-schema-ref"),Vc=class{#e;#t;#n;#s;#i;constructor(t={}){this.#e={},this.#t={},this.#n=t.insertRefSymbol??!1,this.#s=t.allowEqualDuplicates??!0,this.#i=t.cloneSchemaWithoutRefs??!1}addSchema(t,r,n=!0){n&&(t.$id!==void 0&&t.$id.charAt(0)!=="#"?r=t.$id:this.#u(t,r));let s=t.$id;s!==void 0&&typeof s=="string"&&(s.charAt(0)==="#"?this.#c(t,r,s):(this.#u(t,s),r=s));let i=t.$ref;if(i!==void 0&&typeof i=="string"){let{refSchemaId:o,refJsonPointer:a}=this.#o(i,r);this.#e[r].refs.push({schemaId:o,jsonPointer:a})}for(let o in t)typeof t[o]=="object"&&t[o]!==null&&this.addSchema(t[o],r,!1)}getSchema(t,r="#"){let n=this.#e[t];if(n===void 0)throw new Error(`Cannot resolve ref "${t}${r}". Schema with id "${t}" is not found.`);return n.anchors[r]!==void 0?n.anchors[r]:G_(n.schema,r)}hasSchema(t){return this.#e[t]!==void 0}getSchemaRefs(t){let r=this.#e[t];if(r===void 0)throw new Error(`Schema with id "${t}" is not found.`);return r.refs}getSchemaDependencies(t,r={}){let n=this.#e[t];for(let s of n.refs){let i=s.schemaId;i===t||r[i]!==void 0||(r[i]=this.getSchema(i),this.getSchemaDependencies(i,r))}return r}derefSchema(t){if(this.#t[t]!==void 0)return;let r=this.#e[t];if(r===void 0)throw new Error(`Schema with id "${t}" is not found.`);!this.#i&&r.refs.length===0&&(this.#t[t]={schema:r.schema,anchors:r.anchors});let n=[];this.#r(r.schema,t,!0,n);let s=this.getSchemaDependencies(t);for(let i in s){let o=s[i];this.#r(o,i,!0,n)}for(let i of n){let{refSchemaId:o,refJsonPointer:a}=this.#o(i.ref,i.sourceSchemaId),u=this.getDerefSchema(o,a);if(u===null)throw new Error(`Cannot resolve ref "${i.ref}". Ref "${a}" is not found in schema "${o}".`);i.targetSchema=u,i.targetSchemaId=o}for(let i of n)this.#a(i,n)}getDerefSchema(t,r="#"){let n=this.#t[t];return n===void 0&&(this.derefSchema(t),n=this.#t[t]),n.anchors[r]!==void 0?n.anchors[r]:G_(n.schema,r)}#o(t,r){let n=t.indexOf("#");return n===-1?{refSchemaId:t,refJsonPointer:"#"}:n===0?{refSchemaId:r,refJsonPointer:t}:{refSchemaId:t.slice(0,n),refJsonPointer:t.slice(n)}}#r(t,r,n,s=[]){let i=Array.isArray(t)?[...t]:{...t};n&&(t.$id!==void 0&&t.$id.charAt(0)!=="#"?r=t.$id:this.#l(i,r));let o=i.$id;o!==void 0&&typeof o=="string"&&(o.charAt(0)==="#"?this.#f(i,r,o):(this.#l(i,o),r=o)),i.$ref!==void 0&&s.push({ref:i.$ref,sourceSchemaId:r,sourceSchema:i});for(let a in i){let u=i[a];typeof u=="object"&&u!==null&&(i[a]=this.#r(u,r,!1,s))}return i}#a(t,r){let{sourceSchema:n,targetSchema:s}=t;if(n.$ref){if(this.#n&&(n[Vj]=n.$ref),delete n.$ref,s.$ref){let i=r.find(o=>o.sourceSchema===s);this.#a(i,r)}for(let i in s)if(i!=="$id"){if(n[i]!==void 0){if(B_(n[i],s[i]))continue;throw new Error(`Cannot resolve ref "${t.ref}". Property "${i}" already exists in schema "${t.sourceSchemaId}".`)}n[i]=s[i]}t.isResolved=!0}}#u(t,r){let n=this.#e[r];if(n!==void 0){if(this.#s&&B_(t,n.schema))return;throw new Error(`There is already another schema with id "${r}".`)}this.#e[r]={schema:t,anchors:{},refs:[]}}#c(t,r,n){let{anchors:s}=this.#e[r];if(s[n]!==void 0)throw new Error(`There is already another anchor "${n}" in schema "${r}".`);s[n]=t}#l(t,r){this.#t[r]===void 0&&(this.#t[r]={schema:t,anchors:{}})}#f(t,r,n){let{anchors:s}=this.#t[r];s[n]=t}};function G_(e,t){let r=t.split("/"),n=e;for(let s of r)if(!(s===""||s==="#")){if(typeof n!="object"||n===null)return null;n=n[s]}return n??null}J_.exports={RefResolver:Vc}});var Vn=E(ue=>{"use strict";Object.defineProperty(ue,"__esModule",{value:!0});ue.regexpCode=ue.getEsmExportName=ue.getProperty=ue.safeStringify=ue.stringify=ue.strConcat=ue.addCodeArg=ue.str=ue._=ue.nil=ue._Code=ue.Name=ue.IDENTIFIER=ue._CodeOrName=void 0;var Ys=class{};ue._CodeOrName=Ys;ue.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;var nn=class extends Ys{constructor(t){if(super(),!ue.IDENTIFIER.test(t))throw new Error("CodeGen: name must be a valid identifier");this.str=t}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}};ue.Name=nn;var Et=class extends Ys{constructor(t){super(),this._items=typeof t=="string"?[t]:t}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;let t=this._items[0];return t===""||t==='""'}get str(){var t;return(t=this._str)!==null&&t!==void 0?t:this._str=this._items.reduce((r,n)=>`${r}${n}`,"")}get names(){var t;return(t=this._names)!==null&&t!==void 0?t:this._names=this._items.reduce((r,n)=>(n instanceof nn&&(r[n.str]=(r[n.str]||0)+1),r),{})}};ue._Code=Et;ue.nil=new Et("");function W_(e,...t){let r=[e[0]],n=0;for(;n<t.length;)Uc(r,t[n]),r.push(e[++n]);return new Et(r)}ue._=W_;var zc=new Et("+");function Y_(e,...t){let r=[Xs(e[0])],n=0;for(;n<t.length;)r.push(zc),Uc(r,t[n]),r.push(zc,Xs(e[++n]));return zj(r),new Et(r)}ue.str=Y_;function Uc(e,t){t instanceof Et?e.push(...t._items):t instanceof nn?e.push(t):e.push(Gj(t))}ue.addCodeArg=Uc;function zj(e){let t=1;for(;t<e.length-1;){if(e[t]===zc){let r=Uj(e[t-1],e[t+1]);if(r!==void 0){e.splice(t-1,3,r);continue}e[t++]="+"}t++}}function Uj(e,t){if(t==='""')return e;if(e==='""')return t;if(typeof e=="string")return t instanceof nn||e[e.length-1]!=='"'?void 0:typeof t!="string"?`${e.slice(0,-1)}${t}"`:t[0]==='"'?e.slice(0,-1)+t.slice(1):void 0;if(typeof t=="string"&&t[0]==='"'&&!(e instanceof nn))return`"${e}${t.slice(1)}`}function Bj(e,t){return t.emptyStr()?e:e.emptyStr()?t:Y_`${e}${t}`}ue.strConcat=Bj;function Gj(e){return typeof e=="number"||typeof e=="boolean"||e===null?e:Xs(Array.isArray(e)?e.join(","):e)}function Jj(e){return new Et(Xs(e))}ue.stringify=Jj;function Xs(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}ue.safeStringify=Xs;function Kj(e){return typeof e=="string"&&ue.IDENTIFIER.test(e)?new Et(`.${e}`):W_`[${e}]`}ue.getProperty=Kj;function Wj(e){if(typeof e=="string"&&ue.IDENTIFIER.test(e))return new Et(`${e}`);throw new Error(`CodeGen: invalid export name: ${e}, use explicit $id name mapping`)}ue.getEsmExportName=Wj;function Yj(e){return new Et(e.toString())}ue.regexpCode=Yj});var pa=E(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.ValueScope=ct.ValueScopeName=ct.Scope=ct.varKinds=ct.UsedValueState=void 0;var lt=Vn(),Bc=class extends Error{constructor(t){super(`CodeGen: "code" for ${t} not defined`),this.value=t.value}},fa;(function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"})(fa||(ct.UsedValueState=fa={}));ct.varKinds={const:new lt.Name("const"),let:new lt.Name("let"),var:new lt.Name("var")};var da=class{constructor({prefixes:t,parent:r}={}){this._names={},this._prefixes=t,this._parent=r}toName(t){return t instanceof lt.Name?t:this.name(t)}name(t){return new lt.Name(this._newName(t))}_newName(t){let r=this._names[t]||this._nameGroup(t);return`${t}${r.index++}`}_nameGroup(t){var r,n;if(!((n=(r=this._parent)===null||r===void 0?void 0:r._prefixes)===null||n===void 0)&&n.has(t)||this._prefixes&&!this._prefixes.has(t))throw new Error(`CodeGen: prefix "${t}" is not allowed in this scope`);return this._names[t]={prefix:t,index:0}}};ct.Scope=da;var ha=class extends lt.Name{constructor(t,r){super(r),this.prefix=t}setValue(t,{property:r,itemIndex:n}){this.value=t,this.scopePath=(0,lt._)`.${new lt.Name(r)}[${n}]`}};ct.ValueScopeName=ha;var Xj=(0,lt._)`\n`,Gc=class extends da{constructor(t){super(t),this._values={},this._scope=t.scope,this.opts={...t,_n:t.lines?Xj:lt.nil}}get(){return this._scope}name(t){return new ha(t,this._newName(t))}value(t,r){var n;if(r.ref===void 0)throw new Error("CodeGen: ref must be passed in value");let s=this.toName(t),{prefix:i}=s,o=(n=r.key)!==null&&n!==void 0?n:r.ref,a=this._values[i];if(a){let l=a.get(o);if(l)return l}else a=this._values[i]=new Map;a.set(o,s);let u=this._scope[i]||(this._scope[i]=[]),c=u.length;return u[c]=r.ref,s.setValue(r,{property:i,itemIndex:c}),s}getValue(t,r){let n=this._values[t];if(n)return n.get(r)}scopeRefs(t,r=this._values){return this._reduceValues(r,n=>{if(n.scopePath===void 0)throw new Error(`CodeGen: name "${n}" has no value`);return(0,lt._)`${t}${n.scopePath}`})}scopeCode(t=this._values,r,n){return this._reduceValues(t,s=>{if(s.value===void 0)throw new Error(`CodeGen: name "${s}" has no value`);return s.value.code},r,n)}_reduceValues(t,r,n={},s){let i=lt.nil;for(let o in t){let a=t[o];if(!a)continue;let u=n[o]=n[o]||new Map;a.forEach(c=>{if(u.has(c))return;u.set(c,fa.Started);let l=r(c);if(l){let d=this.opts.es5?ct.varKinds.var:ct.varKinds.const;i=(0,lt._)`${i}${d} ${c} = ${l};${this.opts._n}`}else if(l=s?.(c))i=(0,lt._)`${i}${l}${this.opts._n}`;else throw new Bc(c);u.set(c,fa.Completed)})}return i}};ct.ValueScope=Gc});var G=E(Z=>{"use strict";Object.defineProperty(Z,"__esModule",{value:!0});Z.or=Z.and=Z.not=Z.CodeGen=Z.operators=Z.varKinds=Z.ValueScopeName=Z.ValueScope=Z.Scope=Z.Name=Z.regexpCode=Z.stringify=Z.getProperty=Z.nil=Z.strConcat=Z.str=Z._=void 0;var oe=Vn(),qt=pa(),Nr=Vn();Object.defineProperty(Z,"_",{enumerable:!0,get:function(){return Nr._}});Object.defineProperty(Z,"str",{enumerable:!0,get:function(){return Nr.str}});Object.defineProperty(Z,"strConcat",{enumerable:!0,get:function(){return Nr.strConcat}});Object.defineProperty(Z,"nil",{enumerable:!0,get:function(){return Nr.nil}});Object.defineProperty(Z,"getProperty",{enumerable:!0,get:function(){return Nr.getProperty}});Object.defineProperty(Z,"stringify",{enumerable:!0,get:function(){return Nr.stringify}});Object.defineProperty(Z,"regexpCode",{enumerable:!0,get:function(){return Nr.regexpCode}});Object.defineProperty(Z,"Name",{enumerable:!0,get:function(){return Nr.Name}});var _a=pa();Object.defineProperty(Z,"Scope",{enumerable:!0,get:function(){return _a.Scope}});Object.defineProperty(Z,"ValueScope",{enumerable:!0,get:function(){return _a.ValueScope}});Object.defineProperty(Z,"ValueScopeName",{enumerable:!0,get:function(){return _a.ValueScopeName}});Object.defineProperty(Z,"varKinds",{enumerable:!0,get:function(){return _a.varKinds}});Z.operators={GT:new oe._Code(">"),GTE:new oe._Code(">="),LT:new oe._Code("<"),LTE:new oe._Code("<="),EQ:new oe._Code("==="),NEQ:new oe._Code("!=="),NOT:new oe._Code("!"),OR:new oe._Code("||"),AND:new oe._Code("&&"),ADD:new oe._Code("+")};var cr=class{optimizeNodes(){return this}optimizeNames(t,r){return this}},Jc=class extends cr{constructor(t,r,n){super(),this.varKind=t,this.name=r,this.rhs=n}render({es5:t,_n:r}){let n=t?qt.varKinds.var:this.varKind,s=this.rhs===void 0?"":` = ${this.rhs}`;return`${n} ${this.name}${s};`+r}optimizeNames(t,r){if(t[this.name.str])return this.rhs&&(this.rhs=Un(this.rhs,t,r)),this}get names(){return this.rhs instanceof oe._CodeOrName?this.rhs.names:{}}},ma=class extends cr{constructor(t,r,n){super(),this.lhs=t,this.rhs=r,this.sideEffects=n}render({_n:t}){return`${this.lhs} = ${this.rhs};`+t}optimizeNames(t,r){if(!(this.lhs instanceof oe.Name&&!t[this.lhs.str]&&!this.sideEffects))return this.rhs=Un(this.rhs,t,r),this}get names(){let t=this.lhs instanceof oe.Name?{}:{...this.lhs.names};return ga(t,this.rhs)}},Kc=class extends ma{constructor(t,r,n,s){super(t,n,s),this.op=r}render({_n:t}){return`${this.lhs} ${this.op}= ${this.rhs};`+t}},Wc=class extends cr{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`${this.label}:`+t}},Yc=class extends cr{constructor(t){super(),this.label=t,this.names={}}render({_n:t}){return`break${this.label?` ${this.label}`:""};`+t}},Xc=class extends cr{constructor(t){super(),this.error=t}render({_n:t}){return`throw ${this.error};`+t}get names(){return this.error.names}},Qc=class extends cr{constructor(t){super(),this.code=t}render({_n:t}){return`${this.code};`+t}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(t,r){return this.code=Un(this.code,t,r),this}get names(){return this.code instanceof oe._CodeOrName?this.code.names:{}}},Qs=class extends cr{constructor(t=[]){super(),this.nodes=t}render(t){return this.nodes.reduce((r,n)=>r+n.render(t),"")}optimizeNodes(){let{nodes:t}=this,r=t.length;for(;r--;){let n=t[r].optimizeNodes();Array.isArray(n)?t.splice(r,1,...n):n?t[r]=n:t.splice(r,1)}return t.length>0?this:void 0}optimizeNames(t,r){let{nodes:n}=this,s=n.length;for(;s--;){let i=n[s];i.optimizeNames(t,r)||(Qj(t,i.names),n.splice(s,1))}return n.length>0?this:void 0}get names(){return this.nodes.reduce((t,r)=>an(t,r.names),{})}},fr=class extends Qs{render(t){return"{"+t._n+super.render(t)+"}"+t._n}},Zc=class extends Qs{},zn=class extends fr{};zn.kind="else";var sn=class e extends fr{constructor(t,r){super(r),this.condition=t}render(t){let r=`if(${this.condition})`+super.render(t);return this.else&&(r+="else "+this.else.render(t)),r}optimizeNodes(){super.optimizeNodes();let t=this.condition;if(t===!0)return this.nodes;let r=this.else;if(r){let n=r.optimizeNodes();r=this.else=Array.isArray(n)?new zn(n):n}if(r)return t===!1?r instanceof e?r:r.nodes:this.nodes.length?this:new e(X_(t),r instanceof e?[r]:r.nodes);if(!(t===!1||!this.nodes.length))return this}optimizeNames(t,r){var n;if(this.else=(n=this.else)===null||n===void 0?void 0:n.optimizeNames(t,r),!!(super.optimizeNames(t,r)||this.else))return this.condition=Un(this.condition,t,r),this}get names(){let t=super.names;return ga(t,this.condition),this.else&&an(t,this.else.names),t}};sn.kind="if";var on=class extends fr{};on.kind="for";var ef=class extends on{constructor(t){super(),this.iteration=t}render(t){return`for(${this.iteration})`+super.render(t)}optimizeNames(t,r){if(super.optimizeNames(t,r))return this.iteration=Un(this.iteration,t,r),this}get names(){return an(super.names,this.iteration.names)}},tf=class extends on{constructor(t,r,n,s){super(),this.varKind=t,this.name=r,this.from=n,this.to=s}render(t){let r=t.es5?qt.varKinds.var:this.varKind,{name:n,from:s,to:i}=this;return`for(${r} ${n}=${s}; ${n}<${i}; ${n}++)`+super.render(t)}get names(){let t=ga(super.names,this.from);return ga(t,this.to)}},ya=class extends on{constructor(t,r,n,s){super(),this.loop=t,this.varKind=r,this.name=n,this.iterable=s}render(t){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(t)}optimizeNames(t,r){if(super.optimizeNames(t,r))return this.iterable=Un(this.iterable,t,r),this}get names(){return an(super.names,this.iterable.names)}},Zs=class extends fr{constructor(t,r,n){super(),this.name=t,this.args=r,this.async=n}render(t){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(t)}};Zs.kind="func";var ei=class extends Qs{render(t){return"return "+super.render(t)}};ei.kind="return";var rf=class extends fr{render(t){let r="try"+super.render(t);return this.catch&&(r+=this.catch.render(t)),this.finally&&(r+=this.finally.render(t)),r}optimizeNodes(){var t,r;return super.optimizeNodes(),(t=this.catch)===null||t===void 0||t.optimizeNodes(),(r=this.finally)===null||r===void 0||r.optimizeNodes(),this}optimizeNames(t,r){var n,s;return super.optimizeNames(t,r),(n=this.catch)===null||n===void 0||n.optimizeNames(t,r),(s=this.finally)===null||s===void 0||s.optimizeNames(t,r),this}get names(){let t=super.names;return this.catch&&an(t,this.catch.names),this.finally&&an(t,this.finally.names),t}},ti=class extends fr{constructor(t){super(),this.error=t}render(t){return`catch(${this.error})`+super.render(t)}};ti.kind="catch";var ri=class extends fr{render(t){return"finally"+super.render(t)}};ri.kind="finally";var nf=class{constructor(t,r={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...r,_n:r.lines?`
`:""},this._extScope=t,this._scope=new qt.Scope({parent:t}),this._nodes=[new Zc]}toString(){return this._root.render(this.opts)}name(t){return this._scope.name(t)}scopeName(t){return this._extScope.name(t)}scopeValue(t,r){let n=this._extScope.value(t,r);return(this._values[n.prefix]||(this._values[n.prefix]=new Set)).add(n),n}getScopeValue(t,r){return this._extScope.getValue(t,r)}scopeRefs(t){return this._extScope.scopeRefs(t,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(t,r,n,s){let i=this._scope.toName(r);return n!==void 0&&s&&(this._constants[i.str]=n),this._leafNode(new Jc(t,i,n)),i}const(t,r,n){return this._def(qt.varKinds.const,t,r,n)}let(t,r,n){return this._def(qt.varKinds.let,t,r,n)}var(t,r,n){return this._def(qt.varKinds.var,t,r,n)}assign(t,r,n){return this._leafNode(new ma(t,r,n))}add(t,r){return this._leafNode(new Kc(t,Z.operators.ADD,r))}code(t){return typeof t=="function"?t():t!==oe.nil&&this._leafNode(new Qc(t)),this}object(...t){let r=["{"];for(let[n,s]of t)r.length>1&&r.push(","),r.push(n),(n!==s||this.opts.es5)&&(r.push(":"),(0,oe.addCodeArg)(r,s));return r.push("}"),new oe._Code(r)}if(t,r,n){if(this._blockNode(new sn(t)),r&&n)this.code(r).else().code(n).endIf();else if(r)this.code(r).endIf();else if(n)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(t){return this._elseNode(new sn(t))}else(){return this._elseNode(new zn)}endIf(){return this._endBlockNode(sn,zn)}_for(t,r){return this._blockNode(t),r&&this.code(r).endFor(),this}for(t,r){return this._for(new ef(t),r)}forRange(t,r,n,s,i=this.opts.es5?qt.varKinds.var:qt.varKinds.let){let o=this._scope.toName(t);return this._for(new tf(i,o,r,n),()=>s(o))}forOf(t,r,n,s=qt.varKinds.const){let i=this._scope.toName(t);if(this.opts.es5){let o=r instanceof oe.Name?r:this.var("_arr",r);return this.forRange("_i",0,(0,oe._)`${o}.length`,a=>{this.var(i,(0,oe._)`${o}[${a}]`),n(i)})}return this._for(new ya("of",s,i,r),()=>n(i))}forIn(t,r,n,s=this.opts.es5?qt.varKinds.var:qt.varKinds.const){if(this.opts.ownProperties)return this.forOf(t,(0,oe._)`Object.keys(${r})`,n);let i=this._scope.toName(t);return this._for(new ya("in",s,i,r),()=>n(i))}endFor(){return this._endBlockNode(on)}label(t){return this._leafNode(new Wc(t))}break(t){return this._leafNode(new Yc(t))}return(t){let r=new ei;if(this._blockNode(r),this.code(t),r.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(ei)}try(t,r,n){if(!r&&!n)throw new Error('CodeGen: "try" without "catch" and "finally"');let s=new rf;if(this._blockNode(s),this.code(t),r){let i=this.name("e");this._currNode=s.catch=new ti(i),r(i)}return n&&(this._currNode=s.finally=new ri,this.code(n)),this._endBlockNode(ti,ri)}throw(t){return this._leafNode(new Xc(t))}block(t,r){return this._blockStarts.push(this._nodes.length),t&&this.code(t).endBlock(r),this}endBlock(t){let r=this._blockStarts.pop();if(r===void 0)throw new Error("CodeGen: not in self-balancing block");let n=this._nodes.length-r;if(n<0||t!==void 0&&n!==t)throw new Error(`CodeGen: wrong number of nodes: ${n} vs ${t} expected`);return this._nodes.length=r,this}func(t,r=oe.nil,n,s){return this._blockNode(new Zs(t,r,n)),s&&this.code(s).endFunc(),this}endFunc(){return this._endBlockNode(Zs)}optimize(t=1){for(;t-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(t){return this._currNode.nodes.push(t),this}_blockNode(t){this._currNode.nodes.push(t),this._nodes.push(t)}_endBlockNode(t,r){let n=this._currNode;if(n instanceof t||r&&n instanceof r)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${r?`${t.kind}/${r.kind}`:t.kind}"`)}_elseNode(t){let r=this._currNode;if(!(r instanceof sn))throw new Error('CodeGen: "else" without "if"');return this._currNode=r.else=t,this}get _root(){return this._nodes[0]}get _currNode(){let t=this._nodes;return t[t.length-1]}set _currNode(t){let r=this._nodes;r[r.length-1]=t}};Z.CodeGen=nf;function an(e,t){for(let r in t)e[r]=(e[r]||0)+(t[r]||0);return e}function ga(e,t){return t instanceof oe._CodeOrName?an(e,t.names):e}function Un(e,t,r){if(e instanceof oe.Name)return n(e);if(!s(e))return e;return new oe._Code(e._items.reduce((i,o)=>(o instanceof oe.Name&&(o=n(o)),o instanceof oe._Code?i.push(...o._items):i.push(o),i),[]));function n(i){let o=r[i.str];return o===void 0||t[i.str]!==1?i:(delete t[i.str],o)}function s(i){return i instanceof oe._Code&&i._items.some(o=>o instanceof oe.Name&&t[o.str]===1&&r[o.str]!==void 0)}}function Qj(e,t){for(let r in t)e[r]=(e[r]||0)-(t[r]||0)}function X_(e){return typeof e=="boolean"||typeof e=="number"||e===null?!e:(0,oe._)`!${sf(e)}`}Z.not=X_;var Zj=Q_(Z.operators.AND);function eD(...e){return e.reduce(Zj)}Z.and=eD;var tD=Q_(Z.operators.OR);function rD(...e){return e.reduce(tD)}Z.or=rD;function Q_(e){return(t,r)=>t===oe.nil?r:r===oe.nil?t:(0,oe._)`${sf(t)} ${e} ${sf(r)}`}function sf(e){return e instanceof oe.Name?e:(0,oe._)`(${e})`}});var X=E(te=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});te.checkStrictMode=te.getErrorPath=te.Type=te.useFunc=te.setEvaluated=te.evaluatedPropsToName=te.mergeEvaluated=te.eachItem=te.unescapeJsonPointer=te.escapeJsonPointer=te.escapeFragment=te.unescapeFragment=te.schemaRefOrVal=te.schemaHasRulesButRef=te.schemaHasRules=te.checkUnknownRules=te.alwaysValidSchema=te.toHash=void 0;var ye=G(),nD=Vn();function sD(e){let t={};for(let r of e)t[r]=!0;return t}te.toHash=sD;function iD(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(tS(e,t),!rS(t,e.self.RULES.all))}te.alwaysValidSchema=iD;function tS(e,t=e.schema){let{opts:r,self:n}=e;if(!r.strictSchema||typeof t=="boolean")return;let s=n.RULES.keywords;for(let i in t)s[i]||iS(e,`unknown keyword: "${i}"`)}te.checkUnknownRules=tS;function rS(e,t){if(typeof e=="boolean")return!e;for(let r in e)if(t[r])return!0;return!1}te.schemaHasRules=rS;function oD(e,t){if(typeof e=="boolean")return!e;for(let r in e)if(r!=="$ref"&&t.all[r])return!0;return!1}te.schemaHasRulesButRef=oD;function aD({topSchemaRef:e,schemaPath:t},r,n,s){if(!s){if(typeof r=="number"||typeof r=="boolean")return r;if(typeof r=="string")return(0,ye._)`${r}`}return(0,ye._)`${e}${t}${(0,ye.getProperty)(n)}`}te.schemaRefOrVal=aD;function uD(e){return nS(decodeURIComponent(e))}te.unescapeFragment=uD;function lD(e){return encodeURIComponent(af(e))}te.escapeFragment=lD;function af(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}te.escapeJsonPointer=af;function nS(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}te.unescapeJsonPointer=nS;function cD(e,t){if(Array.isArray(e))for(let r of e)t(r);else t(e)}te.eachItem=cD;function Z_({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:n}){return(s,i,o,a)=>{let u=o===void 0?i:o instanceof ye.Name?(i instanceof ye.Name?e(s,i,o):t(s,i,o),o):i instanceof ye.Name?(t(s,o,i),i):r(i,o);return a===ye.Name&&!(u instanceof ye.Name)?n(s,u):u}}te.mergeEvaluated={props:Z_({mergeNames:(e,t,r)=>e.if((0,ye._)`${r} !== true && ${t} !== undefined`,()=>{e.if((0,ye._)`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,(0,ye._)`${r} || {}`).code((0,ye._)`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if((0,ye._)`${r} !== true`,()=>{t===!0?e.assign(r,!0):(e.assign(r,(0,ye._)`${r} || {}`),uf(e,r,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:sS}),items:Z_({mergeNames:(e,t,r)=>e.if((0,ye._)`${r} !== true && ${t} !== undefined`,()=>e.assign(r,(0,ye._)`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if((0,ye._)`${r} !== true`,()=>e.assign(r,t===!0?!0:(0,ye._)`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function sS(e,t){if(t===!0)return e.var("props",!0);let r=e.var("props",(0,ye._)`{}`);return t!==void 0&&uf(e,r,t),r}te.evaluatedPropsToName=sS;function uf(e,t,r){Object.keys(r).forEach(n=>e.assign((0,ye._)`${t}${(0,ye.getProperty)(n)}`,!0))}te.setEvaluated=uf;var eS={};function fD(e,t){return e.scopeValue("func",{ref:t,code:eS[t.code]||(eS[t.code]=new nD._Code(t.code))})}te.useFunc=fD;var of;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(of||(te.Type=of={}));function dD(e,t,r){if(e instanceof ye.Name){let n=t===of.Num;return r?n?(0,ye._)`"[" + ${e} + "]"`:(0,ye._)`"['" + ${e} + "']"`:n?(0,ye._)`"/" + ${e}`:(0,ye._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,ye.getProperty)(e).toString():"/"+af(e)}te.getErrorPath=dD;function iS(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,r===!0)throw new Error(t);e.self.logger.warn(t)}}te.checkStrictMode=iS});var vt=E(lf=>{"use strict";Object.defineProperty(lf,"__esModule",{value:!0});var We=G(),hD={data:new We.Name("data"),valCxt:new We.Name("valCxt"),instancePath:new We.Name("instancePath"),parentData:new We.Name("parentData"),parentDataProperty:new We.Name("parentDataProperty"),rootData:new We.Name("rootData"),dynamicAnchors:new We.Name("dynamicAnchors"),vErrors:new We.Name("vErrors"),errors:new We.Name("errors"),this:new We.Name("this"),self:new We.Name("self"),scope:new We.Name("scope"),json:new We.Name("json"),jsonPos:new We.Name("jsonPos"),jsonLen:new We.Name("jsonLen"),jsonPart:new We.Name("jsonPart")};lf.default=hD});var ni=E(Ye=>{"use strict";Object.defineProperty(Ye,"__esModule",{value:!0});Ye.extendErrors=Ye.resetErrorsCount=Ye.reportExtraError=Ye.reportError=Ye.keyword$DataError=Ye.keywordError=void 0;var ae=G(),Sa=X(),tt=vt();Ye.keywordError={message:({keyword:e})=>(0,ae.str)`must pass "${e}" keyword validation`};Ye.keyword$DataError={message:({keyword:e,schemaType:t})=>t?(0,ae.str)`"${e}" keyword must be ${t} ($data)`:(0,ae.str)`"${e}" keyword is invalid ($data)`};function pD(e,t=Ye.keywordError,r,n){let{it:s}=e,{gen:i,compositeRule:o,allErrors:a}=s,u=uS(e,t,r);n??(o||a)?oS(i,u):aS(s,(0,ae._)`[${u}]`)}Ye.reportError=pD;function mD(e,t=Ye.keywordError,r){let{it:n}=e,{gen:s,compositeRule:i,allErrors:o}=n,a=uS(e,t,r);oS(s,a),i||o||aS(n,tt.default.vErrors)}Ye.reportExtraError=mD;function yD(e,t){e.assign(tt.default.errors,t),e.if((0,ae._)`${tt.default.vErrors} !== null`,()=>e.if(t,()=>e.assign((0,ae._)`${tt.default.vErrors}.length`,t),()=>e.assign(tt.default.vErrors,null)))}Ye.resetErrorsCount=yD;function gD({gen:e,keyword:t,schemaValue:r,data:n,errsCount:s,it:i}){if(s===void 0)throw new Error("ajv implementation error");let o=e.name("err");e.forRange("i",s,tt.default.errors,a=>{e.const(o,(0,ae._)`${tt.default.vErrors}[${a}]`),e.if((0,ae._)`${o}.instancePath === undefined`,()=>e.assign((0,ae._)`${o}.instancePath`,(0,ae.strConcat)(tt.default.instancePath,i.errorPath))),e.assign((0,ae._)`${o}.schemaPath`,(0,ae.str)`${i.errSchemaPath}/${t}`),i.opts.verbose&&(e.assign((0,ae._)`${o}.schema`,r),e.assign((0,ae._)`${o}.data`,n))})}Ye.extendErrors=gD;function oS(e,t){let r=e.const("err",t);e.if((0,ae._)`${tt.default.vErrors} === null`,()=>e.assign(tt.default.vErrors,(0,ae._)`[${r}]`),(0,ae._)`${tt.default.vErrors}.push(${r})`),e.code((0,ae._)`${tt.default.errors}++`)}function aS(e,t){let{gen:r,validateName:n,schemaEnv:s}=e;s.$async?r.throw((0,ae._)`new ${e.ValidationError}(${t})`):(r.assign((0,ae._)`${n}.errors`,t),r.return(!1))}var un={keyword:new ae.Name("keyword"),schemaPath:new ae.Name("schemaPath"),params:new ae.Name("params"),propertyName:new ae.Name("propertyName"),message:new ae.Name("message"),schema:new ae.Name("schema"),parentSchema:new ae.Name("parentSchema")};function uS(e,t,r){let{createErrors:n}=e.it;return n===!1?(0,ae._)`{}`:_D(e,t,r)}function _D(e,t,r={}){let{gen:n,it:s}=e,i=[SD(s,r),ED(e,r)];return vD(e,t,i),n.object(...i)}function SD({errorPath:e},{instancePath:t}){let r=t?(0,ae.str)`${e}${(0,Sa.getErrorPath)(t,Sa.Type.Str)}`:e;return[tt.default.instancePath,(0,ae.strConcat)(tt.default.instancePath,r)]}function ED({keyword:e,it:{errSchemaPath:t}},{schemaPath:r,parentSchema:n}){let s=n?t:(0,ae.str)`${t}/${e}`;return r&&(s=(0,ae.str)`${s}${(0,Sa.getErrorPath)(r,Sa.Type.Str)}`),[un.schemaPath,s]}function vD(e,{params:t,message:r},n){let{keyword:s,data:i,schemaValue:o,it:a}=e,{opts:u,propertyName:c,topSchemaRef:l,schemaPath:d}=a;n.push([un.keyword,s],[un.params,typeof t=="function"?t(e):t||(0,ae._)`{}`]),u.messages&&n.push([un.message,typeof r=="function"?r(e):r]),u.verbose&&n.push([un.schema,o],[un.parentSchema,(0,ae._)`${l}${d}`],[tt.default.data,i]),c&&n.push([un.propertyName,c])}});var cS=E(Bn=>{"use strict";Object.defineProperty(Bn,"__esModule",{value:!0});Bn.boolOrEmptySchema=Bn.topBoolOrEmptySchema=void 0;var bD=ni(),RD=G(),wD=vt(),TD={message:"boolean schema is false"};function OD(e){let{gen:t,schema:r,validateName:n}=e;r===!1?lS(e,!1):typeof r=="object"&&r.$async===!0?t.return(wD.default.data):(t.assign((0,RD._)`${n}.errors`,null),t.return(!0))}Bn.topBoolOrEmptySchema=OD;function $D(e,t){let{gen:r,schema:n}=e;n===!1?(r.var(t,!1),lS(e)):r.var(t,!0)}Bn.boolOrEmptySchema=$D;function lS(e,t){let{gen:r,data:n}=e,s={gen:r,keyword:"false schema",data:n,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,bD.reportError)(s,TD,void 0,t)}});var cf=E(Gn=>{"use strict";Object.defineProperty(Gn,"__esModule",{value:!0});Gn.getRules=Gn.isJSONType=void 0;var PD=["string","number","integer","boolean","null","object","array"],ID=new Set(PD);function ND(e){return typeof e=="string"&&ID.has(e)}Gn.isJSONType=ND;function AD(){let e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}Gn.getRules=AD});var ff=E(Ar=>{"use strict";Object.defineProperty(Ar,"__esModule",{value:!0});Ar.shouldUseRule=Ar.shouldUseGroup=Ar.schemaHasRulesForType=void 0;function CD({schema:e,self:t},r){let n=t.RULES.types[r];return n&&n!==!0&&fS(e,n)}Ar.schemaHasRulesForType=CD;function fS(e,t){return t.rules.some(r=>dS(e,r))}Ar.shouldUseGroup=fS;function dS(e,t){var r;return e[t.keyword]!==void 0||((r=t.definition.implements)===null||r===void 0?void 0:r.some(n=>e[n]!==void 0))}Ar.shouldUseRule=dS});var si=E(Xe=>{"use strict";Object.defineProperty(Xe,"__esModule",{value:!0});Xe.reportTypeError=Xe.checkDataTypes=Xe.checkDataType=Xe.coerceAndCheckDataType=Xe.getJSONTypes=Xe.getSchemaTypes=Xe.DataType=void 0;var kD=cf(),qD=ff(),LD=ni(),Y=G(),hS=X(),Jn;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(Jn||(Xe.DataType=Jn={}));function jD(e){let t=pS(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}Xe.getSchemaTypes=jD;function pS(e){let t=Array.isArray(e)?e:e?[e]:[];if(t.every(kD.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}Xe.getJSONTypes=pS;function DD(e,t){let{gen:r,data:n,opts:s}=e,i=xD(t,s.coerceTypes),o=t.length>0&&!(i.length===0&&t.length===1&&(0,qD.schemaHasRulesForType)(e,t[0]));if(o){let a=hf(t,n,s.strictNumbers,Jn.Wrong);r.if(a,()=>{i.length?FD(e,t,i):pf(e)})}return o}Xe.coerceAndCheckDataType=DD;var mS=new Set(["string","number","integer","boolean","null"]);function xD(e,t){return t?e.filter(r=>mS.has(r)||t==="array"&&r==="array"):[]}function FD(e,t,r){let{gen:n,data:s,opts:i}=e,o=n.let("dataType",(0,Y._)`typeof ${s}`),a=n.let("coerced",(0,Y._)`undefined`);i.coerceTypes==="array"&&n.if((0,Y._)`${o} == 'object' && Array.isArray(${s}) && ${s}.length == 1`,()=>n.assign(s,(0,Y._)`${s}[0]`).assign(o,(0,Y._)`typeof ${s}`).if(hf(t,s,i.strictNumbers),()=>n.assign(a,s))),n.if((0,Y._)`${a} !== undefined`);for(let c of r)(mS.has(c)||c==="array"&&i.coerceTypes==="array")&&u(c);n.else(),pf(e),n.endIf(),n.if((0,Y._)`${a} !== undefined`,()=>{n.assign(s,a),MD(e,a)});function u(c){switch(c){case"string":n.elseIf((0,Y._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,Y._)`"" + ${s}`).elseIf((0,Y._)`${s} === null`).assign(a,(0,Y._)`""`);return;case"number":n.elseIf((0,Y._)`${o} == "boolean" || ${s} === null
              || (${o} == "string" && ${s} && ${s} == +${s})`).assign(a,(0,Y._)`+${s}`);return;case"integer":n.elseIf((0,Y._)`${o} === "boolean" || ${s} === null
              || (${o} === "string" && ${s} && ${s} == +${s} && !(${s} % 1))`).assign(a,(0,Y._)`+${s}`);return;case"boolean":n.elseIf((0,Y._)`${s} === "false" || ${s} === 0 || ${s} === null`).assign(a,!1).elseIf((0,Y._)`${s} === "true" || ${s} === 1`).assign(a,!0);return;case"null":n.elseIf((0,Y._)`${s} === "" || ${s} === 0 || ${s} === false`),n.assign(a,null);return;case"array":n.elseIf((0,Y._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${s} === null`).assign(a,(0,Y._)`[${s}]`)}}}function MD({gen:e,parentData:t,parentDataProperty:r},n){e.if((0,Y._)`${t} !== undefined`,()=>e.assign((0,Y._)`${t}[${r}]`,n))}function df(e,t,r,n=Jn.Correct){let s=n===Jn.Correct?Y.operators.EQ:Y.operators.NEQ,i;switch(e){case"null":return(0,Y._)`${t} ${s} null`;case"array":i=(0,Y._)`Array.isArray(${t})`;break;case"object":i=(0,Y._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":i=o((0,Y._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":i=o();break;default:return(0,Y._)`typeof ${t} ${s} ${e}`}return n===Jn.Correct?i:(0,Y.not)(i);function o(a=Y.nil){return(0,Y.and)((0,Y._)`typeof ${t} == "number"`,a,r?(0,Y._)`isFinite(${t})`:Y.nil)}}Xe.checkDataType=df;function hf(e,t,r,n){if(e.length===1)return df(e[0],t,r,n);let s,i=(0,hS.toHash)(e);if(i.array&&i.object){let o=(0,Y._)`typeof ${t} != "object"`;s=i.null?o:(0,Y._)`!${t} || ${o}`,delete i.null,delete i.array,delete i.object}else s=Y.nil;i.number&&delete i.integer;for(let o in i)s=(0,Y.and)(s,df(o,t,r,n));return s}Xe.checkDataTypes=hf;var HD={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,Y._)`{type: ${e}}`:(0,Y._)`{type: ${t}}`};function pf(e){let t=VD(e);(0,LD.reportError)(t,HD)}Xe.reportTypeError=pf;function VD(e){let{gen:t,data:r,schema:n}=e,s=(0,hS.schemaRefOrVal)(e,n,"type");return{gen:t,keyword:"type",data:r,schema:n.type,schemaCode:s,schemaValue:s,parentSchema:n,params:{},it:e}}});var gS=E(Ea=>{"use strict";Object.defineProperty(Ea,"__esModule",{value:!0});Ea.assignDefaults=void 0;var Kn=G(),zD=X();function UD(e,t){let{properties:r,items:n}=e.schema;if(t==="object"&&r)for(let s in r)yS(e,s,r[s].default);else t==="array"&&Array.isArray(n)&&n.forEach((s,i)=>yS(e,i,s.default))}Ea.assignDefaults=UD;function yS(e,t,r){let{gen:n,compositeRule:s,data:i,opts:o}=e;if(r===void 0)return;let a=(0,Kn._)`${i}${(0,Kn.getProperty)(t)}`;if(s){(0,zD.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,Kn._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,Kn._)`${u} || ${a} === null || ${a} === ""`),n.if(u,(0,Kn._)`${a} = ${(0,Kn.stringify)(r)}`)}});var ze=E(me=>{"use strict";Object.defineProperty(me,"__esModule",{value:!0});me.validateUnion=me.validateArray=me.usePattern=me.callValidateCode=me.schemaProperties=me.allSchemaProperties=me.noPropertyInData=me.propertyInData=me.isOwnProperty=me.hasPropFunc=me.reportMissingProp=me.checkMissingProp=me.checkReportMissingProp=void 0;var Ee=G(),mf=X(),Cr=vt(),BD=X();function GD(e,t){let{gen:r,data:n,it:s}=e;r.if(gf(r,n,t,s.opts.ownProperties),()=>{e.setParams({missingProperty:(0,Ee._)`${t}`},!0),e.error()})}me.checkReportMissingProp=GD;function JD({gen:e,data:t,it:{opts:r}},n,s){return(0,Ee.or)(...n.map(i=>(0,Ee.and)(gf(e,t,i,r.ownProperties),(0,Ee._)`${s} = ${i}`)))}me.checkMissingProp=JD;function KD(e,t){e.setParams({missingProperty:t},!0),e.error()}me.reportMissingProp=KD;function _S(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,Ee._)`Object.prototype.hasOwnProperty`})}me.hasPropFunc=_S;function yf(e,t,r){return(0,Ee._)`${_S(e)}.call(${t}, ${r})`}me.isOwnProperty=yf;function WD(e,t,r,n){let s=(0,Ee._)`${t}${(0,Ee.getProperty)(r)} !== undefined`;return n?(0,Ee._)`${s} && ${yf(e,t,r)}`:s}me.propertyInData=WD;function gf(e,t,r,n){let s=(0,Ee._)`${t}${(0,Ee.getProperty)(r)} === undefined`;return n?(0,Ee.or)(s,(0,Ee.not)(yf(e,t,r))):s}me.noPropertyInData=gf;function SS(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}me.allSchemaProperties=SS;function YD(e,t){return SS(t).filter(r=>!(0,mf.alwaysValidSchema)(e,t[r]))}me.schemaProperties=YD;function XD({schemaCode:e,data:t,it:{gen:r,topSchemaRef:n,schemaPath:s,errorPath:i},it:o},a,u,c){let l=c?(0,Ee._)`${e}, ${t}, ${n}${s}`:t,d=[[Cr.default.instancePath,(0,Ee.strConcat)(Cr.default.instancePath,i)],[Cr.default.parentData,o.parentData],[Cr.default.parentDataProperty,o.parentDataProperty],[Cr.default.rootData,Cr.default.rootData]];o.opts.dynamicRef&&d.push([Cr.default.dynamicAnchors,Cr.default.dynamicAnchors]);let p=(0,Ee._)`${l}, ${r.object(...d)}`;return u!==Ee.nil?(0,Ee._)`${a}.call(${u}, ${p})`:(0,Ee._)`${a}(${p})`}me.callValidateCode=XD;var QD=(0,Ee._)`new RegExp`;function ZD({gen:e,it:{opts:t}},r){let n=t.unicodeRegExp?"u":"",{regExp:s}=t.code,i=s(r,n);return e.scopeValue("pattern",{key:i.toString(),ref:i,code:(0,Ee._)`${s.code==="new RegExp"?QD:(0,BD.useFunc)(e,s)}(${r}, ${n})`})}me.usePattern=ZD;function ex(e){let{gen:t,data:r,keyword:n,it:s}=e,i=t.name("valid");if(s.allErrors){let a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(i,!0),o(()=>t.break()),i;function o(a){let u=t.const("len",(0,Ee._)`${r}.length`);t.forRange("i",0,u,c=>{e.subschema({keyword:n,dataProp:c,dataPropType:mf.Type.Num},i),t.if((0,Ee.not)(i),a)})}}me.validateArray=ex;function tx(e){let{gen:t,schema:r,keyword:n,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(u=>(0,mf.alwaysValidSchema)(s,u))&&!s.opts.unevaluated)return;let o=t.let("valid",!1),a=t.name("_valid");t.block(()=>r.forEach((u,c)=>{let l=e.subschema({keyword:n,schemaProp:c,compositeRule:!0},a);t.assign(o,(0,Ee._)`${o} || ${a}`),e.mergeValidEvaluated(l,a)||t.if((0,Ee.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}me.validateUnion=tx});var bS=E(Jt=>{"use strict";Object.defineProperty(Jt,"__esModule",{value:!0});Jt.validateKeywordUsage=Jt.validSchemaType=Jt.funcKeywordCode=Jt.macroKeywordCode=void 0;var rt=G(),ln=vt(),rx=ze(),nx=ni();function sx(e,t){let{gen:r,keyword:n,schema:s,parentSchema:i,it:o}=e,a=t.macro.call(o.self,s,i,o),u=vS(r,n,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);let c=r.name("valid");e.subschema({schema:a,schemaPath:rt.nil,errSchemaPath:`${o.errSchemaPath}/${n}`,topSchemaRef:u,compositeRule:!0},c),e.pass(c,()=>e.error(!0))}Jt.macroKeywordCode=sx;function ix(e,t){var r;let{gen:n,keyword:s,schema:i,parentSchema:o,$data:a,it:u}=e;ax(u,t);let c=!a&&t.compile?t.compile.call(u.self,i,o,u):t.validate,l=vS(n,s,c),d=n.let("valid");e.block$data(d,p),e.ok((r=t.valid)!==null&&r!==void 0?r:d);function p(){if(t.errors===!1)y(),t.modifying&&ES(e),_(()=>e.error());else{let S=t.async?f():h();t.modifying&&ES(e),_(()=>ox(e,S))}}function f(){let S=n.let("ruleErrs",null);return n.try(()=>y((0,rt._)`await `),v=>n.assign(d,!1).if((0,rt._)`${v} instanceof ${u.ValidationError}`,()=>n.assign(S,(0,rt._)`${v}.errors`),()=>n.throw(v))),S}function h(){let S=(0,rt._)`${l}.errors`;return n.assign(S,null),y(rt.nil),S}function y(S=t.async?(0,rt._)`await `:rt.nil){let v=u.opts.passContext?ln.default.this:ln.default.self,g=!("compile"in t&&!a||t.schema===!1);n.assign(d,(0,rt._)`${S}${(0,rx.callValidateCode)(e,l,v,g)}`,t.modifying)}function _(S){var v;n.if((0,rt.not)((v=t.valid)!==null&&v!==void 0?v:d),S)}}Jt.funcKeywordCode=ix;function ES(e){let{gen:t,data:r,it:n}=e;t.if(n.parentData,()=>t.assign(r,(0,rt._)`${n.parentData}[${n.parentDataProperty}]`))}function ox(e,t){let{gen:r}=e;r.if((0,rt._)`Array.isArray(${t})`,()=>{r.assign(ln.default.vErrors,(0,rt._)`${ln.default.vErrors} === null ? ${t} : ${ln.default.vErrors}.concat(${t})`).assign(ln.default.errors,(0,rt._)`${ln.default.vErrors}.length`),(0,nx.extendErrors)(e)},()=>e.error())}function ax({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function vS(e,t,r){if(r===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof r=="function"?{ref:r}:{ref:r,code:(0,rt.stringify)(r)})}function ux(e,t,r=!1){return!t.length||t.some(n=>n==="array"?Array.isArray(e):n==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==n||r&&typeof e>"u")}Jt.validSchemaType=ux;function lx({schema:e,opts:t,self:r,errSchemaPath:n},s,i){if(Array.isArray(s.keyword)?!s.keyword.includes(i):s.keyword!==i)throw new Error("ajv implementation error");let o=s.dependencies;if(o?.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${i}: ${o.join(",")}`);if(s.validateSchema&&!s.validateSchema(e[i])){let u=`keyword "${i}" value is invalid at path "${n}": `+r.errorsText(s.validateSchema.errors);if(t.validateSchema==="log")r.logger.error(u);else throw new Error(u)}}Jt.validateKeywordUsage=lx});var wS=E(kr=>{"use strict";Object.defineProperty(kr,"__esModule",{value:!0});kr.extendSubschemaMode=kr.extendSubschemaData=kr.getSubschema=void 0;var Kt=G(),RS=X();function cx(e,{keyword:t,schemaProp:r,schema:n,schemaPath:s,errSchemaPath:i,topSchemaRef:o}){if(t!==void 0&&n!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){let a=e.schema[t];return r===void 0?{schema:a,schemaPath:(0,Kt._)`${e.schemaPath}${(0,Kt.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[r],schemaPath:(0,Kt._)`${e.schemaPath}${(0,Kt.getProperty)(t)}${(0,Kt.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,RS.escapeFragment)(r)}`}}if(n!==void 0){if(s===void 0||i===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:n,schemaPath:s,topSchemaRef:o,errSchemaPath:i}}throw new Error('either "keyword" or "schema" must be passed')}kr.getSubschema=cx;function fx(e,t,{dataProp:r,dataPropType:n,data:s,dataTypes:i,propertyName:o}){if(s!==void 0&&r!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');let{gen:a}=t;if(r!==void 0){let{errorPath:c,dataPathArr:l,opts:d}=t,p=a.let("data",(0,Kt._)`${t.data}${(0,Kt.getProperty)(r)}`,!0);u(p),e.errorPath=(0,Kt.str)`${c}${(0,RS.getErrorPath)(r,n,d.jsPropertySyntax)}`,e.parentDataProperty=(0,Kt._)`${r}`,e.dataPathArr=[...l,e.parentDataProperty]}if(s!==void 0){let c=s instanceof Kt.Name?s:a.let("data",s,!0);u(c),o!==void 0&&(e.propertyName=o)}i&&(e.dataTypes=i);function u(c){e.data=c,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,c]}}kr.extendSubschemaData=fx;function dx(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:s,allErrors:i}){n!==void 0&&(e.compositeRule=n),s!==void 0&&(e.createErrors=s),i!==void 0&&(e.allErrors=i),e.jtdDiscriminator=t,e.jtdMetadata=r}kr.extendSubschemaMode=dx});var ii=E((wK,TS)=>{"use strict";TS.exports=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,s,i;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(s=n;s--!==0;)if(!e(t[s],r[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(i=Object.keys(t),n=i.length,n!==Object.keys(r).length)return!1;for(s=n;s--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[s]))return!1;for(s=n;s--!==0;){var o=i[s];if(!e(t[o],r[o]))return!1}return!0}return t!==t&&r!==r}});var $S=E((TK,OS)=>{"use strict";var qr=OS.exports=function(e,t,r){typeof t=="function"&&(r=t,t={}),r=t.cb||r;var n=typeof r=="function"?r:r.pre||function(){},s=r.post||function(){};va(t,n,s,e,"",e)};qr.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};qr.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};qr.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};qr.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function va(e,t,r,n,s,i,o,a,u,c){if(n&&typeof n=="object"&&!Array.isArray(n)){t(n,s,i,o,a,u,c);for(var l in n){var d=n[l];if(Array.isArray(d)){if(l in qr.arrayKeywords)for(var p=0;p<d.length;p++)va(e,t,r,d[p],s+"/"+l+"/"+p,i,s,l,n,p)}else if(l in qr.propsKeywords){if(d&&typeof d=="object")for(var f in d)va(e,t,r,d[f],s+"/"+l+"/"+hx(f),i,s,l,n,f)}else(l in qr.keywords||e.allKeys&&!(l in qr.skipKeywords))&&va(e,t,r,d,s+"/"+l,i,s,l,n)}r(n,s,i,o,a,u,c)}}function hx(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}});var oi=E(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});ft.getSchemaRefs=ft.resolveUrl=ft.normalizeId=ft._getFullPath=ft.getFullPath=ft.inlineRef=void 0;var px=X(),mx=ii(),yx=$S(),gx=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function _x(e,t=!0){return typeof e=="boolean"?!0:t===!0?!_f(e):t?PS(e)<=t:!1}ft.inlineRef=_x;var Sx=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function _f(e){for(let t in e){if(Sx.has(t))return!0;let r=e[t];if(Array.isArray(r)&&r.some(_f)||typeof r=="object"&&_f(r))return!0}return!1}function PS(e){let t=0;for(let r in e){if(r==="$ref")return 1/0;if(t++,!gx.has(r)&&(typeof e[r]=="object"&&(0,px.eachItem)(e[r],n=>t+=PS(n)),t===1/0))return 1/0}return t}function IS(e,t="",r){r!==!1&&(t=Wn(t));let n=e.parse(t);return NS(e,n)}ft.getFullPath=IS;function NS(e,t){return e.serialize(t).split("#")[0]+"#"}ft._getFullPath=NS;var Ex=/#\/?$/;function Wn(e){return e?e.replace(Ex,""):""}ft.normalizeId=Wn;function vx(e,t,r){return r=Wn(r),e.resolve(t,r)}ft.resolveUrl=vx;var bx=/^[a-z_][-a-z0-9._]*$/i;function Rx(e,t){if(typeof e=="boolean")return{};let{schemaId:r,uriResolver:n}=this.opts,s=Wn(e[r]||t),i={"":s},o=IS(n,s,!1),a={},u=new Set;return yx(e,{allKeys:!0},(d,p,f,h)=>{if(h===void 0)return;let y=o+p,_=i[h];typeof d[r]=="string"&&(_=S.call(this,d[r])),v.call(this,d.$anchor),v.call(this,d.$dynamicAnchor),i[p]=_;function S(g){let m=this.opts.uriResolver.resolve;if(g=Wn(_?m(_,g):g),u.has(g))throw l(g);u.add(g);let w=this.refs[g];return typeof w=="string"&&(w=this.refs[w]),typeof w=="object"?c(d,w.schema,g):g!==Wn(y)&&(g[0]==="#"?(c(d,a[g],g),a[g]=d):this.refs[g]=y),g}function v(g){if(typeof g=="string"){if(!bx.test(g))throw new Error(`invalid anchor "${g}"`);S.call(this,`#${g}`)}}}),a;function c(d,p,f){if(p!==void 0&&!mx(d,p))throw l(f)}function l(d){return new Error(`reference "${d}" resolves to more than one schema`)}}ft.getSchemaRefs=Rx});var Yn=E(Lr=>{"use strict";Object.defineProperty(Lr,"__esModule",{value:!0});Lr.getData=Lr.KeywordCxt=Lr.validateFunctionCode=void 0;var LS=cS(),AS=si(),Ef=ff(),ba=si(),wx=gS(),ui=bS(),Sf=wS(),U=G(),K=vt(),Tx=oi(),dr=X(),ai=ni();function Ox(e){if(xS(e)&&(FS(e),DS(e))){Ix(e);return}jS(e,()=>(0,LS.topBoolOrEmptySchema)(e))}Lr.validateFunctionCode=Ox;function jS({gen:e,validateName:t,schema:r,schemaEnv:n,opts:s},i){s.code.es5?e.func(t,(0,U._)`${K.default.data}, ${K.default.valCxt}`,n.$async,()=>{e.code((0,U._)`"use strict"; ${CS(r,s)}`),Px(e,s),e.code(i)}):e.func(t,(0,U._)`${K.default.data}, ${$x(s)}`,n.$async,()=>e.code(CS(r,s)).code(i))}function $x(e){return(0,U._)`{${K.default.instancePath}="", ${K.default.parentData}, ${K.default.parentDataProperty}, ${K.default.rootData}=${K.default.data}${e.dynamicRef?(0,U._)`, ${K.default.dynamicAnchors}={}`:U.nil}}={}`}function Px(e,t){e.if(K.default.valCxt,()=>{e.var(K.default.instancePath,(0,U._)`${K.default.valCxt}.${K.default.instancePath}`),e.var(K.default.parentData,(0,U._)`${K.default.valCxt}.${K.default.parentData}`),e.var(K.default.parentDataProperty,(0,U._)`${K.default.valCxt}.${K.default.parentDataProperty}`),e.var(K.default.rootData,(0,U._)`${K.default.valCxt}.${K.default.rootData}`),t.dynamicRef&&e.var(K.default.dynamicAnchors,(0,U._)`${K.default.valCxt}.${K.default.dynamicAnchors}`)},()=>{e.var(K.default.instancePath,(0,U._)`""`),e.var(K.default.parentData,(0,U._)`undefined`),e.var(K.default.parentDataProperty,(0,U._)`undefined`),e.var(K.default.rootData,K.default.data),t.dynamicRef&&e.var(K.default.dynamicAnchors,(0,U._)`{}`)})}function Ix(e){let{schema:t,opts:r,gen:n}=e;jS(e,()=>{r.$comment&&t.$comment&&HS(e),qx(e),n.let(K.default.vErrors,null),n.let(K.default.errors,0),r.unevaluated&&Nx(e),MS(e),Dx(e)})}function Nx(e){let{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",(0,U._)`${r}.evaluated`),t.if((0,U._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,U._)`${e.evaluated}.props`,(0,U._)`undefined`)),t.if((0,U._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,U._)`${e.evaluated}.items`,(0,U._)`undefined`))}function CS(e,t){let r=typeof e=="object"&&e[t.schemaId];return r&&(t.code.source||t.code.process)?(0,U._)`/*# sourceURL=${r} */`:U.nil}function Ax(e,t){if(xS(e)&&(FS(e),DS(e))){Cx(e,t);return}(0,LS.boolOrEmptySchema)(e,t)}function DS({schema:e,self:t}){if(typeof e=="boolean")return!e;for(let r in e)if(t.RULES.all[r])return!0;return!1}function xS(e){return typeof e.schema!="boolean"}function Cx(e,t){let{schema:r,gen:n,opts:s}=e;s.$comment&&r.$comment&&HS(e),Lx(e),jx(e);let i=n.const("_errs",K.default.errors);MS(e,i),n.var(t,(0,U._)`${i} === ${K.default.errors}`)}function FS(e){(0,dr.checkUnknownRules)(e),kx(e)}function MS(e,t){if(e.opts.jtd)return kS(e,[],!1,t);let r=(0,AS.getSchemaTypes)(e.schema),n=(0,AS.coerceAndCheckDataType)(e,r);kS(e,r,!n,t)}function kx(e){let{schema:t,errSchemaPath:r,opts:n,self:s}=e;t.$ref&&n.ignoreKeywordsWithRef&&(0,dr.schemaHasRulesButRef)(t,s.RULES)&&s.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}function qx(e){let{schema:t,opts:r}=e;t.default!==void 0&&r.useDefaults&&r.strictSchema&&(0,dr.checkStrictMode)(e,"default is ignored in the schema root")}function Lx(e){let t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,Tx.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function jx(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function HS({gen:e,schemaEnv:t,schema:r,errSchemaPath:n,opts:s}){let i=r.$comment;if(s.$comment===!0)e.code((0,U._)`${K.default.self}.logger.log(${i})`);else if(typeof s.$comment=="function"){let o=(0,U.str)`${n}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,U._)`${K.default.self}.opts.$comment(${i}, ${o}, ${a}.schema)`)}}function Dx(e){let{gen:t,schemaEnv:r,validateName:n,ValidationError:s,opts:i}=e;r.$async?t.if((0,U._)`${K.default.errors} === 0`,()=>t.return(K.default.data),()=>t.throw((0,U._)`new ${s}(${K.default.vErrors})`)):(t.assign((0,U._)`${n}.errors`,K.default.vErrors),i.unevaluated&&xx(e),t.return((0,U._)`${K.default.errors} === 0`))}function xx({gen:e,evaluated:t,props:r,items:n}){r instanceof U.Name&&e.assign((0,U._)`${t}.props`,r),n instanceof U.Name&&e.assign((0,U._)`${t}.items`,n)}function kS(e,t,r,n){let{gen:s,schema:i,data:o,allErrors:a,opts:u,self:c}=e,{RULES:l}=c;if(i.$ref&&(u.ignoreKeywordsWithRef||!(0,dr.schemaHasRulesButRef)(i,l))){s.block(()=>zS(e,"$ref",l.all.$ref.definition));return}u.jtd||Fx(e,t),s.block(()=>{for(let p of l.rules)d(p);d(l.post)});function d(p){(0,Ef.shouldUseGroup)(i,p)&&(p.type?(s.if((0,ba.checkDataType)(p.type,o,u.strictNumbers)),qS(e,p),t.length===1&&t[0]===p.type&&r&&(s.else(),(0,ba.reportTypeError)(e)),s.endIf()):qS(e,p),a||s.if((0,U._)`${K.default.errors} === ${n||0}`))}}function qS(e,t){let{gen:r,schema:n,opts:{useDefaults:s}}=e;s&&(0,wx.assignDefaults)(e,t.type),r.block(()=>{for(let i of t.rules)(0,Ef.shouldUseRule)(n,i)&&zS(e,i.keyword,i.definition,t.type)})}function Fx(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(Mx(e,t),e.opts.allowUnionTypes||Hx(e,t),Vx(e,e.dataTypes))}function Mx(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(r=>{VS(e.dataTypes,r)||vf(e,`type "${r}" not allowed by context "${e.dataTypes.join(",")}"`)}),Ux(e,t)}}function Hx(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&vf(e,"use allowUnionTypes to allow union type keyword")}function Vx(e,t){let r=e.self.RULES.all;for(let n in r){let s=r[n];if(typeof s=="object"&&(0,Ef.shouldUseRule)(e.schema,s)){let{type:i}=s.definition;i.length&&!i.some(o=>zx(t,o))&&vf(e,`missing type "${i.join(",")}" for keyword "${n}"`)}}}function zx(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function VS(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function Ux(e,t){let r=[];for(let n of e.dataTypes)VS(t,n)?r.push(n):t.includes("integer")&&n==="number"&&r.push("integer");e.dataTypes=r}function vf(e,t){let r=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${r}" (strictTypes)`,(0,dr.checkStrictMode)(e,t,e.opts.strictTypes)}var Ra=class{constructor(t,r,n){if((0,ui.validateKeywordUsage)(t,r,n),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=n,this.data=t.data,this.schema=t.schema[n],this.$data=r.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,dr.schemaRefOrVal)(t,this.schema,n,this.$data),this.schemaType=r.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=r,this.$data)this.schemaCode=t.gen.const("vSchema",US(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,ui.validSchemaType)(this.schema,r.schemaType,r.allowUndefined))throw new Error(`${n} value must be ${JSON.stringify(r.schemaType)}`);("code"in r?r.trackErrors:r.errors!==!1)&&(this.errsCount=t.gen.const("_errs",K.default.errors))}result(t,r,n){this.failResult((0,U.not)(t),r,n)}failResult(t,r,n){this.gen.if(t),n?n():this.error(),r?(this.gen.else(),r(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,r){this.failResult((0,U.not)(t),void 0,r)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);let{schemaCode:r}=this;this.fail((0,U._)`${r} !== undefined && (${(0,U.or)(this.invalid$data(),t)})`)}error(t,r,n){if(r){this.setParams(r),this._error(t,n),this.setParams({});return}this._error(t,n)}_error(t,r){(t?ai.reportExtraError:ai.reportError)(this,this.def.error,r)}$dataError(){(0,ai.reportError)(this,this.def.$dataError||ai.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,ai.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,r){r?Object.assign(this.params,t):this.params=t}block$data(t,r,n=U.nil){this.gen.block(()=>{this.check$data(t,n),r()})}check$data(t=U.nil,r=U.nil){if(!this.$data)return;let{gen:n,schemaCode:s,schemaType:i,def:o}=this;n.if((0,U.or)((0,U._)`${s} === undefined`,r)),t!==U.nil&&n.assign(t,!0),(i.length||o.validateSchema)&&(n.elseIf(this.invalid$data()),this.$dataError(),t!==U.nil&&n.assign(t,!1)),n.else()}invalid$data(){let{gen:t,schemaCode:r,schemaType:n,def:s,it:i}=this;return(0,U.or)(o(),a());function o(){if(n.length){if(!(r instanceof U.Name))throw new Error("ajv implementation error");let u=Array.isArray(n)?n:[n];return(0,U._)`${(0,ba.checkDataTypes)(u,r,i.opts.strictNumbers,ba.DataType.Wrong)}`}return U.nil}function a(){if(s.validateSchema){let u=t.scopeValue("validate$data",{ref:s.validateSchema});return(0,U._)`!${u}(${r})`}return U.nil}}subschema(t,r){let n=(0,Sf.getSubschema)(this.it,t);(0,Sf.extendSubschemaData)(n,this.it,t),(0,Sf.extendSubschemaMode)(n,t);let s={...this.it,...n,items:void 0,props:void 0};return Ax(s,r),s}mergeEvaluated(t,r){let{it:n,gen:s}=this;n.opts.unevaluated&&(n.props!==!0&&t.props!==void 0&&(n.props=dr.mergeEvaluated.props(s,t.props,n.props,r)),n.items!==!0&&t.items!==void 0&&(n.items=dr.mergeEvaluated.items(s,t.items,n.items,r)))}mergeValidEvaluated(t,r){let{it:n,gen:s}=this;if(n.opts.unevaluated&&(n.props!==!0||n.items!==!0))return s.if(r,()=>this.mergeEvaluated(t,U.Name)),!0}};Lr.KeywordCxt=Ra;function zS(e,t,r,n){let s=new Ra(e,r,t);"code"in r?r.code(s,n):s.$data&&r.validate?(0,ui.funcKeywordCode)(s,r):"macro"in r?(0,ui.macroKeywordCode)(s,r):(r.compile||r.validate)&&(0,ui.funcKeywordCode)(s,r)}var Bx=/^\/(?:[^~]|~0|~1)*$/,Gx=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function US(e,{dataLevel:t,dataNames:r,dataPathArr:n}){let s,i;if(e==="")return K.default.rootData;if(e[0]==="/"){if(!Bx.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);s=e,i=K.default.rootData}else{let c=Gx.exec(e);if(!c)throw new Error(`Invalid JSON-pointer: ${e}`);let l=+c[1];if(s=c[2],s==="#"){if(l>=t)throw new Error(u("property/index",l));return n[t-l]}if(l>t)throw new Error(u("data",l));if(i=r[t-l],!s)return i}let o=i,a=s.split("/");for(let c of a)c&&(i=(0,U._)`${i}${(0,U.getProperty)((0,dr.unescapeJsonPointer)(c))}`,o=(0,U._)`${o} && ${i}`);return o;function u(c,l){return`Cannot access ${c} ${l} levels up, current level is ${t}`}}Lr.getData=US});var li=E(Rf=>{"use strict";Object.defineProperty(Rf,"__esModule",{value:!0});var bf=class extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}};Rf.default=bf});var hr=E(Of=>{"use strict";Object.defineProperty(Of,"__esModule",{value:!0});var wf=oi(),Tf=class extends Error{constructor(t,r,n,s){super(s||`can't resolve reference ${n} from id ${r}`),this.missingRef=(0,wf.resolveUrl)(t,r,n),this.missingSchema=(0,wf.normalizeId)((0,wf.getFullPath)(t,this.missingRef))}};Of.default=Tf});var fn=E(bt=>{"use strict";Object.defineProperty(bt,"__esModule",{value:!0});bt.resolveSchema=bt.getCompilingSchema=bt.resolveRef=bt.compileSchema=bt.SchemaEnv=void 0;var Lt=G(),Jx=li(),cn=vt(),jt=oi(),BS=X(),Kx=Yn(),Xn=class{constructor(t){var r;this.refs={},this.dynamicAnchors={};let n;typeof t.schema=="object"&&(n=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(r=t.baseId)!==null&&r!==void 0?r:(0,jt.normalizeId)(n?.[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=n?.$async,this.refs={}}};bt.SchemaEnv=Xn;function Pf(e){let t=GS.call(this,e);if(t)return t;let r=(0,jt.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new Lt.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a;e.$async&&(a=o.scopeValue("Error",{ref:Jx.default,code:(0,Lt._)`require("ajv/dist/runtime/validation_error").default`}));let u=o.scopeName("validate");e.validateName=u;let c={gen:o,allErrors:this.opts.allErrors,data:cn.default.data,parentData:cn.default.parentData,parentDataProperty:cn.default.parentDataProperty,dataNames:[cn.default.data],dataPathArr:[Lt.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,Lt.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:Lt.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Lt._)`""`,opts:this.opts,self:this},l;try{this._compilations.add(e),(0,Kx.validateFunctionCode)(c),o.optimize(this.opts.code.optimize);let d=o.toString();l=`${o.scopeRefs(cn.default.scope)}return ${d}`,this.opts.code.process&&(l=this.opts.code.process(l,e));let f=new Function(`${cn.default.self}`,`${cn.default.scope}`,l)(this,this.scope.get());if(this.scope.value(u,{ref:f}),f.errors=null,f.schema=e.schema,f.schemaEnv=e,e.$async&&(f.$async=!0),this.opts.code.source===!0&&(f.source={validateName:u,validateCode:d,scopeValues:o._values}),this.opts.unevaluated){let{props:h,items:y}=c;f.evaluated={props:h instanceof Lt.Name?void 0:h,items:y instanceof Lt.Name?void 0:y,dynamicProps:h instanceof Lt.Name,dynamicItems:y instanceof Lt.Name},f.source&&(f.source.evaluated=(0,Lt.stringify)(f.evaluated))}return e.validate=f,e}catch(d){throw delete e.validate,delete e.validateName,l&&this.logger.error("Error compiling schema, function code:",l),d}finally{this._compilations.delete(e)}}bt.compileSchema=Pf;function Wx(e,t,r){var n;r=(0,jt.resolveUrl)(this.opts.uriResolver,t,r);let s=e.refs[r];if(s)return s;let i=Qx.call(this,e,r);if(i===void 0){let o=(n=e.localRefs)===null||n===void 0?void 0:n[r],{schemaId:a}=this.opts;o&&(i=new Xn({schema:o,schemaId:a,root:e,baseId:t}))}if(i!==void 0)return e.refs[r]=Yx.call(this,i)}bt.resolveRef=Wx;function Yx(e){return(0,jt.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:Pf.call(this,e)}function GS(e){for(let t of this._compilations)if(Xx(t,e))return t}bt.getCompilingSchema=GS;function Xx(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function Qx(e,t){let r;for(;typeof(r=this.refs[t])=="string";)t=r;return r||this.schemas[t]||wa.call(this,e,t)}function wa(e,t){let r=this.opts.uriResolver.parse(t),n=(0,jt._getFullPath)(this.opts.uriResolver,r),s=(0,jt.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&n===s)return $f.call(this,r,e);let i=(0,jt.normalizeId)(n),o=this.refs[i]||this.schemas[i];if(typeof o=="string"){let a=wa.call(this,e,o);return typeof a?.schema!="object"?void 0:$f.call(this,r,a)}if(typeof o?.schema=="object"){if(o.validate||Pf.call(this,o),i===(0,jt.normalizeId)(t)){let{schema:a}=o,{schemaId:u}=this.opts,c=a[u];return c&&(s=(0,jt.resolveUrl)(this.opts.uriResolver,s,c)),new Xn({schema:a,schemaId:u,root:e,baseId:s})}return $f.call(this,r,o)}}bt.resolveSchema=wa;var Zx=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function $f(e,{baseId:t,schema:r,root:n}){var s;if(((s=e.fragment)===null||s===void 0?void 0:s[0])!=="/")return;for(let a of e.fragment.slice(1).split("/")){if(typeof r=="boolean")return;let u=r[(0,BS.unescapeFragment)(a)];if(u===void 0)return;r=u;let c=typeof r=="object"&&r[this.opts.schemaId];!Zx.has(a)&&c&&(t=(0,jt.resolveUrl)(this.opts.uriResolver,t,c))}let i;if(typeof r!="boolean"&&r.$ref&&!(0,BS.schemaHasRulesButRef)(r,this.RULES)){let a=(0,jt.resolveUrl)(this.opts.uriResolver,t,r.$ref);i=wa.call(this,n,a)}let{schemaId:o}=this.opts;if(i=i||new Xn({schema:r,schemaId:o,root:n,baseId:t}),i.schema!==i.root.schema)return i}});var JS=E((AK,eF)=>{eF.exports={$id:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",description:"Meta-schema for $data reference (JSON AnySchema extension proposal)",type:"object",required:["$data"],properties:{$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},additionalProperties:!1}});var WS=E((CK,KS)=>{"use strict";var tF={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};KS.exports={HEX:tF}});var nE=E((kK,rE)=>{"use strict";var{HEX:rF}=WS(),nF=/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u;function ZS(e){if(tE(e,".")<3)return{host:e,isIPV4:!1};let t=e.match(nF)||[],[r]=t;return r?{host:iF(r,"."),isIPV4:!0}:{host:e,isIPV4:!1}}function If(e,t=!1){let r="",n=!0;for(let s of e){if(rF[s]===void 0)return;s!=="0"&&n===!0&&(n=!1),n||(r+=s)}return t&&r.length===0&&(r="0"),r}function sF(e){let t=0,r={error:!1,address:"",zone:""},n=[],s=[],i=!1,o=!1,a=!1;function u(){if(s.length){if(i===!1){let c=If(s);if(c!==void 0)n.push(c);else return r.error=!0,!1}s.length=0}return!0}for(let c=0;c<e.length;c++){let l=e[c];if(!(l==="["||l==="]"))if(l===":"){if(o===!0&&(a=!0),!u())break;if(t++,n.push(":"),t>7){r.error=!0;break}c-1>=0&&e[c-1]===":"&&(o=!0);continue}else if(l==="%"){if(!u())break;i=!0}else{s.push(l);continue}}return s.length&&(i?r.zone=s.join(""):a?n.push(s.join("")):n.push(If(s))),r.address=n.join(""),r}function eE(e){if(tE(e,":")<2)return{host:e,isIPV6:!1};let t=sF(e);if(t.error)return{host:e,isIPV6:!1};{let r=t.address,n=t.address;return t.zone&&(r+="%"+t.zone,n+="%25"+t.zone),{host:r,escapedHost:n,isIPV6:!0}}}function iF(e,t){let r="",n=!0,s=e.length;for(let i=0;i<s;i++){let o=e[i];o==="0"&&n?(i+1<=s&&e[i+1]===t||i+1===s)&&(r+=o,n=!1):(o===t?n=!0:n=!1,r+=o)}return r}function tE(e,t){let r=0;for(let n=0;n<e.length;n++)e[n]===t&&r++;return r}var YS=/^\.\.?\//u,XS=/^\/\.(?:\/|$)/u,QS=/^\/\.\.(?:\/|$)/u,oF=/^\/?(?:.|\n)*?(?=\/|$)/u;function aF(e){let t=[];for(;e.length;)if(e.match(YS))e=e.replace(YS,"");else if(e.match(XS))e=e.replace(XS,"/");else if(e.match(QS))e=e.replace(QS,"/"),t.pop();else if(e==="."||e==="..")e="";else{let r=e.match(oF);if(r){let n=r[0];e=e.slice(n.length),t.push(n)}else throw new Error("Unexpected dot segment condition")}return t.join("")}function uF(e,t){let r=t!==!0?escape:unescape;return e.scheme!==void 0&&(e.scheme=r(e.scheme)),e.userinfo!==void 0&&(e.userinfo=r(e.userinfo)),e.host!==void 0&&(e.host=r(e.host)),e.path!==void 0&&(e.path=r(e.path)),e.query!==void 0&&(e.query=r(e.query)),e.fragment!==void 0&&(e.fragment=r(e.fragment)),e}function lF(e){let t=[];if(e.userinfo!==void 0&&(t.push(e.userinfo),t.push("@")),e.host!==void 0){let r=unescape(e.host),n=ZS(r);if(n.isIPV4)r=n.host;else{let s=eE(n.host);s.isIPV6===!0?r=`[${s.escapedHost}]`:r=e.host}t.push(r)}return(typeof e.port=="number"||typeof e.port=="string")&&(t.push(":"),t.push(String(e.port))),t.length?t.join(""):void 0}rE.exports={recomposeAuthority:lF,normalizeComponentEncoding:uF,removeDotSegments:aF,normalizeIPv4:ZS,normalizeIPv6:eE,stringArrayToHexStripped:If}});var lE=E((qK,uE)=>{"use strict";var cF=/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu,fF=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu;function sE(e){return typeof e.secure=="boolean"?e.secure:String(e.scheme).toLowerCase()==="wss"}function iE(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function oE(e){let t=String(e.scheme).toLowerCase()==="https";return(e.port===(t?443:80)||e.port==="")&&(e.port=void 0),e.path||(e.path="/"),e}function dF(e){return e.secure=sE(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e}function hF(e){if((e.port===(sE(e)?443:80)||e.port==="")&&(e.port=void 0),typeof e.secure=="boolean"&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){let[t,r]=e.resourceName.split("?");e.path=t&&t!=="/"?t:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}function pF(e,t){if(!e.path)return e.error="URN can not be parsed",e;let r=e.path.match(fF);if(r){let n=t.scheme||e.scheme||"urn";e.nid=r[1].toLowerCase(),e.nss=r[2];let s=`${n}:${t.nid||e.nid}`,i=Nf[s];e.path=void 0,i&&(e=i.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e}function mF(e,t){let r=t.scheme||e.scheme||"urn",n=e.nid.toLowerCase(),s=`${r}:${t.nid||n}`,i=Nf[s];i&&(e=i.serialize(e,t));let o=e,a=e.nss;return o.path=`${n||t.nid}:${a}`,t.skipEscape=!0,o}function yF(e,t){let r=e;return r.uuid=r.nss,r.nss=void 0,!t.tolerant&&(!r.uuid||!cF.test(r.uuid))&&(r.error=r.error||"UUID is not valid."),r}function gF(e){let t=e;return t.nss=(e.uuid||"").toLowerCase(),t}var aE={scheme:"http",domainHost:!0,parse:iE,serialize:oE},_F={scheme:"https",domainHost:aE.domainHost,parse:iE,serialize:oE},Ta={scheme:"ws",domainHost:!0,parse:dF,serialize:hF},SF={scheme:"wss",domainHost:Ta.domainHost,parse:Ta.parse,serialize:Ta.serialize},EF={scheme:"urn",parse:pF,serialize:mF,skipNormalize:!0},vF={scheme:"urn:uuid",parse:yF,serialize:gF,skipNormalize:!0},Nf={http:aE,https:_F,ws:Ta,wss:SF,urn:EF,"urn:uuid":vF};uE.exports=Nf});var Pa=E((LK,$a)=>{"use strict";var{normalizeIPv6:bF,normalizeIPv4:RF,removeDotSegments:ci,recomposeAuthority:wF,normalizeComponentEncoding:Oa}=nE(),Af=lE();function TF(e,t){return typeof e=="string"?e=Wt(pr(e,t),t):typeof e=="object"&&(e=pr(Wt(e,t),t)),e}function OF(e,t,r){let n=Object.assign({scheme:"null"},r),s=cE(pr(e,n),pr(t,n),n,!0);return Wt(s,{...n,skipEscape:!0})}function cE(e,t,r,n){let s={};return n||(e=pr(Wt(e,r),r),t=pr(Wt(t,r),r)),r=r||{},!r.tolerant&&t.scheme?(s.scheme=t.scheme,s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=ci(t.path||""),s.query=t.query):(t.userinfo!==void 0||t.host!==void 0||t.port!==void 0?(s.userinfo=t.userinfo,s.host=t.host,s.port=t.port,s.path=ci(t.path||""),s.query=t.query):(t.path?(t.path.charAt(0)==="/"?s.path=ci(t.path):((e.userinfo!==void 0||e.host!==void 0||e.port!==void 0)&&!e.path?s.path="/"+t.path:e.path?s.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:s.path=t.path,s.path=ci(s.path)),s.query=t.query):(s.path=e.path,t.query!==void 0?s.query=t.query:s.query=e.query),s.userinfo=e.userinfo,s.host=e.host,s.port=e.port),s.scheme=e.scheme),s.fragment=t.fragment,s}function $F(e,t,r){return typeof e=="string"?(e=unescape(e),e=Wt(Oa(pr(e,r),!0),{...r,skipEscape:!0})):typeof e=="object"&&(e=Wt(Oa(e,!0),{...r,skipEscape:!0})),typeof t=="string"?(t=unescape(t),t=Wt(Oa(pr(t,r),!0),{...r,skipEscape:!0})):typeof t=="object"&&(t=Wt(Oa(t,!0),{...r,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()}function Wt(e,t){let r={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},n=Object.assign({},t),s=[],i=Af[(n.scheme||r.scheme||"").toLowerCase()];i&&i.serialize&&i.serialize(r,n),r.path!==void 0&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),r.scheme!==void 0&&(r.path=r.path.split("%3A").join(":")))),n.reference!=="suffix"&&r.scheme&&s.push(r.scheme,":");let o=wF(r);if(o!==void 0&&(n.reference!=="suffix"&&s.push("//"),s.push(o),r.path&&r.path.charAt(0)!=="/"&&s.push("/")),r.path!==void 0){let a=r.path;!n.absolutePath&&(!i||!i.absolutePath)&&(a=ci(a)),o===void 0&&(a=a.replace(/^\/\//u,"/%2F")),s.push(a)}return r.query!==void 0&&s.push("?",r.query),r.fragment!==void 0&&s.push("#",r.fragment),s.join("")}var PF=Array.from({length:127},(e,t)=>/[^!"$&'()*+,\-.;=_`a-z{}~]/u.test(String.fromCharCode(t)));function IF(e){let t=0;for(let r=0,n=e.length;r<n;++r)if(t=e.charCodeAt(r),t>126||PF[t])return!0;return!1}var NF=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function pr(e,t){let r=Object.assign({},t),n={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0},s=e.indexOf("%")!==-1,i=!1;r.reference==="suffix"&&(e=(r.scheme?r.scheme+":":"")+"//"+e);let o=e.match(NF);if(o){if(n.scheme=o[1],n.userinfo=o[3],n.host=o[4],n.port=parseInt(o[5],10),n.path=o[6]||"",n.query=o[7],n.fragment=o[8],isNaN(n.port)&&(n.port=o[5]),n.host){let u=RF(n.host);if(u.isIPV4===!1){let c=bF(u.host);n.host=c.host.toLowerCase(),i=c.isIPV6}else n.host=u.host,i=!0}n.scheme===void 0&&n.userinfo===void 0&&n.host===void 0&&n.port===void 0&&n.query===void 0&&!n.path?n.reference="same-document":n.scheme===void 0?n.reference="relative":n.fragment===void 0?n.reference="absolute":n.reference="uri",r.reference&&r.reference!=="suffix"&&r.reference!==n.reference&&(n.error=n.error||"URI is not a "+r.reference+" reference.");let a=Af[(r.scheme||n.scheme||"").toLowerCase()];if(!r.unicodeSupport&&(!a||!a.unicodeSupport)&&n.host&&(r.domainHost||a&&a.domainHost)&&i===!1&&IF(n.host))try{n.host=URL.domainToASCII(n.host.toLowerCase())}catch(u){n.error=n.error||"Host's domain name can not be converted to ASCII: "+u}(!a||a&&!a.skipNormalize)&&(s&&n.scheme!==void 0&&(n.scheme=unescape(n.scheme)),s&&n.host!==void 0&&(n.host=unescape(n.host)),n.path&&(n.path=escape(unescape(n.path))),n.fragment&&(n.fragment=encodeURI(decodeURIComponent(n.fragment)))),a&&a.parse&&a.parse(n,r)}else n.error=n.error||"URI can not be parsed.";return n}var Cf={SCHEMES:Af,normalize:TF,resolve:OF,resolveComponents:cE,equal:$F,serialize:Wt,parse:pr};$a.exports=Cf;$a.exports.default=Cf;$a.exports.fastUri=Cf});var dE=E(kf=>{"use strict";Object.defineProperty(kf,"__esModule",{value:!0});var fE=Pa();fE.code='require("ajv/dist/runtime/uri").default';kf.default=fE});var jf=E(Ue=>{"use strict";Object.defineProperty(Ue,"__esModule",{value:!0});Ue.CodeGen=Ue.Name=Ue.nil=Ue.stringify=Ue.str=Ue._=Ue.KeywordCxt=void 0;var AF=Yn();Object.defineProperty(Ue,"KeywordCxt",{enumerable:!0,get:function(){return AF.KeywordCxt}});var Qn=G();Object.defineProperty(Ue,"_",{enumerable:!0,get:function(){return Qn._}});Object.defineProperty(Ue,"str",{enumerable:!0,get:function(){return Qn.str}});Object.defineProperty(Ue,"stringify",{enumerable:!0,get:function(){return Qn.stringify}});Object.defineProperty(Ue,"nil",{enumerable:!0,get:function(){return Qn.nil}});Object.defineProperty(Ue,"Name",{enumerable:!0,get:function(){return Qn.Name}});Object.defineProperty(Ue,"CodeGen",{enumerable:!0,get:function(){return Qn.CodeGen}});var CF=li(),gE=hr(),kF=cf(),fi=fn(),qF=G(),di=oi(),Ia=si(),Lf=X(),hE=JS(),LF=dE(),_E=(e,t)=>new RegExp(e,t);_E.code="new RegExp";var jF=["removeAdditional","useDefaults","coerceTypes"],DF=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),xF={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},FF={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},pE=200;function MF(e){var t,r,n,s,i,o,a,u,c,l,d,p,f,h,y,_,S,v,g,m,w,T,b,O,R;let P=e.strict,D=(t=e.code)===null||t===void 0?void 0:t.optimize,I=D===!0||D===void 0?1:D||0,N=(n=(r=e.code)===null||r===void 0?void 0:r.regExp)!==null&&n!==void 0?n:_E,z=(s=e.uriResolver)!==null&&s!==void 0?s:LF.default;return{strictSchema:(o=(i=e.strictSchema)!==null&&i!==void 0?i:P)!==null&&o!==void 0?o:!0,strictNumbers:(u=(a=e.strictNumbers)!==null&&a!==void 0?a:P)!==null&&u!==void 0?u:!0,strictTypes:(l=(c=e.strictTypes)!==null&&c!==void 0?c:P)!==null&&l!==void 0?l:"log",strictTuples:(p=(d=e.strictTuples)!==null&&d!==void 0?d:P)!==null&&p!==void 0?p:"log",strictRequired:(h=(f=e.strictRequired)!==null&&f!==void 0?f:P)!==null&&h!==void 0?h:!1,code:e.code?{...e.code,optimize:I,regExp:N}:{optimize:I,regExp:N},loopRequired:(y=e.loopRequired)!==null&&y!==void 0?y:pE,loopEnum:(_=e.loopEnum)!==null&&_!==void 0?_:pE,meta:(S=e.meta)!==null&&S!==void 0?S:!0,messages:(v=e.messages)!==null&&v!==void 0?v:!0,inlineRefs:(g=e.inlineRefs)!==null&&g!==void 0?g:!0,schemaId:(m=e.schemaId)!==null&&m!==void 0?m:"$id",addUsedSchema:(w=e.addUsedSchema)!==null&&w!==void 0?w:!0,validateSchema:(T=e.validateSchema)!==null&&T!==void 0?T:!0,validateFormats:(b=e.validateFormats)!==null&&b!==void 0?b:!0,unicodeRegExp:(O=e.unicodeRegExp)!==null&&O!==void 0?O:!0,int32range:(R=e.int32range)!==null&&R!==void 0?R:!0,uriResolver:z}}var hi=class{constructor(t={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,t=this.opts={...t,...MF(t)};let{es5:r,lines:n}=this.opts.code;this.scope=new qF.ValueScope({scope:{},prefixes:DF,es5:r,lines:n}),this.logger=GF(t.logger);let s=t.validateFormats;t.validateFormats=!1,this.RULES=(0,kF.getRules)(),mE.call(this,xF,t,"NOT SUPPORTED"),mE.call(this,FF,t,"DEPRECATED","warn"),this._metaOpts=UF.call(this),t.formats&&VF.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),t.keywords&&zF.call(this,t.keywords),typeof t.meta=="object"&&this.addMetaSchema(t.meta),HF.call(this),t.validateFormats=s}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){let{$data:t,meta:r,schemaId:n}=this.opts,s=hE;n==="id"&&(s={...hE},s.id=s.$id,delete s.$id),r&&t&&this.addMetaSchema(s,s[n],!1)}defaultMeta(){let{meta:t,schemaId:r}=this.opts;return this.opts.defaultMeta=typeof t=="object"?t[r]||t:void 0}validate(t,r){let n;if(typeof t=="string"){if(n=this.getSchema(t),!n)throw new Error(`no schema with key or ref "${t}"`)}else n=this.compile(t);let s=n(r);return"$async"in n||(this.errors=n.errors),s}compile(t,r){let n=this._addSchema(t,r);return n.validate||this._compileSchemaEnv(n)}compileAsync(t,r){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");let{loadSchema:n}=this.opts;return s.call(this,t,r);async function s(l,d){await i.call(this,l.$schema);let p=this._addSchema(l,d);return p.validate||o.call(this,p)}async function i(l){l&&!this.getSchema(l)&&await s.call(this,{$ref:l},!0)}async function o(l){try{return this._compileSchemaEnv(l)}catch(d){if(!(d instanceof gE.default))throw d;return a.call(this,d),await u.call(this,d.missingSchema),o.call(this,l)}}function a({missingSchema:l,missingRef:d}){if(this.refs[l])throw new Error(`AnySchema ${l} is loaded but ${d} cannot be resolved`)}async function u(l){let d=await c.call(this,l);this.refs[l]||await i.call(this,d.$schema),this.refs[l]||this.addSchema(d,l,r)}async function c(l){let d=this._loading[l];if(d)return d;try{return await(this._loading[l]=n(l))}finally{delete this._loading[l]}}}addSchema(t,r,n,s=this.opts.validateSchema){if(Array.isArray(t)){for(let o of t)this.addSchema(o,void 0,n,s);return this}let i;if(typeof t=="object"){let{schemaId:o}=this.opts;if(i=t[o],i!==void 0&&typeof i!="string")throw new Error(`schema ${o} must be string`)}return r=(0,di.normalizeId)(r||i),this._checkUnique(r),this.schemas[r]=this._addSchema(t,n,r,s,!0),this}addMetaSchema(t,r,n=this.opts.validateSchema){return this.addSchema(t,r,!0,n),this}validateSchema(t,r){if(typeof t=="boolean")return!0;let n;if(n=t.$schema,n!==void 0&&typeof n!="string")throw new Error("$schema must be a string");if(n=n||this.opts.defaultMeta||this.defaultMeta(),!n)return this.logger.warn("meta-schema not available"),this.errors=null,!0;let s=this.validate(n,t);if(!s&&r){let i="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(i);else throw new Error(i)}return s}getSchema(t){let r;for(;typeof(r=yE.call(this,t))=="string";)t=r;if(r===void 0){let{schemaId:n}=this.opts,s=new fi.SchemaEnv({schema:{},schemaId:n});if(r=fi.resolveSchema.call(this,s,t),!r)return;this.refs[t]=r}return r.validate||this._compileSchemaEnv(r)}removeSchema(t){if(t instanceof RegExp)return this._removeAllSchemas(this.schemas,t),this._removeAllSchemas(this.refs,t),this;switch(typeof t){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{let r=yE.call(this,t);return typeof r=="object"&&this._cache.delete(r.schema),delete this.schemas[t],delete this.refs[t],this}case"object":{let r=t;this._cache.delete(r);let n=t[this.opts.schemaId];return n&&(n=(0,di.normalizeId)(n),delete this.schemas[n],delete this.refs[n]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(t){for(let r of t)this.addKeyword(r);return this}addKeyword(t,r){let n;if(typeof t=="string")n=t,typeof r=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),r.keyword=n);else if(typeof t=="object"&&r===void 0){if(r=t,n=r.keyword,Array.isArray(n)&&!n.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if(KF.call(this,n,r),!r)return(0,Lf.eachItem)(n,i=>qf.call(this,i)),this;YF.call(this,r);let s={...r,type:(0,Ia.getJSONTypes)(r.type),schemaType:(0,Ia.getJSONTypes)(r.schemaType)};return(0,Lf.eachItem)(n,s.type.length===0?i=>qf.call(this,i,s):i=>s.type.forEach(o=>qf.call(this,i,s,o))),this}getKeyword(t){let r=this.RULES.all[t];return typeof r=="object"?r.definition:!!r}removeKeyword(t){let{RULES:r}=this;delete r.keywords[t],delete r.all[t];for(let n of r.rules){let s=n.rules.findIndex(i=>i.keyword===t);s>=0&&n.rules.splice(s,1)}return this}addFormat(t,r){return typeof r=="string"&&(r=new RegExp(r)),this.formats[t]=r,this}errorsText(t=this.errors,{separator:r=", ",dataVar:n="data"}={}){return!t||t.length===0?"No errors":t.map(s=>`${n}${s.instancePath} ${s.message}`).reduce((s,i)=>s+r+i)}$dataMetaSchema(t,r){let n=this.RULES.all;t=JSON.parse(JSON.stringify(t));for(let s of r){let i=s.split("/").slice(1),o=t;for(let a of i)o=o[a];for(let a in n){let u=n[a];if(typeof u!="object")continue;let{$data:c}=u.definition,l=o[a];c&&l&&(o[a]=SE(l))}}return t}_removeAllSchemas(t,r){for(let n in t){let s=t[n];(!r||r.test(n))&&(typeof s=="string"?delete t[n]:s&&!s.meta&&(this._cache.delete(s.schema),delete t[n]))}}_addSchema(t,r,n,s=this.opts.validateSchema,i=this.opts.addUsedSchema){let o,{schemaId:a}=this.opts;if(typeof t=="object")o=t[a];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof t!="boolean")throw new Error("schema must be object or boolean")}let u=this._cache.get(t);if(u!==void 0)return u;n=(0,di.normalizeId)(o||n);let c=di.getSchemaRefs.call(this,t,n);return u=new fi.SchemaEnv({schema:t,schemaId:a,meta:r,baseId:n,localRefs:c}),this._cache.set(u.schema,u),i&&!n.startsWith("#")&&(n&&this._checkUnique(n),this.refs[n]=u),s&&this.validateSchema(t,!0),u}_checkUnique(t){if(this.schemas[t]||this.refs[t])throw new Error(`schema with key or id "${t}" already exists`)}_compileSchemaEnv(t){if(t.meta?this._compileMetaSchema(t):fi.compileSchema.call(this,t),!t.validate)throw new Error("ajv implementation error");return t.validate}_compileMetaSchema(t){let r=this.opts;this.opts=this._metaOpts;try{fi.compileSchema.call(this,t)}finally{this.opts=r}}};hi.ValidationError=CF.default;hi.MissingRefError=gE.default;Ue.default=hi;function mE(e,t,r,n="error"){for(let s in e){let i=s;i in t&&this.logger[n](`${r}: option ${s}. ${e[i]}`)}}function yE(e){return e=(0,di.normalizeId)(e),this.schemas[e]||this.refs[e]}function HF(){let e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(let t in e)this.addSchema(e[t],t)}function VF(){for(let e in this.opts.formats){let t=this.opts.formats[e];t&&this.addFormat(e,t)}}function zF(e){if(Array.isArray(e)){this.addVocabulary(e);return}this.logger.warn("keywords option as map is deprecated, pass array");for(let t in e){let r=e[t];r.keyword||(r.keyword=t),this.addKeyword(r)}}function UF(){let e={...this.opts};for(let t of jF)delete e[t];return e}var BF={log(){},warn(){},error(){}};function GF(e){if(e===!1)return BF;if(e===void 0)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}var JF=/^[a-z_$][a-z0-9_$:-]*$/i;function KF(e,t){let{RULES:r}=this;if((0,Lf.eachItem)(e,n=>{if(r.keywords[n])throw new Error(`Keyword ${n} is already defined`);if(!JF.test(n))throw new Error(`Keyword ${n} has invalid name`)}),!!t&&t.$data&&!("code"in t||"validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function qf(e,t,r){var n;let s=t?.post;if(r&&s)throw new Error('keyword with "post" flag cannot have "type"');let{RULES:i}=this,o=s?i.post:i.rules.find(({type:u})=>u===r);if(o||(o={type:r,rules:[]},i.rules.push(o)),i.keywords[e]=!0,!t)return;let a={keyword:e,definition:{...t,type:(0,Ia.getJSONTypes)(t.type),schemaType:(0,Ia.getJSONTypes)(t.schemaType)}};t.before?WF.call(this,o,a,t.before):o.rules.push(a),i.all[e]=a,(n=t.implements)===null||n===void 0||n.forEach(u=>this.addKeyword(u))}function WF(e,t,r){let n=e.rules.findIndex(s=>s.keyword===r);n>=0?e.rules.splice(n,0,t):(e.rules.push(t),this.logger.warn(`rule ${r} is not defined`))}function YF(e){let{metaSchema:t}=e;t!==void 0&&(e.$data&&this.opts.$data&&(t=SE(t)),e.validateSchema=this.compile(t,!0))}var XF={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function SE(e){return{anyOf:[e,XF]}}});var EE=E(Df=>{"use strict";Object.defineProperty(Df,"__esModule",{value:!0});var QF={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};Df.default=QF});var xf=E(dn=>{"use strict";Object.defineProperty(dn,"__esModule",{value:!0});dn.callRef=dn.getValidate=void 0;var ZF=hr(),vE=ze(),dt=G(),Zn=vt(),bE=fn(),Na=X(),eM={keyword:"$ref",schemaType:"string",code(e){let{gen:t,schema:r,it:n}=e,{baseId:s,schemaEnv:i,validateName:o,opts:a,self:u}=n,{root:c}=i;if((r==="#"||r==="#/")&&s===c.baseId)return d();let l=bE.resolveRef.call(u,c,s,r);if(l===void 0)throw new ZF.default(n.opts.uriResolver,s,r);if(l instanceof bE.SchemaEnv)return p(l);return f(l);function d(){if(i===c)return Aa(e,o,i,i.$async);let h=t.scopeValue("root",{ref:c});return Aa(e,(0,dt._)`${h}.validate`,c,c.$async)}function p(h){let y=RE(e,h);Aa(e,y,h,h.$async)}function f(h){let y=t.scopeValue("schema",a.code.source===!0?{ref:h,code:(0,dt.stringify)(h)}:{ref:h}),_=t.name("valid"),S=e.subschema({schema:h,dataTypes:[],schemaPath:dt.nil,topSchemaRef:y,errSchemaPath:r},_);e.mergeEvaluated(S),e.ok(_)}}};function RE(e,t){let{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):(0,dt._)`${r.scopeValue("wrapper",{ref:t})}.validate`}dn.getValidate=RE;function Aa(e,t,r,n){let{gen:s,it:i}=e,{allErrors:o,schemaEnv:a,opts:u}=i,c=u.passContext?Zn.default.this:dt.nil;n?l():d();function l(){if(!a.$async)throw new Error("async schema referenced by sync schema");let h=s.let("valid");s.try(()=>{s.code((0,dt._)`await ${(0,vE.callValidateCode)(e,t,c)}`),f(t),o||s.assign(h,!0)},y=>{s.if((0,dt._)`!(${y} instanceof ${i.ValidationError})`,()=>s.throw(y)),p(y),o||s.assign(h,!1)}),e.ok(h)}function d(){e.result((0,vE.callValidateCode)(e,t,c),()=>f(t),()=>p(t))}function p(h){let y=(0,dt._)`${h}.errors`;s.assign(Zn.default.vErrors,(0,dt._)`${Zn.default.vErrors} === null ? ${y} : ${Zn.default.vErrors}.concat(${y})`),s.assign(Zn.default.errors,(0,dt._)`${Zn.default.vErrors}.length`)}function f(h){var y;if(!i.opts.unevaluated)return;let _=(y=r?.validate)===null||y===void 0?void 0:y.evaluated;if(i.props!==!0)if(_&&!_.dynamicProps)_.props!==void 0&&(i.props=Na.mergeEvaluated.props(s,_.props,i.props));else{let S=s.var("props",(0,dt._)`${h}.evaluated.props`);i.props=Na.mergeEvaluated.props(s,S,i.props,dt.Name)}if(i.items!==!0)if(_&&!_.dynamicItems)_.items!==void 0&&(i.items=Na.mergeEvaluated.items(s,_.items,i.items));else{let S=s.var("items",(0,dt._)`${h}.evaluated.items`);i.items=Na.mergeEvaluated.items(s,S,i.items,dt.Name)}}}dn.callRef=Aa;dn.default=eM});var wE=E(Ff=>{"use strict";Object.defineProperty(Ff,"__esModule",{value:!0});var tM=EE(),rM=xf(),nM=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",tM.default,rM.default];Ff.default=nM});var TE=E(Mf=>{"use strict";Object.defineProperty(Mf,"__esModule",{value:!0});var Ca=G(),jr=Ca.operators,ka={maximum:{okStr:"<=",ok:jr.LTE,fail:jr.GT},minimum:{okStr:">=",ok:jr.GTE,fail:jr.LT},exclusiveMaximum:{okStr:"<",ok:jr.LT,fail:jr.GTE},exclusiveMinimum:{okStr:">",ok:jr.GT,fail:jr.LTE}},sM={message:({keyword:e,schemaCode:t})=>(0,Ca.str)`must be ${ka[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,Ca._)`{comparison: ${ka[e].okStr}, limit: ${t}}`},iM={keyword:Object.keys(ka),type:"number",schemaType:"number",$data:!0,error:sM,code(e){let{keyword:t,data:r,schemaCode:n}=e;e.fail$data((0,Ca._)`${r} ${ka[t].fail} ${n} || isNaN(${r})`)}};Mf.default=iM});var OE=E(Hf=>{"use strict";Object.defineProperty(Hf,"__esModule",{value:!0});var pi=G(),oM={message:({schemaCode:e})=>(0,pi.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,pi._)`{multipleOf: ${e}}`},aM={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:oM,code(e){let{gen:t,data:r,schemaCode:n,it:s}=e,i=s.opts.multipleOfPrecision,o=t.let("res"),a=i?(0,pi._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${i}`:(0,pi._)`${o} !== parseInt(${o})`;e.fail$data((0,pi._)`(${n} === 0 || (${o} = ${r}/${n}, ${a}))`)}};Hf.default=aM});var PE=E(Vf=>{"use strict";Object.defineProperty(Vf,"__esModule",{value:!0});function $E(e){let t=e.length,r=0,n=0,s;for(;n<t;)r++,s=e.charCodeAt(n++),s>=55296&&s<=56319&&n<t&&(s=e.charCodeAt(n),(s&64512)===56320&&n++);return r}Vf.default=$E;$E.code='require("ajv/dist/runtime/ucs2length").default'});var IE=E(zf=>{"use strict";Object.defineProperty(zf,"__esModule",{value:!0});var hn=G(),uM=X(),lM=PE(),cM={message({keyword:e,schemaCode:t}){let r=e==="maxLength"?"more":"fewer";return(0,hn.str)`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>(0,hn._)`{limit: ${e}}`},fM={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:cM,code(e){let{keyword:t,data:r,schemaCode:n,it:s}=e,i=t==="maxLength"?hn.operators.GT:hn.operators.LT,o=s.opts.unicode===!1?(0,hn._)`${r}.length`:(0,hn._)`${(0,uM.useFunc)(e.gen,lM.default)}(${r})`;e.fail$data((0,hn._)`${o} ${i} ${n}`)}};zf.default=fM});var NE=E(Uf=>{"use strict";Object.defineProperty(Uf,"__esModule",{value:!0});var dM=ze(),qa=G(),hM={message:({schemaCode:e})=>(0,qa.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,qa._)`{pattern: ${e}}`},pM={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:hM,code(e){let{data:t,$data:r,schema:n,schemaCode:s,it:i}=e,o=i.opts.unicodeRegExp?"u":"",a=r?(0,qa._)`(new RegExp(${s}, ${o}))`:(0,dM.usePattern)(e,n);e.fail$data((0,qa._)`!${a}.test(${t})`)}};Uf.default=pM});var AE=E(Bf=>{"use strict";Object.defineProperty(Bf,"__esModule",{value:!0});var mi=G(),mM={message({keyword:e,schemaCode:t}){let r=e==="maxProperties"?"more":"fewer";return(0,mi.str)`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>(0,mi._)`{limit: ${e}}`},yM={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:mM,code(e){let{keyword:t,data:r,schemaCode:n}=e,s=t==="maxProperties"?mi.operators.GT:mi.operators.LT;e.fail$data((0,mi._)`Object.keys(${r}).length ${s} ${n}`)}};Bf.default=yM});var CE=E(Gf=>{"use strict";Object.defineProperty(Gf,"__esModule",{value:!0});var yi=ze(),gi=G(),gM=X(),_M={message:({params:{missingProperty:e}})=>(0,gi.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,gi._)`{missingProperty: ${e}}`},SM={keyword:"required",type:"object",schemaType:"array",$data:!0,error:_M,code(e){let{gen:t,schema:r,schemaCode:n,data:s,$data:i,it:o}=e,{opts:a}=o;if(!i&&r.length===0)return;let u=r.length>=a.loopRequired;if(o.allErrors?c():l(),a.strictRequired){let f=e.parentSchema.properties,{definedProperties:h}=e.it;for(let y of r)if(f?.[y]===void 0&&!h.has(y)){let _=o.schemaEnv.baseId+o.errSchemaPath,S=`required property "${y}" is not defined at "${_}" (strictRequired)`;(0,gM.checkStrictMode)(o,S,o.opts.strictRequired)}}function c(){if(u||i)e.block$data(gi.nil,d);else for(let f of r)(0,yi.checkReportMissingProp)(e,f)}function l(){let f=t.let("missing");if(u||i){let h=t.let("valid",!0);e.block$data(h,()=>p(f,h)),e.ok(h)}else t.if((0,yi.checkMissingProp)(e,r,f)),(0,yi.reportMissingProp)(e,f),t.else()}function d(){t.forOf("prop",n,f=>{e.setParams({missingProperty:f}),t.if((0,yi.noPropertyInData)(t,s,f,a.ownProperties),()=>e.error())})}function p(f,h){e.setParams({missingProperty:f}),t.forOf(f,n,()=>{t.assign(h,(0,yi.propertyInData)(t,s,f,a.ownProperties)),t.if((0,gi.not)(h),()=>{e.error(),t.break()})},gi.nil)}}};Gf.default=SM});var kE=E(Jf=>{"use strict";Object.defineProperty(Jf,"__esModule",{value:!0});var _i=G(),EM={message({keyword:e,schemaCode:t}){let r=e==="maxItems"?"more":"fewer";return(0,_i.str)`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>(0,_i._)`{limit: ${e}}`},vM={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:EM,code(e){let{keyword:t,data:r,schemaCode:n}=e,s=t==="maxItems"?_i.operators.GT:_i.operators.LT;e.fail$data((0,_i._)`${r}.length ${s} ${n}`)}};Jf.default=vM});var Si=E(Kf=>{"use strict";Object.defineProperty(Kf,"__esModule",{value:!0});var qE=ii();qE.code='require("ajv/dist/runtime/equal").default';Kf.default=qE});var LE=E(Yf=>{"use strict";Object.defineProperty(Yf,"__esModule",{value:!0});var Wf=si(),Be=G(),bM=X(),RM=Si(),wM={message:({params:{i:e,j:t}})=>(0,Be.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,Be._)`{i: ${e}, j: ${t}}`},TM={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:wM,code(e){let{gen:t,data:r,$data:n,schema:s,parentSchema:i,schemaCode:o,it:a}=e;if(!n&&!s)return;let u=t.let("valid"),c=i.items?(0,Wf.getSchemaTypes)(i.items):[];e.block$data(u,l,(0,Be._)`${o} === false`),e.ok(u);function l(){let h=t.let("i",(0,Be._)`${r}.length`),y=t.let("j");e.setParams({i:h,j:y}),t.assign(u,!0),t.if((0,Be._)`${h} > 1`,()=>(d()?p:f)(h,y))}function d(){return c.length>0&&!c.some(h=>h==="object"||h==="array")}function p(h,y){let _=t.name("item"),S=(0,Wf.checkDataTypes)(c,_,a.opts.strictNumbers,Wf.DataType.Wrong),v=t.const("indices",(0,Be._)`{}`);t.for((0,Be._)`;${h}--;`,()=>{t.let(_,(0,Be._)`${r}[${h}]`),t.if(S,(0,Be._)`continue`),c.length>1&&t.if((0,Be._)`typeof ${_} == "string"`,(0,Be._)`${_} += "_"`),t.if((0,Be._)`typeof ${v}[${_}] == "number"`,()=>{t.assign(y,(0,Be._)`${v}[${_}]`),e.error(),t.assign(u,!1).break()}).code((0,Be._)`${v}[${_}] = ${h}`)})}function f(h,y){let _=(0,bM.useFunc)(t,RM.default),S=t.name("outer");t.label(S).for((0,Be._)`;${h}--;`,()=>t.for((0,Be._)`${y} = ${h}; ${y}--;`,()=>t.if((0,Be._)`${_}(${r}[${h}], ${r}[${y}])`,()=>{e.error(),t.assign(u,!1).break(S)})))}}};Yf.default=TM});var jE=E(Qf=>{"use strict";Object.defineProperty(Qf,"__esModule",{value:!0});var Xf=G(),OM=X(),$M=Si(),PM={message:"must be equal to constant",params:({schemaCode:e})=>(0,Xf._)`{allowedValue: ${e}}`},IM={keyword:"const",$data:!0,error:PM,code(e){let{gen:t,data:r,$data:n,schemaCode:s,schema:i}=e;n||i&&typeof i=="object"?e.fail$data((0,Xf._)`!${(0,OM.useFunc)(t,$M.default)}(${r}, ${s})`):e.fail((0,Xf._)`${i} !== ${r}`)}};Qf.default=IM});var DE=E(Zf=>{"use strict";Object.defineProperty(Zf,"__esModule",{value:!0});var Ei=G(),NM=X(),AM=Si(),CM={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,Ei._)`{allowedValues: ${e}}`},kM={keyword:"enum",schemaType:"array",$data:!0,error:CM,code(e){let{gen:t,data:r,$data:n,schema:s,schemaCode:i,it:o}=e;if(!n&&s.length===0)throw new Error("enum must have non-empty array");let a=s.length>=o.opts.loopEnum,u,c=()=>u??(u=(0,NM.useFunc)(t,AM.default)),l;if(a||n)l=t.let("valid"),e.block$data(l,d);else{if(!Array.isArray(s))throw new Error("ajv implementation error");let f=t.const("vSchema",i);l=(0,Ei.or)(...s.map((h,y)=>p(f,y)))}e.pass(l);function d(){t.assign(l,!1),t.forOf("v",i,f=>t.if((0,Ei._)`${c()}(${r}, ${f})`,()=>t.assign(l,!0).break()))}function p(f,h){let y=s[h];return typeof y=="object"&&y!==null?(0,Ei._)`${c()}(${r}, ${f}[${h}])`:(0,Ei._)`${r} === ${y}`}}};Zf.default=kM});var xE=E(ed=>{"use strict";Object.defineProperty(ed,"__esModule",{value:!0});var qM=TE(),LM=OE(),jM=IE(),DM=NE(),xM=AE(),FM=CE(),MM=kE(),HM=LE(),VM=jE(),zM=DE(),UM=[qM.default,LM.default,jM.default,DM.default,xM.default,FM.default,MM.default,HM.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},VM.default,zM.default];ed.default=UM});var rd=E(vi=>{"use strict";Object.defineProperty(vi,"__esModule",{value:!0});vi.validateAdditionalItems=void 0;var pn=G(),td=X(),BM={message:({params:{len:e}})=>(0,pn.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,pn._)`{limit: ${e}}`},GM={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:BM,code(e){let{parentSchema:t,it:r}=e,{items:n}=t;if(!Array.isArray(n)){(0,td.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas');return}FE(e,n)}};function FE(e,t){let{gen:r,schema:n,data:s,keyword:i,it:o}=e;o.items=!0;let a=r.const("len",(0,pn._)`${s}.length`);if(n===!1)e.setParams({len:t.length}),e.pass((0,pn._)`${a} <= ${t.length}`);else if(typeof n=="object"&&!(0,td.alwaysValidSchema)(o,n)){let c=r.var("valid",(0,pn._)`${a} <= ${t.length}`);r.if((0,pn.not)(c),()=>u(c)),e.ok(c)}function u(c){r.forRange("i",t.length,a,l=>{e.subschema({keyword:i,dataProp:l,dataPropType:td.Type.Num},c),o.allErrors||r.if((0,pn.not)(c),()=>r.break())})}}vi.validateAdditionalItems=FE;vi.default=GM});var nd=E(bi=>{"use strict";Object.defineProperty(bi,"__esModule",{value:!0});bi.validateTuple=void 0;var ME=G(),La=X(),JM=ze(),KM={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){let{schema:t,it:r}=e;if(Array.isArray(t))return HE(e,"additionalItems",t);r.items=!0,!(0,La.alwaysValidSchema)(r,t)&&e.ok((0,JM.validateArray)(e))}};function HE(e,t,r=e.schema){let{gen:n,parentSchema:s,data:i,keyword:o,it:a}=e;l(s),a.opts.unevaluated&&r.length&&a.items!==!0&&(a.items=La.mergeEvaluated.items(n,r.length,a.items));let u=n.name("valid"),c=n.const("len",(0,ME._)`${i}.length`);r.forEach((d,p)=>{(0,La.alwaysValidSchema)(a,d)||(n.if((0,ME._)`${c} > ${p}`,()=>e.subschema({keyword:o,schemaProp:p,dataProp:p},u)),e.ok(u))});function l(d){let{opts:p,errSchemaPath:f}=a,h=r.length,y=h===d.minItems&&(h===d.maxItems||d[t]===!1);if(p.strictTuples&&!y){let _=`"${o}" is ${h}-tuple, but minItems or maxItems/${t} are not specified or different at path "${f}"`;(0,La.checkStrictMode)(a,_,p.strictTuples)}}}bi.validateTuple=HE;bi.default=KM});var VE=E(sd=>{"use strict";Object.defineProperty(sd,"__esModule",{value:!0});var WM=nd(),YM={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,WM.validateTuple)(e,"items")};sd.default=YM});var UE=E(id=>{"use strict";Object.defineProperty(id,"__esModule",{value:!0});var zE=G(),XM=X(),QM=ze(),ZM=rd(),e2={message:({params:{len:e}})=>(0,zE.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,zE._)`{limit: ${e}}`},t2={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:e2,code(e){let{schema:t,parentSchema:r,it:n}=e,{prefixItems:s}=r;n.items=!0,!(0,XM.alwaysValidSchema)(n,t)&&(s?(0,ZM.validateAdditionalItems)(e,s):e.ok((0,QM.validateArray)(e)))}};id.default=t2});var BE=E(od=>{"use strict";Object.defineProperty(od,"__esModule",{value:!0});var Rt=G(),ja=X(),r2={message:({params:{min:e,max:t}})=>t===void 0?(0,Rt.str)`must contain at least ${e} valid item(s)`:(0,Rt.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,Rt._)`{minContains: ${e}}`:(0,Rt._)`{minContains: ${e}, maxContains: ${t}}`},n2={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:r2,code(e){let{gen:t,schema:r,parentSchema:n,data:s,it:i}=e,o,a,{minContains:u,maxContains:c}=n;i.opts.next?(o=u===void 0?1:u,a=c):o=1;let l=t.const("len",(0,Rt._)`${s}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,ja.checkStrictMode)(i,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,ja.checkStrictMode)(i,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,ja.alwaysValidSchema)(i,r)){let y=(0,Rt._)`${l} >= ${o}`;a!==void 0&&(y=(0,Rt._)`${y} && ${l} <= ${a}`),e.pass(y);return}i.items=!0;let d=t.name("valid");a===void 0&&o===1?f(d,()=>t.if(d,()=>t.break())):o===0?(t.let(d,!0),a!==void 0&&t.if((0,Rt._)`${s}.length > 0`,p)):(t.let(d,!1),p()),e.result(d,()=>e.reset());function p(){let y=t.name("_valid"),_=t.let("count",0);f(y,()=>t.if(y,()=>h(_)))}function f(y,_){t.forRange("i",0,l,S=>{e.subschema({keyword:"contains",dataProp:S,dataPropType:ja.Type.Num,compositeRule:!0},y),_()})}function h(y){t.code((0,Rt._)`${y}++`),a===void 0?t.if((0,Rt._)`${y} >= ${o}`,()=>t.assign(d,!0).break()):(t.if((0,Rt._)`${y} > ${a}`,()=>t.assign(d,!1).break()),o===1?t.assign(d,!0):t.if((0,Rt._)`${y} >= ${o}`,()=>t.assign(d,!0)))}}};od.default=n2});var KE=E(Yt=>{"use strict";Object.defineProperty(Yt,"__esModule",{value:!0});Yt.validateSchemaDeps=Yt.validatePropertyDeps=Yt.error=void 0;var ad=G(),s2=X(),Ri=ze();Yt.error={message:({params:{property:e,depsCount:t,deps:r}})=>{let n=t===1?"property":"properties";return(0,ad.str)`must have ${n} ${r} when property ${e} is present`},params:({params:{property:e,depsCount:t,deps:r,missingProperty:n}})=>(0,ad._)`{property: ${e},
    missingProperty: ${n},
    depsCount: ${t},
    deps: ${r}}`};var i2={keyword:"dependencies",type:"object",schemaType:"object",error:Yt.error,code(e){let[t,r]=o2(e);GE(e,t),JE(e,r)}};function o2({schema:e}){let t={},r={};for(let n in e){if(n==="__proto__")continue;let s=Array.isArray(e[n])?t:r;s[n]=e[n]}return[t,r]}function GE(e,t=e.schema){let{gen:r,data:n,it:s}=e;if(Object.keys(t).length===0)return;let i=r.let("missing");for(let o in t){let a=t[o];if(a.length===0)continue;let u=(0,Ri.propertyInData)(r,n,o,s.opts.ownProperties);e.setParams({property:o,depsCount:a.length,deps:a.join(", ")}),s.allErrors?r.if(u,()=>{for(let c of a)(0,Ri.checkReportMissingProp)(e,c)}):(r.if((0,ad._)`${u} && (${(0,Ri.checkMissingProp)(e,a,i)})`),(0,Ri.reportMissingProp)(e,i),r.else())}}Yt.validatePropertyDeps=GE;function JE(e,t=e.schema){let{gen:r,data:n,keyword:s,it:i}=e,o=r.name("valid");for(let a in t)(0,s2.alwaysValidSchema)(i,t[a])||(r.if((0,Ri.propertyInData)(r,n,a,i.opts.ownProperties),()=>{let u=e.subschema({keyword:s,schemaProp:a},o);e.mergeValidEvaluated(u,o)},()=>r.var(o,!0)),e.ok(o))}Yt.validateSchemaDeps=JE;Yt.default=i2});var YE=E(ud=>{"use strict";Object.defineProperty(ud,"__esModule",{value:!0});var WE=G(),a2=X(),u2={message:"property name must be valid",params:({params:e})=>(0,WE._)`{propertyName: ${e.propertyName}}`},l2={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:u2,code(e){let{gen:t,schema:r,data:n,it:s}=e;if((0,a2.alwaysValidSchema)(s,r))return;let i=t.name("valid");t.forIn("key",n,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},i),t.if((0,WE.not)(i),()=>{e.error(!0),s.allErrors||t.break()})}),e.ok(i)}};ud.default=l2});var cd=E(ld=>{"use strict";Object.defineProperty(ld,"__esModule",{value:!0});var Da=ze(),Dt=G(),c2=vt(),xa=X(),f2={message:"must NOT have additional properties",params:({params:e})=>(0,Dt._)`{additionalProperty: ${e.additionalProperty}}`},d2={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:f2,code(e){let{gen:t,schema:r,parentSchema:n,data:s,errsCount:i,it:o}=e;if(!i)throw new Error("ajv implementation error");let{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,xa.alwaysValidSchema)(o,r))return;let c=(0,Da.allSchemaProperties)(n.properties),l=(0,Da.allSchemaProperties)(n.patternProperties);d(),e.ok((0,Dt._)`${i} === ${c2.default.errors}`);function d(){t.forIn("key",s,_=>{!c.length&&!l.length?h(_):t.if(p(_),()=>h(_))})}function p(_){let S;if(c.length>8){let v=(0,xa.schemaRefOrVal)(o,n.properties,"properties");S=(0,Da.isOwnProperty)(t,v,_)}else c.length?S=(0,Dt.or)(...c.map(v=>(0,Dt._)`${_} === ${v}`)):S=Dt.nil;return l.length&&(S=(0,Dt.or)(S,...l.map(v=>(0,Dt._)`${(0,Da.usePattern)(e,v)}.test(${_})`))),(0,Dt.not)(S)}function f(_){t.code((0,Dt._)`delete ${s}[${_}]`)}function h(_){if(u.removeAdditional==="all"||u.removeAdditional&&r===!1){f(_);return}if(r===!1){e.setParams({additionalProperty:_}),e.error(),a||t.break();return}if(typeof r=="object"&&!(0,xa.alwaysValidSchema)(o,r)){let S=t.name("valid");u.removeAdditional==="failing"?(y(_,S,!1),t.if((0,Dt.not)(S),()=>{e.reset(),f(_)})):(y(_,S),a||t.if((0,Dt.not)(S),()=>t.break()))}}function y(_,S,v){let g={keyword:"additionalProperties",dataProp:_,dataPropType:xa.Type.Str};v===!1&&Object.assign(g,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(g,S)}}};ld.default=d2});var ZE=E(dd=>{"use strict";Object.defineProperty(dd,"__esModule",{value:!0});var h2=Yn(),XE=ze(),fd=X(),QE=cd(),p2={keyword:"properties",type:"object",schemaType:"object",code(e){let{gen:t,schema:r,parentSchema:n,data:s,it:i}=e;i.opts.removeAdditional==="all"&&n.additionalProperties===void 0&&QE.default.code(new h2.KeywordCxt(i,QE.default,"additionalProperties"));let o=(0,XE.allSchemaProperties)(r);for(let d of o)i.definedProperties.add(d);i.opts.unevaluated&&o.length&&i.props!==!0&&(i.props=fd.mergeEvaluated.props(t,(0,fd.toHash)(o),i.props));let a=o.filter(d=>!(0,fd.alwaysValidSchema)(i,r[d]));if(a.length===0)return;let u=t.name("valid");for(let d of a)c(d)?l(d):(t.if((0,XE.propertyInData)(t,s,d,i.opts.ownProperties)),l(d),i.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(d),e.ok(u);function c(d){return i.opts.useDefaults&&!i.compositeRule&&r[d].default!==void 0}function l(d){e.subschema({keyword:"properties",schemaProp:d,dataProp:d},u)}}};dd.default=p2});var nv=E(hd=>{"use strict";Object.defineProperty(hd,"__esModule",{value:!0});var ev=ze(),Fa=G(),tv=X(),rv=X(),m2={keyword:"patternProperties",type:"object",schemaType:"object",code(e){let{gen:t,schema:r,data:n,parentSchema:s,it:i}=e,{opts:o}=i,a=(0,ev.allSchemaProperties)(r),u=a.filter(y=>(0,tv.alwaysValidSchema)(i,r[y]));if(a.length===0||u.length===a.length&&(!i.opts.unevaluated||i.props===!0))return;let c=o.strictSchema&&!o.allowMatchingProperties&&s.properties,l=t.name("valid");i.props!==!0&&!(i.props instanceof Fa.Name)&&(i.props=(0,rv.evaluatedPropsToName)(t,i.props));let{props:d}=i;p();function p(){for(let y of a)c&&f(y),i.allErrors?h(y):(t.var(l,!0),h(y),t.if(l))}function f(y){for(let _ in c)new RegExp(y).test(_)&&(0,tv.checkStrictMode)(i,`property ${_} matches pattern ${y} (use allowMatchingProperties)`)}function h(y){t.forIn("key",n,_=>{t.if((0,Fa._)`${(0,ev.usePattern)(e,y)}.test(${_})`,()=>{let S=u.includes(y);S||e.subschema({keyword:"patternProperties",schemaProp:y,dataProp:_,dataPropType:rv.Type.Str},l),i.opts.unevaluated&&d!==!0?t.assign((0,Fa._)`${d}[${_}]`,!0):!S&&!i.allErrors&&t.if((0,Fa.not)(l),()=>t.break())})})}}};hd.default=m2});var sv=E(pd=>{"use strict";Object.defineProperty(pd,"__esModule",{value:!0});var y2=X(),g2={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){let{gen:t,schema:r,it:n}=e;if((0,y2.alwaysValidSchema)(n,r)){e.fail();return}let s=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},s),e.failResult(s,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};pd.default=g2});var iv=E(md=>{"use strict";Object.defineProperty(md,"__esModule",{value:!0});var _2=ze(),S2={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:_2.validateUnion,error:{message:"must match a schema in anyOf"}};md.default=S2});var ov=E(yd=>{"use strict";Object.defineProperty(yd,"__esModule",{value:!0});var Ma=G(),E2=X(),v2={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,Ma._)`{passingSchemas: ${e.passing}}`},b2={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:v2,code(e){let{gen:t,schema:r,parentSchema:n,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&n.discriminator)return;let i=r,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(c),e.result(o,()=>e.reset(),()=>e.error(!0));function c(){i.forEach((l,d)=>{let p;(0,E2.alwaysValidSchema)(s,l)?t.var(u,!0):p=e.subschema({keyword:"oneOf",schemaProp:d,compositeRule:!0},u),d>0&&t.if((0,Ma._)`${u} && ${o}`).assign(o,!1).assign(a,(0,Ma._)`[${a}, ${d}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,d),p&&e.mergeEvaluated(p,Ma.Name)})})}}};yd.default=b2});var av=E(gd=>{"use strict";Object.defineProperty(gd,"__esModule",{value:!0});var R2=X(),w2={keyword:"allOf",schemaType:"array",code(e){let{gen:t,schema:r,it:n}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");let s=t.name("valid");r.forEach((i,o)=>{if((0,R2.alwaysValidSchema)(n,i))return;let a=e.subschema({keyword:"allOf",schemaProp:o},s);e.ok(s),e.mergeEvaluated(a)})}};gd.default=w2});var cv=E(_d=>{"use strict";Object.defineProperty(_d,"__esModule",{value:!0});var Ha=G(),lv=X(),T2={message:({params:e})=>(0,Ha.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,Ha._)`{failingKeyword: ${e.ifClause}}`},O2={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:T2,code(e){let{gen:t,parentSchema:r,it:n}=e;r.then===void 0&&r.else===void 0&&(0,lv.checkStrictMode)(n,'"if" without "then" and "else" is ignored');let s=uv(n,"then"),i=uv(n,"else");if(!s&&!i)return;let o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),s&&i){let l=t.let("ifClause");e.setParams({ifClause:l}),t.if(a,c("then",l),c("else",l))}else s?t.if(a,c("then")):t.if((0,Ha.not)(a),c("else"));e.pass(o,()=>e.error(!0));function u(){let l=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(l)}function c(l,d){return()=>{let p=e.subschema({keyword:l},a);t.assign(o,a),e.mergeValidEvaluated(p,o),d?t.assign(d,(0,Ha._)`${l}`):e.setParams({ifClause:l})}}}};function uv(e,t){let r=e.schema[t];return r!==void 0&&!(0,lv.alwaysValidSchema)(e,r)}_d.default=O2});var fv=E(Sd=>{"use strict";Object.defineProperty(Sd,"__esModule",{value:!0});var $2=X(),P2={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){t.if===void 0&&(0,$2.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};Sd.default=P2});var dv=E(Ed=>{"use strict";Object.defineProperty(Ed,"__esModule",{value:!0});var I2=rd(),N2=VE(),A2=nd(),C2=UE(),k2=BE(),q2=KE(),L2=YE(),j2=cd(),D2=ZE(),x2=nv(),F2=sv(),M2=iv(),H2=ov(),V2=av(),z2=cv(),U2=fv();function B2(e=!1){let t=[F2.default,M2.default,H2.default,V2.default,z2.default,U2.default,L2.default,j2.default,q2.default,D2.default,x2.default];return e?t.push(N2.default,C2.default):t.push(I2.default,A2.default),t.push(k2.default),t}Ed.default=B2});var hv=E(vd=>{"use strict";Object.defineProperty(vd,"__esModule",{value:!0});var Ne=G(),G2={message:({schemaCode:e})=>(0,Ne.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,Ne._)`{format: ${e}}`},J2={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:G2,code(e,t){let{gen:r,data:n,$data:s,schema:i,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:c,schemaEnv:l,self:d}=a;if(!u.validateFormats)return;s?p():f();function p(){let h=r.scopeValue("formats",{ref:d.formats,code:u.code.formats}),y=r.const("fDef",(0,Ne._)`${h}[${o}]`),_=r.let("fType"),S=r.let("format");r.if((0,Ne._)`typeof ${y} == "object" && !(${y} instanceof RegExp)`,()=>r.assign(_,(0,Ne._)`${y}.type || "string"`).assign(S,(0,Ne._)`${y}.validate`),()=>r.assign(_,(0,Ne._)`"string"`).assign(S,y)),e.fail$data((0,Ne.or)(v(),g()));function v(){return u.strictSchema===!1?Ne.nil:(0,Ne._)`${o} && !${S}`}function g(){let m=l.$async?(0,Ne._)`(${y}.async ? await ${S}(${n}) : ${S}(${n}))`:(0,Ne._)`${S}(${n})`,w=(0,Ne._)`(typeof ${S} == "function" ? ${m} : ${S}.test(${n}))`;return(0,Ne._)`${S} && ${S} !== true && ${_} === ${t} && !${w}`}}function f(){let h=d.formats[i];if(!h){v();return}if(h===!0)return;let[y,_,S]=g(h);y===t&&e.pass(m());function v(){if(u.strictSchema===!1){d.logger.warn(w());return}throw new Error(w());function w(){return`unknown format "${i}" ignored in schema at path "${c}"`}}function g(w){let T=w instanceof RegExp?(0,Ne.regexpCode)(w):u.code.formats?(0,Ne._)`${u.code.formats}${(0,Ne.getProperty)(i)}`:void 0,b=r.scopeValue("formats",{key:i,ref:w,code:T});return typeof w=="object"&&!(w instanceof RegExp)?[w.type||"string",w.validate,(0,Ne._)`${b}.validate`]:["string",w,b]}function m(){if(typeof h=="object"&&!(h instanceof RegExp)&&h.async){if(!l.$async)throw new Error("async format in sync schema");return(0,Ne._)`await ${S}(${n})`}return typeof _=="function"?(0,Ne._)`${S}(${n})`:(0,Ne._)`${S}.test(${n})`}}}};vd.default=J2});var pv=E(bd=>{"use strict";Object.defineProperty(bd,"__esModule",{value:!0});var K2=hv(),W2=[K2.default];bd.default=W2});var mv=E(es=>{"use strict";Object.defineProperty(es,"__esModule",{value:!0});es.contentVocabulary=es.metadataVocabulary=void 0;es.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];es.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]});var gv=E(Rd=>{"use strict";Object.defineProperty(Rd,"__esModule",{value:!0});var Y2=wE(),X2=xE(),Q2=dv(),Z2=pv(),yv=mv(),eH=[Y2.default,X2.default,(0,Q2.default)(),Z2.default,yv.metadataVocabulary,yv.contentVocabulary];Rd.default=eH});var wd=E(Va=>{"use strict";Object.defineProperty(Va,"__esModule",{value:!0});Va.DiscrError=void 0;var _v;(function(e){e.Tag="tag",e.Mapping="mapping"})(_v||(Va.DiscrError=_v={}))});var Ev=E(Od=>{"use strict";Object.defineProperty(Od,"__esModule",{value:!0});var ts=G(),Td=wd(),Sv=fn(),tH=hr(),rH=X(),nH={message:({params:{discrError:e,tagName:t}})=>e===Td.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>(0,ts._)`{error: ${e}, tag: ${r}, tagValue: ${t}}`},sH={keyword:"discriminator",type:"object",schemaType:"object",error:nH,code(e){let{gen:t,data:r,schema:n,parentSchema:s,it:i}=e,{oneOf:o}=s;if(!i.opts.discriminator)throw new Error("discriminator: requires discriminator option");let a=n.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(n.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");let u=t.let("valid",!1),c=t.const("tag",(0,ts._)`${r}${(0,ts.getProperty)(a)}`);t.if((0,ts._)`typeof ${c} == "string"`,()=>l(),()=>e.error(!1,{discrError:Td.DiscrError.Tag,tag:c,tagName:a})),e.ok(u);function l(){let f=p();t.if(!1);for(let h in f)t.elseIf((0,ts._)`${c} === ${h}`),t.assign(u,d(f[h]));t.else(),e.error(!1,{discrError:Td.DiscrError.Mapping,tag:c,tagName:a}),t.endIf()}function d(f){let h=t.name("valid"),y=e.subschema({keyword:"oneOf",schemaProp:f},h);return e.mergeEvaluated(y,ts.Name),h}function p(){var f;let h={},y=S(s),_=!0;for(let m=0;m<o.length;m++){let w=o[m];if(w?.$ref&&!(0,rH.schemaHasRulesButRef)(w,i.self.RULES)){let b=w.$ref;if(w=Sv.resolveRef.call(i.self,i.schemaEnv.root,i.baseId,b),w instanceof Sv.SchemaEnv&&(w=w.schema),w===void 0)throw new tH.default(i.opts.uriResolver,i.baseId,b)}let T=(f=w?.properties)===null||f===void 0?void 0:f[a];if(typeof T!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);_=_&&(y||S(w)),v(T,m)}if(!_)throw new Error(`discriminator: "${a}" must be required`);return h;function S({required:m}){return Array.isArray(m)&&m.includes(a)}function v(m,w){if(m.const)g(m.const,w);else if(m.enum)for(let T of m.enum)g(T,w);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function g(m,w){if(typeof m!="string"||m in h)throw new Error(`discriminator: "${a}" values must be unique strings`);h[m]=w}}}};Od.default=sH});var vv=E((R8,iH)=>{iH.exports={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0}});var Ua=E((ve,$d)=>{"use strict";Object.defineProperty(ve,"__esModule",{value:!0});ve.MissingRefError=ve.ValidationError=ve.CodeGen=ve.Name=ve.nil=ve.stringify=ve.str=ve._=ve.KeywordCxt=ve.Ajv=void 0;var oH=jf(),aH=gv(),uH=Ev(),bv=vv(),lH=["/properties"],za="http://json-schema.org/draft-07/schema",rs=class extends oH.default{_addVocabularies(){super._addVocabularies(),aH.default.forEach(t=>this.addVocabulary(t)),this.opts.discriminator&&this.addKeyword(uH.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;let t=this.opts.$data?this.$dataMetaSchema(bv,lH):bv;this.addMetaSchema(t,za,!1),this.refs["http://json-schema.org/schema"]=za}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(za)?za:void 0)}};ve.Ajv=rs;$d.exports=ve=rs;$d.exports.Ajv=rs;Object.defineProperty(ve,"__esModule",{value:!0});ve.default=rs;var cH=Yn();Object.defineProperty(ve,"KeywordCxt",{enumerable:!0,get:function(){return cH.KeywordCxt}});var ns=G();Object.defineProperty(ve,"_",{enumerable:!0,get:function(){return ns._}});Object.defineProperty(ve,"str",{enumerable:!0,get:function(){return ns.str}});Object.defineProperty(ve,"stringify",{enumerable:!0,get:function(){return ns.stringify}});Object.defineProperty(ve,"nil",{enumerable:!0,get:function(){return ns.nil}});Object.defineProperty(ve,"Name",{enumerable:!0,get:function(){return ns.Name}});Object.defineProperty(ve,"CodeGen",{enumerable:!0,get:function(){return ns.CodeGen}});var fH=li();Object.defineProperty(ve,"ValidationError",{enumerable:!0,get:function(){return fH.default}});var dH=hr();Object.defineProperty(ve,"MissingRefError",{enumerable:!0,get:function(){return dH.default}})});var Ba=E(Qt=>{"use strict";Object.defineProperty(Qt,"__esModule",{value:!0});Qt.formatNames=Qt.fastFormats=Qt.fullFormats=void 0;function Xt(e,t){return{validate:e,compare:t}}Qt.fullFormats={date:Xt(Ov,Ad),time:Xt(Id(!0),Cd),"date-time":Xt(Rv(!0),Pv),"iso-time":Xt(Id(),$v),"iso-date-time":Xt(Rv(),Iv),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:_H,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:TH,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:SH,int32:{type:"number",validate:bH},int64:{type:"number",validate:RH},float:{type:"number",validate:Tv},double:{type:"number",validate:Tv},password:!0,binary:!0};Qt.fastFormats={...Qt.fullFormats,date:Xt(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,Ad),time:Xt(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,Cd),"date-time":Xt(/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,Pv),"iso-time":Xt(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,$v),"iso-date-time":Xt(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,Iv),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i};Qt.formatNames=Object.keys(Qt.fullFormats);function hH(e){return e%4===0&&(e%100!==0||e%400===0)}var pH=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,mH=[0,31,28,31,30,31,30,31,31,30,31,30,31];function Ov(e){let t=pH.exec(e);if(!t)return!1;let r=+t[1],n=+t[2],s=+t[3];return n>=1&&n<=12&&s>=1&&s<=(n===2&&hH(r)?29:mH[n])}function Ad(e,t){if(e&&t)return e>t?1:e<t?-1:0}var Pd=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function Id(e){return function(r){let n=Pd.exec(r);if(!n)return!1;let s=+n[1],i=+n[2],o=+n[3],a=n[4],u=n[5]==="-"?-1:1,c=+(n[6]||0),l=+(n[7]||0);if(c>23||l>59||e&&!a)return!1;if(s<=23&&i<=59&&o<60)return!0;let d=i-l*u,p=s-c*u-(d<0?1:0);return(p===23||p===-1)&&(d===59||d===-1)&&o<61}}function Cd(e,t){if(!(e&&t))return;let r=new Date("2020-01-01T"+e).valueOf(),n=new Date("2020-01-01T"+t).valueOf();if(r&&n)return r-n}function $v(e,t){if(!(e&&t))return;let r=Pd.exec(e),n=Pd.exec(t);if(r&&n)return e=r[1]+r[2]+r[3],t=n[1]+n[2]+n[3],e>t?1:e<t?-1:0}var Nd=/t|\s/i;function Rv(e){let t=Id(e);return function(n){let s=n.split(Nd);return s.length===2&&Ov(s[0])&&t(s[1])}}function Pv(e,t){if(!(e&&t))return;let r=new Date(e).valueOf(),n=new Date(t).valueOf();if(r&&n)return r-n}function Iv(e,t){if(!(e&&t))return;let[r,n]=e.split(Nd),[s,i]=t.split(Nd),o=Ad(r,s);if(o!==void 0)return o||Cd(n,i)}var yH=/\/|:/,gH=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function _H(e){return yH.test(e)&&gH.test(e)}var wv=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function SH(e){return wv.lastIndex=0,wv.test(e)}var EH=-(2**31),vH=2**31-1;function bH(e){return Number.isInteger(e)&&e<=vH&&e>=EH}function RH(e){return Number.isInteger(e)}function Tv(){return!0}var wH=/[^\\]\\Z/;function TH(e){if(wH.test(e))return!1;try{return new RegExp(e),!0}catch{return!1}}});var Nv=E(ss=>{"use strict";Object.defineProperty(ss,"__esModule",{value:!0});ss.formatLimitDefinition=void 0;var OH=Ua(),xt=G(),Dr=xt.operators,Ga={formatMaximum:{okStr:"<=",ok:Dr.LTE,fail:Dr.GT},formatMinimum:{okStr:">=",ok:Dr.GTE,fail:Dr.LT},formatExclusiveMaximum:{okStr:"<",ok:Dr.LT,fail:Dr.GTE},formatExclusiveMinimum:{okStr:">",ok:Dr.GT,fail:Dr.LTE}},$H={message:({keyword:e,schemaCode:t})=>(0,xt.str)`should be ${Ga[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,xt._)`{comparison: ${Ga[e].okStr}, limit: ${t}}`};ss.formatLimitDefinition={keyword:Object.keys(Ga),type:"string",schemaType:"string",$data:!0,error:$H,code(e){let{gen:t,data:r,schemaCode:n,keyword:s,it:i}=e,{opts:o,self:a}=i;if(!o.validateFormats)return;let u=new OH.KeywordCxt(i,a.RULES.all.format.definition,"format");u.$data?c():l();function c(){let p=t.scopeValue("formats",{ref:a.formats,code:o.code.formats}),f=t.const("fmt",(0,xt._)`${p}[${u.schemaCode}]`);e.fail$data((0,xt.or)((0,xt._)`typeof ${f} != "object"`,(0,xt._)`${f} instanceof RegExp`,(0,xt._)`typeof ${f}.compare != "function"`,d(f)))}function l(){let p=u.schema,f=a.formats[p];if(!f||f===!0)return;if(typeof f!="object"||f instanceof RegExp||typeof f.compare!="function")throw new Error(`"${s}": format "${p}" does not define "compare" function`);let h=t.scopeValue("formats",{key:p,ref:f,code:o.code.formats?(0,xt._)`${o.code.formats}${(0,xt.getProperty)(p)}`:void 0});e.fail$data(d(h))}function d(p){return(0,xt._)`${p}.compare(${r}, ${n}) ${Ga[s].fail} 0`}},dependencies:["format"]};var PH=e=>(e.addKeyword(ss.formatLimitDefinition),e);ss.default=PH});var Ld=E((wi,kv)=>{"use strict";Object.defineProperty(wi,"__esModule",{value:!0});var is=Ba(),IH=Nv(),kd=G(),Av=new kd.Name("fullFormats"),NH=new kd.Name("fastFormats"),qd=(e,t={keywords:!0})=>{if(Array.isArray(t))return Cv(e,t,is.fullFormats,Av),e;let[r,n]=t.mode==="fast"?[is.fastFormats,NH]:[is.fullFormats,Av],s=t.formats||is.formatNames;return Cv(e,s,r,n),t.keywords&&(0,IH.default)(e),e};qd.get=(e,t="full")=>{let n=(t==="fast"?is.fastFormats:is.fullFormats)[e];if(!n)throw new Error(`Unknown format "${e}"`);return n};function Cv(e,t,r,n){var s,i;(s=(i=e.opts.code).formats)!==null&&s!==void 0||(i.formats=(0,kd._)`require("ajv-formats/dist/formats").${n}`);for(let o of t)e.addFormat(o,r[o])}kv.exports=wi=qd;Object.defineProperty(wi,"__esModule",{value:!0});wi.default=qd});var Dd=E((O8,qv)=>{"use strict";var AH=Ua(),CH=Pa(),kH=Ld(),qH=zo()({proto:!0}),jd=class e{constructor(t){this.ajv=new AH({...t,strictSchema:!1,validateSchema:!1,allowUnionTypes:!0,uriResolver:CH}),kH(this.ajv),this.ajv.addKeyword({keyword:"fjs_type",type:"object",errors:!1,validate:(r,n)=>n instanceof Date}),this._ajvSchemas={},this._ajvOptions=t||{}}addSchema(t,r){let n=t.$id||r;if(t.$id!==void 0&&t.$id[0]==="#"&&(n=r+t.$id),this.ajv.refs[n]===void 0&&this.ajv.schemas[n]===void 0){let s=qH(t);this.convertSchemaToAjvFormat(s),this.ajv.addSchema(s,n),this._ajvSchemas[n]=t}}validate(t,r){return this.ajv.validate(t,r)}convertSchemaToAjvFormat(t){if(t!==null){t.type==="string"?(t.fjs_type="string",t.type=["string","object"]):Array.isArray(t.type)&&t.type.includes("string")&&!t.type.includes("object")&&(t.fjs_type="string",t.type.push("object"));for(let r in t)typeof t[r]=="object"&&this.convertSchemaToAjvFormat(t[r])}}getState(){return{ajvOptions:this._ajvOptions,ajvSchemas:this._ajvSchemas}}static restoreFromState(t){let r=new e(t.ajvOptions);for(let[n,s]of Object.entries(t.ajvSchemas))r.ajv.addSchema(s,n);return r}};qv.exports=jd});var jv=E(($8,Lv)=>{"use strict";var xd=class e{constructor(t,r,n="#"){this.schema=t,this.schemaId=r,this.jsonPointer=n}getPropertyLocation(t){return new e(this.schema[t],this.schemaId,this.jsonPointer+"/"+t)}getSchemaRef(){return this.schemaId+this.jsonPointer}};Lv.exports=xd});var Hv=E((P8,Md)=>{"use strict";Md.exports=k;Md.exports.default=k;var LH={$schema:"http://json-schema.org/draft-07/schema#",$id:"http://json-schema.org/draft-07/schema#",title:"Core schema meta-schema",definitions:{schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},type:["object","boolean"],properties:{$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},default:!0},Dv={enum:["array","boolean","integer","null","number","object","string"]},xv=/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,jH=Ba().fullFormats.uri,Fv=Ba().fullFormats.regex;function wt(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0,a=o;return typeof e=="number"&&!(e%1)&&!isNaN(e)&&isFinite(e)?o===a&&typeof e=="number"&&isFinite(e)&&(e<0||isNaN(e))?(wt.errors=[{instancePath:t,schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1):(wt.errors=i,o===0):(wt.errors=[{instancePath:t,schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1)}var Fd={validate:k};function nt(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(o===0)if(Array.isArray(e)){if(e.length<1)return nt.errors=[{instancePath:t,schemaPath:"#/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{var a=!0;let u=e.length;for(let c=0;c<u;c++){let l=o;Fd.validate(e[c],{instancePath:t+"/"+c,parentData:e,parentDataProperty:c,rootData:s})||(i=i===null?Fd.validate.errors:i.concat(Fd.validate.errors),o=i.length);var a=l===o;if(!a)break}}}else return nt.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;return nt.errors=i,o===0}var Mv=Si().default;function k(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(!(e&&typeof e=="object"&&!Array.isArray(e))&&typeof e!="boolean")return k.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:LH.type},message:"must be object,boolean"}],!1;if(o===0&&e&&typeof e=="object"&&!Array.isArray(e)){if(e.$id!==void 0){let g=e.$id,m=o;if(o===m&&o===m)if(typeof g=="string"){if(!xv.test(g))return k.errors=[{instancePath:t+"/$id",schemaPath:"#/properties/%24id/format",keyword:"format",params:{format:"uri-reference"},message:'must match format "uri-reference"'}],!1}else return k.errors=[{instancePath:t+"/$id",schemaPath:"#/properties/%24id/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=m===o}else var a=!0;if(a){if(e.$schema!==void 0){let g=e.$schema,m=o;if(o===m&&o===m)if(typeof g=="string"){if(!jH(g))return k.errors=[{instancePath:t+"/$schema",schemaPath:"#/properties/%24schema/format",keyword:"format",params:{format:"uri"},message:'must match format "uri"'}],!1}else return k.errors=[{instancePath:t+"/$schema",schemaPath:"#/properties/%24schema/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=m===o}else var a=!0;if(a){if(e.$ref!==void 0){let g=e.$ref,m=o;if(o===m&&o===m)if(typeof g=="string"){if(!xv.test(g))return k.errors=[{instancePath:t+"/$ref",schemaPath:"#/properties/%24ref/format",keyword:"format",params:{format:"uri-reference"},message:'must match format "uri-reference"'}],!1}else return k.errors=[{instancePath:t+"/$ref",schemaPath:"#/properties/%24ref/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=m===o}else var a=!0;if(a){if(e.$comment!==void 0){let g=o;if(typeof e.$comment!="string")return k.errors=[{instancePath:t+"/$comment",schemaPath:"#/properties/%24comment/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.title!==void 0){let g=o;if(typeof e.title!="string")return k.errors=[{instancePath:t+"/title",schemaPath:"#/properties/title/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.description!==void 0){let g=o;if(typeof e.description!="string")return k.errors=[{instancePath:t+"/description",schemaPath:"#/properties/description/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.readOnly!==void 0){let g=o;if(typeof e.readOnly!="boolean")return k.errors=[{instancePath:t+"/readOnly",schemaPath:"#/properties/readOnly/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var a=g===o}else var a=!0;if(a){if(e.examples!==void 0){let g=o;if(o===g&&!Array.isArray(e.examples))return k.errors=[{instancePath:t+"/examples",schemaPath:"#/properties/examples/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=g===o}else var a=!0;if(a){if(e.multipleOf!==void 0){let g=e.multipleOf,m=o;if(o===m)if(typeof g=="number"&&isFinite(g)){if(g<=0||isNaN(g))return k.errors=[{instancePath:t+"/multipleOf",schemaPath:"#/properties/multipleOf/exclusiveMinimum",keyword:"exclusiveMinimum",params:{comparison:">",limit:0},message:"must be > 0"}],!1}else return k.errors=[{instancePath:t+"/multipleOf",schemaPath:"#/properties/multipleOf/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=m===o}else var a=!0;if(a){if(e.maximum!==void 0){let g=e.maximum,m=o;if(!(typeof g=="number"&&isFinite(g)))return k.errors=[{instancePath:t+"/maximum",schemaPath:"#/properties/maximum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=m===o}else var a=!0;if(a){if(e.exclusiveMaximum!==void 0){let g=e.exclusiveMaximum,m=o;if(!(typeof g=="number"&&isFinite(g)))return k.errors=[{instancePath:t+"/exclusiveMaximum",schemaPath:"#/properties/exclusiveMaximum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=m===o}else var a=!0;if(a){if(e.minimum!==void 0){let g=e.minimum,m=o;if(!(typeof g=="number"&&isFinite(g)))return k.errors=[{instancePath:t+"/minimum",schemaPath:"#/properties/minimum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=m===o}else var a=!0;if(a){if(e.exclusiveMinimum!==void 0){let g=e.exclusiveMinimum,m=o;if(!(typeof g=="number"&&isFinite(g)))return k.errors=[{instancePath:t+"/exclusiveMinimum",schemaPath:"#/properties/exclusiveMinimum/type",keyword:"type",params:{type:"number"},message:"must be number"}],!1;var a=m===o}else var a=!0;if(a){if(e.maxLength!==void 0){let g=e.maxLength,m=o,w=o;if(!(typeof g=="number"&&!(g%1)&&!isNaN(g)&&isFinite(g)))return k.errors=[{instancePath:t+"/maxLength",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===w&&typeof g=="number"&&isFinite(g)&&(g<0||isNaN(g)))return k.errors=[{instancePath:t+"/maxLength",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=m===o}else var a=!0;if(a){if(e.minLength!==void 0){let g=o;wt(e.minLength,{instancePath:t+"/minLength",parentData:e,parentDataProperty:"minLength",rootData:s})||(i=i===null?wt.errors:i.concat(wt.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.pattern!==void 0){let g=e.pattern,m=o;if(o===m&&o===m)if(typeof g=="string"){if(!Fv(g))return k.errors=[{instancePath:t+"/pattern",schemaPath:"#/properties/pattern/format",keyword:"format",params:{format:"regex"},message:'must match format "regex"'}],!1}else return k.errors=[{instancePath:t+"/pattern",schemaPath:"#/properties/pattern/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=m===o}else var a=!0;if(a){if(e.additionalItems!==void 0){let g=o;k(e.additionalItems,{instancePath:t+"/additionalItems",parentData:e,parentDataProperty:"additionalItems",rootData:s})||(i=i===null?k.errors:i.concat(k.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.items!==void 0){let g=e.items,m=o,w=o,T=!1,b=o;k(g,{instancePath:t+"/items",parentData:e,parentDataProperty:"items",rootData:s})||(i=i===null?k.errors:i.concat(k.errors),o=i.length);var u=b===o;if(T=T||u,!T){let R=o;nt(g,{instancePath:t+"/items",parentData:e,parentDataProperty:"items",rootData:s})||(i=i===null?nt.errors:i.concat(nt.errors),o=i.length);var u=R===o;T=T||u}if(T)o=w,i!==null&&(w?i.length=w:i=null);else{let R={instancePath:t+"/items",schemaPath:"#/properties/items/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[R]:i.push(R),o++,k.errors=i,!1}var a=m===o}else var a=!0;if(a){if(e.maxItems!==void 0){let g=e.maxItems,m=o,w=o;if(!(typeof g=="number"&&!(g%1)&&!isNaN(g)&&isFinite(g)))return k.errors=[{instancePath:t+"/maxItems",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===w&&typeof g=="number"&&isFinite(g)&&(g<0||isNaN(g)))return k.errors=[{instancePath:t+"/maxItems",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=m===o}else var a=!0;if(a){if(e.minItems!==void 0){let g=o;wt(e.minItems,{instancePath:t+"/minItems",parentData:e,parentDataProperty:"minItems",rootData:s})||(i=i===null?wt.errors:i.concat(wt.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.uniqueItems!==void 0){let g=o;if(typeof e.uniqueItems!="boolean")return k.errors=[{instancePath:t+"/uniqueItems",schemaPath:"#/properties/uniqueItems/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;var a=g===o}else var a=!0;if(a){if(e.contains!==void 0){let g=o;k(e.contains,{instancePath:t+"/contains",parentData:e,parentDataProperty:"contains",rootData:s})||(i=i===null?k.errors:i.concat(k.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.maxProperties!==void 0){let g=e.maxProperties,m=o,w=o;if(!(typeof g=="number"&&!(g%1)&&!isNaN(g)&&isFinite(g)))return k.errors=[{instancePath:t+"/maxProperties",schemaPath:"#/definitions/nonNegativeInteger/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;if(o===w&&typeof g=="number"&&isFinite(g)&&(g<0||isNaN(g)))return k.errors=[{instancePath:t+"/maxProperties",schemaPath:"#/definitions/nonNegativeInteger/minimum",keyword:"minimum",params:{comparison:">=",limit:0},message:"must be >= 0"}],!1;var a=m===o}else var a=!0;if(a){if(e.minProperties!==void 0){let g=o;wt(e.minProperties,{instancePath:t+"/minProperties",parentData:e,parentDataProperty:"minProperties",rootData:s})||(i=i===null?wt.errors:i.concat(wt.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.required!==void 0){let g=e.required,m=o;if(o===o)if(Array.isArray(g)){var c=!0;let b=g.length;for(let O=0;O<b;O++){let R=o;if(typeof g[O]!="string")return k.errors=[{instancePath:t+"/required/"+O,schemaPath:"#/definitions/stringArray/items/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var c=R===o;if(!c)break}if(c){let O=g.length,R;if(O>1){let P={};for(;O--;){let D=g[O];if(typeof D=="string"){if(typeof P[D]=="number"){return R=P[D],k.errors=[{instancePath:t+"/required",schemaPath:"#/definitions/stringArray/uniqueItems",keyword:"uniqueItems",params:{i:O,j:R},message:"must NOT have duplicate items (items ## "+R+" and "+O+" are identical)"}],!1;break}P[D]=O}}}}}else return k.errors=[{instancePath:t+"/required",schemaPath:"#/definitions/stringArray/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=m===o}else var a=!0;if(a){if(e.additionalProperties!==void 0){let g=o;k(e.additionalProperties,{instancePath:t+"/additionalProperties",parentData:e,parentDataProperty:"additionalProperties",rootData:s})||(i=i===null?k.errors:i.concat(k.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.definitions!==void 0){let g=e.definitions,m=o;if(o===m)if(g&&typeof g=="object"&&!Array.isArray(g))for(let T in g){let b=o;k(g[T],{instancePath:t+"/definitions/"+T.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:g,parentDataProperty:T,rootData:s})||(i=i===null?k.errors:i.concat(k.errors),o=i.length);var l=b===o;if(!l)break}else return k.errors=[{instancePath:t+"/definitions",schemaPath:"#/properties/definitions/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=m===o}else var a=!0;if(a){if(e.properties!==void 0){let g=e.properties,m=o;if(o===m)if(g&&typeof g=="object"&&!Array.isArray(g))for(let T in g){let b=o;k(g[T],{instancePath:t+"/properties/"+T.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:g,parentDataProperty:T,rootData:s})||(i=i===null?k.errors:i.concat(k.errors),o=i.length);var d=b===o;if(!d)break}else return k.errors=[{instancePath:t+"/properties",schemaPath:"#/properties/properties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=m===o}else var a=!0;if(a){if(e.patternProperties!==void 0){let g=e.patternProperties,m=o;if(o===m)if(g&&typeof g=="object"&&!Array.isArray(g)){for(let T in g){let b=o;if(o===b&&typeof T=="string"&&!Fv(T)){let O={instancePath:t+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames/format",keyword:"format",params:{format:"regex"},message:'must match format "regex"',propertyName:T};i===null?i=[O]:i.push(O),o++}var p=b===o;if(!p){let O={instancePath:t+"/patternProperties",schemaPath:"#/properties/patternProperties/propertyNames",keyword:"propertyNames",params:{propertyName:T},message:"property name must be valid"};return i===null?i=[O]:i.push(O),o++,k.errors=i,!1;break}}if(p)for(let T in g){let b=o;k(g[T],{instancePath:t+"/patternProperties/"+T.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:g,parentDataProperty:T,rootData:s})||(i=i===null?k.errors:i.concat(k.errors),o=i.length);var f=b===o;if(!f)break}}else return k.errors=[{instancePath:t+"/patternProperties",schemaPath:"#/properties/patternProperties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=m===o}else var a=!0;if(a){if(e.dependencies!==void 0){let g=e.dependencies,m=o;if(o===m)if(g&&typeof g=="object"&&!Array.isArray(g))for(let T in g){let b=g[T],O=o,R=o,P=!1,D=o;k(b,{instancePath:t+"/dependencies/"+T.replace(/~/g,"~0").replace(/\//g,"~1"),parentData:g,parentDataProperty:T,rootData:s})||(i=i===null?k.errors:i.concat(k.errors),o=i.length);var h=D===o;if(P=P||h,!P){let I=o;if(o===o)if(Array.isArray(b)){var y=!0;let re=b.length;for(let L=0;L<re;L++){let J=o;if(typeof b[L]!="string"){let H={instancePath:t+"/dependencies/"+T.replace(/~/g,"~0").replace(/\//g,"~1")+"/"+L,schemaPath:"#/definitions/stringArray/items/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[H]:i.push(H),o++}var y=J===o;if(!y)break}if(y){let L=b.length,J;if(L>1){let Fe={};for(;L--;){let H=b[L];if(typeof H=="string"){if(typeof Fe[H]=="number"){J=Fe[H];let je={instancePath:t+"/dependencies/"+T.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/stringArray/uniqueItems",keyword:"uniqueItems",params:{i:L,j:J},message:"must NOT have duplicate items (items ## "+J+" and "+L+" are identical)"};i===null?i=[je]:i.push(je),o++;break}Fe[H]=L}}}}}else{let re={instancePath:t+"/dependencies/"+T.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/definitions/stringArray/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[re]:i.push(re),o++}var h=I===o;P=P||h}if(P)o=R,i!==null&&(R?i.length=R:i=null);else{let I={instancePath:t+"/dependencies/"+T.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/dependencies/additionalProperties/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[I]:i.push(I),o++,k.errors=i,!1}var _=O===o;if(!_)break}else return k.errors=[{instancePath:t+"/dependencies",schemaPath:"#/properties/dependencies/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=m===o}else var a=!0;if(a){if(e.propertyNames!==void 0){let g=o;k(e.propertyNames,{instancePath:t+"/propertyNames",parentData:e,parentDataProperty:"propertyNames",rootData:s})||(i=i===null?k.errors:i.concat(k.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.enum!==void 0){let g=e.enum,m=o;if(o===m)if(Array.isArray(g)){if(g.length<1)return k.errors=[{instancePath:t+"/enum",schemaPath:"#/properties/enum/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"}],!1;{let T=g.length,b;if(T>1){e:for(;T--;)for(b=T;b--;)if(Mv(g[T],g[b])){return k.errors=[{instancePath:t+"/enum",schemaPath:"#/properties/enum/uniqueItems",keyword:"uniqueItems",params:{i:T,j:b},message:"must NOT have duplicate items (items ## "+b+" and "+T+" are identical)"}],!1;break e}}}}else return k.errors=[{instancePath:t+"/enum",schemaPath:"#/properties/enum/type",keyword:"type",params:{type:"array"},message:"must be array"}],!1;var a=m===o}else var a=!0;if(a){if(e.type!==void 0){let g=e.type,m=o,w=o,T=!1,b=o;if(!(g==="array"||g==="boolean"||g==="integer"||g==="null"||g==="number"||g==="object"||g==="string")){let R={instancePath:t+"/type",schemaPath:"#/definitions/simpleTypes/enum",keyword:"enum",params:{allowedValues:Dv.enum},message:"must be equal to one of the allowed values"};i===null?i=[R]:i.push(R),o++}var S=b===o;if(T=T||S,!T){let R=o;if(o===R)if(Array.isArray(g))if(g.length<1){let D={instancePath:t+"/type",schemaPath:"#/properties/type/anyOf/1/minItems",keyword:"minItems",params:{limit:1},message:"must NOT have fewer than 1 items"};i===null?i=[D]:i.push(D),o++}else{var v=!0;let D=g.length;for(let I=0;I<D;I++){let N=g[I],z=o;if(!(N==="array"||N==="boolean"||N==="integer"||N==="null"||N==="number"||N==="object"||N==="string")){let L={instancePath:t+"/type/"+I,schemaPath:"#/definitions/simpleTypes/enum",keyword:"enum",params:{allowedValues:Dv.enum},message:"must be equal to one of the allowed values"};i===null?i=[L]:i.push(L),o++}var v=z===o;if(!v)break}if(v){let I=g.length,N;if(I>1){e:for(;I--;)for(N=I;N--;)if(Mv(g[I],g[N])){let z={instancePath:t+"/type",schemaPath:"#/properties/type/anyOf/1/uniqueItems",keyword:"uniqueItems",params:{i:I,j:N},message:"must NOT have duplicate items (items ## "+N+" and "+I+" are identical)"};i===null?i=[z]:i.push(z),o++;break e}}}}else{let D={instancePath:t+"/type",schemaPath:"#/properties/type/anyOf/1/type",keyword:"type",params:{type:"array"},message:"must be array"};i===null?i=[D]:i.push(D),o++}var S=R===o;T=T||S}if(T)o=w,i!==null&&(w?i.length=w:i=null);else{let R={instancePath:t+"/type",schemaPath:"#/properties/type/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[R]:i.push(R),o++,k.errors=i,!1}var a=m===o}else var a=!0;if(a){if(e.format!==void 0){let g=o;if(typeof e.format!="string")return k.errors=[{instancePath:t+"/format",schemaPath:"#/properties/format/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.contentMediaType!==void 0){let g=o;if(typeof e.contentMediaType!="string")return k.errors=[{instancePath:t+"/contentMediaType",schemaPath:"#/properties/contentMediaType/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.contentEncoding!==void 0){let g=o;if(typeof e.contentEncoding!="string")return k.errors=[{instancePath:t+"/contentEncoding",schemaPath:"#/properties/contentEncoding/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;var a=g===o}else var a=!0;if(a){if(e.if!==void 0){let g=o;k(e.if,{instancePath:t+"/if",parentData:e,parentDataProperty:"if",rootData:s})||(i=i===null?k.errors:i.concat(k.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.then!==void 0){let g=o;k(e.then,{instancePath:t+"/then",parentData:e,parentDataProperty:"then",rootData:s})||(i=i===null?k.errors:i.concat(k.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.else!==void 0){let g=o;k(e.else,{instancePath:t+"/else",parentData:e,parentDataProperty:"else",rootData:s})||(i=i===null?k.errors:i.concat(k.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.allOf!==void 0){let g=o;nt(e.allOf,{instancePath:t+"/allOf",parentData:e,parentDataProperty:"allOf",rootData:s})||(i=i===null?nt.errors:i.concat(nt.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.anyOf!==void 0){let g=o;nt(e.anyOf,{instancePath:t+"/anyOf",parentData:e,parentDataProperty:"anyOf",rootData:s})||(i=i===null?nt.errors:i.concat(nt.errors),o=i.length);var a=g===o}else var a=!0;if(a){if(e.oneOf!==void 0){let g=o;nt(e.oneOf,{instancePath:t+"/oneOf",parentData:e,parentDataProperty:"oneOf",rootData:s})||(i=i===null?nt.errors:i.concat(nt.errors),o=i.length);var a=g===o}else var a=!0;if(a)if(e.not!==void 0){let g=o;k(e.not,{instancePath:t+"/not",parentData:e,parentDataProperty:"not",rootData:s})||(i=i===null?k.errors:i.concat(k.errors),o=i.length);var a=g===o}else var a=!0}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}return k.errors=i,o===0}});var Ud=E((I8,Vv)=>{"use strict";var Hd=class extends Error{constructor(t,r){super(),this.name="JsonSchemaMergeError",this.code="JSON_SCHEMA_MERGE_ERROR",this.message=`Failed to merge "${t}" keyword schemas.`,this.schemas=r}},Vd=class extends Error{constructor(t,r){super(),this.name="JsonSchemaMergeError",this.code="JSON_SCHEMA_MERGE_ERROR",this.message=`Resolver for "${t}" keyword not found.`,this.schemas=r}},zd=class extends Error{constructor(t){super(),this.name="JsonSchemaMergeError",this.code="JSON_SCHEMA_MERGE_ERROR",this.message=`Invalid "onConflict" option: "${t}".`}};Vv.exports={MergeError:Hd,ResolverNotFoundError:Vd,InvalidOnConflictOptionError:zd}});var Bv=E((N8,Uv)=>{"use strict";var{dequal:DH}=ca(),{MergeError:Bd}=Ud();function zv(e){let t=e[0];for(let r=1;r<e.length;r++)t=t.filter(n=>e[r].includes(n));return t}function xH(e,t,r){let n=zv(t);if(n.length===0)throw new Bd(e,t);r[e]=n}function FH(e,t,r){for(let s=0;s<t.length;s++)Array.isArray(t[s])||(t[s]=[t[s]]);let n=zv(t);if(n.length===0)throw new Bd(e,t);n.length===1?r[e]=n[0]:r[e]=n}function MH(e,t,r){let n=[];for(let s of t)for(let i of s)n.includes(i)||n.push(i);r[e]=n}function HH(e,t,r){r[e]=Math.min(...t)}function VH(e,t,r){r[e]=Math.max(...t)}function zH(e,t,r){let n=(a,u)=>u?n(u,a%u):a,s=(a,u)=>a*u/n(a,u),i=1;for(let a of t)for(;a*i%1!==0;)i*=10;let o=t[0]*i;for(let a of t)o=s(o,a*i);r[e]=o/i}function UH(e,t,r){let n=t[0];for(let s=1;s<t.length;s++)if(!DH(t[s],n))throw new Bd(e,t);r[e]=n}function BH(){}function GH(e,t,r){for(let n of t)if(n===!1){r[e]=!1;return}r[e]=!0}function JH(e,t,r){for(let n of t)if(n===!0){r[e]=!0;return}r[e]=!1}Uv.exports={arraysIntersection:xH,hybridArraysIntersection:FH,arraysUnion:MH,minNumber:HH,maxNumber:VH,commonMultiple:zH,allEqual:UH,booleanAnd:GH,booleanOr:JH,skip:BH}});var Xv=E((A8,Yv)=>{"use strict";var{dequal:KH}=ca(),we=Bv(),Wa=Ud(),Kv={$id:we.skip,type:we.hybridArraysIntersection,enum:we.arraysIntersection,minLength:we.maxNumber,maxLength:we.minNumber,minimum:we.maxNumber,maximum:we.minNumber,multipleOf:we.commonMultiple,exclusiveMinimum:we.maxNumber,exclusiveMaximum:we.minNumber,minItems:we.maxNumber,maxItems:we.minNumber,maxProperties:we.minNumber,minProperties:we.maxNumber,const:we.allEqual,default:we.allEqual,format:we.allEqual,required:we.arraysUnion,properties:eV,patternProperties:Ka,additionalProperties:Ja,items:XH,additionalItems:QH,definitions:Ka,$defs:Ka,nullable:we.booleanAnd,oneOf:Gv,anyOf:Gv,allOf:we.arraysUnion,not:Ja,if:tV,then:we.skip,else:we.skip,dependencies:Jv,dependentRequired:Jv,dependentSchemas:Ka,propertyNames:Ja,uniqueItems:we.booleanOr,contains:Ja};function Ja(e,t,r,n,s){r[e]=Ft(t,s)}function WH(e){let t=[[]];for(let r of e){let n=[];for(let s of t)for(let i of r)n.push([...s,i]);t=n}return t}function Gv(e,t,r,n,s){if(t.length===1){r[e]=t[0];return}let i=WH(t),o=[];for(let a of i)try{let u=Ft(a,s);u!==void 0&&o.push(u)}catch(u){if(u instanceof Wa.MergeError)continue;throw u}r[e]=o}function YH(e,t){let{items:r,additionalItems:n}=e;return Array.isArray(r)?t<r.length?r[t]:n:r!==void 0?r:n}function XH(e,t,r,n,s){let i=0;for(let a of t)Array.isArray(a)&&(i=Math.max(i,a.length));if(i===0){r[e]=Ft(t,s);return}let o=[];for(let a=0;a<i;a++){let u=[];for(let c of n){let l=YH(c,a);l!==void 0&&u.push(l)}o[a]=Ft(u,s)}r[e]=o}function QH(e,t,r,n,s){let i=!1;for(let a of n)if(Array.isArray(a.items)){i=!0;break}if(!i){r[e]=Ft(t,s);return}let o=[];for(let a of n){let u=a.additionalItems;u===void 0&&!Array.isArray(a.items)&&(u=a.items),u!==void 0&&o.push(u)}r[e]=Ft(o,s)}function ZH(e,t){let{properties:r,patternProperties:n,additionalProperties:s}=e;if(r?.[t]!==void 0)return r[t];for(let i of Object.keys(n??{}))if(new RegExp(i).test(t))return n[i];return s}function eV(e,t,r,n,s){let i={};for(let a of n){let u=a.properties??{};for(let c of Object.keys(u)){if(i[c]!==void 0)continue;let l=u[c];i[c]=[l];for(let d of n){if(a===d)continue;let p=ZH(d,c);p!==void 0&&i[c].push(p)}}}let o={};for(let a of Object.keys(i)){let u=i[a];o[a]=Ft(u,s)}r[e]=o}function Ka(e,t,r,n,s){let i={};for(let a of t)for(let u of Object.keys(a))i[u]===void 0&&(i[u]=[]),i[u].push(a[u]);let o={};for(let a of Object.keys(i)){let u=i[a],c=Ft(u,s);o[a]=c}r[e]=o}function tV(e,t,r,n,s){for(let i=0;i<n.length;i++){let o={if:n[i].if,then:n[i].then,else:n[i].else};if(o.if!==void 0){if(r.if===void 0){r.if=o.if,o.then!==void 0&&(r.then=o.then),o.else!==void 0&&(r.else=o.else);continue}r.then!==void 0&&(r.then=Ft([r.then,o],s)),r.else!==void 0&&(r.else=Ft([r.else,o],s))}}}function Jv(e,t,r){let n={};for(let s of t)for(let i of Object.keys(s)){n[i]===void 0&&(n[i]=[]);let o=n[i];for(let a of s[i])o.includes(a)||o.push(a)}r[e]=n}function Ft(e,t){if(e.length===0)return{};if(e.length===1)return e[0];let r={},n={},s=!0;for(let i of e){if(i===!1)return!1;if(i!==!0){s=!1;for(let o of Object.keys(i))n[o]===void 0&&(n[o]=[]),n[o].push(i[o])}}if(s)return!0;for(let i of Object.keys(n)){let o=n[i];(t.resolvers[i]??t.defaultResolver)(i,o,r,e,t)}return r}function Wv(e,t,r,n,s){let i=s.onConflict??"throw";if(t.length===1||i==="first"){r[e]=t[0];return}let o=!0;for(let a=1;a<t.length;a++)if(!KH(t[a],t[0])){o=!1;break}if(o){r[e]=t[0];return}if(i==="throw")throw new Wa.ResolverNotFoundError(e,t);if(i!=="skip")throw new Wa.InvalidOnConflictOptionError(i)}function rV(e,t={}){return t.defaultResolver===void 0&&(t.defaultResolver=Wv),t.resolvers={...Kv,...t.resolvers},Ft(e,t)}Yv.exports={mergeSchemas:rV,keywordsResolvers:Kv,defaultResolver:Wv,...Wa}});var Zv=E((C8,Qv)=>{"use strict";var{mergeSchemas:nV}=Xv();function sV(e){return nV(e,{onConflict:"skip"})}Qv.exports=sV});var eb=E((k8,Gd)=>{"use strict";function iV(e,t,r,n){let s="";t.validatorSchemasIds.size>0?(s+=`const Validator = require('fast-json-stringify/lib/validator')
`,s+=`const validatorState = ${JSON.stringify(n.getState())}
`,s+=`const validator = Validator.restoreFromState(validatorState)
`):s+=`const validator = null
`;let{schema:i,...o}=r.getState();return`
  'use strict'

  const Serializer = require('fast-json-stringify/lib/serializer')
  const serializerState = ${JSON.stringify(o)}
  const serializer = Serializer.restoreFromState(serializerState)

  ${s}

  module.exports = ${e.toString()}(validator, serializer)`}Gd.exports=iV;Gd.exports.dependencies={Serializer:Bo(),Validator:Dd()}});var lb=E((q8,os)=>{"use strict";var{RefResolver:oV}=K_(),aV=Bo(),uV=Dd(),mn=jv(),tb=Hv(),lV=Zv(),cV=/'/g,Ya=2e4,nb="default",fV=["floor","ceil","round","trunc"],sb=["default","json-stringify"],Ti=0;function Jd(e,t){if(!tb(e)){t?t=`"${t}" `:t="";let r=tb.errors[0],n=new Error(`${t}schema is invalid: data${r.instancePath} ${r.message}`);throw n.errors=Jd.errors,n}}function Oi(e,t){let r=t.schema.$ref,n=r.indexOf("#");n===-1&&(n=r.length);let s=r.slice(0,n)||t.schemaId,i=r.slice(n)||"#",o=e.refResolver.getSchema(s,i);if(o===null)throw new Error(`Cannot find reference "${r}"`);let a=new mn(o,s,i);return o.$ref!==void 0?Oi(e,a):a}function Xa(e,t){let r=e.refResolver.getSchema(t,"#");return new mn(r,t,"#")}function rb(e,t){return e.$id&&e.$id.charAt(0)!=="#"?e.$id:t}function Kd(e,t){Jd(e),t=t||{};let r={functions:[],functionsCounter:0,functionsNamesBySchema:new Map,options:t,refResolver:new oV,rootSchemaId:e.$id||`__fjs_root_${Ti++}`,validatorSchemasIds:new Set,mergedSchemasIds:new Map},n=rb(e,r.rootSchemaId);if(r.refResolver.hasSchema(n)||r.refResolver.addSchema(e,r.rootSchemaId),t.schema)for(let l in t.schema){let d=t.schema[l],p=rb(d,l);r.refResolver.hasSchema(p)||(Jd(d,l),r.refResolver.addSchema(d,l))}if(t.rounding&&!fV.includes(t.rounding))throw new Error(`Unsupported integer rounding method ${t.rounding}`);if(t.largeArrayMechanism)if(sb.includes(t.largeArrayMechanism))nb=t.largeArrayMechanism;else throw new Error(`Unsupported large array mechanism ${t.largeArrayMechanism}`);if(t.largeArraySize)if(typeof t.largeArraySize=="string"&&Number.isFinite(Number.parseInt(t.largeArraySize,10)))Ya=Number.parseInt(t.largeArraySize,10);else if(typeof t.largeArraySize=="number"&&Number.isInteger(t.largeArraySize))Ya=t.largeArraySize;else if(typeof t.largeArraySize=="bigint")Ya=Number(t.largeArraySize);else throw new Error(`Unsupported large array size. Expected integer-like, got ${typeof t.largeArraySize} with value ${t.largeArraySize}`);let s=new mn(e,r.rootSchemaId),i=pt(r,s,"input"),o=`
    const JSON_STR_BEGIN_OBJECT = '{'
    const JSON_STR_END_OBJECT = '}'
    const JSON_STR_BEGIN_ARRAY = '['
    const JSON_STR_END_ARRAY = ']'
    const JSON_STR_COMMA = ','
    const JSON_STR_COLONS = ':'
    const JSON_STR_QUOTE = '"'
    const JSON_STR_EMPTY_OBJECT = JSON_STR_BEGIN_OBJECT + JSON_STR_END_OBJECT
    const JSON_STR_EMPTY_ARRAY = JSON_STR_BEGIN_ARRAY + JSON_STR_END_ARRAY
    const JSON_STR_EMPTY_STRING = JSON_STR_QUOTE + JSON_STR_QUOTE
    const JSON_STR_NULL = 'null'
  `;i==="json += anonymous0(input)"?o+=`
    ${r.functions.join(`
`)}
    const main = anonymous0
    return main
    `:o+=`
    function main (input) {
      let json = ''
      ${i}
      return json
    }
    ${r.functions.join(`
`)}
    return main
    `;let a=new aV(t),u=new uV(t.ajv);for(let l of r.validatorSchemasIds){let d=r.refResolver.getSchema(l);u.addSchema(d,l);let p=r.refResolver.getSchemaDependencies(l);for(let[f,h]of Object.entries(p))u.addSchema(h,f)}if(t.debugMode&&(t.mode="debug"),t.mode==="debug")return{validator:u,serializer:a,code:`validator
serializer
${o}`,ajv:u.ajv};let c=new Function("validator","serializer",o);return t.mode==="standalone"?eb()(c,r,a,u):c(u,a)}var dV=["properties","required","additionalProperties","patternProperties","maxProperties","minProperties","dependencies"],hV=["items","additionalItems","maxItems","minItems","uniqueItems","contains"],pV=["maxLength","minLength","pattern"],mV=["multipleOf","maximum","exclusiveMaximum","minimum","exclusiveMinimum"];function yV(e){for(let t of dV)if(t in e)return"object";for(let t of hV)if(t in e)return"array";for(let t of pV)if(t in e)return"string";for(let t of mV)if(t in e)return"number";return e.type}function gV(e,t,r){let n=t.schema,s=Object.keys(n.properties||{}),i=`
    const propertiesKeys = ${JSON.stringify(s)}
    for (const [key, value] of Object.entries(obj)) {
      if (
        propertiesKeys.includes(key) ||
        value === undefined ||
        typeof value === 'function' ||
        typeof value === 'symbol'
      ) continue
  `,o=t.getPropertyLocation("patternProperties"),a=o.schema;if(a!==void 0)for(let l in a){let d=o.getPropertyLocation(l);i+=`
        if (/${l.replace(/\\*\//g,"\\/")}/.test(key)) {
          ${r}
          json += serializer.asString(key) + JSON_STR_COLONS
          ${pt(e,d,"value")}
          continue
        }
      `}let c=t.getPropertyLocation("additionalProperties").schema;if(c!==void 0)if(c===!0)i+=`
        ${r}
        json += serializer.asString(key) + JSON_STR_COLONS + JSON.stringify(value)
      `;else{let l=t.getPropertyLocation("additionalProperties");i+=`
        ${r}
        json += serializer.asString(key) + JSON_STR_COLONS
        ${pt(e,l,"value")}
      `}return i+=`
    }
  `,i}function _V(e,t){let r=t.schema,n=t.getPropertyLocation("properties"),s=r.required||[],i=Object.keys(r.properties||{}).sort((c,l)=>{let d=s.includes(c),p=s.includes(l);return d===p?0:d?-1:1}),o=s.includes(i[0]),a=`let value
`;for(let c of s)if(!i.includes(c)){let l=JSON.stringify(c);a+=`if (obj[${l}] === undefined) throw new Error('${l.replace(/'/g,"\\'")} is required!')
`}a+=`let json = JSON_STR_BEGIN_OBJECT
`;let u="";o||(a+=`let addComma = false
`,u="!addComma && (addComma = true) || (json += JSON_STR_COMMA)");for(let c of i){let l=n.getPropertyLocation(c);l.schema.$ref&&(l=Oi(e,l));let d=JSON.stringify(c),p=l.schema.default,f=s.includes(c);a+=`
      value = obj[${d}]
      if (value !== undefined) {
        ${u}
        json += ${JSON.stringify(d+":")}
        ${pt(e,l,"value")}
      }`,p!==void 0?a+=` else {
        ${u}
        json += ${JSON.stringify(d+":"+JSON.stringify(p))}
      }
      `:f?a+=` else {
        throw new Error('${d.replace(/'/g,"\\'")} is required!')
      }
      `:a+=`
`,o&&(u="json += ','")}return(r.patternProperties||r.additionalProperties)&&(a+=gV(e,t,u)),a+=`
    return json + JSON_STR_END_OBJECT
  `,a}function Qa(e,t,r){for(let o=0;o<r.length;o++){let a=r[o];a.schema.$ref&&(r[o]=Oi(e,a))}let n=[];for(let o of r){let a=ib(e,o.schema,o.schemaId);delete a.$id,n.push(a)}let s=lV(n),i=new mn(s,t);return e.refResolver.addSchema(s,t),i}function ib(e,t,r){let n=Array.isArray(t)?[]:{};t.$id!==void 0&&t.$id.charAt(0)!=="#"&&(r=t.$id);let s=e.mergedSchemasIds.get(t);s&&e.mergedSchemasIds.set(n,s);for(let i in t){let o=t[i];i==="$ref"&&typeof o=="string"&&o.charAt(0)==="#"&&(o=r+o),typeof o=="object"&&o!==null&&(o=ib(e,o,r)),n[i]=o}return n}function SV(e){return`(${e} && typeof ${e}.toJSON === 'function')
    ? ${e}.toJSON()
    : ${e}
  `}function EV(e,t){let r=t.schema;if(e.functionsNamesBySchema.has(r))return e.functionsNamesBySchema.get(r);let n=ab(e);e.functionsNamesBySchema.set(r,n);let s=t.getSchemaRef();s.startsWith(e.rootSchemaId)&&(s=s.replace(e.rootSchemaId,""));let i=`
  `,o=r.nullable===!0;return i+=`
    // ${s}
    function ${n} (input) {
      const obj = ${SV("input")}
      ${o?"":"if (obj === null) return JSON_STR_EMPTY_OBJECT"}

      ${_V(e,t)}
    }
  `,e.functions.push(i),n}function vV(e,t){let r=t.schema,n=t.getPropertyLocation("items");n.schema=n.schema||{},n.schema.$ref&&(n=Oi(e,n));let s=n.schema;if(e.functionsNamesBySchema.has(r))return e.functionsNamesBySchema.get(r);let i=ab(e);e.functionsNamesBySchema.set(r,i);let o=t.getSchemaRef();o.startsWith(e.rootSchemaId)&&(o=o.replace(e.rootSchemaId,""));let a=`
    function ${i} (obj) {
      // ${o}
  `,u=r.nullable===!0;if(a+=`
    ${u?"":"if (obj === null) return JSON_STR_EMPTY_ARRAY"}
    if (!Array.isArray(obj)) {
      throw new TypeError(\`The value of '${o}' does not match schema definition.\`)
    }
    const arrayLength = obj.length
  `,!r.additionalItems&&Array.isArray(s)&&(a+=`
      if (arrayLength > ${s.length}) {
        throw new Error(\`Item at ${s.length} does not match schema definition.\`)
      }
    `),nb==="json-stringify"&&(a+=`if (arrayLength >= ${Ya}) return JSON.stringify(obj)
`),a+=`
    const arrayEnd = arrayLength - 1
    let value
    let json = ''
  `,Array.isArray(s)){for(let c=0;c<s.length;c++){let l=s[c];a+=`value = obj[${c}]`;let d=pt(e,n.getPropertyLocation(c),"value");a+=`
        if (${c} < arrayLength) {
          if (${ob(l.type,`[${c}]`)}) {
            ${d}
            if (${c} < arrayEnd) {
              json += JSON_STR_COMMA
            }
          } else {
            throw new Error(\`Item at ${c} does not match schema definition.\`)
          }
        }
        `}r.additionalItems&&(a+=`
        for (let i = ${s.length}; i < arrayLength; i++) {
          json += JSON.stringify(obj[i])
          if (i < arrayEnd) {
            json += JSON_STR_COMMA
          }
        }`)}else{let c=pt(e,n,"obj[i]");a+=`
      for (let i = 0; i < arrayLength; i++) {
        ${c}
        if (i < arrayEnd) {
          json += JSON_STR_COMMA
        }
      }`}return a+=`
    return JSON_STR_BEGIN_ARRAY + json + JSON_STR_END_ARRAY
  }`,e.functions.push(a),i}function ob(e,t){let r;switch(e){case"null":r="value === null";break;case"string":r=`typeof value === 'string' ||
      value === null ||
      value instanceof Date ||
      value instanceof RegExp ||
      (
        typeof value === "object" &&
        typeof value.toString === "function" &&
        value.toString !== Object.prototype.toString
      )`;break;case"integer":r="Number.isInteger(value)";break;case"number":r="Number.isFinite(value)";break;case"boolean":r="typeof value === 'boolean'";break;case"object":r="value && typeof value === 'object' && value.constructor === Object";break;case"array":r="Array.isArray(value)";break;default:Array.isArray(e)&&(r=`(${e.map(s=>ob(s,t)).join(" || ")})`)}return r}function ab(e){return"anonymous"+e.functionsCounter++}function bV(e,t,r){let s=t.schema.type.sort(a=>a==="null"?-1:1),i="";s.forEach((a,u)=>{t.schema={...t.schema,type:a};let c=ub(e,t,r),l=u===0?"if":"else if";switch(a){case"null":i+=`
          ${l} (${r} === null)
            ${c}
          `;break;case"string":{i+=`
          ${l}(
            typeof ${r} === "string" ||
            ${r} === null ||
            ${r} instanceof Date ||
            ${r} instanceof RegExp ||
            (
              typeof ${r} === "object" &&
              typeof ${r}.toString === "function" &&
              ${r}.toString !== Object.prototype.toString
            )
          )
            ${c}
        `;break}case"array":{i+=`
          ${l}(Array.isArray(${r}))
            ${c}
        `;break}case"integer":{i+=`
          ${l}(Number.isInteger(${r}) || ${r} === null)
            ${c}
        `;break}default:{i+=`
          ${l}(typeof ${r} === "${a}" || ${r} === null)
            ${c}
        `;break}}});let o=t.getSchemaRef();return o.startsWith(e.rootSchemaId)&&(o=o.replace(e.rootSchemaId,"")),i+=`
    else throw new TypeError(\`The value of '${o}' does not match schema definition.\`)
  `,i}function ub(e,t,r){let n=t.schema;switch(n.type){case"null":return"json += JSON_STR_NULL";case"string":return n.format==="date-time"?`json += serializer.asDateTime(${r})`:n.format==="date"?`json += serializer.asDate(${r})`:n.format==="time"?`json += serializer.asTime(${r})`:n.format==="unsafe"?`json += serializer.asUnsafeString(${r})`:`
        if (typeof ${r} !== 'string') {
          if (${r} === null) {
            json += JSON_STR_EMPTY_STRING
          } else if (${r} instanceof Date) {
            json += JSON_STR_QUOTE + ${r}.toISOString() + JSON_STR_QUOTE
          } else if (${r} instanceof RegExp) {
            json += serializer.asString(${r}.source)
          } else {
            json += serializer.asString(${r}.toString())
          }
        } else {
          json += serializer.asString(${r})
        }
        `;case"integer":return`json += serializer.asInteger(${r})`;case"number":return`json += serializer.asNumber(${r})`;case"boolean":return`json += serializer.asBoolean(${r})`;case"object":return`json += ${EV(e,t)}(${r})`;case"array":return`json += ${vV(e,t)}(${r})`;case void 0:return`json += JSON.stringify(${r})`;default:throw new Error(`${n.type} unsupported`)}}function RV(e,t){let r=e.schema,n=r.type,s=Array.isArray(n)&&n.includes("null"),i="";return s&&(i+=`
      if (${t} === null) {
        json += JSON_STR_NULL
      } else {
    `),i+=`json += '${JSON.stringify(r.const).replace(cV,"\\'")}'`,s&&(i+=`
      }
    `),i}function wV(e,t,r){let n=t.schema,s=e.mergedSchemasIds.get(n);if(s){let l=Xa(e,s);return pt(e,l,r)}s=`__fjs_merged_${Ti++}`,e.mergedSchemasIds.set(n,s);let{allOf:i,...o}=t.schema,a=[new mn(o,t.schemaId,t.jsonPointer)],u=t.getPropertyLocation("allOf");for(let l=0;l<i.length;l++)a.push(u.getPropertyLocation(l));let c=Qa(e,s,a);return pt(e,c,r)}function TV(e,t,r){e.validatorSchemasIds.add(t.schemaId);let s=t.schema.anyOf?"anyOf":"oneOf",{[s]:i,...o}=t.schema,a=new mn(o,t.schemaId,t.jsonPointer),u=t.getPropertyLocation(s),c="";for(let d=0;d<i.length;d++){let p=u.getPropertyLocation(d),f=p.schema,h=e.mergedSchemasIds.get(f),y=null;h?y=Xa(e,h):(h=`__fjs_merged_${Ti++}`,e.mergedSchemasIds.set(f,h),y=Qa(e,h,[a,p]));let _=pt(e,y,r),S=p.getSchemaRef();c+=`
      ${d===0?"if":"else if"}(validator.validate("${S}", ${r}))
        ${_}
    `}let l=t.getSchemaRef();return l.startsWith(e.rootSchemaId)&&(l=l.replace(e.rootSchemaId,"")),c+=`
    else throw new TypeError(\`The value of '${l}' does not match schema definition.\`)
  `,c}function OV(e,t,r){e.validatorSchemasIds.add(t.schemaId);let{if:n,then:s,else:i,...o}=t.schema,a=new mn(o,t.schemaId,t.jsonPointer),c=t.getPropertyLocation("if").getSchemaRef(),l=t.getPropertyLocation("then"),d=e.mergedSchemasIds.get(s),p=null;if(d?p=Xa(e,d):(d=`__fjs_merged_${Ti++}`,e.mergedSchemasIds.set(s,d),p=Qa(e,d,[a,l])),!i)return`
      if (validator.validate("${c}", ${r})) {
        ${pt(e,p,r)}
      } else {
        ${pt(e,a,r)}
      }
    `;let f=t.getPropertyLocation("else"),h=e.mergedSchemasIds.get(i),y=null;return h?y=Xa(e,h):(h=`__fjs_merged_${Ti++}`,e.mergedSchemasIds.set(i,h),y=Qa(e,h,[a,f])),`
    if (validator.validate("${c}", ${r})) {
      ${pt(e,p,r)}
    } else {
      ${pt(e,y,r)}
    }
  `}function pt(e,t,r){let n=t.schema;if(typeof n=="boolean")return`json += JSON.stringify(${r})`;if(n.$ref&&(t=Oi(e,t),n=t.schema),n.allOf)return wV(e,t,r);if(n.anyOf||n.oneOf)return TV(e,t,r);if(n.if&&n.then)return OV(e,t,r);if(n.type===void 0){let a=yV(n);a&&(n.type=a)}let s="",i=n.type,o=n.nullable===!0;return o&&(s+=`
      if (${r} === null) {
        json += JSON_STR_NULL
      } else {
    `),n.const!==void 0?s+=RV(t,r):Array.isArray(i)?s+=bV(e,t,r):s+=ub(e,t,r),o&&(s+=`
      }
    `),s}os.exports=Kd;os.exports.default=Kd;os.exports.build=Kd;os.exports.validLargeArrayMechanisms=sb;os.exports.restore=function({code:e,validator:t,serializer:r}){return Function.apply(null,["validator","serializer",e]).apply(null,[t,r])}});var db=E((L8,Za)=>{"use strict";var $V=lb();function cb(){return function(t,r){let n=Object.assign({},r,{schema:t});return PV.bind(null,n)}}function PV(e,{schema:t}){return e.schema&&t.$id&&e.schema[t.$id]&&(e.schema={...e.schema},delete e.schema[t.$id]),$V(t,e)}function fb(e={readMode:!0}){if(e.readMode===!0&&typeof e.restoreFunction!="function")throw new Error("You must provide a function for the restoreFunction-option when readMode ON");if(e.readMode!==!0&&typeof e.storeFunction!="function")throw new Error("You must provide a function for the storeFunction-option when readMode OFF");if(e.readMode===!0)return function(){return function(n){return e.restoreFunction(n)}};let t=cb();return function(n,s={}){s.mode="standalone";let i=t(n,s);return function(o){let a=i(o);return e.storeFunction(o,a),new Function(a)}}}Za.exports.SerializerSelector=cb;Za.exports.StandaloneSerializer=fb;Za.exports.default=fb});var hb=E((j8,$i)=>{"use strict";var{SerializerSelector:Wd,StandaloneSerializer:IV}=db();$i.exports=Wd;$i.exports.default=Wd;$i.exports.SerializerSelector=Wd;$i.exports.StandaloneSerializer=IV});var mr=E(Pi=>{"use strict";Object.defineProperty(Pi,"__esModule",{value:!0});Pi.checkMetadata=void 0;var NV=X(),AV={keyword:"metadata",schemaType:"object",code(e){pb(e);let{gen:t,schema:r,it:n}=e;if((0,NV.alwaysValidSchema)(n,r))return;let s=t.name("valid");e.subschema({keyword:"metadata",jtdMetadata:!0},s),e.ok(s)}};function pb({it:e,keyword:t},r){if(e.jtdMetadata!==r)throw new Error(`JTD: "${t}" cannot be used in this schema location`)}Pi.checkMetadata=pb;Pi.default=AV});var eu=E(Ni=>{"use strict";Object.defineProperty(Ni,"__esModule",{value:!0});Ni.hasRef=void 0;var mb=fn(),Ii=G(),CV=hr(),yb=vt(),gb=xf(),kV=mr(),qV={keyword:"ref",schemaType:"string",code(e){(0,kV.checkMetadata)(e);let{gen:t,data:r,schema:n,parentSchema:s,it:i}=e,{schemaEnv:{root:o}}=i,a=t.name("valid");s.nullable?(t.var(a,(0,Ii._)`${r} === null`),t.if((0,Ii.not)(a),u)):(t.var(a,!1),u()),e.ok(a);function u(){var d;let p=(d=o.schema.definitions)===null||d===void 0?void 0:d[n];if(!p)throw new CV.default(i.opts.uriResolver,"",n,`No definition ${n}`);Yd(p)||!i.opts.inlineRefs?c(p):l(p)}function c(d){let p=mb.compileSchema.call(i.self,new mb.SchemaEnv({schema:d,root:o,schemaPath:`/definitions/${n}`})),f=(0,gb.getValidate)(e,p),h=t.const("_errs",yb.default.errors);(0,gb.callRef)(e,f,p,p.$async),t.assign(a,(0,Ii._)`${h} === ${yb.default.errors}`)}function l(d){let p=t.scopeValue("schema",i.opts.code.source===!0?{ref:d,code:(0,Ii.stringify)(d)}:{ref:d});e.subschema({schema:d,dataTypes:[],schemaPath:Ii.nil,topSchemaRef:p,errSchemaPath:`/definitions/${n}`},a)}}};function Yd(e){for(let t in e){let r;if(t==="ref"||typeof(r=e[t])=="object"&&Yd(r))return!0}return!1}Ni.hasRef=Yd;Ni.default=qV});var Qd=E(Xd=>{"use strict";Object.defineProperty(Xd,"__esModule",{value:!0});var LV=/t|\s/i,jV=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,DV=/^(\d\d):(\d\d):(\d\d)(?:\.\d+)?(?:z|([+-]\d\d)(?::?(\d\d))?)$/i,xV=[0,31,28,31,30,31,30,31,31,30,31,30,31];function Sb(e,t){let r=e.split(LV);return r.length===2&&_b(r[0])&&FV(r[1])||t&&r.length===1&&_b(r[0])}Xd.default=Sb;function _b(e){let t=jV.exec(e);if(!t)return!1;let r=+t[1],n=+t[2],s=+t[3];return n>=1&&n<=12&&s>=1&&(s<=xV[n]||n===2&&s===29&&(r%100===0?r%400===0:r%4===0))}function FV(e){let t=DV.exec(e);if(!t)return!1;let r=+t[1],n=+t[2],s=+t[3],i=+(t[4]||0),o=+(t[5]||0);return r<=23&&n<=59&&s<=59||r-i===23&&n-o===59&&s===60}Sb.code='require("ajv/dist/runtime/timestamp").default'});var as=E(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});xr.typeErrorParams=xr.typeErrorMessage=xr.typeError=void 0;var MV=G();function HV(e){return{message:t=>Eb(t,e),params:t=>vb(t,e)}}xr.typeError=HV;function Eb({parentSchema:e},t){return e?.nullable?`must be ${t} or null`:`must be ${t}`}xr.typeErrorMessage=Eb;function vb({parentSchema:e},t){return(0,MV._)`{type: ${t}, nullable: ${!!e?.nullable}}`}xr.typeErrorParams=vb});var Zd=E(us=>{"use strict";Object.defineProperty(us,"__esModule",{value:!0});us.intRange=void 0;var mt=G(),VV=Qd(),zV=X(),UV=mr(),bb=as();us.intRange={int8:[-128,127,3],uint8:[0,255,3],int16:[-32768,32767,5],uint16:[0,65535,5],int32:[-2147483648,2147483647,10],uint32:[0,4294967295,10]};var BV={message:e=>(0,bb.typeErrorMessage)(e,e.schema),params:e=>(0,bb.typeErrorParams)(e,e.schema)};function GV(e){let{gen:t,data:r,it:n}=e,{timestamp:s,allowDate:i}=n.opts;if(s==="date")return(0,mt._)`${r} instanceof Date `;let o=(0,zV.useFunc)(t,VV.default),a=i?(0,mt._)`, true`:mt.nil,u=(0,mt._)`typeof ${r} == "string" && ${o}(${r}${a})`;return s==="string"?u:(0,mt.or)((0,mt._)`${r} instanceof Date`,u)}var JV={keyword:"type",schemaType:"string",error:BV,code(e){(0,UV.checkMetadata)(e);let{data:t,schema:r,parentSchema:n,it:s}=e,i;switch(r){case"boolean":case"string":i=(0,mt._)`typeof ${t} == ${r}`;break;case"timestamp":{i=GV(e);break}case"float32":case"float64":i=(0,mt._)`typeof ${t} == "number"`;break;default:{let o=r;if(i=(0,mt._)`typeof ${t} == "number" && isFinite(${t}) && !(${t} % 1)`,!s.opts.int32range&&(o==="int32"||o==="uint32"))o==="uint32"&&(i=(0,mt._)`${i} && ${t} >= 0`);else{let[a,u]=us.intRange[o];i=(0,mt._)`${i} && ${t} >= ${a} && ${t} <= ${u}`}}}e.pass(n.nullable?(0,mt.or)((0,mt._)`${t} === null`,i):i)}};us.default=JV});var cs=E(ls=>{"use strict";Object.defineProperty(ls,"__esModule",{value:!0});ls.checkNullableObject=ls.checkNullable=void 0;var tu=G();function Rb({gen:e,data:t,parentSchema:r},n=tu.nil){let s=e.name("valid");return r.nullable?(e.let(s,(0,tu._)`${t} === null`),n=(0,tu.not)(s)):e.let(s,!1),[s,n]}ls.checkNullable=Rb;function KV(e,t){let[r,n]=Rb(e,t);return[r,(0,tu._)`${n} && typeof ${e.data} == "object" && !Array.isArray(${e.data})`]}ls.checkNullableObject=KV});var wb=E(eh=>{"use strict";Object.defineProperty(eh,"__esModule",{value:!0});var Fr=G(),WV=mr(),YV=cs(),XV={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,Fr._)`{allowedValues: ${e}}`},QV={keyword:"enum",schemaType:"array",error:XV,code(e){(0,WV.checkMetadata)(e);let{gen:t,data:r,schema:n,schemaValue:s,parentSchema:i,it:o}=e;if(n.length===0)throw new Error("enum must have non-empty array");if(n.length!==new Set(n).size)throw new Error("enum items must be unique");let a,u=(0,Fr._)`typeof ${r} == "string"`;if(n.length>=o.opts.loopEnum){let l;[a,l]=(0,YV.checkNullable)(e,u),t.if(l,c)}else{if(!Array.isArray(n))throw new Error("ajv implementation error");a=(0,Fr.and)(u,(0,Fr.or)(...n.map(l=>(0,Fr._)`${r} === ${l}`))),i.nullable&&(a=(0,Fr.or)((0,Fr._)`${r} === null`,a))}e.pass(a);function c(){t.forOf("v",s,l=>t.if((0,Fr._)`${a} = ${r} === ${l}`,()=>t.break()))}}};eh.default=QV});var Ob=E(th=>{"use strict";Object.defineProperty(th,"__esModule",{value:!0});var ZV=X(),ez=ze(),Tb=G(),tz=mr(),rz=cs(),nz=as(),sz={keyword:"elements",schemaType:"object",error:(0,nz.typeError)("array"),code(e){(0,tz.checkMetadata)(e);let{gen:t,data:r,schema:n,it:s}=e;if((0,ZV.alwaysValidSchema)(s,n))return;let[i]=(0,rz.checkNullable)(e);t.if((0,Tb.not)(i),()=>t.if((0,Tb._)`Array.isArray(${r})`,()=>t.assign(i,(0,ez.validateArray)(e)),()=>e.error())),e.ok(i)}};th.default=sz});var nh=E(Mr=>{"use strict";Object.defineProperty(Mr,"__esModule",{value:!0});Mr.validateProperties=Mr.error=void 0;var rh=ze(),$b=X(),yr=G(),iz=mr(),oz=cs(),Pb=as(),fs;(function(e){e.Additional="additional",e.Missing="missing"})(fs||(fs={}));Mr.error={message:e=>{let{params:t}=e;return t.propError?t.propError===fs.Additional?"must NOT have additional properties":`must have property '${t.missingProperty}'`:(0,Pb.typeErrorMessage)(e,"object")},params:e=>{let{params:t}=e;return t.propError?t.propError===fs.Additional?(0,yr._)`{error: ${t.propError}, additionalProperty: ${t.additionalProperty}}`:(0,yr._)`{error: ${t.propError}, missingProperty: ${t.missingProperty}}`:(0,Pb.typeErrorParams)(e,"object")}};var az={keyword:"properties",schemaType:"object",error:Mr.error,code:Ib};function Ib(e){(0,iz.checkMetadata)(e);let{gen:t,data:r,parentSchema:n,it:s}=e,{additionalProperties:i,nullable:o}=n;if(s.jtdDiscriminator&&o)throw new Error("JTD: nullable inside discriminator mapping");if(f())throw new Error("JTD: properties and optionalProperties have common members");let[a,u]=h("properties"),[c,l]=h("optionalProperties");if(u.length===0&&l.length===0&&i)return;let[d,p]=s.jtdDiscriminator===void 0?(0,oz.checkNullableObject)(e,r):[t.let("valid",!1),!0];t.if(p,()=>t.assign(d,!0).block(()=>{y(u,"properties",!0),y(l,"optionalProperties"),i||S()})),e.pass(d);function f(){let g=n.properties,m=n.optionalProperties;if(!(g&&m))return!1;for(let w in g)if(Object.prototype.hasOwnProperty.call(m,w))return!0;return!1}function h(g){let m=n[g],w=m?(0,rh.allSchemaProperties)(m):[];if(s.jtdDiscriminator&&w.some(b=>b===s.jtdDiscriminator))throw new Error(`JTD: discriminator tag used in ${g}`);let T=w.filter(b=>!(0,$b.alwaysValidSchema)(s,m[b]));return[w,T]}function y(g,m,w){let T=t.var("valid");for(let O of g)t.if((0,rh.propertyInData)(t,r,O,s.opts.ownProperties),()=>_(O,m,T),()=>b(O)),e.ok(T);function b(O){w?(t.assign(T,!1),e.error(!1,{propError:fs.Missing,missingProperty:O},{schemaPath:O})):t.assign(T,!0)}}function _(g,m,w){e.subschema({keyword:m,schemaProp:g,dataProp:g},w)}function S(){t.forIn("key",r,g=>{let m=v(g,a,"properties",s.jtdDiscriminator),w=v(g,c,"optionalProperties"),T=m===!0?w:w===!0?m:(0,yr.and)(m,w);t.if(T,()=>{s.opts.removeAdditional?t.code((0,yr._)`delete ${r}[${g}]`):(e.error(!1,{propError:fs.Additional,additionalProperty:g},{instancePath:g,parentSchema:!0}),s.opts.allErrors||t.break())})})}function v(g,m,w,T){let b;if(m.length>8){let O=(0,$b.schemaRefOrVal)(s,n[w],w);b=(0,yr.not)((0,rh.isOwnProperty)(t,O,g)),T!==void 0&&(b=(0,yr.and)(b,(0,yr._)`${g} !== ${T}`))}else if(m.length||T!==void 0){let O=T===void 0?m:[T].concat(m);b=(0,yr.and)(...O.map(R=>(0,yr._)`${g} !== ${R}`))}else b=!0;return b}}Mr.validateProperties=Ib;Mr.default=az});var Ab=E(sh=>{"use strict";Object.defineProperty(sh,"__esModule",{value:!0});var Nb=nh(),uz={keyword:"optionalProperties",schemaType:"object",error:Nb.error,code(e){e.parentSchema.properties||(0,Nb.validateProperties)(e)}};sh.default=uz});var kb=E(ih=>{"use strict";Object.defineProperty(ih,"__esModule",{value:!0});var yn=G(),lz=mr(),cz=cs(),Cb=as(),ru=wd(),fz={message:e=>{let{schema:t,params:r}=e;return r.discrError?r.discrError===ru.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in mapping`:(0,Cb.typeErrorMessage)(e,"object")},params:e=>{let{schema:t,params:r}=e;return r.discrError?(0,yn._)`{error: ${r.discrError}, tag: ${t}, tagValue: ${r.tag}}`:(0,Cb.typeErrorParams)(e,"object")}},dz={keyword:"discriminator",schemaType:"string",implements:["mapping"],error:fz,code(e){(0,lz.checkMetadata)(e);let{gen:t,data:r,schema:n,parentSchema:s}=e,[i,o]=(0,cz.checkNullableObject)(e,r);t.if(o),a(),t.elseIf((0,yn.not)(i)),e.error(),t.endIf(),e.ok(i);function a(){let l=t.const("tag",(0,yn._)`${r}${(0,yn.getProperty)(n)}`);t.if((0,yn._)`${l} === undefined`),e.error(!1,{discrError:ru.DiscrError.Tag,tag:l}),t.elseIf((0,yn._)`typeof ${l} == "string"`),u(l),t.else(),e.error(!1,{discrError:ru.DiscrError.Tag,tag:l},{instancePath:n}),t.endIf()}function u(l){t.if(!1);for(let d in s.mapping)t.elseIf((0,yn._)`${l} === ${d}`),t.assign(i,c(d));t.else(),e.error(!1,{discrError:ru.DiscrError.Mapping,tag:l},{instancePath:n,schemaPath:"mapping",parentSchema:!0}),t.endIf()}function c(l){let d=t.name("valid");return e.subschema({keyword:"mapping",schemaProp:l,jtdDiscriminator:n},d),d}}};ih.default=dz});var Lb=E(oh=>{"use strict";Object.defineProperty(oh,"__esModule",{value:!0});var qb=X(),nu=G(),hz=mr(),pz=cs(),mz=as(),yz={keyword:"values",schemaType:"object",error:(0,mz.typeError)("object"),code(e){(0,hz.checkMetadata)(e);let{gen:t,data:r,schema:n,it:s}=e,[i,o]=(0,pz.checkNullableObject)(e,r);(0,qb.alwaysValidSchema)(s,n)?t.if((0,nu.not)((0,nu.or)(o,i)),()=>e.error()):(t.if(o),t.assign(i,a()),t.elseIf((0,nu.not)(i)),e.error(),t.endIf()),e.ok(i);function a(){let u=t.name("valid");if(s.allErrors){let l=t.let("valid",!0);return c(()=>t.assign(l,!1)),l}return t.var(u,!0),c(()=>t.break()),u;function c(l){t.forIn("key",r,d=>{e.subschema({keyword:"values",dataProp:d,dataPropType:qb.Type.Str},u),t.if((0,nu.not)(u),l)})}}}};oh.default=yz});var jb=E(ah=>{"use strict";Object.defineProperty(ah,"__esModule",{value:!0});var gz=ze(),_z={keyword:"union",schemaType:"array",trackErrors:!0,code:gz.validateUnion,error:{message:"must match a schema in union"}};ah.default=_z});var Db=E(uh=>{"use strict";Object.defineProperty(uh,"__esModule",{value:!0});var Sz=eu(),Ez=Zd(),vz=wb(),bz=Ob(),Rz=nh(),wz=Ab(),Tz=kb(),Oz=Lb(),$z=jb(),Pz=mr(),Iz=["definitions",Sz.default,Ez.default,vz.default,bz.default,Rz.default,wz.default,Tz.default,Oz.default,$z.default,Pz.default,{keyword:"additionalProperties",schemaType:"boolean"},{keyword:"nullable",schemaType:"boolean"}];uh.default=Iz});var Hb=E(lh=>{"use strict";Object.defineProperty(lh,"__esModule",{value:!0});var gr=e=>{let t={nullable:{type:"boolean"},metadata:{optionalProperties:{union:{elements:{ref:"schema"}}},additionalProperties:!0}};return e&&(t.definitions={values:{ref:"schema"}}),t},Nz=e=>({optionalProperties:gr(e)}),Az=e=>({properties:{ref:{type:"string"}},optionalProperties:gr(e)}),Cz=e=>({properties:{type:{enum:["boolean","timestamp","string","float32","float64","int8","uint8","int16","uint16","int32","uint32"]}},optionalProperties:gr(e)}),kz=e=>({properties:{enum:{elements:{type:"string"}}},optionalProperties:gr(e)}),qz=e=>({properties:{elements:{ref:"schema"}},optionalProperties:gr(e)}),Fb=e=>({properties:{properties:{values:{ref:"schema"}}},optionalProperties:{optionalProperties:{values:{ref:"schema"}},additionalProperties:{type:"boolean"},...gr(e)}}),Mb=e=>({properties:{optionalProperties:{values:{ref:"schema"}}},optionalProperties:{additionalProperties:{type:"boolean"},...gr(e)}}),Lz=e=>({properties:{discriminator:{type:"string"},mapping:{values:{metadata:{union:[Fb(!1),Mb(!1)]}}}},optionalProperties:gr(e)}),jz=e=>({properties:{values:{ref:"schema"}},optionalProperties:gr(e)}),xb=e=>({metadata:{union:[Nz,Az,Cz,kz,qz,Fb,Mb,Lz,jz].map(t=>t(e))}}),Dz={definitions:{schema:xb(!1)},...xb(!0)};lh.default=Dz});var ch=E(su=>{"use strict";Object.defineProperty(su,"__esModule",{value:!0});su.jtdForms=void 0;su.jtdForms=["elements","values","discriminator","properties","optionalProperties","enum","type","ref"]});var zb=E(dh=>{"use strict";Object.defineProperty(dh,"__esModule",{value:!0});var fh=/[\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,xz={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function Vb(e){return fh.lastIndex=0,'"'+(fh.test(e)?e.replace(fh,t=>{let r=xz[t];return typeof r=="string"?r:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)}):e)+'"'}dh.default=Vb;Vb.code='require("ajv/dist/runtime/quote").default'});var Wb=E(ph=>{"use strict";Object.defineProperty(ph,"__esModule",{value:!0});var Fz=ch(),Bb=fn(),ie=G(),Mz=hr(),_e=vt(),Hz=ze(),Vz=eu(),zz=X(),Uz=zb(),Bz={elements:Jz,values:Kz,discriminator:Wz,properties:Ub,optionalProperties:Ub,enum:Ai,type:Yz,ref:Qz};function Gb(e,t){let r=Bb.getCompilingSchema.call(this,e);if(r)return r;let{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new ie.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a=o.scopeName("serialize"),u={self:this,gen:o,schema:e.schema,schemaEnv:e,definitions:t,data:_e.default.data},c;try{this._compilations.add(e),e.serializeName=a,o.func(a,_e.default.data,!1,()=>{o.let(_e.default.json,(0,ie.str)``),Ci(u),o.return(_e.default.json)}),o.optimize(this.opts.code.optimize);let l=o.toString();c=`${o.scopeRefs(_e.default.scope)}return ${l}`;let p=new Function(`${_e.default.scope}`,c)(this.scope.get());this.scope.value(a,{ref:p}),e.serialize=p}catch(l){throw c&&this.logger.error("Error compiling serializer, function code:",c),delete e.serialize,delete e.serializeName,l}finally{this._compilations.delete(e)}return e}ph.default=Gb;function Ci(e){let t;for(let r of Fz.jtdForms)if(r in e.schema){t=r;break}Gz(e,t?Bz[t]:e4)}function Gz(e,t){let{gen:r,schema:n,data:s}=e;if(!n.nullable)return t(e);r.if((0,ie._)`${s} === undefined || ${s} === null`,()=>r.add(_e.default.json,(0,ie._)`"null"`),()=>t(e))}function Jz(e){let{gen:t,schema:r,data:n}=e;t.add(_e.default.json,(0,ie.str)`[`);let s=t.let("first",!0);t.forOf("el",n,i=>{hh(e,s),Ci({...e,schema:r.elements,data:i})}),t.add(_e.default.json,(0,ie.str)`]`)}function Kz(e){let{gen:t,schema:r,data:n}=e;t.add(_e.default.json,(0,ie.str)`{`);let s=t.let("first",!0);t.forIn("key",n,i=>Jb(e,i,r.values,s)),t.add(_e.default.json,(0,ie.str)`}`)}function Jb(e,t,r,n){let{gen:s,data:i}=e;hh(e,n),Ai({...e,data:t}),s.add(_e.default.json,(0,ie.str)`:`);let o=s.const("value",(0,ie._)`${i}${(0,ie.getProperty)(t)}`);Ci({...e,schema:r,data:o})}function Wz(e){let{gen:t,schema:r,data:n}=e,{discriminator:s}=r;t.add(_e.default.json,(0,ie.str)`{${JSON.stringify(s)}:`);let i=t.const("tag",(0,ie._)`${n}${(0,ie.getProperty)(s)}`);Ai({...e,data:i}),t.if(!1);for(let o in r.mapping){t.elseIf((0,ie._)`${i} === ${o}`);let a=r.mapping[o];Kb({...e,schema:a},s)}t.endIf(),t.add(_e.default.json,(0,ie.str)`}`)}function Ub(e){let{gen:t}=e;t.add(_e.default.json,(0,ie.str)`{`),Kb(e),t.add(_e.default.json,(0,ie.str)`}`)}function Kb(e,t){let{gen:r,schema:n,data:s}=e,{properties:i,optionalProperties:o}=n,a=p(i),u=p(o),c=f(a.concat(u)),l=!t,d;for(let S of a)l?l=!1:r.add(_e.default.json,(0,ie.str)`,`),y(S,i[S],h(S));l&&(d=r.let("first",!0));for(let S of u){let v=h(S);r.if((0,ie.and)((0,ie._)`${v} !== undefined`,(0,Hz.isOwnProperty)(r,s,S)),()=>{hh(e,d),y(S,o[S],v)})}n.additionalProperties&&r.forIn("key",s,S=>r.if(_(S,c),()=>Jb(e,S,{},d)));function p(S){return S?Object.keys(S):[]}function f(S){if(t&&S.push(t),new Set(S).size!==S.length)throw new Error("JTD: properties/optionalProperties/disciminator overlap");return S}function h(S){return r.const("value",(0,ie._)`${s}${(0,ie.getProperty)(S)}`)}function y(S,v,g){r.add(_e.default.json,(0,ie.str)`${JSON.stringify(S)}:`),Ci({...e,schema:v,data:g})}function _(S,v){return v.length?(0,ie.and)(...v.map(g=>(0,ie._)`${S} !== ${g}`)):!0}}function Yz(e){let{gen:t,schema:r,data:n}=e;switch(r.type){case"boolean":t.add(_e.default.json,(0,ie._)`${n} ? "true" : "false"`);break;case"string":Ai(e);break;case"timestamp":t.if((0,ie._)`${n} instanceof Date`,()=>t.add(_e.default.json,(0,ie._)`'"' + ${n}.toISOString() + '"'`),()=>Ai(e));break;default:Xz(e)}}function Ai({gen:e,data:t}){e.add(_e.default.json,(0,ie._)`${(0,zz.useFunc)(e,Uz.default)}(${t})`)}function Xz({gen:e,data:t}){e.add(_e.default.json,(0,ie._)`"" + ${t}`)}function Qz(e){let{gen:t,self:r,data:n,definitions:s,schema:i,schemaEnv:o}=e,{ref:a}=i,u=s[a];if(!u)throw new Mz.default(r.opts.uriResolver,"",a,`No definition ${a}`);if(!(0,Vz.hasRef)(u))return Ci({...e,schema:u});let{root:c}=o,l=Gb.call(r,new Bb.SchemaEnv({schema:u,root:c}),s);t.add(_e.default.json,(0,ie._)`${Zz(t,l)}(${n})`)}function Zz(e,t){return t.serialize?e.scopeValue("serialize",{ref:t.serialize}):(0,ie._)`${e.scopeValue("wrapper",{ref:t})}.serialize`}function e4({gen:e,data:t}){e.add(_e.default.json,(0,ie._)`JSON.stringify(${t})`)}function hh({gen:e},t){t?e.if(t,()=>e.assign(t,!1),()=>e.add(_e.default.json,(0,ie.str)`,`)):e.add(_e.default.json,(0,ie.str)`,`)}});var Xb=E(Vr=>{"use strict";Object.defineProperty(Vr,"__esModule",{value:!0});Vr.parseJsonString=Vr.parseJsonNumber=Vr.parseJson=void 0;var t4=/position\s(\d+)(?: \(line \d+ column \d+\))?$/;function _r(e,t){let r;_r.message=void 0;let n;t&&(e=e.slice(t));try{return _r.position=t+e.length,JSON.parse(e)}catch(s){if(n=t4.exec(s.message),!n){_r.message="unexpected end";return}r=+n[1];let i=e[r];e=e.slice(0,r),_r.position=t+r;try{return JSON.parse(e)}catch{_r.message=`unexpected token ${i}`;return}}}Vr.parseJson=_r;_r.message=void 0;_r.position=0;_r.code='require("ajv/dist/runtime/parseJson").parseJson';function Sr(e,t,r){let n="",s;if(Sr.message=void 0,e[t]==="-"&&(n+="-",t++),e[t]==="0")n+="0",t++;else if(!i(r)){o();return}if(r)return Sr.position=t,+n;if(e[t]==="."&&(n+=".",t++,!i())){o();return}if(s=e[t],(s==="e"||s==="E")&&(n+="e",t++,s=e[t],(s==="+"||s==="-")&&(n+=s,t++),!i())){o();return}return Sr.position=t,+n;function i(a){let u=!1;for(;s=e[t],s>="0"&&s<="9"&&(a===void 0||a-- >0);)u=!0,n+=s,t++;return u}function o(){Sr.position=t,Sr.message=t<e.length?`unexpected token ${e[t]}`:"unexpected end"}}Vr.parseJsonNumber=Sr;Sr.message=void 0;Sr.position=0;Sr.code='require("ajv/dist/runtime/parseJson").parseJsonNumber';var Yb={b:"\b",f:"\f",n:`
`,r:"\r",t:"	",'"':'"',"/":"/","\\":"\\"},r4=97,n4=48;function Hr(e,t){let r="",n;for(Hr.message=void 0;n=e[t++],n!=='"';)if(n==="\\")if(n=e[t],n in Yb)r+=Yb[n],t++;else if(n==="u"){t++;let i=4,o=0;for(;i--;){if(o<<=4,n=e[t],n===void 0){s("unexpected end");return}if(n=n.toLowerCase(),n>="a"&&n<="f")o+=n.charCodeAt(0)-r4+10;else if(n>="0"&&n<="9")o+=n.charCodeAt(0)-n4;else{s(`unexpected token ${n}`);return}t++}r+=String.fromCharCode(o)}else{s(`unexpected token ${n}`);return}else if(n===void 0){s("unexpected end");return}else if(n.charCodeAt(0)>=32)r+=n;else{s(`unexpected token ${n}`);return}return Hr.position=t,r;function s(i){Hr.position=t,Hr.message=i}}Vr.parseJsonString=Hr;Hr.message=void 0;Hr.position=0;Hr.code='require("ajv/dist/runtime/parseJson").parseJsonString'});var uR=E(bh=>{"use strict";Object.defineProperty(bh,"__esModule",{value:!0});var s4=ch(),tR=fn(),B=G(),i4=hr(),se=vt(),o4=ze(),a4=eu(),u4=Zd(),gh=Xb(),rR=X(),l4=Qd(),c4={elements:p4,values:m4,discriminator:g4,properties:Qb,optionalProperties:Qb,enum:S4,type:_4,ref:E4};function nR(e,t){let r=tR.getCompilingSchema.call(this,e);if(r)return r;let{es5:n,lines:s}=this.opts.code,{ownProperties:i}=this.opts,o=new B.CodeGen(this.scope,{es5:n,lines:s,ownProperties:i}),a=o.scopeName("parse"),u={self:this,gen:o,schema:e.schema,schemaEnv:e,definitions:t,data:se.default.data,parseName:a,char:o.name("c")},c;try{this._compilations.add(e),e.parseName=a,f4(u),o.optimize(this.opts.code.optimize);let l=o.toString();c=`${o.scopeRefs(se.default.scope)}return ${l}`;let p=new Function(`${se.default.scope}`,c)(this.scope.get());this.scope.value(a,{ref:p}),e.parse=p}catch(l){throw c&&this.logger.error("Error compiling parser, function code:",c),delete e.parse,delete e.parseName,l}finally{this._compilations.delete(e)}return e}bh.default=nR;var yh=(0,B._)`undefined`;function f4(e){let{gen:t,parseName:r,char:n}=e;t.func(r,(0,B._)`${se.default.json}, ${se.default.jsonPos}, ${se.default.jsonPart}`,!1,()=>{t.let(se.default.data),t.let(n),t.assign((0,B._)`${r}.message`,yh),t.assign((0,B._)`${r}.position`,yh),t.assign(se.default.jsonPos,(0,B._)`${se.default.jsonPos} || 0`),t.const(se.default.jsonLen,(0,B._)`${se.default.json}.length`),iu(e),vh(e),t.if(se.default.jsonPart,()=>{t.assign((0,B._)`${r}.position`,se.default.jsonPos),t.return(se.default.data)}),t.if((0,B._)`${se.default.jsonPos} === ${se.default.jsonLen}`,()=>t.return(se.default.data)),ds(e)})}function iu(e){let t;for(let r of s4.jtdForms)if(r in e.schema){t=r;break}t?h4(e,c4[t]):Sh(e)}var d4=eR(!0,eR(!1,ds));function h4(e,t){let{gen:r,schema:n,data:s}=e;if(!n.nullable)return t(e);ki(e,"null",t,()=>r.assign(s,null))}function p4(e){let{gen:t,schema:r,data:n}=e;Zt(e,"[");let s=t.let("i",0);t.assign(n,(0,B._)`[]`),_h(e,"]",()=>{let i=t.let("el");iu({...e,schema:r.elements,data:i}),t.assign((0,B._)`${n}[${s}++]`,i)})}function m4(e){let{gen:t,schema:r,data:n}=e;Zt(e,"{"),t.assign(n,(0,B._)`{}`),_h(e,"}",()=>y4(e,r.values))}function _h(e,t,r){sR(e,t,r),Zt(e,t)}function sR(e,t,r){let{gen:n}=e;n.for((0,B._)`;${se.default.jsonPos}<${se.default.jsonLen} && ${ou(1)}!==${t};`,()=>{r(),ki(e,",",()=>n.break(),s)});function s(){ki(e,t,()=>{},ds)}}function y4(e,t){let{gen:r}=e,n=r.let("key");gn({...e,data:n}),Zt(e,":"),oR(e,n,t)}function g4(e){let{gen:t,data:r,schema:n}=e,{discriminator:s,mapping:i}=n;Zt(e,"{"),t.assign(r,(0,B._)`{}`);let o=t.const("pos",se.default.jsonPos),a=t.let("value"),u=t.let("tag");sR(e,"}",()=>{let c=t.let("key");gn({...e,data:c}),Zt(e,":"),t.if((0,B._)`${c} === ${s}`,()=>{gn({...e,data:u}),t.assign((0,B._)`${r}[${c}]`,u),t.break()},()=>Sh({...e,data:a}))}),t.assign(se.default.jsonPos,o),t.if((0,B._)`${u} === undefined`),Er(e,(0,B.str)`discriminator tag not found`);for(let c in i)t.elseIf((0,B._)`${u} === ${c}`),iR({...e,schema:i[c]},s);t.else(),Er(e,(0,B.str)`discriminator value not in schema`),t.endIf()}function Qb(e){let{gen:t,data:r}=e;Zt(e,"{"),t.assign(r,(0,B._)`{}`),iR(e)}function iR(e,t){let{gen:r,schema:n,data:s}=e,{properties:i,optionalProperties:o,additionalProperties:a}=n;if(_h(e,"}",()=>{let u=r.let("key");if(gn({...e,data:u}),Zt(e,":"),r.if(!1),Zb(e,u,i),Zb(e,u,o),t){r.elseIf((0,B._)`${u} === ${t}`);let c=r.let("tag");gn({...e,data:c})}r.else(),a?Sh({...e,data:(0,B._)`${s}[${u}]`}):Er(e,(0,B.str)`property ${u} not allowed`),r.endIf()}),i){let u=(0,o4.hasPropFunc)(r),c=(0,B.and)(...Object.keys(i).map(l=>(0,B._)`${u}.call(${s}, ${l})`));r.if((0,B.not)(c),()=>Er(e,(0,B.str)`missing required properties`))}}function Zb(e,t,r={}){let{gen:n}=e;for(let s in r)n.elseIf((0,B._)`${t} === ${s}`),oR(e,t,r[s])}function oR(e,t,r){iu({...e,schema:r,data:(0,B._)`${e.data}[${t}]`})}function _4(e){let{gen:t,schema:r,data:n,self:s}=e;switch(r.type){case"boolean":d4(e);break;case"string":gn(e);break;case"timestamp":{gn(e);let i=(0,rR.useFunc)(t,l4.default),{allowDate:o,parseDate:a}=s.opts,u=o?(0,B._)`!${i}(${n}, true)`:(0,B._)`!${i}(${n})`,c=a?(0,B.or)(u,(0,B._)`(${n} = new Date(${n}), false)`,(0,B._)`isNaN(${n}.valueOf())`):u;t.if(c,()=>Er(e,(0,B.str)`invalid timestamp`));break}case"float32":case"float64":mh(e);break;default:{let i=r.type;if(!s.opts.int32range&&(i==="int32"||i==="uint32"))mh(e,16),i==="uint32"&&t.if((0,B._)`${n} < 0`,()=>Er(e,(0,B.str)`integer out of range`));else{let[o,a,u]=u4.intRange[i];mh(e,u),t.if((0,B._)`${n} < ${o} || ${n} > ${a}`,()=>Er(e,(0,B.str)`integer out of range`))}}}}function gn(e){Zt(e,'"'),Eh(e,gh.parseJsonString)}function S4(e){let{gen:t,data:r,schema:n}=e,s=n.enum;Zt(e,'"'),t.if(!1);for(let i of s){let o=JSON.stringify(i).slice(1);t.elseIf((0,B._)`${ou(o.length)} === ${o}`),t.assign(r,(0,B.str)`${i}`),t.add(se.default.jsonPos,o.length)}t.else(),ds(e),t.endIf()}function mh(e,t){let{gen:r}=e;vh(e),r.if((0,B._)`"-0123456789".indexOf(${ou(1)}) < 0`,()=>ds(e),()=>Eh(e,gh.parseJsonNumber,t))}function eR(e,t){return r=>{let{gen:n,data:s}=r;ki(r,`${e}`,()=>t(r),()=>n.assign(s,e))}}function E4(e){let{gen:t,self:r,definitions:n,schema:s,schemaEnv:i}=e,{ref:o}=s,a=n[o];if(!a)throw new i4.default(r.opts.uriResolver,"",o,`No definition ${o}`);if(!(0,a4.hasRef)(a))return iu({...e,schema:a});let{root:u}=i,c=nR.call(r,new tR.SchemaEnv({schema:a,root:u}),n);aR(e,v4(t,c),!0)}function v4(e,t){return t.parse?e.scopeValue("parse",{ref:t.parse}):(0,B._)`${e.scopeValue("wrapper",{ref:t})}.parse`}function Sh(e){Eh(e,gh.parseJson)}function Eh(e,t,r){aR(e,(0,rR.useFunc)(e.gen,t),r)}function aR(e,t,r){let{gen:n,data:s}=e;n.assign(s,(0,B._)`${t}(${se.default.json}, ${se.default.jsonPos}${r?(0,B._)`, ${r}`:B.nil})`),n.assign(se.default.jsonPos,(0,B._)`${t}.position`),n.if((0,B._)`${s} === undefined`,()=>Er(e,(0,B._)`${t}.message`))}function Zt(e,t){ki(e,t,ds)}function ki(e,t,r,n){let{gen:s}=e,i=t.length;vh(e),s.if((0,B._)`${ou(i)} === ${t}`,()=>{s.add(se.default.jsonPos,i),n?.(e)},()=>r(e))}function vh({gen:e,char:t}){e.code((0,B._)`while((${t}=${se.default.json}[${se.default.jsonPos}],${t}===" "||${t}==="\\n"||${t}==="\\r"||${t}==="\\t"))${se.default.jsonPos}++;`)}function ou(e){return e===1?(0,B._)`${se.default.json}[${se.default.jsonPos}]`:(0,B._)`${se.default.json}.slice(${se.default.jsonPos}, ${se.default.jsonPos}+${e})`}function ds(e){Er(e,(0,B._)`"unexpected token " + ${se.default.json}[${se.default.jsonPos}]`)}function Er({gen:e,parseName:t},r){e.assign((0,B._)`${t}.message`,r),e.assign((0,B._)`${t}.position`,se.default.jsonPos),e.return(yh)}});var Th=E((be,wh)=>{"use strict";Object.defineProperty(be,"__esModule",{value:!0});be.MissingRefError=be.ValidationError=be.CodeGen=be.Name=be.nil=be.stringify=be.str=be._=be.KeywordCxt=be.Ajv=void 0;var b4=jf(),R4=Db(),w4=Hb(),T4=Wb(),O4=uR(),Rh="JTD-meta-schema",hs=class extends b4.default{constructor(t={}){super({...t,jtd:!0})}_addVocabularies(){super._addVocabularies(),this.addVocabulary(R4.default)}_addDefaultMetaSchema(){super._addDefaultMetaSchema(),this.opts.meta&&this.addMetaSchema(w4.default,Rh,!1)}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(Rh)?Rh:void 0)}compileSerializer(t){let r=this._addSchema(t);return r.serialize||this._compileSerializer(r)}compileParser(t){let r=this._addSchema(t);return r.parse||this._compileParser(r)}_compileSerializer(t){if(T4.default.call(this,t,t.schema.definitions||{}),!t.serialize)throw new Error("ajv implementation error");return t.serialize}_compileParser(t){if(O4.default.call(this,t,t.schema.definitions||{}),!t.parse)throw new Error("ajv implementation error");return t.parse}};be.Ajv=hs;wh.exports=be=hs;wh.exports.Ajv=hs;Object.defineProperty(be,"__esModule",{value:!0});be.default=hs;var $4=Yn();Object.defineProperty(be,"KeywordCxt",{enumerable:!0,get:function(){return $4.KeywordCxt}});var ps=G();Object.defineProperty(be,"_",{enumerable:!0,get:function(){return ps._}});Object.defineProperty(be,"str",{enumerable:!0,get:function(){return ps.str}});Object.defineProperty(be,"stringify",{enumerable:!0,get:function(){return ps.stringify}});Object.defineProperty(be,"nil",{enumerable:!0,get:function(){return ps.nil}});Object.defineProperty(be,"Name",{enumerable:!0,get:function(){return ps.Name}});Object.defineProperty(be,"CodeGen",{enumerable:!0,get:function(){return ps.CodeGen}});var P4=li();Object.defineProperty(be,"ValidationError",{enumerable:!0,get:function(){return P4.default}});var I4=hr();Object.defineProperty(be,"MissingRefError",{enumerable:!0,get:function(){return I4.default}})});var Oh=E((nW,lR)=>{"use strict";var N4=Pa();lR.exports=Object.freeze({coerceTypes:"array",useDefaults:!0,removeAdditional:!0,uriResolver:N4,addUsedSchema:!1,allErrors:!1})});var dR=E((sW,fR)=>{"use strict";var A4=Ua().default,C4=Th(),cR=Oh(),$h=class{constructor(t,r){r.mode==="JTD"?this.ajv=new C4(Object.assign({},cR,r.customOptions)):this.ajv=new A4(Object.assign({},cR,r.customOptions));let n=!0;if(r.plugins&&r.plugins.length>0)for(let i of r.plugins)Array.isArray(i)?(n=n&&i[0].name!=="formatsPlugin",i[0](this.ajv,i[1])):(n=n&&i.name!=="formatsPlugin",i(this.ajv));n&&Ld()(this.ajv),r.onCreate?.(this.ajv);let s=Object.values(t);for(let i of s)this.ajv.addSchema(i)}buildValidatorFunction({schema:t}){if(t.$id){let r=this.ajv.getSchema(t.$id);if(r)return r}return this.ajv.compile(t)}};fR.exports=$h});var pR=E((iW,hR)=>{"use strict";var k4=Th(),q4=Oh(),Ph=class{constructor(t,r){this.ajv=new k4(Object.assign({},q4,r))}buildSerializerFunction({schema:t}){return this.ajv.compileSerializer(t)}};hR.exports=Ph});var gR=E((Li,yR)=>{"use strict";Object.defineProperty(Li,"__esModule",{value:!0});var qi=pa(),Mt=Vn();function mR(e,t){if(!e.opts.code.source)throw new Error("moduleCode: ajv instance must have code.source option");let{_n:r}=e.scope.opts;return typeof t=="function"?s(t.source):t!==void 0?i(t,n):i(e.schemas,a=>a.meta?void 0:e.compile(a.schema));function n(a){let u=e.getSchema(a);if(!u)throw new Error(`moduleCode: no schema with id ${a}`);return u}function s(a){let u={},c=a?.validateName,l=o(u,a);return e.opts.code.esm?`"use strict";${r}export const validate = ${c};${r}export default ${c};${r}${l}`:`"use strict";${r}module.exports = ${c};${r}module.exports.default = ${c};${r}${l}`}function i(a,u){var c;let l={},d=(0,Mt._)`"use strict";`;for(let p in a){let f=u(a[p]);if(f){let h=o(l,f.source),y=e.opts.code.esm?(0,Mt._)`export const ${(0,Mt.getEsmExportName)(p)}`:(0,Mt._)`exports${(0,Mt.getProperty)(p)}`;d=(0,Mt._)`${d}${r}${y} = ${(c=f.source)===null||c===void 0?void 0:c.validateName};${r}${h}`}}return`${d}`}function o(a,u){if(!u)throw new Error('moduleCode: function does not have "source" property');if(p(u.validateName)===qi.UsedValueState.Completed)return Mt.nil;f(u.validateName,qi.UsedValueState.Started);let c=e.scope.scopeCode(u.scopeValues,a,d),l=new Mt._Code(`${c}${r}${u.validateCode}`);return u.evaluated?(0,Mt._)`${l}${u.validateName}.evaluated = ${u.evaluated};${r}`:l;function d(h){var y;let _=(y=h.value)===null||y===void 0?void 0:y.ref;if(h.prefix==="validate"&&typeof _=="function")return o(a,_.source);if((h.prefix==="root"||h.prefix==="wrapper")&&typeof _=="object"){let{validate:S,validateName:v}=_;if(!v)throw new Error("ajv internal error");let g=e.opts.code.es5?qi.varKinds.var:qi.varKinds.const,m=(0,Mt._)`${g} ${h} = {validate: ${v}};`;if(p(v)===qi.UsedValueState.Started)return m;let w=o(a,S?.source);return(0,Mt._)`${m}${r}${w}`}}function p(h){var y;return(y=a[h.prefix])===null||y===void 0?void 0:y.get(h)}function f(h,y){let{prefix:_}=h;(a[_]=a[_]||new Map).set(h,y)}}}yR.exports=Li=mR;Object.defineProperty(Li,"__esModule",{value:!0});Li.default=mR});var ER=E((oW,SR)=>{"use strict";var _R=Ih(),L4=gR().default;function j4(e={readMode:!0}){if(e.readMode===!0&&!e.restoreFunction)throw new Error("You must provide a restoreFunction options when readMode ON");if(e.readMode!==!0&&!e.storeFunction)throw new Error("You must provide a storeFunction options when readMode OFF");if(e.readMode===!0)return function(){return function(n){return e.restoreFunction(n)}};let t=_R();return function(n,s={}){(!s.customOptions||!s.customOptions.code)&&(s.customOptions=Object.assign({},s.customOptions,{code:{source:!0}}));let i=t(n,s);return function(o){let a=i(o),u=L4(i[_R.AjvReference].ajv,a);return e.storeFunction(o,u),a}}}SR.exports=j4});var Ih=E((aW,ms)=>{"use strict";var bR=Symbol.for("fastify.ajv-compiler.reference"),D4=dR(),x4=pR();function Nh(e){let t=new Map,r=new Map;return e&&e.jtdSerializer===!0?function(s,i){let o=vR({},i);if(r.has(o))return r.get(o);let a=new x4(s,i),u=a.buildSerializerFunction.bind(a);return r.set(o,u),u}:function(s,i){let o=vR(s,i.customOptions);if(t.has(o))return t.get(o);let a=new D4(s,i),u=a.buildValidatorFunction.bind(a);return t.set(o,u),i.customOptions.code!==void 0&&(u[bR]=a),u}}function vR(e,t){let r=JSON.stringify(e),n=JSON.stringify(t);return`${r}${n}`}ms.exports=Nh;ms.exports.default=Nh;ms.exports.AjvCompiler=Nh;ms.exports.AjvReference=bR;ms.exports.StandaloneValidator=ER()});var Ah=E((uW,RR)=>{"use strict";var{buildSchemas:F4}=Fs(),M4=hb(),H4=Ih();function V4(e,t){if(e)return new ys(e,t);let r=Object.assign({buildValidator:null,buildSerializer:null},t?.compilersFactory);r.buildValidator||(r.buildValidator=H4()),r.buildSerializer||(r.buildSerializer=M4());let n={bucket:t&&t.bucket||F4,compilersFactory:r,isCustomValidatorCompiler:typeof t?.compilersFactory?.buildValidator=="function",isCustomSerializerCompiler:typeof t?.compilersFactory?.buildValidator=="function"};return new ys(void 0,n)}var ys=class{constructor(t,r){this.opts=r||t?.opts,this.addedSchemas=!1,this.compilersFactory=this.opts.compilersFactory,t?(this.schemaBucket=this.opts.bucket(t.getSchemas()),this.validatorCompiler=t.getValidatorCompiler(),this.serializerCompiler=t.getSerializerCompiler(),this.isCustomValidatorCompiler=t.isCustomValidatorCompiler,this.isCustomSerializerCompiler=t.isCustomSerializerCompiler,this.parent=t):(this.schemaBucket=this.opts.bucket(),this.isCustomValidatorCompiler=this.opts.isCustomValidatorCompiler||!1,this.isCustomSerializerCompiler=this.opts.isCustomSerializerCompiler||!1)}add(t){return this.addedSchemas=!0,this.schemaBucket.add(t)}getSchema(t){return this.schemaBucket.getSchema(t)}getSchemas(){return this.schemaBucket.getSchemas()}setValidatorCompiler(t){this.compilersFactory=Object.assign({},this.compilersFactory,{buildValidator:()=>t}),this.validatorCompiler=t,this.isCustomValidatorCompiler=!0}setSerializerCompiler(t){this.compilersFactory=Object.assign({},this.compilersFactory,{buildSerializer:()=>t}),this.serializerCompiler=t,this.isCustomSerializerCompiler=!0}getValidatorCompiler(){return this.validatorCompiler||this.parent&&this.parent.getValidatorCompiler()}getSerializerCompiler(){return this.serializerCompiler||this.parent&&this.parent.getSerializerCompiler()}getSerializerBuilder(){return this.compilersFactory.buildSerializer||this.parent&&this.parent.getSerializerBuilder()}getValidatorBuilder(){return this.compilersFactory.buildValidator||this.parent&&this.parent.getValidatorBuilder()}setupValidator(t){this.validatorCompiler!==void 0&&!this.addedSchemas||(this.validatorCompiler=this.getValidatorBuilder()(this.schemaBucket.getSchemas(),t.ajv))}setupSerializer(t){this.serializerCompiler!==void 0&&!this.addedSchemas||(this.serializerCompiler=this.getSerializerBuilder()(this.schemaBucket.getSchemas(),t.serializerOpts))}};ys.buildSchemaController=V4;RR.exports=ys});var ji=E((lW,wR)=>{"use strict";var z4="2.0.0",U4=Number.MAX_SAFE_INTEGER||9007199254740991,B4=16,G4=250,J4=["major","premajor","minor","preminor","patch","prepatch","prerelease"];wR.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:B4,MAX_SAFE_BUILD_LENGTH:G4,MAX_SAFE_INTEGER:U4,RELEASE_TYPES:J4,SEMVER_SPEC_VERSION:z4,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var Di=E((cW,TR)=>{"use strict";var K4=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};TR.exports=K4});var gs=E((er,OR)=>{"use strict";var{MAX_SAFE_COMPONENT_LENGTH:Ch,MAX_SAFE_BUILD_LENGTH:W4,MAX_LENGTH:Y4}=ji(),X4=Di();er=OR.exports={};var Q4=er.re=[],Z4=er.safeRe=[],x=er.src=[],eU=er.safeSrc=[],F=er.t={},tU=0,kh="[a-zA-Z0-9-]",rU=[["\\s",1],["\\d",Y4],[kh,W4]],nU=e=>{for(let[t,r]of rU)e=e.split(`${t}*`).join(`${t}{0,${r}}`).split(`${t}+`).join(`${t}{1,${r}}`);return e},W=(e,t,r)=>{let n=nU(t),s=tU++;X4(e,s,t),F[e]=s,x[s]=t,eU[s]=n,Q4[s]=new RegExp(t,r?"g":void 0),Z4[s]=new RegExp(n,r?"g":void 0)};W("NUMERICIDENTIFIER","0|[1-9]\\d*");W("NUMERICIDENTIFIERLOOSE","\\d+");W("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${kh}*`);W("MAINVERSION",`(${x[F.NUMERICIDENTIFIER]})\\.(${x[F.NUMERICIDENTIFIER]})\\.(${x[F.NUMERICIDENTIFIER]})`);W("MAINVERSIONLOOSE",`(${x[F.NUMERICIDENTIFIERLOOSE]})\\.(${x[F.NUMERICIDENTIFIERLOOSE]})\\.(${x[F.NUMERICIDENTIFIERLOOSE]})`);W("PRERELEASEIDENTIFIER",`(?:${x[F.NONNUMERICIDENTIFIER]}|${x[F.NUMERICIDENTIFIER]})`);W("PRERELEASEIDENTIFIERLOOSE",`(?:${x[F.NONNUMERICIDENTIFIER]}|${x[F.NUMERICIDENTIFIERLOOSE]})`);W("PRERELEASE",`(?:-(${x[F.PRERELEASEIDENTIFIER]}(?:\\.${x[F.PRERELEASEIDENTIFIER]})*))`);W("PRERELEASELOOSE",`(?:-?(${x[F.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${x[F.PRERELEASEIDENTIFIERLOOSE]})*))`);W("BUILDIDENTIFIER",`${kh}+`);W("BUILD",`(?:\\+(${x[F.BUILDIDENTIFIER]}(?:\\.${x[F.BUILDIDENTIFIER]})*))`);W("FULLPLAIN",`v?${x[F.MAINVERSION]}${x[F.PRERELEASE]}?${x[F.BUILD]}?`);W("FULL",`^${x[F.FULLPLAIN]}$`);W("LOOSEPLAIN",`[v=\\s]*${x[F.MAINVERSIONLOOSE]}${x[F.PRERELEASELOOSE]}?${x[F.BUILD]}?`);W("LOOSE",`^${x[F.LOOSEPLAIN]}$`);W("GTLT","((?:<|>)?=?)");W("XRANGEIDENTIFIERLOOSE",`${x[F.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);W("XRANGEIDENTIFIER",`${x[F.NUMERICIDENTIFIER]}|x|X|\\*`);W("XRANGEPLAIN",`[v=\\s]*(${x[F.XRANGEIDENTIFIER]})(?:\\.(${x[F.XRANGEIDENTIFIER]})(?:\\.(${x[F.XRANGEIDENTIFIER]})(?:${x[F.PRERELEASE]})?${x[F.BUILD]}?)?)?`);W("XRANGEPLAINLOOSE",`[v=\\s]*(${x[F.XRANGEIDENTIFIERLOOSE]})(?:\\.(${x[F.XRANGEIDENTIFIERLOOSE]})(?:\\.(${x[F.XRANGEIDENTIFIERLOOSE]})(?:${x[F.PRERELEASELOOSE]})?${x[F.BUILD]}?)?)?`);W("XRANGE",`^${x[F.GTLT]}\\s*${x[F.XRANGEPLAIN]}$`);W("XRANGELOOSE",`^${x[F.GTLT]}\\s*${x[F.XRANGEPLAINLOOSE]}$`);W("COERCEPLAIN",`(^|[^\\d])(\\d{1,${Ch}})(?:\\.(\\d{1,${Ch}}))?(?:\\.(\\d{1,${Ch}}))?`);W("COERCE",`${x[F.COERCEPLAIN]}(?:$|[^\\d])`);W("COERCEFULL",x[F.COERCEPLAIN]+`(?:${x[F.PRERELEASE]})?(?:${x[F.BUILD]})?(?:$|[^\\d])`);W("COERCERTL",x[F.COERCE],!0);W("COERCERTLFULL",x[F.COERCEFULL],!0);W("LONETILDE","(?:~>?)");W("TILDETRIM",`(\\s*)${x[F.LONETILDE]}\\s+`,!0);er.tildeTrimReplace="$1~";W("TILDE",`^${x[F.LONETILDE]}${x[F.XRANGEPLAIN]}$`);W("TILDELOOSE",`^${x[F.LONETILDE]}${x[F.XRANGEPLAINLOOSE]}$`);W("LONECARET","(?:\\^)");W("CARETTRIM",`(\\s*)${x[F.LONECARET]}\\s+`,!0);er.caretTrimReplace="$1^";W("CARET",`^${x[F.LONECARET]}${x[F.XRANGEPLAIN]}$`);W("CARETLOOSE",`^${x[F.LONECARET]}${x[F.XRANGEPLAINLOOSE]}$`);W("COMPARATORLOOSE",`^${x[F.GTLT]}\\s*(${x[F.LOOSEPLAIN]})$|^$`);W("COMPARATOR",`^${x[F.GTLT]}\\s*(${x[F.FULLPLAIN]})$|^$`);W("COMPARATORTRIM",`(\\s*)${x[F.GTLT]}\\s*(${x[F.LOOSEPLAIN]}|${x[F.XRANGEPLAIN]})`,!0);er.comparatorTrimReplace="$1$2$3";W("HYPHENRANGE",`^\\s*(${x[F.XRANGEPLAIN]})\\s+-\\s+(${x[F.XRANGEPLAIN]})\\s*$`);W("HYPHENRANGELOOSE",`^\\s*(${x[F.XRANGEPLAINLOOSE]})\\s+-\\s+(${x[F.XRANGEPLAINLOOSE]})\\s*$`);W("STAR","(<|>)?=?\\s*\\*");W("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");W("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var au=E((fW,$R)=>{"use strict";var sU=Object.freeze({loose:!0}),iU=Object.freeze({}),oU=e=>e?typeof e!="object"?sU:e:iU;$R.exports=oU});var qh=E((dW,NR)=>{"use strict";var PR=/^[0-9]+$/,IR=(e,t)=>{let r=PR.test(e),n=PR.test(t);return r&&n&&(e=+e,t=+t),e===t?0:r&&!n?-1:n&&!r?1:e<t?-1:1},aU=(e,t)=>IR(t,e);NR.exports={compareIdentifiers:IR,rcompareIdentifiers:aU}});var Qe=E((hW,CR)=>{"use strict";var uu=Di(),{MAX_LENGTH:AR,MAX_SAFE_INTEGER:lu}=ji(),{safeRe:cu,t:fu}=gs(),uU=au(),{compareIdentifiers:_s}=qh(),Lh=class e{constructor(t,r){if(r=uU(r),t instanceof e){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>AR)throw new TypeError(`version is longer than ${AR} characters`);uu("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let n=t.trim().match(r.loose?cu[fu.LOOSE]:cu[fu.FULL]);if(!n)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>lu||this.major<0)throw new TypeError("Invalid major version");if(this.minor>lu||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>lu||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){let i=+s;if(i>=0&&i<lu)return i}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(uu("SemVer.compare",this.version,this.options,t),!(t instanceof e)){if(typeof t=="string"&&t===this.version)return 0;t=new e(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof e||(t=new e(t,this.options)),_s(this.major,t.major)||_s(this.minor,t.minor)||_s(this.patch,t.patch)}comparePre(t){if(t instanceof e||(t=new e(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{let n=this.prerelease[r],s=t.prerelease[r];if(uu("prerelease compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return _s(n,s)}while(++r)}compareBuild(t){t instanceof e||(t=new e(t,this.options));let r=0;do{let n=this.build[r],s=t.build[r];if(uu("build compare",r,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return _s(n,s)}while(++r)}inc(t,r,n){if(t.startsWith("pre")){if(!r&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(r){let s=`-${r}`.match(this.options.loose?cu[fu.PRERELEASELOOSE]:cu[fu.PRERELEASE]);if(!s||s[1]!==r)throw new Error(`invalid identifier: ${r}`)}}switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r,n),this.inc("pre",r,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r,n),this.inc("pre",r,n);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let s=Number(n)?1:0;if(this.prerelease.length===0)this.prerelease=[s];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(r===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(r){let i=[r,s];n===!1&&(i=[r]),_s(this.prerelease[0],r)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};CR.exports=Lh});var _n=E((pW,qR)=>{"use strict";var kR=Qe(),lU=(e,t,r=!1)=>{if(e instanceof kR)return e;try{return new kR(e,t)}catch(n){if(!r)return null;throw n}};qR.exports=lU});var jR=E((mW,LR)=>{"use strict";var cU=_n(),fU=(e,t)=>{let r=cU(e,t);return r?r.version:null};LR.exports=fU});var xR=E((yW,DR)=>{"use strict";var dU=_n(),hU=(e,t)=>{let r=dU(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null};DR.exports=hU});var HR=E((gW,MR)=>{"use strict";var FR=Qe(),pU=(e,t,r,n,s)=>{typeof r=="string"&&(s=n,n=r,r=void 0);try{return new FR(e instanceof FR?e.version:e,r).inc(t,n,s).version}catch{return null}};MR.exports=pU});var UR=E((_W,zR)=>{"use strict";var VR=_n(),mU=(e,t)=>{let r=VR(e,null,!0),n=VR(t,null,!0),s=r.compare(n);if(s===0)return null;let i=s>0,o=i?r:n,a=i?n:r,u=!!o.prerelease.length;if(!!a.prerelease.length&&!u){if(!a.patch&&!a.minor)return"major";if(a.compareMain(o)===0)return a.minor&&!a.patch?"minor":"patch"}let l=u?"pre":"";return r.major!==n.major?l+"major":r.minor!==n.minor?l+"minor":r.patch!==n.patch?l+"patch":"prerelease"};zR.exports=mU});var GR=E((SW,BR)=>{"use strict";var yU=Qe(),gU=(e,t)=>new yU(e,t).major;BR.exports=gU});var KR=E((EW,JR)=>{"use strict";var _U=Qe(),SU=(e,t)=>new _U(e,t).minor;JR.exports=SU});var YR=E((vW,WR)=>{"use strict";var EU=Qe(),vU=(e,t)=>new EU(e,t).patch;WR.exports=vU});var QR=E((bW,XR)=>{"use strict";var bU=_n(),RU=(e,t)=>{let r=bU(e,t);return r&&r.prerelease.length?r.prerelease:null};XR.exports=RU});var Tt=E((RW,ew)=>{"use strict";var ZR=Qe(),wU=(e,t,r)=>new ZR(e,r).compare(new ZR(t,r));ew.exports=wU});var rw=E((wW,tw)=>{"use strict";var TU=Tt(),OU=(e,t,r)=>TU(t,e,r);tw.exports=OU});var sw=E((TW,nw)=>{"use strict";var $U=Tt(),PU=(e,t)=>$U(e,t,!0);nw.exports=PU});var du=E((OW,ow)=>{"use strict";var iw=Qe(),IU=(e,t,r)=>{let n=new iw(e,r),s=new iw(t,r);return n.compare(s)||n.compareBuild(s)};ow.exports=IU});var uw=E(($W,aw)=>{"use strict";var NU=du(),AU=(e,t)=>e.sort((r,n)=>NU(r,n,t));aw.exports=AU});var cw=E((PW,lw)=>{"use strict";var CU=du(),kU=(e,t)=>e.sort((r,n)=>CU(n,r,t));lw.exports=kU});var xi=E((IW,fw)=>{"use strict";var qU=Tt(),LU=(e,t,r)=>qU(e,t,r)>0;fw.exports=LU});var hu=E((NW,dw)=>{"use strict";var jU=Tt(),DU=(e,t,r)=>jU(e,t,r)<0;dw.exports=DU});var jh=E((AW,hw)=>{"use strict";var xU=Tt(),FU=(e,t,r)=>xU(e,t,r)===0;hw.exports=FU});var Dh=E((CW,pw)=>{"use strict";var MU=Tt(),HU=(e,t,r)=>MU(e,t,r)!==0;pw.exports=HU});var pu=E((kW,mw)=>{"use strict";var VU=Tt(),zU=(e,t,r)=>VU(e,t,r)>=0;mw.exports=zU});var mu=E((qW,yw)=>{"use strict";var UU=Tt(),BU=(e,t,r)=>UU(e,t,r)<=0;yw.exports=BU});var xh=E((LW,gw)=>{"use strict";var GU=jh(),JU=Dh(),KU=xi(),WU=pu(),YU=hu(),XU=mu(),QU=(e,t,r,n)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return GU(e,r,n);case"!=":return JU(e,r,n);case">":return KU(e,r,n);case">=":return WU(e,r,n);case"<":return YU(e,r,n);case"<=":return XU(e,r,n);default:throw new TypeError(`Invalid operator: ${t}`)}};gw.exports=QU});var Sw=E((jW,_w)=>{"use strict";var ZU=Qe(),e5=_n(),{safeRe:yu,t:gu}=gs(),t5=(e,t)=>{if(e instanceof ZU)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;t=t||{};let r=null;if(!t.rtl)r=e.match(t.includePrerelease?yu[gu.COERCEFULL]:yu[gu.COERCE]);else{let u=t.includePrerelease?yu[gu.COERCERTLFULL]:yu[gu.COERCERTL],c;for(;(c=u.exec(e))&&(!r||r.index+r[0].length!==e.length);)(!r||c.index+c[0].length!==r.index+r[0].length)&&(r=c),u.lastIndex=c.index+c[1].length+c[2].length;u.lastIndex=-1}if(r===null)return null;let n=r[2],s=r[3]||"0",i=r[4]||"0",o=t.includePrerelease&&r[5]?`-${r[5]}`:"",a=t.includePrerelease&&r[6]?`+${r[6]}`:"";return e5(`${n}.${s}.${i}${o}${a}`,t)};_w.exports=t5});var vw=E((DW,Ew)=>{"use strict";var Fh=class{constructor(){this.max=1e3,this.map=new Map}get(t){let r=this.map.get(t);if(r!==void 0)return this.map.delete(t),this.map.set(t,r),r}delete(t){return this.map.delete(t)}set(t,r){if(!this.delete(t)&&r!==void 0){if(this.map.size>=this.max){let s=this.map.keys().next().value;this.delete(s)}this.map.set(t,r)}return this}};Ew.exports=Fh});var Ot=E((xW,Tw)=>{"use strict";var r5=/\s+/g,Mh=class e{constructor(t,r){if(r=s5(r),t instanceof e)return t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease?t:new e(t.raw,r);if(t instanceof Hh)return this.raw=t.value,this.set=[[t]],this.formatted=void 0,this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=t.trim().replace(r5," "),this.set=this.raw.split("||").map(n=>this.parseRange(n.trim())).filter(n=>n.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let n=this.set[0];if(this.set=this.set.filter(s=>!Rw(s[0])),this.set.length===0)this.set=[n];else if(this.set.length>1){for(let s of this.set)if(s.length===1&&f5(s[0])){this.set=[s];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let t=0;t<this.set.length;t++){t>0&&(this.formatted+="||");let r=this.set[t];for(let n=0;n<r.length;n++)n>0&&(this.formatted+=" "),this.formatted+=r[n].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(t){let n=((this.options.includePrerelease&&l5)|(this.options.loose&&c5))+":"+t,s=bw.get(n);if(s)return s;let i=this.options.loose,o=i?ht[st.HYPHENRANGELOOSE]:ht[st.HYPHENRANGE];t=t.replace(o,v5(this.options.includePrerelease)),Re("hyphen replace",t),t=t.replace(ht[st.COMPARATORTRIM],o5),Re("comparator trim",t),t=t.replace(ht[st.TILDETRIM],a5),Re("tilde trim",t),t=t.replace(ht[st.CARETTRIM],u5),Re("caret trim",t);let a=t.split(" ").map(d=>d5(d,this.options)).join(" ").split(/\s+/).map(d=>E5(d,this.options));i&&(a=a.filter(d=>(Re("loose invalid filter",d,this.options),!!d.match(ht[st.COMPARATORLOOSE])))),Re("range list",a);let u=new Map,c=a.map(d=>new Hh(d,this.options));for(let d of c){if(Rw(d))return[d];u.set(d.value,d)}u.size>1&&u.has("")&&u.delete("");let l=[...u.values()];return bw.set(n,l),l}intersects(t,r){if(!(t instanceof e))throw new TypeError("a Range is required");return this.set.some(n=>ww(n,r)&&t.set.some(s=>ww(s,r)&&n.every(i=>s.every(o=>i.intersects(o,r)))))}test(t){if(!t)return!1;if(typeof t=="string")try{t=new i5(t,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(b5(this.set[r],t,this.options))return!0;return!1}};Tw.exports=Mh;var n5=vw(),bw=new n5,s5=au(),Hh=Fi(),Re=Di(),i5=Qe(),{safeRe:ht,t:st,comparatorTrimReplace:o5,tildeTrimReplace:a5,caretTrimReplace:u5}=gs(),{FLAG_INCLUDE_PRERELEASE:l5,FLAG_LOOSE:c5}=ji(),Rw=e=>e.value==="<0.0.0-0",f5=e=>e.value==="",ww=(e,t)=>{let r=!0,n=e.slice(),s=n.pop();for(;r&&n.length;)r=n.every(i=>s.intersects(i,t)),s=n.pop();return r},d5=(e,t)=>(Re("comp",e,t),e=m5(e,t),Re("caret",e),e=h5(e,t),Re("tildes",e),e=g5(e,t),Re("xrange",e),e=S5(e,t),Re("stars",e),e),it=e=>!e||e.toLowerCase()==="x"||e==="*",h5=(e,t)=>e.trim().split(/\s+/).map(r=>p5(r,t)).join(" "),p5=(e,t)=>{let r=t.loose?ht[st.TILDELOOSE]:ht[st.TILDE];return e.replace(r,(n,s,i,o,a)=>{Re("tilde",e,n,s,i,o,a);let u;return it(s)?u="":it(i)?u=`>=${s}.0.0 <${+s+1}.0.0-0`:it(o)?u=`>=${s}.${i}.0 <${s}.${+i+1}.0-0`:a?(Re("replaceTilde pr",a),u=`>=${s}.${i}.${o}-${a} <${s}.${+i+1}.0-0`):u=`>=${s}.${i}.${o} <${s}.${+i+1}.0-0`,Re("tilde return",u),u})},m5=(e,t)=>e.trim().split(/\s+/).map(r=>y5(r,t)).join(" "),y5=(e,t)=>{Re("caret",e,t);let r=t.loose?ht[st.CARETLOOSE]:ht[st.CARET],n=t.includePrerelease?"-0":"";return e.replace(r,(s,i,o,a,u)=>{Re("caret",e,s,i,o,a,u);let c;return it(i)?c="":it(o)?c=`>=${i}.0.0${n} <${+i+1}.0.0-0`:it(a)?i==="0"?c=`>=${i}.${o}.0${n} <${i}.${+o+1}.0-0`:c=`>=${i}.${o}.0${n} <${+i+1}.0.0-0`:u?(Re("replaceCaret pr",u),i==="0"?o==="0"?c=`>=${i}.${o}.${a}-${u} <${i}.${o}.${+a+1}-0`:c=`>=${i}.${o}.${a}-${u} <${i}.${+o+1}.0-0`:c=`>=${i}.${o}.${a}-${u} <${+i+1}.0.0-0`):(Re("no pr"),i==="0"?o==="0"?c=`>=${i}.${o}.${a}${n} <${i}.${o}.${+a+1}-0`:c=`>=${i}.${o}.${a}${n} <${i}.${+o+1}.0-0`:c=`>=${i}.${o}.${a} <${+i+1}.0.0-0`),Re("caret return",c),c})},g5=(e,t)=>(Re("replaceXRanges",e,t),e.split(/\s+/).map(r=>_5(r,t)).join(" ")),_5=(e,t)=>{e=e.trim();let r=t.loose?ht[st.XRANGELOOSE]:ht[st.XRANGE];return e.replace(r,(n,s,i,o,a,u)=>{Re("xRange",e,n,s,i,o,a,u);let c=it(i),l=c||it(o),d=l||it(a),p=d;return s==="="&&p&&(s=""),u=t.includePrerelease?"-0":"",c?s===">"||s==="<"?n="<0.0.0-0":n="*":s&&p?(l&&(o=0),a=0,s===">"?(s=">=",l?(i=+i+1,o=0,a=0):(o=+o+1,a=0)):s==="<="&&(s="<",l?i=+i+1:o=+o+1),s==="<"&&(u="-0"),n=`${s+i}.${o}.${a}${u}`):l?n=`>=${i}.0.0${u} <${+i+1}.0.0-0`:d&&(n=`>=${i}.${o}.0${u} <${i}.${+o+1}.0-0`),Re("xRange return",n),n})},S5=(e,t)=>(Re("replaceStars",e,t),e.trim().replace(ht[st.STAR],"")),E5=(e,t)=>(Re("replaceGTE0",e,t),e.trim().replace(ht[t.includePrerelease?st.GTE0PRE:st.GTE0],"")),v5=e=>(t,r,n,s,i,o,a,u,c,l,d,p)=>(it(n)?r="":it(s)?r=`>=${n}.0.0${e?"-0":""}`:it(i)?r=`>=${n}.${s}.0${e?"-0":""}`:o?r=`>=${r}`:r=`>=${r}${e?"-0":""}`,it(c)?u="":it(l)?u=`<${+c+1}.0.0-0`:it(d)?u=`<${c}.${+l+1}.0-0`:p?u=`<=${c}.${l}.${d}-${p}`:e?u=`<${c}.${l}.${+d+1}-0`:u=`<=${u}`,`${r} ${u}`.trim()),b5=(e,t,r)=>{for(let n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let n=0;n<e.length;n++)if(Re(e[n].semver),e[n].semver!==Hh.ANY&&e[n].semver.prerelease.length>0){let s=e[n].semver;if(s.major===t.major&&s.minor===t.minor&&s.patch===t.patch)return!0}return!1}return!0}});var Fi=E((FW,Aw)=>{"use strict";var Mi=Symbol("SemVer ANY"),Uh=class e{static get ANY(){return Mi}constructor(t,r){if(r=Ow(r),t instanceof e){if(t.loose===!!r.loose)return t;t=t.value}t=t.trim().split(/\s+/).join(" "),zh("comparator",t,r),this.options=r,this.loose=!!r.loose,this.parse(t),this.semver===Mi?this.value="":this.value=this.operator+this.semver.version,zh("comp",this)}parse(t){let r=this.options.loose?$w[Pw.COMPARATORLOOSE]:$w[Pw.COMPARATOR],n=t.match(r);if(!n)throw new TypeError(`Invalid comparator: ${t}`);this.operator=n[1]!==void 0?n[1]:"",this.operator==="="&&(this.operator=""),n[2]?this.semver=new Iw(n[2],this.options.loose):this.semver=Mi}toString(){return this.value}test(t){if(zh("Comparator.test",t,this.options.loose),this.semver===Mi||t===Mi)return!0;if(typeof t=="string")try{t=new Iw(t,this.options)}catch{return!1}return Vh(t,this.operator,this.semver,this.options)}intersects(t,r){if(!(t instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new Nw(t.value,r).test(this.value):t.operator===""?t.value===""?!0:new Nw(this.value,r).test(t.semver):(r=Ow(r),r.includePrerelease&&(this.value==="<0.0.0-0"||t.value==="<0.0.0-0")||!r.includePrerelease&&(this.value.startsWith("<0.0.0")||t.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&t.operator.startsWith(">")||this.operator.startsWith("<")&&t.operator.startsWith("<")||this.semver.version===t.semver.version&&this.operator.includes("=")&&t.operator.includes("=")||Vh(this.semver,"<",t.semver,r)&&this.operator.startsWith(">")&&t.operator.startsWith("<")||Vh(this.semver,">",t.semver,r)&&this.operator.startsWith("<")&&t.operator.startsWith(">")))}};Aw.exports=Uh;var Ow=au(),{safeRe:$w,t:Pw}=gs(),Vh=xh(),zh=Di(),Iw=Qe(),Nw=Ot()});var Hi=E((MW,Cw)=>{"use strict";var R5=Ot(),w5=(e,t,r)=>{try{t=new R5(t,r)}catch{return!1}return t.test(e)};Cw.exports=w5});var qw=E((HW,kw)=>{"use strict";var T5=Ot(),O5=(e,t)=>new T5(e,t).set.map(r=>r.map(n=>n.value).join(" ").trim().split(" "));kw.exports=O5});var jw=E((VW,Lw)=>{"use strict";var $5=Qe(),P5=Ot(),I5=(e,t,r)=>{let n=null,s=null,i=null;try{i=new P5(t,r)}catch{return null}return e.forEach(o=>{i.test(o)&&(!n||s.compare(o)===-1)&&(n=o,s=new $5(n,r))}),n};Lw.exports=I5});var xw=E((zW,Dw)=>{"use strict";var N5=Qe(),A5=Ot(),C5=(e,t,r)=>{let n=null,s=null,i=null;try{i=new A5(t,r)}catch{return null}return e.forEach(o=>{i.test(o)&&(!n||s.compare(o)===1)&&(n=o,s=new N5(n,r))}),n};Dw.exports=C5});var Hw=E((UW,Mw)=>{"use strict";var Bh=Qe(),k5=Ot(),Fw=xi(),q5=(e,t)=>{e=new k5(e,t);let r=new Bh("0.0.0");if(e.test(r)||(r=new Bh("0.0.0-0"),e.test(r)))return r;r=null;for(let n=0;n<e.set.length;++n){let s=e.set[n],i=null;s.forEach(o=>{let a=new Bh(o.semver.version);switch(o.operator){case">":a.prerelease.length===0?a.patch++:a.prerelease.push(0),a.raw=a.format();case"":case">=":(!i||Fw(a,i))&&(i=a);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),i&&(!r||Fw(r,i))&&(r=i)}return r&&e.test(r)?r:null};Mw.exports=q5});var zw=E((BW,Vw)=>{"use strict";var L5=Ot(),j5=(e,t)=>{try{return new L5(e,t).range||"*"}catch{return null}};Vw.exports=j5});var _u=E((GW,Jw)=>{"use strict";var D5=Qe(),Gw=Fi(),{ANY:x5}=Gw,F5=Ot(),M5=Hi(),Uw=xi(),Bw=hu(),H5=mu(),V5=pu(),z5=(e,t,r,n)=>{e=new D5(e,n),t=new F5(t,n);let s,i,o,a,u;switch(r){case">":s=Uw,i=H5,o=Bw,a=">",u=">=";break;case"<":s=Bw,i=V5,o=Uw,a="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(M5(e,t,n))return!1;for(let c=0;c<t.set.length;++c){let l=t.set[c],d=null,p=null;if(l.forEach(f=>{f.semver===x5&&(f=new Gw(">=0.0.0")),d=d||f,p=p||f,s(f.semver,d.semver,n)?d=f:o(f.semver,p.semver,n)&&(p=f)}),d.operator===a||d.operator===u||(!p.operator||p.operator===a)&&i(e,p.semver))return!1;if(p.operator===u&&o(e,p.semver))return!1}return!0};Jw.exports=z5});var Ww=E((JW,Kw)=>{"use strict";var U5=_u(),B5=(e,t,r)=>U5(e,t,">",r);Kw.exports=B5});var Xw=E((KW,Yw)=>{"use strict";var G5=_u(),J5=(e,t,r)=>G5(e,t,"<",r);Yw.exports=J5});var eT=E((WW,Zw)=>{"use strict";var Qw=Ot(),K5=(e,t,r)=>(e=new Qw(e,r),t=new Qw(t,r),e.intersects(t,r));Zw.exports=K5});var rT=E((YW,tT)=>{"use strict";var W5=Hi(),Y5=Tt();tT.exports=(e,t,r)=>{let n=[],s=null,i=null,o=e.sort((l,d)=>Y5(l,d,r));for(let l of o)W5(l,t,r)?(i=l,s||(s=l)):(i&&n.push([s,i]),i=null,s=null);s&&n.push([s,null]);let a=[];for(let[l,d]of n)l===d?a.push(l):!d&&l===o[0]?a.push("*"):d?l===o[0]?a.push(`<=${d}`):a.push(`${l} - ${d}`):a.push(`>=${l}`);let u=a.join(" || "),c=typeof t.raw=="string"?t.raw:String(t);return u.length<c.length?u:t}});var uT=E((XW,aT)=>{"use strict";var nT=Ot(),Jh=Fi(),{ANY:Gh}=Jh,Vi=Hi(),Kh=Tt(),X5=(e,t,r={})=>{if(e===t)return!0;e=new nT(e,r),t=new nT(t,r);let n=!1;e:for(let s of e.set){for(let i of t.set){let o=Z5(s,i,r);if(n=n||o!==null,o)continue e}if(n)return!1}return!0},Q5=[new Jh(">=0.0.0-0")],sT=[new Jh(">=0.0.0")],Z5=(e,t,r)=>{if(e===t)return!0;if(e.length===1&&e[0].semver===Gh){if(t.length===1&&t[0].semver===Gh)return!0;r.includePrerelease?e=Q5:e=sT}if(t.length===1&&t[0].semver===Gh){if(r.includePrerelease)return!0;t=sT}let n=new Set,s,i;for(let f of e)f.operator===">"||f.operator===">="?s=iT(s,f,r):f.operator==="<"||f.operator==="<="?i=oT(i,f,r):n.add(f.semver);if(n.size>1)return null;let o;if(s&&i){if(o=Kh(s.semver,i.semver,r),o>0)return null;if(o===0&&(s.operator!==">="||i.operator!=="<="))return null}for(let f of n){if(s&&!Vi(f,String(s),r)||i&&!Vi(f,String(i),r))return null;for(let h of t)if(!Vi(f,String(h),r))return!1;return!0}let a,u,c,l,d=i&&!r.includePrerelease&&i.semver.prerelease.length?i.semver:!1,p=s&&!r.includePrerelease&&s.semver.prerelease.length?s.semver:!1;d&&d.prerelease.length===1&&i.operator==="<"&&d.prerelease[0]===0&&(d=!1);for(let f of t){if(l=l||f.operator===">"||f.operator===">=",c=c||f.operator==="<"||f.operator==="<=",s){if(p&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===p.major&&f.semver.minor===p.minor&&f.semver.patch===p.patch&&(p=!1),f.operator===">"||f.operator===">="){if(a=iT(s,f,r),a===f&&a!==s)return!1}else if(s.operator===">="&&!Vi(s.semver,String(f),r))return!1}if(i){if(d&&f.semver.prerelease&&f.semver.prerelease.length&&f.semver.major===d.major&&f.semver.minor===d.minor&&f.semver.patch===d.patch&&(d=!1),f.operator==="<"||f.operator==="<="){if(u=oT(i,f,r),u===f&&u!==i)return!1}else if(i.operator==="<="&&!Vi(i.semver,String(f),r))return!1}if(!f.operator&&(i||s)&&o!==0)return!1}return!(s&&c&&!i&&o!==0||i&&l&&!s&&o!==0||p||d)},iT=(e,t,r)=>{if(!e)return t;let n=Kh(e.semver,t.semver,r);return n>0?e:n<0||t.operator===">"&&e.operator===">="?t:e},oT=(e,t,r)=>{if(!e)return t;let n=Kh(e.semver,t.semver,r);return n<0?e:n>0||t.operator==="<"&&e.operator==="<="?t:e};aT.exports=X5});var dT=E((QW,fT)=>{"use strict";var Wh=gs(),lT=ji(),eB=Qe(),cT=qh(),tB=_n(),rB=jR(),nB=xR(),sB=HR(),iB=UR(),oB=GR(),aB=KR(),uB=YR(),lB=QR(),cB=Tt(),fB=rw(),dB=sw(),hB=du(),pB=uw(),mB=cw(),yB=xi(),gB=hu(),_B=jh(),SB=Dh(),EB=pu(),vB=mu(),bB=xh(),RB=Sw(),wB=Fi(),TB=Ot(),OB=Hi(),$B=qw(),PB=jw(),IB=xw(),NB=Hw(),AB=zw(),CB=_u(),kB=Ww(),qB=Xw(),LB=eT(),jB=rT(),DB=uT();fT.exports={parse:tB,valid:rB,clean:nB,inc:sB,diff:iB,major:oB,minor:aB,patch:uB,prerelease:lB,compare:cB,rcompare:fB,compareLoose:dB,compareBuild:hB,sort:pB,rsort:mB,gt:yB,lt:gB,eq:_B,neq:SB,gte:EB,lte:vB,cmp:bB,coerce:RB,Comparator:wB,Range:TB,satisfies:OB,toComparators:$B,maxSatisfying:PB,minSatisfying:IB,minVersion:NB,validRange:AB,outside:CB,gtr:kB,ltr:qB,intersects:LB,simplifyRange:jB,subset:DB,SemVer:eB,re:Wh.re,src:Wh.src,tokens:Wh.t,SEMVER_SPEC_VERSION:lT.SEMVER_SPEC_VERSION,RELEASE_TYPES:lT.RELEASE_TYPES,compareIdentifiers:cT.compareIdentifiers,rcompareIdentifiers:cT.rcompareIdentifiers}});var tp=E((ZW,ep)=>{"use strict";var Yh=dT(),Qh=require("node:assert"),Zh=Symbol.for("registered-plugin"),{kTestInternals:xB}=De(),{exist:FB,existReply:MB,existRequest:HB}=zs(),{FST_ERR_PLUGIN_VERSION_MISMATCH:VB,FST_ERR_PLUGIN_NOT_PRESENT_IN_INSTANCE:zB,FST_ERR_PLUGIN_INVALID_ASYNC_HANDLER:UB}=Ve(),BB=/-(?:rc|pre|alpha).+$/u;function zi(e){return e[Symbol.for("plugin-meta")]}function hT(e){let t=pT(e);if(t)return t;let r=require.cache;if(r){let n=Object.keys(r);for(let s=0;s<n.length;s++){let i=n[s];if(r[i].exports===e)return i}}return e.name?e.name:null}function GB(e){return e.toString().split(`
`,2).map(t=>t.trim()).join(" -- ")}function pT(e){return e[Symbol.for("fastify.display-name")]}function mT(e){return!!e[Symbol.for("skip-override")]}function yT(e){let t=zi(e);if(!t)return;let r=t.dependencies;r&&(Qh(Array.isArray(r),"The dependencies should be an array of strings"),r.forEach(n=>{Qh(this[Zh].indexOf(n)>-1,`The dependency '${n}' of plugin '${t.name}' is not registered`)}))}function gT(e){let t=zi(e);if(!t)return;let{decorators:r,name:n}=t;r&&(r.fastify&&Xh(this,"Fastify",r.fastify,n),r.reply&&Xh(this,"Reply",r.reply,n),r.request&&Xh(this,"Request",r.request,n))}var JB={Fastify:FB,Request:HB,Reply:MB};function Xh(e,t,r,n){Qh(Array.isArray(r),"The decorators should be an array of strings"),r.forEach(s=>{let i=typeof n=="string"?` required by '${n}'`:"";if(!JB[t].call(e,s))throw new zB(s,i,t)})}function KB(e){let t=zi(e);if(t?.fastify==null)return;let r=t.fastify,n=BB.test(this.version);if(!(n===!0&&Yh.gt(this.version,Yh.coerce(r))===!0)&&r&&Yh.satisfies(this.version,r,{includePrerelease:n})===!1)throw new VB(t.name,r,this.version)}function WB(e){let t=zi(e);if(!t)return;let r=t.name;if(r)return this[Zh].push(r),r}function YB(e,t){if(e.constructor.name==="AsyncFunction"&&e.length===3)throw new UB(t)}function XB(e){let t=WB.call(this,e)||hT(e);return YB.call(this,e,t),KB.call(this,e),gT.call(this,e),yT.call(this,e),mT(e)}ep.exports={getPluginName:hT,getFuncPreview:GB,kRegisteredPlugins:Zh,getDisplayName:pT,registerPlugin:XB};ep.exports[xB]={shouldSkipOverride:mT,getMeta:zi,checkDecorators:gT,checkDependencies:yT}});var Su=E((eY,_T)=>{"use strict";function QB(e,t){let r=t||e9();return e?t9(e,r):r}function ZB(e,t){return e.genReqId(t)}function e9(){let t=0;return function(){return t=t+1&2147483647,`req-${t.toString(36)}`}}function t9(e,t){return function(r){return r.headers[e]||t(r)}}_T.exports={getGenReqId:ZB,reqIdGenFactory:QB}});var bT=E((tY,vT)=>{"use strict";var ST=12,r9=0,rp=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7];function n9(e){var t=e.indexOf("%");if(t===-1)return e;for(var r=e.length,n="",s=0,i=0,o=t,a=ST;t>-1&&t<r;){var u=ET(e[t+1],4),c=ET(e[t+2],0),l=u|c,d=rp[l];if(a=rp[256+a+d],i=i<<6|l&rp[364+d],a===ST)n+=e.slice(s,o),n+=i<=65535?String.fromCharCode(i):String.fromCharCode(55232+(i>>10),56320+(i&1023)),i=0,s=t+3,t=o=e.indexOf("%",s);else{if(a===r9)return null;if(t+=3,t<r&&e.charCodeAt(t)===37)continue;return null}}return n+e.slice(s)}var s9={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};function ET(e,t){var r=s9[e];return r===void 0?255:r<<t}vT.exports=n9});var $T=E((rY,OT)=>{"use strict";var RT=bT(),wT=/\+/g,TT=function(){};TT.prototype=Object.create(null);function i9(e){let t=new TT;if(typeof e!="string")return t;let r=e.length,n="",s="",i=-1,o=-1,a=!1,u=!1,c=!1,l=!1,d=!1,p=0;for(let f=0;f<r+1;f++)if(p=f!==r?e.charCodeAt(f):38,p===38){if(d=o>i,d||(o=f),n=e.slice(i+1,o),d||n.length>0){c&&(n=n.replace(wT," ")),a&&(n=RT(n)||n),d&&(s=e.slice(o+1,f),l&&(s=s.replace(wT," ")),u&&(s=RT(s)||s));let h=t[n];h===void 0?t[n]=s:h.pop?h.push(s):t[n]=[h,s]}s="",i=f,o=f,a=!1,u=!1,c=!1,l=!1}else p===61?o<=i?o=f:u=!0:p===43?o>i?l=!0:c=!0:p===37&&(o>i?u=!0:a=!0);return t}OT.exports=i9});var IT=E((nY,PT)=>{var tr=Array.from({length:256},(e,t)=>"%"+((t<16?"0":"")+t.toString(16)).toUpperCase()),o9=new Int8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,1,1,1,1,0,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,0]);function a9(e){let t=e.length;if(t===0)return"";let r="",n=0,s=0;e:for(;s<t;s++){let i=e.charCodeAt(s);for(;i<128;){if(o9[i]!==1&&(n<s&&(r+=e.slice(n,s)),n=s+1,r+=tr[i]),++s===t)break e;i=e.charCodeAt(s)}if(n<s&&(r+=e.slice(n,s)),i<2048){n=s+1,r+=tr[192|i>>6]+tr[128|i&63];continue}if(i<55296||i>=57344){n=s+1,r+=tr[224|i>>12]+tr[128|i>>6&63]+tr[128|i&63];continue}if(++s,s>=t)throw new Error("URI malformed");let o=e.charCodeAt(s)&1023;n=s+1,i=65536+((i&1023)<<10|o),r+=tr[240|i>>18]+tr[128|i>>12&63]+tr[128|i>>6&63]+tr[128|i&63]}return n===0?e:n<t?r+e.slice(n):r}PT.exports={encodeString:a9}});var CT=E((sY,AT)=>{"use strict";var{encodeString:np}=IT();function NT(e){let t=typeof e;return t==="string"?np(e):t==="bigint"?e.toString():t==="boolean"?e?"true":"false":t==="number"&&Number.isFinite(e)?e<1e21?""+e:np(""+e):""}function u9(e){let t="";if(e===null||typeof e!="object")return t;let r="&",n=Object.keys(e),s=n.length,i=0;for(let o=0;o<s;o++){let a=n[o],u=e[a],c=np(a)+"=";if(o&&(t+=r),Array.isArray(u)){i=u.length;for(let l=0;l<i;l++)l&&(t+=r),t+=c,t+=NT(u[l])}else t+=c,t+=NT(u)}return t}AT.exports=u9});var jT=E((iY,Ui)=>{"use strict";var kT=$T(),qT=CT(),LT={parse:kT,stringify:qT};Ui.exports=LT;Ui.exports.default=LT;Ui.exports.parse=kT;Ui.exports.stringify=qT});var xT=E(DT=>{"use strict";Object.defineProperty(DT,"__esModule",{value:!0})});var FT=E(Bi=>{"use strict";Object.defineProperty(Bi,"__esModule",{value:!0});Bi.types=void 0;var l9;(function(e){e[e.ROOT=0]="ROOT",e[e.GROUP=1]="GROUP",e[e.POSITION=2]="POSITION",e[e.SET=3]="SET",e[e.RANGE=4]="RANGE",e[e.REPETITION=5]="REPETITION",e[e.REFERENCE=6]="REFERENCE",e[e.CHAR=7]="CHAR"})(l9=Bi.types||(Bi.types={}))});var HT=E(MT=>{"use strict";Object.defineProperty(MT,"__esModule",{value:!0})});var br=E(vr=>{"use strict";var c9=vr&&vr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),sp=vr&&vr.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&c9(t,e,r)};Object.defineProperty(vr,"__esModule",{value:!0});sp(xT(),vr);sp(FT(),vr);sp(HT(),vr)});var Eu=E(Ze=>{"use strict";Object.defineProperty(Ze,"__esModule",{value:!0});Ze.anyChar=Ze.notWhitespace=Ze.whitespace=Ze.notInts=Ze.ints=Ze.notWords=Ze.words=void 0;var le=br(),VT=()=>[{type:le.types.RANGE,from:48,to:57}],zT=()=>[{type:le.types.CHAR,value:95},{type:le.types.RANGE,from:97,to:122},{type:le.types.RANGE,from:65,to:90},{type:le.types.RANGE,from:48,to:57}],UT=()=>[{type:le.types.CHAR,value:9},{type:le.types.CHAR,value:10},{type:le.types.CHAR,value:11},{type:le.types.CHAR,value:12},{type:le.types.CHAR,value:13},{type:le.types.CHAR,value:32},{type:le.types.CHAR,value:160},{type:le.types.CHAR,value:5760},{type:le.types.RANGE,from:8192,to:8202},{type:le.types.CHAR,value:8232},{type:le.types.CHAR,value:8233},{type:le.types.CHAR,value:8239},{type:le.types.CHAR,value:8287},{type:le.types.CHAR,value:12288},{type:le.types.CHAR,value:65279}],f9=()=>[{type:le.types.CHAR,value:10},{type:le.types.CHAR,value:13},{type:le.types.CHAR,value:8232},{type:le.types.CHAR,value:8233}];Ze.words=()=>({type:le.types.SET,set:zT(),not:!1});Ze.notWords=()=>({type:le.types.SET,set:zT(),not:!0});Ze.ints=()=>({type:le.types.SET,set:VT(),not:!1});Ze.notInts=()=>({type:le.types.SET,set:VT(),not:!0});Ze.whitespace=()=>({type:le.types.SET,set:UT(),not:!1});Ze.notWhitespace=()=>({type:le.types.SET,set:UT(),not:!0});Ze.anyChar=()=>({type:le.types.SET,set:f9(),not:!0})});var GT=E($t=>{"use strict";var d9=$t&&$t.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),h9=$t&&$t.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),p9=$t&&$t.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&d9(t,e,r);return h9(t,e),t};Object.defineProperty($t,"__esModule",{value:!0});$t.tokenizeClass=$t.strToChars=void 0;var BT=br(),Ss=p9(Eu()),m9="@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^ ?";$t.strToChars=e=>{let t=/(\[\\b\])|(\\)?\\(?:u([A-F0-9]{4})|x([A-F0-9]{2})|c([@A-Z[\\\]^?])|([0tnvfr]))/g;return e.replace(t,(r,n,s,i,o,a,u)=>{if(s)return r;let c=n?8:i?parseInt(i,16):o?parseInt(o,16):a?m9.indexOf(a):{0:0,t:9,n:10,v:11,f:12,r:13}[u],l=String.fromCharCode(c);return/[[\]{}^$.|?*+()]/.test(l)?`\\${l}`:l})};$t.tokenizeClass=(e,t)=>{var r,n,s,i,o,a,u;let c=[],l,d,p=/\\(?:(w)|(d)|(s)|(W)|(D)|(S))|((?:(?:\\)(.)|([^\]\\]))-(((?:\\)])|(((?:\\)?([^\]])))))|(\])|(?:\\)?([^])/g;for(;(l=p.exec(e))!==null;){let f=(u=(a=(o=(i=(s=(n=(r=l[1]&&Ss.words())!==null&&r!==void 0?r:l[2]&&Ss.ints())!==null&&n!==void 0?n:l[3]&&Ss.whitespace())!==null&&s!==void 0?s:l[4]&&Ss.notWords())!==null&&i!==void 0?i:l[5]&&Ss.notInts())!==null&&o!==void 0?o:l[6]&&Ss.notWhitespace())!==null&&a!==void 0?a:l[7]&&{type:BT.types.RANGE,from:(l[8]||l[9]).charCodeAt(0),to:(d=l[10]).charCodeAt(d.length-1)})!==null&&u!==void 0?u:(d=l[16])&&{type:BT.types.CHAR,value:d.charCodeAt(0)};if(f)c.push(f);else return[c,p.lastIndex]}throw new SyntaxError(`Invalid regular expression: /${t}/: Unterminated character class`)}});var ip=E(rr=>{"use strict";var y9=rr&&rr.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),g9=rr&&rr.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),WT=rr&&rr.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&y9(t,e,r);return g9(t,e),t};Object.defineProperty(rr,"__esModule",{value:!0});rr.tokenizer=void 0;var JT=WT(GT()),Ge=br(),Sn=WT(Eu()),_9=/^[a-zA-Z_$]$/i,S9=/^[a-zA-Z0-9_$]$/i,KT=/\d/;rr.tokenizer=e=>{let t=0,r,n={type:Ge.types.ROOT,stack:[]},s=n,i=n.stack,o=[],a=[],u=0,c=d=>{throw new SyntaxError(`Invalid regular expression: /${e}/: Nothing to repeat at column ${d-1}`)},l=JT.strToChars(e);for(;t<l.length;)switch(r=l[t++]){case"\\":if(t===l.length)throw new SyntaxError(`Invalid regular expression: /${e}/: \\ at end of pattern`);switch(r=l[t++]){case"b":i.push({type:Ge.types.POSITION,value:"b"});break;case"B":i.push({type:Ge.types.POSITION,value:"B"});break;case"w":i.push(Sn.words());break;case"W":i.push(Sn.notWords());break;case"d":i.push(Sn.ints());break;case"D":i.push(Sn.notInts());break;case"s":i.push(Sn.whitespace());break;case"S":i.push(Sn.notWhitespace());break;default:if(KT.test(r)){let d=r;for(;t<l.length&&KT.test(l[t]);)d+=l[t++];let p=parseInt(d,10),f={type:Ge.types.REFERENCE,value:p};i.push(f),a.push({reference:f,stack:i,index:i.length-1})}else i.push({type:Ge.types.CHAR,value:r.charCodeAt(0)})}break;case"^":i.push({type:Ge.types.POSITION,value:"^"});break;case"$":i.push({type:Ge.types.POSITION,value:"$"});break;case"[":{let d;l[t]==="^"?(d=!0,t++):d=!1;let p=JT.tokenizeClass(l.slice(t),e);t+=p[1],i.push({type:Ge.types.SET,set:p[0],not:d});break}case".":i.push(Sn.anyChar());break;case"(":{let d={type:Ge.types.GROUP,stack:[],remember:!0};if(l[t]==="?")if(r=l[t+1],t+=2,r==="=")d.followedBy=!0,d.remember=!1;else if(r==="!")d.notFollowedBy=!0,d.remember=!1;else if(r==="<"){let p="";if(_9.test(l[t]))p+=l[t],t++;else throw new SyntaxError(`Invalid regular expression: /${e}/: Invalid capture group name, character '${l[t]}' after '<' at column ${t+1}`);for(;t<l.length&&S9.test(l[t]);)p+=l[t],t++;if(!p)throw new SyntaxError(`Invalid regular expression: /${e}/: Invalid capture group name, character '${l[t]}' after '<' at column ${t+1}`);if(l[t]!==">")throw new SyntaxError(`Invalid regular expression: /${e}/: Unclosed capture group name, expected '>', found '${l[t]}' at column ${t+1}`);d.name=p,t++}else if(r===":")d.remember=!1;else throw new SyntaxError(`Invalid regular expression: /${e}/: Invalid group, character '${r}' after '?' at column ${t-1}`);else u+=1;i.push(d),o.push(s),s=d,i=d.stack;break}case")":if(o.length===0)throw new SyntaxError(`Invalid regular expression: /${e}/: Unmatched ) at column ${t-1}`);s=o.pop(),i=s.options?s.options[s.options.length-1]:s.stack;break;case"|":{s.options||(s.options=[s.stack],delete s.stack);let d=[];s.options.push(d),i=d;break}case"{":{let d=/^(\d+)(,(\d+)?)?\}/.exec(l.slice(t)),p,f;d!==null?(i.length===0&&c(t),p=parseInt(d[1],10),f=d[2]?d[3]?parseInt(d[3],10):1/0:p,t+=d[0].length,i.push({type:Ge.types.REPETITION,min:p,max:f,value:i.pop()})):i.push({type:Ge.types.CHAR,value:123});break}case"?":i.length===0&&c(t),i.push({type:Ge.types.REPETITION,min:0,max:1,value:i.pop()});break;case"+":i.length===0&&c(t),i.push({type:Ge.types.REPETITION,min:1,max:1/0,value:i.pop()});break;case"*":i.length===0&&c(t),i.push({type:Ge.types.REPETITION,min:0,max:1/0,value:i.pop()});break;default:i.push({type:Ge.types.CHAR,value:r.charCodeAt(0)})}if(o.length!==0)throw new SyntaxError(`Invalid regular expression: /${e}/: Unterminated group`);return E9(a,u),n};function E9(e,t){for(let r of e.reverse())if(t<r.reference.value){r.reference.type=Ge.types.CHAR;let n=r.reference.value.toString();if(r.reference.value=parseInt(n,8),!/^[0-7]+$/.test(n)){let s=0;for(;n[s]!=="8"&&n[s]!=="9";)s+=1;if(s===0?(r.reference.value=n.charCodeAt(0),s+=1):r.reference.value=parseInt(n.slice(0,s),8),n.length>s){let i=r.stack.splice(r.index+1);for(let o of n.slice(s))r.stack.push({type:Ge.types.CHAR,value:o.charCodeAt(0)});r.stack.push(...i)}}}}});var XT=E(et=>{"use strict";var v9=et&&et.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),b9=et&&et.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),R9=et&&et.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&v9(t,e,r);return b9(t,e),t};Object.defineProperty(et,"__esModule",{value:!0});et.NOTANYCHAR=et.WHITESPACE=et.WORDS=et.INTS=void 0;var vu=R9(Eu()),YT=br();function bu(e){let t={},r=0;for(let n of e)n.type===YT.types.CHAR&&(t[n.value]=!0),n.type===YT.types.RANGE&&(t[`${n.from}-${n.to}`]=!0),r+=1;return{lookup:()=>Object.assign({},t),len:r}}et.INTS=bu(vu.ints().set);et.WORDS=bu(vu.words().set);et.WHITESPACE=bu(vu.whitespace().set);et.NOTANYCHAR=bu(vu.anyChar().set)});var ZT=E(Pt=>{"use strict";var w9=Pt&&Pt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),T9=Pt&&Pt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),O9=Pt&&Pt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)r!=="default"&&Object.prototype.hasOwnProperty.call(e,r)&&w9(t,e,r);return T9(t,e),t};Object.defineProperty(Pt,"__esModule",{value:!0});Pt.writeSetTokens=Pt.setChar=void 0;var Ou=br(),Ru=O9(XT());function Tu(e){return e===94?"\\^":e===92?"\\\\":e===93?"\\]":e===45?"\\-":String.fromCharCode(e)}Pt.setChar=Tu;function wu(e,{lookup:t,len:r}){if(r!==e.length)return!1;let n=t();for(let s of e){if(s.type===Ou.types.SET)return!1;let i=s.type===Ou.types.CHAR?s.value:`${s.from}-${s.to}`;if(n[i])n[i]=!1;else return!1}return!0}function QT(e,t=!1){if(wu(e.set,Ru.INTS))return e.not?"\\D":"\\d";if(wu(e.set,Ru.WORDS))return e.not?"\\W":"\\w";if(e.not&&wu(e.set,Ru.NOTANYCHAR))return".";if(wu(e.set,Ru.WHITESPACE))return e.not?"\\S":"\\s";let r="";for(let s=0;s<e.set.length;s++){let i=e.set[s];r+=$9(i)}let n=`${e.not?"^":""}${r}`;return t?n:`[${n}]`}Pt.writeSetTokens=QT;function $9(e){return e.type===Ou.types.CHAR?Tu(e.value):e.type===Ou.types.RANGE?`${Tu(e.from)}-${Tu(e.to)}`:QT(e,!0)}});var ap=E(Es=>{"use strict";Object.defineProperty(Es,"__esModule",{value:!0});Es.reconstruct=void 0;var zr=br(),op=ZT(),eO=e=>e.map(Es.reconstruct).join(""),tO=e=>{if("options"in e)return e.options.map(eO).join("|");if("stack"in e)return eO(e.stack);throw new Error("options or stack must be Root or Group token")};Es.reconstruct=e=>{switch(e.type){case zr.types.ROOT:return tO(e);case zr.types.CHAR:{let t=String.fromCharCode(e.value);return(/[[\\{}$^.|?*+()]/.test(t)?"\\":"")+t}case zr.types.POSITION:return e.value==="^"||e.value==="$"?e.value:`\\${e.value}`;case zr.types.REFERENCE:return`\\${e.value}`;case zr.types.SET:return op.writeSetTokens(e);case zr.types.GROUP:return`(${e.name?`?<${e.name}>`:e.remember?"":e.followedBy?"?=":e.notFollowedBy?"?!":"?:"}${tO(e)})`;case zr.types.REPETITION:{let{min:t,max:r}=e,n;return t===0&&r===1?n="?":t===1&&r===1/0?n="+":t===0&&r===1/0?n="*":r===1/0?n=`{${t},}`:t===r?n=`{${t}}`:n=`{${t},${r}}`,`${Es.reconstruct(e.value)}${n}`}case zr.types.RANGE:return`${op.setChar(e.from)}-${op.setChar(e.to)}`;default:throw new Error(`Invalid token type ${e}`)}}});var sO=E((It,$u)=>{"use strict";var P9=It&&It.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),up=It&&It.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&P9(t,e,r)};Object.defineProperty(It,"__esModule",{value:!0});It.types=void 0;var rO=br();Object.defineProperty(It,"types",{enumerable:!0,get:function(){return rO.types}});up(ip(),It);up(ap(),It);var nO=ip(),I9=ap();up(br(),It);It.default=nO.tokenizer;$u.exports=nO.tokenizer;$u.exports.types=rO.types;$u.exports.reconstruct=I9.reconstruct});var oO=E((yY,Pu)=>{"use strict";var iO=sO(),N9=iO.types;function lp(e,t){t||(t={});let r=t.limit===void 0?25:t.limit;A9(e)?e=e.source:typeof e!="string"&&(e=String(e));try{e=iO(e)}catch{return!1}let n=0;return function s(i,o){let a,u,c;if(i.type===N9.REPETITION&&(o++,n++,o>1||n>r))return!1;if(i.options){for(a=0,c=i.options.length;a<c;a++)if(u=s({stack:i.options[a]},o),!u)return!1}let l=i.stack||i.value?.stack;if(!l)return!0;for(a=0;a<l.length;a++)if(u=s(l[a],o),!u)return!1;return!0}(e,0)}function A9(e){return{}.toString.call(e)==="[object RegExp]"}Pu.exports=lp;Pu.exports.default=lp;Pu.exports.safeRegex=lp});var Iu=E((gY,aO)=>{"use strict";aO.exports={name:"__fmw_internal_strategy_merged_tree_http_method__",storage:function(){let e=new Map;return{get:t=>e.get(t)||null,set:(t,r)=>{e.set(t,r)}}},deriveConstraint:e=>e.method,mustMatchWhenDerived:!0}});var pO=E((_Y,hO)=>{"use strict";var uO=ii(),lO=Iu(),cO=Symbol("treeData");function fO(e,t=""){let r="",n=Object.keys(e);for(let s=0;s<n.length;s++){let i=n[s],o=e[i],a=s===n.length-1,u=a?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ",c=a?"    ":"\u2502   ",d=(o[cO]||"").replaceAll(`
`,`
`+t+c);r+=t+u+i+d+`
`,r+=fO(o,t+c)}return r}function C9(e){let t=e.name||"";return t=t.replace("bound","").trim(),t=(t||"anonymous")+"()",t}function dO(e){return Array.isArray(e)?e.map(t=>dO(t)):typeof e=="symbol"?e.toString():typeof e=="function"?C9(e):e}function k9(e,t){if(!t.includeMeta)return{};let r=t.buildPrettyMeta(e),n={},s=t.includeMeta;Array.isArray(s)||(s=Reflect.ownKeys(r));for(let i of s){if(!Object.prototype.hasOwnProperty.call(r,i))continue;let o=i.toString(),a=r[i];if(a!=null){let u=JSON.stringify(dO(a));n[o]=u}}return n}function q9(e){let t="";for(let[r,n]of Object.entries(e))t+=`
\u2022 (${r}) ${n}`;return t}function L9(e){let t={...e.opts.constraints},r=t[lO.name];return delete t[lO.name],{...e,method:r,opts:{constraints:t}}}function j9(e){let t=` (${e.method})`,r=e.opts.constraints||{};return Object.keys(r).length!==0&&(t+=" "+JSON.stringify(r)),t+=q9(e.metaData),t}function D9(e){return e.reduce((t,r)=>{for(let n of t)if(uO(r.opts.constraints,n.opts.constraints)&&uO(r.metaData,n.metaData))return n.method+=", "+r.method,t;return t.push(r),t},[])}function x9(e,t,r){let n=e.routes;return r.method===void 0&&(n=n.map(L9)),n=n.map(s=>(s.metaData=k9(s,r),s)),r.method===void 0&&(n=D9(n)),n.map(j9).join(`
${t}`)}function Nu(e,t,r,n){if((e.isLeafNode||n.commonPrefix!==!1)&&(r=r||"(empty root node)",t=t[r]={},e.isLeafNode&&(t[cO]=x9(e,r,n)),r=""),e.staticChildren)for(let s of Object.values(e.staticChildren))Nu(s,t,r+s.prefix,n);if(e.parametricChildren)for(let s of Object.values(e.parametricChildren)){let i=Array.from(s.nodePaths).join("|");Nu(s,t,r+i,n)}e.wildcardChild&&Nu(e.wildcardChild,t,"*",n)}function F9(e,t){let r={};return Nu(e,r,e.prefix,t),fO(r)}hO.exports={prettyPrintTree:F9}});var gO=E((SY,yO)=>{"use strict";var mO=function(){};mO.prototype=Object.create(null);yO.exports={NullObject:mO}});var SO=E((EY,_O)=>{"use strict";var{NullObject:M9}=gO(),H9=Iu(),cp=class{constructor(){this.unconstrainedHandler=null,this.constraints=[],this.handlers=[],this.constrainedHandlerStores=null}getMatchingHandler(t){return t===void 0?this.unconstrainedHandler:this._getHandlerMatchingConstraints(t)}addHandler(t,r){let n=r.params,s=r.opts.constraints||{},i={params:n,constraints:s,handler:r.handler,store:r.store||null,_createParamsObject:this._compileCreateParamsObject(n)},o=Object.keys(s);o.length===0&&(this.unconstrainedHandler=i);for(let u of o)this.constraints.includes(u)||(u==="version"?this.constraints.unshift(u):this.constraints.push(u));let a=o.includes(H9.name);if(!a&&this.handlers.length>=31)throw new Error("find-my-way supports a maximum of 31 route handlers per node when there are constraints, limit reached");this.handlers.push(i),this.handlers.sort((u,c)=>Object.keys(u.constraints).length-Object.keys(c.constraints).length),a||this._compileGetHandlerMatchingConstraints(t,s)}_compileCreateParamsObject(t){let r=[];r.push("const fn = function _createParamsObject (paramsArray) {"),r.push("const params = new NullObject()");for(let n=0;n<t.length;n++)r.push(`params['${t[n]}'] = paramsArray[${n}]`);return r.push("return params"),r.push("}"),r.push("return fn"),new Function("NullObject",r.join(`
`))(M9)}_getHandlerMatchingConstraints(){return null}_buildConstraintStore(t,r){for(let n=0;n<this.handlers.length;n++){let i=this.handlers[n].constraints[r];if(i!==void 0){let o=t.get(i)||0;o|=1<<n,t.set(i,o)}}}_constrainedIndexBitmask(t){let r=0;for(let n=0;n<this.handlers.length;n++)this.handlers[n].constraints[t]!==void 0&&(r|=1<<n);return~r}_compileGetHandlerMatchingConstraints(t){this.constrainedHandlerStores={};for(let n of this.constraints){let s=t.newStoreForConstraint(n);this.constrainedHandlerStores[n]=s,this._buildConstraintStore(s,n)}let r=[];r.push(`
    let candidates = ${(1<<this.handlers.length)-1}
    let mask, matches
    `);for(let n of this.constraints){r.push(`
      mask = ${this._constrainedIndexBitmask(n)}
      value = derivedConstraints.${n}
      `);let i=t.strategies[n].mustMatchWhenDerived?"matches":"(matches | mask)";r.push(`
      if (value === undefined) {
        candidates &= mask
      } else {
        matches = this.constrainedHandlerStores.${n}.get(value) || 0
        candidates &= ${i}
      }
      if (candidates === 0) return null;
      `)}for(let n in t.strategies)t.strategies[n].mustMatchWhenDerived&&!this.constraints.includes(n)&&r.push(`if (derivedConstraints.${n} !== undefined) return null`);r.push("return this.handlers[Math.floor(Math.log2(candidates))]"),this._getHandlerMatchingConstraints=new Function("derivedConstraints",r.join(`
`))}};_O.exports=cp});var vO=E((vY,EO)=>{"use strict";var V9=SO(),ju={STATIC:0,PARAMETRIC:1,WILDCARD:2},Au=class{constructor(){this.isLeafNode=!1,this.routes=null,this.handlerStorage=null}addRoute(t,r){this.routes===null&&(this.routes=[]),this.handlerStorage===null&&(this.handlerStorage=new V9),this.isLeafNode=!0,this.routes.push(t),this.handlerStorage.addHandler(r,t)}},Cu=class extends Au{constructor(){super(),this.staticChildren={}}findStaticMatchingChild(t,r){let n=this.staticChildren[t.charAt(r)];return n===void 0||!n.matchPrefix(t,r)?null:n}getStaticChild(t,r=0){if(t.length===r)return this;let n=this.findStaticMatchingChild(t,r);return n?n.getStaticChild(t,r+n.prefix.length):null}createStaticChild(t){if(t.length===0)return this;let r=this.staticChildren[t.charAt(0)];if(r){let s=1;for(;s<r.prefix.length;s++)if(t.charCodeAt(s)!==r.prefix.charCodeAt(s)){r=r.split(this,s);break}return r.createStaticChild(t.slice(s))}let n=t.charAt(0);return this.staticChildren[n]=new ku(t),this.staticChildren[n]}},ku=class e extends Cu{constructor(t){super(),this.prefix=t,this.wildcardChild=null,this.parametricChildren=[],this.kind=ju.STATIC,this._compilePrefixMatch()}getParametricChild(t){let r=t&&t.source,n=this.parametricChildren.find(s=>(s.regex&&s.regex.source)===r);return n||null}createParametricChild(t,r,n){let s=this.getParametricChild(t);return s?(s.nodePaths.add(n),s):(s=new qu(t,r,n),this.parametricChildren.push(s),this.parametricChildren.sort((i,o)=>i.isRegex?o.isRegex?i.staticSuffix===null?1:o.staticSuffix===null?-1:o.staticSuffix.endsWith(i.staticSuffix)?1:i.staticSuffix.endsWith(o.staticSuffix)?-1:0:-1:1),s)}getWildcardChild(){return this.wildcardChild}createWildcardChild(){return this.wildcardChild=this.getWildcardChild()||new Lu,this.wildcardChild}split(t,r){let n=this.prefix.slice(0,r),s=this.prefix.slice(r);this.prefix=s,this._compilePrefixMatch();let i=new e(n);return i.staticChildren[s.charAt(0)]=this,t.staticChildren[n.charAt(0)]=i,i}getNextNode(t,r,n,s){let i=this.findStaticMatchingChild(t,r),o=0;if(i===null){if(this.parametricChildren.length===0)return this.wildcardChild;i=this.parametricChildren[0],o=1}this.wildcardChild!==null&&n.push({paramsCount:s,brotherPathIndex:r,brotherNode:this.wildcardChild});for(let a=this.parametricChildren.length-1;a>=o;a--)n.push({paramsCount:s,brotherPathIndex:r,brotherNode:this.parametricChildren[a]});return i}_compilePrefixMatch(){if(this.prefix.length===1){this.matchPrefix=()=>!0;return}let t=[];for(let r=1;r<this.prefix.length;r++){let n=this.prefix.charCodeAt(r);t.push(`path.charCodeAt(i + ${r}) === ${n}`)}this.matchPrefix=new Function("path","i",`return ${t.join(" && ")}`)}},qu=class extends Cu{constructor(t,r,n){super(),this.isRegex=!!t,this.regex=t||null,this.staticSuffix=r||null,this.kind=ju.PARAMETRIC,this.nodePaths=new Set([n])}getNextNode(t,r){return this.findStaticMatchingChild(t,r)}},Lu=class extends Au{constructor(){super(),this.kind=ju.WILDCARD}getNextNode(){return null}};EO.exports={StaticNode:ku,ParametricNode:qu,WildcardNode:Lu,NODE_TYPES:ju}});var RO=E((bY,bO)=>{"use strict";var z9=require("node:assert");function Gi(){if(!(this instanceof Gi))return new Gi;this.store=new Map,this.maxMajor=0,this.maxMinors={},this.maxPatches={}}Gi.prototype.set=function(e,t){if(typeof e!="string")throw new TypeError("Version should be a string");let[r,n,s]=e.split(".",3);if(isNaN(r))throw new TypeError("Major version must be a numeric value");return r=Number(r),n=Number(n)||0,s=Number(s)||0,r>=this.maxMajor&&(this.maxMajor=r,this.store.set("x",t),this.store.set("*",t),this.store.set("x.x",t),this.store.set("x.x.x",t)),n>=(this.maxMinors[r]||0)&&(this.maxMinors[r]=n,this.store.set(`${r}.x`,t),this.store.set(`${r}.x.x`,t)),s>=(this.maxPatches[`${r}.${n}`]||0)&&(this.maxPatches[`${r}.${n}`]=s,this.store.set(`${r}.${n}.x`,t)),this.store.set(`${r}.${n}.${s}`,t),this};Gi.prototype.get=function(e){return this.store.get(e)};bO.exports={name:"version",mustMatchWhenDerived:!0,storage:Gi,validate(e){z9(typeof e=="string","Version should be a string")}}});var TO=E((RY,wO)=>{"use strict";var U9=require("node:assert");function B9(){let e=new Map,t=[];return{get:r=>{let n=e.get(r);if(n)return n;for(let s of t)if(s.host.test(r))return s.value},set:(r,n)=>{r instanceof RegExp?t.push({host:r,value:n}):e.set(r,n)}}}wO.exports={name:"host",mustMatchWhenDerived:!1,storage:B9,validate(e){U9(typeof e=="string"||Object.prototype.toString.call(e)==="[object RegExp]","Host should be a string or a RegExp")}}});var $O=E((wY,OO)=>{"use strict";var G9=RO(),J9=TO(),fp=require("node:assert"),dp=class{constructor(t){if(this.strategies={version:G9,host:J9},this.strategiesInUse=new Set,this.asyncStrategiesInUse=new Set,t)for(let r of Object.values(t))this.addConstraintStrategy(r)}isStrategyUsed(t){return this.strategiesInUse.has(t)||this.asyncStrategiesInUse.has(t)}hasConstraintStrategy(t){let r=this.strategies[t];return r!==void 0?r.isCustom||this.isStrategyUsed(t):!1}addConstraintStrategy(t){if(fp(typeof t.name=="string"&&t.name!=="","strategy.name is required."),fp(t.storage&&typeof t.storage=="function","strategy.storage function is required."),fp(t.deriveConstraint&&typeof t.deriveConstraint=="function","strategy.deriveConstraint function is required."),this.strategies[t.name]&&this.strategies[t.name].isCustom)throw new Error(`There already exists a custom constraint with the name ${t.name}.`);if(this.isStrategyUsed(t.name))throw new Error(`There already exists a route with ${t.name} constraint.`);t.isCustom=!0,t.isAsync=t.deriveConstraint.length===3,this.strategies[t.name]=t,t.mustMatchWhenDerived&&this.noteUsage({[t.name]:t})}deriveConstraints(t,r,n){let s=this.deriveSyncConstraints(t,r);if(n===void 0)return s;this.deriveAsyncConstraints(s,t,r,n)}deriveSyncConstraints(t,r){}noteUsage(t){if(t){let r=this.strategiesInUse.size;for(let n in t)this.strategies[n].isAsync?this.asyncStrategiesInUse.add(n):this.strategiesInUse.add(n);r!==this.strategiesInUse.size&&this._buildDeriveConstraints()}}newStoreForConstraint(t){if(!this.strategies[t])throw new Error(`No strategy registered for constraint key ${t}`);return this.strategies[t].storage()}validateConstraints(t){for(let r in t){let n=t[r];if(typeof n>"u")throw new Error("Can't pass an undefined constraint value, must pass null or no key at all");let s=this.strategies[r];if(!s)throw new Error(`No strategy registered for constraint key ${r}`);s.validate&&s.validate(n)}}deriveAsyncConstraints(t,r,n,s){let i=this.asyncStrategiesInUse.size;if(i===0){s(null,t);return}t=t||{};for(let o of this.asyncStrategiesInUse)this.strategies[o].deriveConstraint(r,n,(u,c)=>{if(u!==null){s(u);return}t[o]=c,--i===0&&s(null,t)})}_buildDeriveConstraints(){if(this.strategiesInUse.size===0)return;let t=["return {"];for(let r of this.strategiesInUse){let n=this.strategies[r];n.isCustom?t.push(`  ${n.name}: this.strategies.${r}.deriveConstraint(req, ctx),`):r==="version"?t.push("   version: req.headers['accept-version'],"):t.push("   host: req.headers.host || req.headers[':authority'],")}t.push("}"),this.deriveSyncConstraints=new Function("req","ctx",t.join(`
`)).bind(this)}};OO.exports=dp});var IO=E((TY,PO)=>{"use strict";var K9=["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","QUERY","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE"];PO.exports=K9});var CO=E((OY,AO)=>{"use strict";function NO(e,t){return e===50?t===53?"%":t===51?"#":t===52?"$":t===54?"&":t===66||t===98?"+":t===67||t===99?",":t===70||t===102?"/":null:e===51?t===65||t===97?":":t===66||t===98?";":t===68||t===100?"=":t===70||t===102?"?":null:e===52&&t===48?"@":null}function W9(e,t){let r=!1,n=!1,s="";for(let o=1;o<e.length;o++){let a=e.charCodeAt(o);if(a===37){let u=e.charCodeAt(o+1),c=e.charCodeAt(o+2);NO(u,c)===null?r=!0:(n=!0,u===50&&c===53&&(r=!0,e=e.slice(0,o+1)+"25"+e.slice(o+1),o+=2),o+=2)}else if(a===63||a===35||a===59&&t){s=e.slice(o+1),e=e.slice(0,o);break}}return{path:r?decodeURI(e):e,querystring:s,shouldDecodeParam:n}}function Y9(e){let t=e.indexOf("%");if(t===-1)return e;let r="",n=t;for(let s=t;s<e.length;s++)if(e.charCodeAt(s)===37){let i=e.charCodeAt(s+1),o=e.charCodeAt(s+2),a=NO(i,o);r+=e.slice(n,s)+a,n=s+3}return e.slice(0,t)+r+e.slice(n)}AO.exports={safeDecodeURI:W9,safeDecodeURIComponent:Y9}});var gp=E(($Y,VO)=>{"use strict";var Ae=require("node:assert"),X9=jT(),bs=oO(),pp=ii(),{prettyPrintTree:Q9}=pO(),{StaticNode:kO,NODE_TYPES:qO}=vO(),Z9=$O(),vs=IO(),hp=Iu(),{safeDecodeURI:eG,safeDecodeURIComponent:LO}=CO(),jO=/^https?:\/\/.*?\//,En=/(\/:[^/()]*?)\?(\/?)/,DO=/[.*+?^${}()|[\]\\]/g,xO=/\/\/+/g;if(!bs(jO))throw new Error("the FULL_PATH_REGEXP is not safe, update this module");if(!bs(En))throw new Error("the OPTIONAL_PARAM_REGEXP is not safe, update this module");if(!bs(DO))throw new Error("the ESCAPE_REGEXP is not safe, update this module");if(!bs(xO))throw new Error("the REMOVE_DUPLICATE_SLASHES_REGEXP is not safe, update this module");function $e(e){if(!(this instanceof $e))return new $e(e);e=e||{},this._opts=e,e.defaultRoute?(Ae(typeof e.defaultRoute=="function","The default route must be a function"),this.defaultRoute=e.defaultRoute):this.defaultRoute=null,e.onBadUrl?(Ae(typeof e.onBadUrl=="function","The bad url handler must be a function"),this.onBadUrl=e.onBadUrl):this.onBadUrl=null,e.buildPrettyMeta?(Ae(typeof e.buildPrettyMeta=="function","buildPrettyMeta must be a function"),this.buildPrettyMeta=e.buildPrettyMeta):this.buildPrettyMeta=tG,e.querystringParser?(Ae(typeof e.querystringParser=="function","querystringParser must be a function"),this.querystringParser=e.querystringParser):this.querystringParser=t=>t.length===0?{}:X9.parse(t),this.caseSensitive=e.caseSensitive===void 0?!0:e.caseSensitive,this.ignoreTrailingSlash=e.ignoreTrailingSlash||!1,this.ignoreDuplicateSlashes=e.ignoreDuplicateSlashes||!1,this.maxParamLength=e.maxParamLength||100,this.allowUnsafeRegex=e.allowUnsafeRegex||!1,this.constrainer=new Z9(e.constraints),this.useSemicolonDelimiter=e.useSemicolonDelimiter||!1,this.routes=[],this.trees={}}$e.prototype.on=function(t,r,n,s,i){typeof n=="function"&&(s!==void 0&&(i=s),s=n,n={}),Ae(typeof r=="string","Path should be a string"),Ae(r.length>0,"The path could not be empty"),Ae(r[0]==="/"||r[0]==="*","The first character of a path should be `/` or `*`"),Ae(typeof s=="function","Handler should be a function");let o=r.match(En);if(o){Ae(r.length===o.index+o[0].length,"Optional Parameter needs to be the last parameter of the path");let c=r.replace(En,"$1$2"),l=r.replace(En,"$2")||"/";this.on(t,c,n,s,i),this.on(t,l,n,s,i);return}let a=r;this.ignoreDuplicateSlashes&&(r=mp(r)),this.ignoreTrailingSlash&&(r=yp(r));let u=Array.isArray(t)?t:[t];for(let c of u)Ae(typeof c=="string","Method should be a string"),Ae(vs.includes(c),`Method '${c}' is not an http method.`),this._on(c,r,n,s,i,a)};$e.prototype._on=function(t,r,n,s,i){let o={};n.constraints!==void 0&&(Ae(typeof n.constraints=="object"&&n.constraints!==null,"Constraints should be an object"),Object.keys(n.constraints).length!==0&&(o=n.constraints)),this.constrainer.validateConstraints(o),this.constrainer.noteUsage(o),this.trees[t]===void 0&&(this.trees[t]=new kO("/"));let a=r;if(a==="*"&&this.trees[t].prefix.length!==0){let p=this.trees[t];this.trees[t]=new kO(""),this.trees[t].staticChildren["/"]=p}let u=this.trees[t],c=u.prefix.length,l=[];for(let p=0;p<=a.length;p++){if(a.charCodeAt(p)===58&&a.charCodeAt(p+1)===58){p++;continue}let f=a.charCodeAt(p)===58&&a.charCodeAt(p+1)!==58,h=a.charCodeAt(p)===42;if(f||h||p===a.length&&p!==c){let y=a.slice(c,p);this.caseSensitive||(y=y.toLowerCase()),y=y.replaceAll("::",":"),y=y.replaceAll("%","%25"),u=u.createStaticChild(y)}if(f){let y=!1,_=!0,S="",v=[],g=p+1;for(let m=g;;m++){let w=a.charCodeAt(m),T=w===40,b=w===45||w===46,O=w===47||m===a.length;if(T||b||O){let R=a.slice(g,m);if(l.push(R),y=y||T||b,T){let I=HO(a,m),N=a.slice(m,I+1);this.allowUnsafeRegex||Ae(bs(new RegExp(N)),`The regex '${N}' is not safe!`),v.push(MO(N)),m=I+1,_=!0}else v.push(_?"(.*?)":`(${S}|(?:(?!${S}).)*)`),_=!1;let P=m;for(;m<a.length;m++){let I=a.charCodeAt(m);if(I===47)break;if(I===58)if(a.charCodeAt(m+1)===58)m++;else break}let D=a.slice(P,m);if(D&&(D=D.replaceAll("::",":"),D=D.replaceAll("%","%25"),v.push(S=FO(D))),g=m+1,O||a.charCodeAt(m)===47||m===a.length){let I=y?"()"+D:D,N=a.slice(p,m);a=a.slice(0,p+1)+I+a.slice(m),p+=I.length;let z=y?new RegExp("^"+v.join("")+"$"):null;u=u.createParametricChild(z,D||null,N),c=p+1;break}}}}else if(h&&(l.push("*"),u=u.createWildcardChild(),c=p+1,p!==a.length-1))throw new Error("Wildcard must be the last character in the route")}this.caseSensitive||(a=a.toLowerCase()),a==="*"&&(a="/*");for(let p of this.routes){let f=p.opts.constraints||{};if(p.method===t&&p.pattern===a&&pp(f,o))throw new Error(`Method '${t}' already declared for route '${a}' with constraints '${JSON.stringify(o)}'`)}let d={method:t,path:r,pattern:a,params:l,opts:n,handler:s,store:i};this.routes.push(d),u.addRoute(d,this.constrainer)};$e.prototype.hasRoute=function(t,r,n){return this.findRoute(t,r,n)!==null};$e.prototype.findRoute=function(t,r,n={}){if(this.trees[t]===void 0)return null;let s=r,i=this.trees[t],o=i.prefix.length,a=[];for(let u=0;u<=s.length;u++){if(s.charCodeAt(u)===58&&s.charCodeAt(u+1)===58){u++;continue}let c=s.charCodeAt(u)===58&&s.charCodeAt(u+1)!==58,l=s.charCodeAt(u)===42;if(c||l||u===s.length&&u!==o){let d=s.slice(o,u);if(this.caseSensitive||(d=d.toLowerCase()),d=d.replaceAll("::",":"),d=d.replaceAll("%","%25"),i=i.getStaticChild(d),i===null)return null}if(c){let d=!1,p=!0,f="",h=[],y=u+1;for(let _=y;;_++){let S=s.charCodeAt(_),v=S===40,g=S===45||S===46,m=S===47||_===s.length;if(v||g||m){let w=s.slice(y,_);if(a.push(w),d=d||v||g,v){let O=HO(s,_),R=s.slice(_,O+1);this.allowUnsafeRegex||Ae(bs(new RegExp(R)),`The regex '${R}' is not safe!`),h.push(MO(R)),_=O+1,p=!1}else h.push(p?"(.*?)":`(${f}|(?:(?!${f}).)*)`),p=!1;let T=_;for(;_<s.length;_++){let O=s.charCodeAt(_);if(O===47)break;if(O===58)if(s.charCodeAt(_+1)===58)_++;else break}let b=s.slice(T,_);if(b&&(b=b.replaceAll("::",":"),b=b.replaceAll("%","%25"),h.push(f=FO(b))),y=_+1,m||s.charCodeAt(_)===47||_===s.length){let O=d?"()"+b:b,R=s.slice(u,_);s=s.slice(0,u+1)+O+s.slice(_),u+=O.length;let P=d?new RegExp("^"+h.join("")+"$"):null;if(i=i.getParametricChild(P,b||null,R),i===null)return null;o=u+1;break}}}}else if(l&&(a.push("*"),i=i.getWildcardChild(),o=u+1,u!==s.length-1))throw new Error("Wildcard must be the last character in the route")}this.caseSensitive||(s=s.toLowerCase());for(let u of this.routes){let c=u.opts.constraints||{};if(u.method===t&&u.pattern===s&&pp(c,n))return{handler:u.handler,store:u.store,params:u.params}}return null};$e.prototype.hasConstraintStrategy=function(e){return this.constrainer.hasConstraintStrategy(e)};$e.prototype.addConstraintStrategy=function(e){this.constrainer.addConstraintStrategy(e),this._rebuild(this.routes)};$e.prototype.reset=function(){this.trees={},this.routes=[]};$e.prototype.off=function(t,r,n){Ae(typeof r=="string","Path should be a string"),Ae(r.length>0,"The path could not be empty"),Ae(r[0]==="/"||r[0]==="*","The first character of a path should be `/` or `*`"),Ae(typeof n>"u"||typeof n=="object"&&!Array.isArray(n)&&n!==null,"Constraints should be an object or undefined.");let s=r.match(En);if(s){Ae(r.length===s.index+s[0].length,"Optional Parameter needs to be the last parameter of the path");let o=r.replace(En,"$1$2"),a=r.replace(En,"$2");this.off(t,o,n),this.off(t,a,n);return}this.ignoreDuplicateSlashes&&(r=mp(r)),this.ignoreTrailingSlash&&(r=yp(r));let i=Array.isArray(t)?t:[t];for(let o of i)this._off(o,r,n)};$e.prototype._off=function(t,r,n){Ae(typeof t=="string","Method should be a string"),Ae(vs.includes(t),`Method '${t}' is not an http method.`);function s(u){return t!==u.method||r!==u.path}function i(u){return s(u)||!pp(n,u.opts.constraints||{})}let o=n?i:s,a=this.routes.filter(o);this._rebuild(a)};$e.prototype.lookup=function(t,r,n,s){if(typeof n=="function"&&(s=n,n=void 0),s===void 0){let i=this.constrainer.deriveConstraints(t,n),o=this.find(t.method,t.url,i);return this.callHandler(o,t,r,n)}this.constrainer.deriveConstraints(t,n,(i,o)=>{if(i!==null){s(i);return}try{let a=this.find(t.method,t.url,o),u=this.callHandler(a,t,r,n);s(null,u)}catch(a){s(a)}})};$e.prototype.callHandler=function(t,r,n,s){return t===null?this._defaultRoute(r,n,s):s===void 0?t.handler(r,n,t.params,t.store,t.searchParams):t.handler.call(s,r,n,t.params,t.store,t.searchParams)};$e.prototype.find=function(t,r,n){let s=this.trees[t];if(s===void 0)return null;r.charCodeAt(0)!==47&&(r=r.replace(jO,"/")),this.ignoreDuplicateSlashes&&(r=mp(r));let i,o,a;try{i=eG(r,this.useSemicolonDelimiter),r=i.path,o=i.querystring,a=i.shouldDecodeParam}catch{return this._onBadUrl(r)}this.ignoreTrailingSlash&&(r=yp(r));let u=r;this.caseSensitive===!1&&(r=r.toLowerCase());let c=this.maxParamLength,l=s.prefix.length,d=[],p=r.length,f=[];for(;;){if(l===p&&s.isLeafNode){let S=s.handlerStorage.getMatchingHandler(n);if(S!==null)return{handler:S.handler,store:S.store,params:S._createParamsObject(d),searchParams:this.querystringParser(o)}}let h=s.getNextNode(r,l,f,d.length);if(h===null){if(f.length===0)return null;let S=f.pop();l=S.brotherPathIndex,d.splice(S.paramsCount),h=S.brotherNode}if(s=h,s.kind===qO.STATIC){l+=s.prefix.length;continue}if(s.kind===qO.WILDCARD){let S=u.slice(l);a&&(S=LO(S)),d.push(S),l=p;continue}let y=u.indexOf("/",l);y===-1&&(y=p);let _=u.slice(l,y);if(a&&(_=LO(_)),s.isRegex){let S=s.regex.exec(_);if(S===null)continue;for(let v=1;v<S.length;v++){let g=S[v];if(g.length>c)return null;d.push(g)}}else{if(_.length>c)return null;d.push(_)}l=y}};$e.prototype._rebuild=function(e){this.reset();for(let t of e){let{method:r,path:n,opts:s,handler:i,store:o}=t;this._on(r,n,s,i,o)}};$e.prototype._defaultRoute=function(e,t,r){if(this.defaultRoute!==null)return r===void 0?this.defaultRoute(e,t):this.defaultRoute.call(r,e,t);t.statusCode=404,t.end()};$e.prototype._onBadUrl=function(e){if(this.onBadUrl===null)return null;let t=this.onBadUrl;return{handler:(r,n,s)=>t(e,r,n),params:{},store:null}};$e.prototype.prettyPrint=function(e={}){let t=e.method;e.buildPrettyMeta=this.buildPrettyMeta.bind(this);let r=null;if(t===void 0){let{version:n,host:s,...i}=this.constrainer.strategies;i[hp.name]=hp;let o=new $e({...this._opts,constraints:i}),a=this.routes.map(u=>{let c={...u.opts.constraints,[hp.name]:u.method};return{...u,method:"MERGED",opts:{constraints:c}}});o._rebuild(a),r=o.trees.MERGED}else r=this.trees[t];return r==null?"(empty tree)":Q9(r,e)};for(let e in vs){if(!vs.hasOwnProperty(e))continue;let t=vs[e],r=t.toLowerCase();$e.prototype[r]=function(n,s,i){return this.on(t,n,s,i)}}$e.prototype.all=function(e,t,r){this.on(vs,e,t,r)};VO.exports=$e;function FO(e){return e.replace(DO,"\\$&")}function mp(e){return e.indexOf("//")!==-1?e.replace(xO,"/"):e}function yp(e){return e.length>1&&e.charCodeAt(e.length-1)===47?e.slice(0,-1):e}function MO(e){return e.charCodeAt(1)===94&&(e=e.slice(0,1)+e.slice(2)),e.charCodeAt(e.length-2)===36&&(e=e.slice(0,e.length-2)+e.slice(e.length-1)),e}function HO(e,t){let r=1;for(;t<e.length;){if(t++,e.charCodeAt(t)===92){t++;continue}if(e.charCodeAt(t)===41?r--:e.charCodeAt(t)===40&&r++,!r)return t}throw new TypeError('Invalid regexp expression in "'+e+'"')}function tG(e){return e?e.store?Object.assign({},e.store):{}:{}}});var UO=E((PY,zO)=>{"use strict";function _p(e,t,r,n){if(r===void 0){t.header("content-length","0"),n(null,null);return}if(typeof r.resume=="function"){r.on("error",i=>{t.log.error({err:i},"Error on Stream found for HEAD route")}),r.resume(),n(null,null);return}let s=""+Buffer.byteLength(r);t.header("content-length",s),n(null,null)}function rG(e){return e==null?_p:Array.isArray(e)?[...e,_p]:[e,_p]}zO.exports={parseHeadOnSendHandlers:rG}});var o$=E((IY,i$)=>{"use strict";var nG=gp(),sG=oa(),BO=ml(),{onRequestAbortHookRunner:iG,lifecycleHooks:GO,preParsingHookRunner:oG,onTimeoutHookRunner:aG,onRequestHookRunner:uG}=Tr(),{normalizeSchema:lG}=Fs(),{parseHeadOnSendHandlers:cG}=UO(),{compileSchemasForValidation:fG,compileSchemasForSerialization:dG}=cl(),{FST_ERR_SCH_VALIDATION_BUILD:hG,FST_ERR_SCH_SERIALIZATION_BUILD:pG,FST_ERR_DUPLICATED_ROUTE:mG,FST_ERR_INVALID_URL:yG,FST_ERR_HOOK_INVALID_HANDLER:JO,FST_ERR_ROUTE_OPTIONS_NOT_OBJ:gG,FST_ERR_ROUTE_DUPLICATED_HANDLER:_G,FST_ERR_ROUTE_HANDLER_NOT_FN:KO,FST_ERR_ROUTE_MISSING_HANDLER:SG,FST_ERR_ROUTE_METHOD_NOT_SUPPORTED:EG,FST_ERR_ROUTE_METHOD_INVALID:vG,FST_ERR_ROUTE_BODY_VALIDATION_SCHEMA_NOT_SUPPORTED:bG,FST_ERR_ROUTE_BODY_LIMIT_OPTION_NOT_INT:RG,FST_ERR_HOOK_INVALID_ASYNC_HANDLER:Sp}=Ve(),{kRoutePrefix:wG,kSupportedHTTPMethods:bp,kLogLevel:TG,kLogSerializers:WO,kHooks:YO,kSchemaController:OG,kOptions:XO,kReplySerializerDefault:Ep,kReplyIsError:$G,kRequestPayloadStream:PG,kDisableRequestLogging:IG,kSchemaErrorFormatter:NG,kErrorHandler:QO,kHasBeenDecorated:ZO,kRequestAcceptVersion:vp,kRouteByFastify:AG,kRouteContext:e$}=De(),{buildErrorHandler:CG}=Ms(),{createChildLogger:kG}=xs(),{getGenReqId:qG}=Su();function LG(e){let t=nG(e.config),r,n,s,i,o,a,u,c,l,d,p,f,h=!1;return{setup(b,O){r=O.avvio,n=O.fourOhFour,s=O.logger,i=O.hasLogger,o=O.setupResponseListeners,a=O.throwIfAlreadyStarted,p=b.exposeHeadRoutes,u=b.disableRequestLogging,c=b.ignoreTrailingSlash,l=b.ignoreDuplicateSlashes,d=Object.hasOwn(b,"return503OnClosing")?b.return503OnClosing:!0,f=O.keepAliveConnections},routing:t.lookup.bind(t),route:w,hasRoute:g,prepareRoute:v,routeHandler:T,closeRoutes:()=>{h=!0},printRoutes:t.prettyPrint.bind(t),addConstraintStrategy:y,hasConstraintStrategy:_,isAsyncConstraint:S,findRoute:m};function y(b){return a("Cannot add constraint strategy!"),t.addConstraintStrategy(b)}function _(b){return t.hasConstraintStrategy(b)}function S(){return t.constrainer.asyncStrategiesInUse.size>0}function v({method:b,url:O,options:R,handler:P,isFastify:D}){if(typeof O!="string")throw new yG(typeof O);if(!P&&typeof R=="function")P=R,R={};else if(P&&typeof P=="function"){if(Object.prototype.toString.call(R)!=="[object Object]")throw new gG(b,O);if(R.handler)throw typeof R.handler=="function"?new _G(b,O):new KO(b,O)}return R=Object.assign({},R,{method:b,url:O,path:O,handler:P||R&&R.handler}),w.call(this,{options:R,isFastify:D})}function g({options:b}){let O=b.method?.toUpperCase()??"";return t.hasRoute(O,b.url||"",b.constraints)}function m(b){let O=t.find(b.method,b.url||"",b.constraints);return O?{handler:O.handler,params:O.params,searchParams:O.searchParams}:null}function w({options:b,isFastify:O}){a("Cannot add route!");let R={...b},P=R.url||R.path||"";if(!R.handler)throw new SG(R.method,P);if(R.errorHandler!==void 0&&typeof R.errorHandler!="function")throw new KO(R.method,P);s$(R.bodyLimit);let D=R.exposeHeadRoute??p,I=!1,N=!1;if(Array.isArray(R.method))for(let J=0;J<R.method.length;++J)R.method[J]=t$.call(this,R.method[J]),r$.call(this,R.method[J],P,R.schema),I=R.method.includes("GET"),N=R.method.includes("HEAD");else R.method=t$.call(this,R.method),r$.call(this,R.method,P,R.schema),I=R.method==="GET",N=R.method==="HEAD";let z=D&&I?{...b}:null,re=this[wG];if(P==="/"&&re.length>0&&R.method!=="HEAD")switch(R.prefixTrailingSlash){case"slash":L.call(this,{path:P,isFastify:O});break;case"no-slash":L.call(this,{path:"",isFastify:O});break;case"both":default:L.call(this,{path:"",isFastify:O}),c!==!0&&(l!==!0||!re.endsWith("/"))&&L.call(this,{path:P,prefixing:!0,isFastify:O})}else P[0]==="/"&&re.endsWith("/")?L.call(this,{path:P.slice(1),isFastify:O}):L.call(this,{path:P,isFastify:O});return this;function L({path:J,prefixing:Fe=!1,isFastify:H=!1}){let je=re+J;if(R.url=je,R.path=je,R.routePath=J,R.prefix=re,R.logLevel=R.logLevel||this[TG],(this[WO]||R.logSerializers)&&(R.logSerializers=Object.assign(Object.create(this[WO]),R.logSerializers)),R.attachValidation==null&&(R.attachValidation=!1),Fe===!1)for(let fe of this[YO].onRoute)fe.call(this,R);for(let fe of GO)if(R&&fe in R){if(Array.isArray(R[fe]))for(let Te of R[fe]){if(typeof Te!="function")throw new JO(fe,Object.prototype.toString.call(Te));if(fe==="onSend"||fe==="preSerialization"||fe==="onError"||fe==="preParsing"){if(Te.constructor.name==="AsyncFunction"&&Te.length===4)throw new Sp}else if(fe==="onRequestAbort"){if(Te.constructor.name==="AsyncFunction"&&Te.length!==1)throw new Sp}else if(Te.constructor.name==="AsyncFunction"&&Te.length===3)throw new Sp}else if(R[fe]!==void 0&&typeof R[fe]!="function")throw new JO(fe,Object.prototype.toString.call(R[fe]))}let Rr=R.constraints||{},he={...R.config,url:je,method:R.method},ce=new sG({schema:R.schema,handler:R.handler.bind(this),config:he,errorHandler:R.errorHandler,childLoggerFactory:R.childLoggerFactory,bodyLimit:R.bodyLimit,logLevel:R.logLevel,logSerializers:R.logSerializers,attachValidation:R.attachValidation,schemaErrorFormatter:R.schemaErrorFormatter,replySerializer:this[Ep],validatorCompiler:R.validatorCompiler,serializerCompiler:R.serializerCompiler,exposeHeadRoute:D,prefixTrailingSlash:R.prefixTrailingSlash||"both",server:this,isFastify:H}),ke=t.findRoute("HEAD",R.url,Rr)!==null;try{t.on(R.method,R.url,{constraints:Rr},T,ce)}catch(fe){if(!ce[AG])throw fe.message.includes(`Method '${R.method}' already declared for route`)?new mG(R.method,R.url):fe}if(this.after((fe,Te)=>{ce.errorHandler=R.errorHandler?CG(this[QO],R.errorHandler):this[QO],ce._parserOptions.limit=R.bodyLimit||null,ce.logLevel=R.logLevel,ce.logSerializers=R.logSerializers,ce.attachValidation=R.attachValidation,ce[Ep]=this[Ep],ce.schemaErrorFormatter=R.schemaErrorFormatter||this[NG]||ce.schemaErrorFormatter,r.once("preReady",()=>{for(let Q of GO){let ot=this[YO][Q].concat(R[Q]||[]).map(Ts=>Ts.bind(this));ce[Q]=ot.length?ot:null}for(;!ce.Request[ZO]&&ce.Request.parent;)ce.Request=ce.Request.parent;for(;!ce.Reply[ZO]&&ce.Reply.parent;)ce.Reply=ce.Reply.parent;if(n.setContext(this,ce),R.schema){ce.schema=lG(ce.schema,this.initialConfig);let Q=this[OG];!R.validatorCompiler&&(R.schema.body||R.schema.headers||R.schema.querystring||R.schema.params)&&Q.setupValidator(this[XO]);try{let ot=typeof R?.validatorCompiler=="function"||Q.isCustomValidatorCompiler;fG(ce,R.validatorCompiler||Q.validatorCompiler,ot)}catch(ot){throw new hG(R.method,je,ot.message)}R.schema.response&&!R.serializerCompiler&&Q.setupSerializer(this[XO]);try{dG(ce,R.serializerCompiler||Q.serializerCompiler)}catch(ot){throw new pG(R.method,je,ot.message)}}}),Te(fe)}),D&&I&&!N&&!ke){let fe=cG(z.onSend);v.call(this,{method:"HEAD",url:J,options:{...z,onSend:fe},isFastify:!0})}}}function T(b,O,R,P,D){let I=qG(P.server,b),N={level:P.logLevel};P.logSerializers&&(N.serializers=P.logSerializers);let z=kG(P,s,b,I,N);if(z[IG]=u,h===!0&&(b.httpVersionMajor!==2&&O.setHeader("Connection","close"),d)){let Fe={"Content-Type":"application/json","Content-Length":"80"};O.writeHead(503,Fe),O.end('{"error":"Service Unavailable","message":"Service Unavailable","statusCode":503}'),z.info({res:{statusCode:503}},"request aborted - refusing to accept new requests as server is closing");return}String.prototype.toLowerCase.call(b.headers.connection||"")==="keep-alive"&&f.has(b.socket)===!1&&(f.add(b.socket),b.socket.on("close",xG.bind({keepAliveConnections:f,socket:b.socket}))),b.headers[vp]!==void 0&&(b.headers["accept-version"]=b.headers[vp],b.headers[vp]=void 0);let L=new P.Request(I,R,b,D,z,P),J=new P.Reply(O,L,z);u===!1&&z.info({req:L},"incoming request"),(i===!0||P.onResponse!==null)&&o(J),P.onRequest!==null?uG(P.onRequest,L,J,n$):n$(null,L,J),P.onRequestAbort!==null&&b.on("close",()=>{b.aborted&&iG(P.onRequestAbort,L,jG.bind(null,J))}),P.onTimeout!==null&&(L.raw.socket._meta||L.raw.socket.on("timeout",DG),L.raw.socket._meta={context:P,request:L,reply:J})}}function jG(e,t){t&&e.log.error({err:t},"onRequestAborted hook failed")}function DG(){let{context:e,request:t,reply:r}=this._meta;aG(e.onTimeout,t,r,FG)}function t$(e){if(typeof e!="string")throw new vG;if(e=e.toUpperCase(),!this[bp].bodyless.has(e)&&!this[bp].bodywith.has(e))throw new EG(e);return e}function r$(e,t,r){if(this[bp].bodyless.has(e)&&r?.body)throw new bG(e,t)}function s$(e){if(e!==void 0&&(!Number.isInteger(e)||e<=0))throw new RG(e)}function n$(e,t,r){if(r.sent!==!0){if(e!=null){r[$G]=!0,r.send(e);return}t[PG]=t.raw,t[e$].preParsing!==null?oG(t[e$].preParsing,t,r,BO.bind(t.server)):BO.call(t.server,null,t,r)}}function xG(){this.keepAliveConnections.delete(this.socket)}function FG(){}i$.exports={buildRouting:LG,validateBodyLimitOption:s$}});var h$=E((NY,d$)=>{"use strict";var MG=gp(),a$=Zo(),u$=ia(),HG=oa(),{kRoutePrefix:VG,kCanSetNotFoundHandler:Ji,kFourOhFourLevelInstance:Ki,kFourOhFourContext:nr,kHooks:zG,kErrorHandler:l$}=De(),{lifecycleHooks:UG}=Tr(),{buildErrorHandler:BG}=Ms(),{FST_ERR_NOT_FOUND:GG}=Ve(),{createChildLogger:c$}=xs(),{getGenReqId:f$}=Su();function JG(e){let{logger:t,disableRequestLogging:r}=e,n=MG({onBadUrl:a(),defaultRoute:d}),s=null;return{router:n,setNotFoundHandler:c,setContext:u,arrange404:i};function i(p){p[Ki]=p,p[Ji]=!0,n.onBadUrl=n.onBadUrl.bind(p),n.defaultRoute=n.defaultRoute.bind(p)}function o(p,f){let{url:h,method:y}=p.raw,_=`Route ${y}:${h} not found`;r||p.log.info(_),f.code(404).send({message:_,error:"Not Found",statusCode:404})}function a(){return function(f,h,y){let _=this[Ki][nr],S=f$(_.server,h),v=c$(_,t,h,S),g=new u$(S,null,h,null,v,_),m=new a$(y,g,v);s(g,m)}}function u(p,f){let h=Object.assign({},p[nr]);h.onSend=f.onSend,f[nr]=h}function c(p,f,h,y){this[Ji]===void 0&&(this[Ji]=!0),this[nr]===void 0&&(this[nr]=null);let _=this,S=this[VG]||"/";if(this[Ji]===!1)throw new Error(`Not found handler already set for Fastify instance with prefix: '${S}'`);typeof p=="object"&&(p.preHandler&&(Array.isArray(p.preHandler)?p.preHandler=p.preHandler.map(v=>v.bind(_)):p.preHandler=p.preHandler.bind(_)),p.preValidation&&(Array.isArray(p.preValidation)?p.preValidation=p.preValidation.map(v=>v.bind(_)):p.preValidation=p.preValidation.bind(_))),typeof p=="function"&&(f=p,p=void 0),p=p||{},f?(this[Ki][Ji]=!1,f=f.bind(this),s=f):(f=o,s=o),this.after((v,g)=>{l.call(this,S,p,f,h,y),g(v)})}function l(p,f,h,y,_){let S=new HG({schema:f.schema,handler:h,config:f.config||{},server:this});if(y.once("preReady",()=>{let v=this[nr];for(let g of UG){let m=this[zG][g].concat(f[g]||[]).map(w=>w.bind(this));v[g]=m.length?m:null}v.errorHandler=f.errorHandler?BG(this[l$],f.errorHandler):this[l$]}),this[nr]!==null&&p==="/"){Object.assign(this[nr],S);return}this[Ki][nr]=S,n.all(p+(p.endsWith("/")?"*":"/*"),_,S),n.all(p,_,S)}function d(p,f){let h=this[Ki][nr],y=f$(h.server,p),_=c$(h,t,p,y);_.info({req:p},"incoming request");let S=new u$(y,null,p,null,_,h),v=new a$(f,S,_);S.log.warn("the default handler for 404 did not catch this, this is likely a fastify bug, please report it"),S.log.warn(n.prettyPrint()),v.code(404).send(new GG)}}d$.exports=JG});var p$=E((AY,Du)=>{"use strict";Du.exports=de;Du.exports.default=de;var KG={type:"object",additionalProperties:!1,properties:{connectionTimeout:{type:"integer",default:0},keepAliveTimeout:{type:"integer",default:72e3},forceCloseConnections:{oneOf:[{type:"string",pattern:"idle"},{type:"boolean"}]},maxRequestsPerSocket:{type:"integer",default:0,nullable:!0},requestTimeout:{type:"integer",default:0},bodyLimit:{type:"integer",default:1048576},caseSensitive:{type:"boolean",default:!0},allowUnsafeRegex:{type:"boolean",default:!1},http2:{type:"boolean"},https:{if:{not:{oneOf:[{type:"boolean"},{type:"null"},{type:"object",additionalProperties:!1,required:["allowHTTP1"],properties:{allowHTTP1:{type:"boolean"}}}]}},then:{setDefaultValue:!0}},ignoreTrailingSlash:{type:"boolean",default:!1},ignoreDuplicateSlashes:{type:"boolean",default:!1},disableRequestLogging:{type:"boolean",default:!1},maxParamLength:{type:"integer",default:100},onProtoPoisoning:{type:"string",default:"error"},onConstructorPoisoning:{type:"string",default:"error"},pluginTimeout:{type:"integer",default:1e4},requestIdHeader:{anyOf:[{type:"boolean"},{type:"string"}],default:!1},requestIdLogLabel:{type:"string",default:"reqId"},http2SessionTimeout:{type:"integer",default:72e3},exposeHeadRoutes:{type:"boolean",default:!0},useSemicolonDelimiter:{type:"boolean",default:!1},constraints:{type:"object",additionalProperties:{type:"object",required:["name","storage","validate","deriveConstraint"],additionalProperties:!0,properties:{name:{type:"string"},storage:{},validate:{},deriveConstraint:{}}}}}},WG=Object.prototype.hasOwnProperty,YG=new RegExp("idle","u");function de(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0;if(o===0)if(e&&typeof e=="object"&&!Array.isArray(e)){e.connectionTimeout===void 0&&(e.connectionTimeout=0),e.keepAliveTimeout===void 0&&(e.keepAliveTimeout=72e3),e.maxRequestsPerSocket===void 0&&(e.maxRequestsPerSocket=0),e.requestTimeout===void 0&&(e.requestTimeout=0),e.bodyLimit===void 0&&(e.bodyLimit=1048576),e.caseSensitive===void 0&&(e.caseSensitive=!0),e.allowUnsafeRegex===void 0&&(e.allowUnsafeRegex=!1),e.ignoreTrailingSlash===void 0&&(e.ignoreTrailingSlash=!1),e.ignoreDuplicateSlashes===void 0&&(e.ignoreDuplicateSlashes=!1),e.disableRequestLogging===void 0&&(e.disableRequestLogging=!1),e.maxParamLength===void 0&&(e.maxParamLength=100),e.onProtoPoisoning===void 0&&(e.onProtoPoisoning="error"),e.onConstructorPoisoning===void 0&&(e.onConstructorPoisoning="error"),e.pluginTimeout===void 0&&(e.pluginTimeout=1e4),e.requestIdHeader===void 0&&(e.requestIdHeader=!1),e.requestIdLogLabel===void 0&&(e.requestIdLogLabel="reqId"),e.http2SessionTimeout===void 0&&(e.http2SessionTimeout=72e3),e.exposeHeadRoutes===void 0&&(e.exposeHeadRoutes=!0),e.useSemicolonDelimiter===void 0&&(e.useSemicolonDelimiter=!1);let h=o;for(let y in e)WG.call(KG.properties,y)||delete e[y];if(h===o){let y=e.connectionTimeout,_=o;if(!(typeof y=="number"&&!(y%1)&&!isNaN(y)&&isFinite(y))){let S=typeof y,v;if(v===void 0)if(S==="boolean"||y===null||S==="string"&&y&&y==+y&&!(y%1))v=+y;else return de.errors=[{instancePath:t+"/connectionTimeout",schemaPath:"#/properties/connectionTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;v!==void 0&&(y=v,e!==void 0&&(e.connectionTimeout=v))}var a=_===o;if(a){let S=e.keepAliveTimeout,v=o;if(!(typeof S=="number"&&!(S%1)&&!isNaN(S)&&isFinite(S))){let m=typeof S,w;if(w===void 0)if(m==="boolean"||S===null||m==="string"&&S&&S==+S&&!(S%1))w=+S;else return de.errors=[{instancePath:t+"/keepAliveTimeout",schemaPath:"#/properties/keepAliveTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;w!==void 0&&(S=w,e!==void 0&&(e.keepAliveTimeout=w))}var a=v===o;if(a){if(e.forceCloseConnections!==void 0){let m=e.forceCloseConnections,w=o,T=o,b=!1,O=null,R=o;if(typeof m!="string"){let I=typeof m,N;if(N===void 0)if(I=="number"||I=="boolean")N=""+m;else if(m===null)N="";else{let z={instancePath:t+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[z]:i.push(z),o++}N!==void 0&&(m=N,e!==void 0&&(e.forceCloseConnections=N))}if(o===R&&typeof m=="string"&&!YG.test(m)){let I={instancePath:t+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/0/pattern",keyword:"pattern",params:{pattern:"idle"},message:'must match pattern "idle"'};i===null?i=[I]:i.push(I),o++}var u=R===o;u&&(b=!0,O=0);let P=o;if(typeof m!="boolean"){let I;if(I===void 0)if(m==="false"||m===0||m===null)I=!1;else if(m==="true"||m===1)I=!0;else{let N={instancePath:t+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf/1/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};i===null?i=[N]:i.push(N),o++}I!==void 0&&(m=I,e!==void 0&&(e.forceCloseConnections=I))}var u=P===o;if(u&&b?(b=!1,O=[O,1]):u&&(b=!0,O=1),b)o=T,i!==null&&(T?i.length=T:i=null);else{let I={instancePath:t+"/forceCloseConnections",schemaPath:"#/properties/forceCloseConnections/oneOf",keyword:"oneOf",params:{passingSchemas:O},message:"must match exactly one schema in oneOf"};return i===null?i=[I]:i.push(I),o++,de.errors=i,!1}var a=w===o}else var a=!0;if(a){let m=e.maxRequestsPerSocket,w=o;if(!(typeof m=="number"&&!(m%1)&&!isNaN(m)&&isFinite(m))&&m!==null){let b=typeof m,O;if(O===void 0)if(b==="boolean"||m===null||b==="string"&&m&&m==+m&&!(m%1))O=+m;else if(m===""||m===0||m===!1)O=null;else return de.errors=[{instancePath:t+"/maxRequestsPerSocket",schemaPath:"#/properties/maxRequestsPerSocket/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;O!==void 0&&(m=O,e!==void 0&&(e.maxRequestsPerSocket=O))}var a=w===o;if(a){let b=e.requestTimeout,O=o;if(!(typeof b=="number"&&!(b%1)&&!isNaN(b)&&isFinite(b))){let P=typeof b,D;if(D===void 0)if(P==="boolean"||b===null||P==="string"&&b&&b==+b&&!(b%1))D=+b;else return de.errors=[{instancePath:t+"/requestTimeout",schemaPath:"#/properties/requestTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;D!==void 0&&(b=D,e!==void 0&&(e.requestTimeout=D))}var a=O===o;if(a){let P=e.bodyLimit,D=o;if(!(typeof P=="number"&&!(P%1)&&!isNaN(P)&&isFinite(P))){let N=typeof P,z;if(z===void 0)if(N==="boolean"||P===null||N==="string"&&P&&P==+P&&!(P%1))z=+P;else return de.errors=[{instancePath:t+"/bodyLimit",schemaPath:"#/properties/bodyLimit/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;z!==void 0&&(P=z,e!==void 0&&(e.bodyLimit=z))}var a=D===o;if(a){let N=e.caseSensitive,z=o;if(typeof N!="boolean"){let L;if(L===void 0)if(N==="false"||N===0||N===null)L=!1;else if(N==="true"||N===1)L=!0;else return de.errors=[{instancePath:t+"/caseSensitive",schemaPath:"#/properties/caseSensitive/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;L!==void 0&&(N=L,e!==void 0&&(e.caseSensitive=L))}var a=z===o;if(a){let L=e.allowUnsafeRegex,J=o;if(typeof L!="boolean"){let H;if(H===void 0)if(L==="false"||L===0||L===null)H=!1;else if(L==="true"||L===1)H=!0;else return de.errors=[{instancePath:t+"/allowUnsafeRegex",schemaPath:"#/properties/allowUnsafeRegex/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;H!==void 0&&(L=H,e!==void 0&&(e.allowUnsafeRegex=H))}var a=J===o;if(a){if(e.http2!==void 0){let H=e.http2,je=o;if(typeof H!="boolean"){let he;if(he===void 0)if(H==="false"||H===0||H===null)he=!1;else if(H==="true"||H===1)he=!0;else return de.errors=[{instancePath:t+"/http2",schemaPath:"#/properties/http2/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;he!==void 0&&(H=he,e!==void 0&&(e.http2=he))}var a=je===o}else var a=!0;if(a){if(e.https!==void 0){let H=e.https,je=o,Rr=o,he=!0,ce=o,Tn=o,ke=o,fe=o,Te=!1,Q=null,ot=o;if(typeof H!="boolean"){let $;if($===void 0)if(H==="false"||H===0||H===null)$=!1;else if(H==="true"||H===1)$=!0;else{let C={};i===null?i=[C]:i.push(C),o++}$!==void 0&&(H=$,e!==void 0&&(e.https=$))}var c=ot===o;c&&(Te=!0,Q=0);let Ts=o;if(H!==null){let $;if($===void 0)if(H===""||H===0||H===!1)$=null;else{let C={};i===null?i=[C]:i.push(C),o++}$!==void 0&&(H=$,e!==void 0&&(e.https=$))}var c=Ts===o;if(c&&Te)Te=!1,Q=[Q,1];else{c&&(Te=!0,Q=1);let $=o;if(o===$)if(H&&typeof H=="object"&&!Array.isArray(H)){let j;if(H.allowHTTP1===void 0&&(j="allowHTTP1")){let V={};i===null?i=[V]:i.push(V),o++}else{let V=o;for(let ee in H)ee!=="allowHTTP1"&&delete H[ee];if(V===o&&H.allowHTTP1!==void 0){let ee=H.allowHTTP1;if(typeof ee!="boolean"){let M;if(M===void 0)if(ee==="false"||ee===0||ee===null)M=!1;else if(ee==="true"||ee===1)M=!0;else{let Se={};i===null?i=[Se]:i.push(Se),o++}M!==void 0&&(ee=M,H!==void 0&&(H.allowHTTP1=M))}}}}else{let j={};i===null?i=[j]:i.push(j),o++}var c=$===o;c&&Te?(Te=!1,Q=[Q,2]):c&&(Te=!0,Q=2)}if(Te)o=fe,i!==null&&(fe?i.length=fe:i=null);else{let $={};i===null?i=[$]:i.push($),o++}var l=ke===o;if(l){let $={};i===null?i=[$]:i.push($),o++}else o=Tn,i!==null&&(Tn?i.length=Tn:i=null);var d=ce===o;if(o=Rr,i!==null&&(Rr?i.length=Rr:i=null),d){let $=o;e.https=!0;var d=$===o;he=d}if(!he){let $={instancePath:t+"/https",schemaPath:"#/properties/https/if",keyword:"if",params:{failingKeyword:"then"},message:'must match "then" schema'};return i===null?i=[$]:i.push($),o++,de.errors=i,!1}var a=je===o}else var a=!0;if(a){let H=e.ignoreTrailingSlash,je=o;if(typeof H!="boolean"){let he;if(he===void 0)if(H==="false"||H===0||H===null)he=!1;else if(H==="true"||H===1)he=!0;else return de.errors=[{instancePath:t+"/ignoreTrailingSlash",schemaPath:"#/properties/ignoreTrailingSlash/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;he!==void 0&&(H=he,e!==void 0&&(e.ignoreTrailingSlash=he))}var a=je===o;if(a){let he=e.ignoreDuplicateSlashes,ce=o;if(typeof he!="boolean"){let ke;if(ke===void 0)if(he==="false"||he===0||he===null)ke=!1;else if(he==="true"||he===1)ke=!0;else return de.errors=[{instancePath:t+"/ignoreDuplicateSlashes",schemaPath:"#/properties/ignoreDuplicateSlashes/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;ke!==void 0&&(he=ke,e!==void 0&&(e.ignoreDuplicateSlashes=ke))}var a=ce===o;if(a){let ke=e.disableRequestLogging,fe=o;if(typeof ke!="boolean"){let Q;if(Q===void 0)if(ke==="false"||ke===0||ke===null)Q=!1;else if(ke==="true"||ke===1)Q=!0;else return de.errors=[{instancePath:t+"/disableRequestLogging",schemaPath:"#/properties/disableRequestLogging/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;Q!==void 0&&(ke=Q,e!==void 0&&(e.disableRequestLogging=Q))}var a=fe===o;if(a){let Q=e.maxParamLength,ot=o;if(!(typeof Q=="number"&&!(Q%1)&&!isNaN(Q)&&isFinite(Q))){let Ht=typeof Q,$;if($===void 0)if(Ht==="boolean"||Q===null||Ht==="string"&&Q&&Q==+Q&&!(Q%1))$=+Q;else return de.errors=[{instancePath:t+"/maxParamLength",schemaPath:"#/properties/maxParamLength/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;$!==void 0&&(Q=$,e!==void 0&&(e.maxParamLength=$))}var a=ot===o;if(a){let Ht=e.onProtoPoisoning,$=o;if(typeof Ht!="string"){let j=typeof Ht,V;if(V===void 0)if(j=="number"||j=="boolean")V=""+Ht;else if(Ht===null)V="";else return de.errors=[{instancePath:t+"/onProtoPoisoning",schemaPath:"#/properties/onProtoPoisoning/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;V!==void 0&&(Ht=V,e!==void 0&&(e.onProtoPoisoning=V))}var a=$===o;if(a){let j=e.onConstructorPoisoning,V=o;if(typeof j!="string"){let M=typeof j,Se;if(Se===void 0)if(M=="number"||M=="boolean")Se=""+j;else if(j===null)Se="";else return de.errors=[{instancePath:t+"/onConstructorPoisoning",schemaPath:"#/properties/onConstructorPoisoning/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;Se!==void 0&&(j=Se,e!==void 0&&(e.onConstructorPoisoning=Se))}var a=V===o;if(a){let M=e.pluginTimeout,Se=o;if(!(typeof M=="number"&&!(M%1)&&!isNaN(M)&&isFinite(M))){let Pe=typeof M,ir;if(ir===void 0)if(Pe==="boolean"||M===null||Pe==="string"&&M&&M==+M&&!(M%1))ir=+M;else return de.errors=[{instancePath:t+"/pluginTimeout",schemaPath:"#/properties/pluginTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;ir!==void 0&&(M=ir,e!==void 0&&(e.pluginTimeout=ir))}var a=Se===o;if(a){let Pe=e.requestIdHeader,ir=o,Yu=o,On=!1,wP=o;if(typeof Pe!="boolean"){let Me;if(Me===void 0)if(Pe==="false"||Pe===0||Pe===null)Me=!1;else if(Pe==="true"||Pe===1)Me=!0;else{let oo={instancePath:t+"/requestIdHeader",schemaPath:"#/properties/requestIdHeader/anyOf/0/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"};i===null?i=[oo]:i.push(oo),o++}Me!==void 0&&(Pe=Me,e!==void 0&&(e.requestIdHeader=Me))}var p=wP===o;if(On=On||p,!On){let Me=o;if(typeof Pe!="string"){let Wp=typeof Pe,Oe;if(Oe===void 0)if(Wp=="number"||Wp=="boolean")Oe=""+Pe;else if(Pe===null)Oe="";else{let Nt={instancePath:t+"/requestIdHeader",schemaPath:"#/properties/requestIdHeader/anyOf/1/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Nt]:i.push(Nt),o++}Oe!==void 0&&(Pe=Oe,e!==void 0&&(e.requestIdHeader=Oe))}var p=Me===o;On=On||p}if(On)o=Yu,i!==null&&(Yu?i.length=Yu:i=null);else{let Me={instancePath:t+"/requestIdHeader",schemaPath:"#/properties/requestIdHeader/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[Me]:i.push(Me),o++,de.errors=i,!1}var a=ir===o;if(a){let Me=e.requestIdLogLabel,oo=o;if(typeof Me!="string"){let Oe=typeof Me,Nt;if(Nt===void 0)if(Oe=="number"||Oe=="boolean")Nt=""+Me;else if(Me===null)Nt="";else return de.errors=[{instancePath:t+"/requestIdLogLabel",schemaPath:"#/properties/requestIdLogLabel/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;Nt!==void 0&&(Me=Nt,e!==void 0&&(e.requestIdLogLabel=Nt))}var a=oo===o;if(a){let Oe=e.http2SessionTimeout,Nt=o;if(!(typeof Oe=="number"&&!(Oe%1)&&!isNaN(Oe)&&isFinite(Oe))){let Vt=typeof Oe,Jr;if(Jr===void 0)if(Vt==="boolean"||Oe===null||Vt==="string"&&Oe&&Oe==+Oe&&!(Oe%1))Jr=+Oe;else return de.errors=[{instancePath:t+"/http2SessionTimeout",schemaPath:"#/properties/http2SessionTimeout/type",keyword:"type",params:{type:"integer"},message:"must be integer"}],!1;Jr!==void 0&&(Oe=Jr,e!==void 0&&(e.http2SessionTimeout=Jr))}var a=Nt===o;if(a){let Vt=e.exposeHeadRoutes,Jr=o;if(typeof Vt!="boolean"){let at;if(at===void 0)if(Vt==="false"||Vt===0||Vt===null)at=!1;else if(Vt==="true"||Vt===1)at=!0;else return de.errors=[{instancePath:t+"/exposeHeadRoutes",schemaPath:"#/properties/exposeHeadRoutes/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;at!==void 0&&(Vt=at,e!==void 0&&(e.exposeHeadRoutes=at))}var a=Jr===o;if(a){let at=e.useSemicolonDelimiter,TP=o;if(typeof at!="boolean"){let gt;if(gt===void 0)if(at==="false"||at===0||at===null)gt=!1;else if(at==="true"||at===1)gt=!0;else return de.errors=[{instancePath:t+"/useSemicolonDelimiter",schemaPath:"#/properties/useSemicolonDelimiter/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;gt!==void 0&&(at=gt,e!==void 0&&(e.useSemicolonDelimiter=gt))}var a=TP===o;if(a)if(e.constraints!==void 0){let gt=e.constraints,Yp=o;if(o===Yp)if(gt&&typeof gt=="object"&&!Array.isArray(gt))for(let ao in gt){let At=gt[ao],Xp=o;if(o===Xp)if(At&&typeof At=="object"&&!Array.isArray(At)){let $n;if(At.name===void 0&&($n="name")||At.storage===void 0&&($n="storage")||At.validate===void 0&&($n="validate")||At.deriveConstraint===void 0&&($n="deriveConstraint"))return de.errors=[{instancePath:t+"/constraints/"+ao.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/constraints/additionalProperties/required",keyword:"required",params:{missingProperty:$n},message:"must have required property '"+$n+"'"}],!1;if(At.name!==void 0){let Os=At.name;if(typeof Os!="string"){let Qp=typeof Os,Pn;if(Pn===void 0)if(Qp=="number"||Qp=="boolean")Pn=""+Os;else if(Os===null)Pn="";else return de.errors=[{instancePath:t+"/constraints/"+ao.replace(/~/g,"~0").replace(/\//g,"~1")+"/name",schemaPath:"#/properties/constraints/additionalProperties/properties/name/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;Pn!==void 0&&(Os=Pn,At!==void 0&&(At.name=Pn))}}}else return de.errors=[{instancePath:t+"/constraints/"+ao.replace(/~/g,"~0").replace(/\//g,"~1"),schemaPath:"#/properties/constraints/additionalProperties/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var f=Xp===o;if(!f)break}else return de.errors=[{instancePath:t+"/constraints",schemaPath:"#/properties/constraints/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var a=Yp===o}else var a=!0}}}}}}}}}}}}}}}}}}}}}}}else return de.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return de.errors=i,o===0}Du.exports.defaultInitOptions={connectionTimeout:0,keepAliveTimeout:72e3,maxRequestsPerSocket:0,requestTimeout:0,bodyLimit:1048576,caseSensitive:!0,allowUnsafeRegex:!1,disableRequestLogging:!1,ignoreTrailingSlash:!1,ignoreDuplicateSlashes:!1,maxParamLength:100,onProtoPoisoning:"error",onConstructorPoisoning:"error",pluginTimeout:1e4,requestIdHeader:!1,requestIdLogLabel:"reqId",http2SessionTimeout:72e3,exposeHeadRoutes:!0,useSemicolonDelimiter:!1}});var m$=E((CY,Fu)=>{"use strict";var xu=p$(),XG=zo()({circles:!0,proto:!1}),{FST_ERR_INIT_OPTS_INVALID:QG}=Ve();function ZG(e){let t=XG(e);if(!xu(t)){let r=new QG(JSON.stringify(xu.errors.map(n=>n.message)));throw r.errors=xu.errors,r}return Rp(t)}function Rp(e){let t=Object.getOwnPropertyNames(e);for(let r of t){let n=e[r];ArrayBuffer.isView(n)&&!(n instanceof DataView)||(e[r]=n&&typeof n=="object"?Rp(n):n)}return Object.freeze(e)}Fu.exports=ZG;Fu.exports.defaultInitOptions=xu.defaultInitOptions;Fu.exports.utils={deepFreezeObject:Rp}});var w$=E((kY,R$)=>{"use strict";var{kAvvioBoot:e3,kChildren:y$,kRoutePrefix:g$,kLogLevel:_$,kLogSerializers:wp,kHooks:Tp,kSchemaController:Rs,kContentTypeParser:S$,kReply:E$,kRequest:v$,kFourOhFour:t3,kPluginNameChain:b$}=De(),r3=Zo(),n3=ia(),s3=Ah(),i3=Hc(),{buildHooks:o3}=Tr(),Wi=tp();R$.exports=function(t,r,n){let s=Wi.registerPlugin.call(t,r),i=Wi.getPluginName(r)||Wi.getFuncPreview(r);if(s)return t[b$].push(i),t;let o=Object.create(t);t[y$].push(o),o.ready=t[e3].bind(o),o[y$]=[],o[E$]=r3.buildReply(o[E$]),o[v$]=n3.buildRequest(o[v$]),o[S$]=i3.helpers.buildContentTypeParser(o[S$]),o[Tp]=o3(o[Tp]),o[g$]=a3(o[g$],n.prefix),o[_$]=n.logLevel||o[_$],o[Rs]=s3.buildSchemaController(t[Rs]),o.getSchema=o[Rs].getSchema.bind(o[Rs]),o.getSchemas=o[Rs].getSchemas.bind(o[Rs]),o[Wi.kRegisteredPlugins]=Object.create(o[Wi.kRegisteredPlugins]),o[b$]=[i],(o[wp]||n.logSerializers)&&(o[wp]=Object.assign(Object.create(o[wp]),n.logSerializers)),n.prefix&&o[t3].arrange404(o);for(let a of o[Tp].onRegister)a.call(t,o,n);return o};function a3(e,t){return t?(e.endsWith("/")&&t[0]==="/"?t=t.slice(1):t[0]!=="/"&&(t="/"+t),e+t):e}});var O$=E((qY,T$)=>{"use strict";T$.exports=function(){return{[Symbol.iterator]:function*(){},add(){},delete(){},has(){return!0}}}});var I$=E(Mu=>{"use strict";Object.defineProperty(Mu,"__esModule",{value:!0});Mu.parse=p3;Mu.serialize=m3;var u3=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,l3=/^[\u0021-\u003A\u003C-\u007E]*$/,c3=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,f3=/^[\u0020-\u003A\u003D-\u007E]*$/,d3=Object.prototype.toString,h3=(()=>{let e=function(){};return e.prototype=Object.create(null),e})();function p3(e,t){let r=new h3,n=e.length;if(n<2)return r;let s=t?.decode||y3,i=0;do{let o=e.indexOf("=",i);if(o===-1)break;let a=e.indexOf(";",i),u=a===-1?n:a;if(o>u){i=e.lastIndexOf(";",o-1)+1;continue}let c=$$(e,i,o),l=P$(e,o,c),d=e.slice(c,l);if(r[d]===void 0){let p=$$(e,o+1,u),f=P$(e,u,p),h=s(e.slice(p,f));r[d]=h}i=u+1}while(i<n);return r}function $$(e,t,r){do{let n=e.charCodeAt(t);if(n!==32&&n!==9)return t}while(++t<r);return r}function P$(e,t,r){for(;t>r;){let n=e.charCodeAt(--t);if(n!==32&&n!==9)return t+1}return r}function m3(e,t,r){let n=r?.encode||encodeURIComponent;if(!u3.test(e))throw new TypeError(`argument name is invalid: ${e}`);let s=n(t);if(!l3.test(s))throw new TypeError(`argument val is invalid: ${t}`);let i=e+"="+s;if(!r)return i;if(r.maxAge!==void 0){if(!Number.isInteger(r.maxAge))throw new TypeError(`option maxAge is invalid: ${r.maxAge}`);i+="; Max-Age="+r.maxAge}if(r.domain){if(!c3.test(r.domain))throw new TypeError(`option domain is invalid: ${r.domain}`);i+="; Domain="+r.domain}if(r.path){if(!f3.test(r.path))throw new TypeError(`option path is invalid: ${r.path}`);i+="; Path="+r.path}if(r.expires){if(!g3(r.expires)||!Number.isFinite(r.expires.valueOf()))throw new TypeError(`option expires is invalid: ${r.expires}`);i+="; Expires="+r.expires.toUTCString()}if(r.httpOnly&&(i+="; HttpOnly"),r.secure&&(i+="; Secure"),r.partitioned&&(i+="; Partitioned"),r.priority)switch(typeof r.priority=="string"?r.priority.toLowerCase():void 0){case"low":i+="; Priority=Low";break;case"medium":i+="; Priority=Medium";break;case"high":i+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${r.priority}`)}if(r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:case"strict":i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"none":i+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${r.sameSite}`)}return i}function y3(e){if(e.indexOf("%")===-1)return e;try{return decodeURIComponent(e)}catch{return e}}function g3(e){return d3.call(e)==="[object Date]"}});var A$=E((jY,Hu)=>{"use strict";var{format:Op}=require("node:util");function _3(e){return N$({...e,name:"DeprecationWarning"})}function N$({name:e,code:t,message:r,unlimited:n=!1}={}){if(!e)throw new Error("Warning name must not be empty");if(!t)throw new Error("Warning code must not be empty");if(!r)throw new Error("Warning message must not be empty");if(typeof n!="boolean")throw new Error("Warning opts.unlimited must be a boolean");t=t.toUpperCase();let s={[e]:function(o,a,u){i.emitted===!0&&i.unlimited!==!0||(i.emitted=!0,process.emitWarning(i.format(o,a,u),i.name,i.code))}};n&&(s={[e]:function(o,a,u){i.emitted=!0,process.emitWarning(i.format(o,a,u),i.name,i.code)}});let i=s[e];return i.emitted=!1,i.message=r,i.unlimited=n,i.code=t,i.format=function(o,a,u){let c;return o&&a&&u?c=Op(r,o,a,u):o&&a?c=Op(r,o,a):o?c=Op(r,o):c=r,c},i}var $p={createWarning:N$,createDeprecation:_3};Hu.exports=$p;Hu.exports.default=$p;Hu.exports.processWarning=$p});var q$=E((DY,k$)=>{"use strict";var{URL:C$}=require("node:url"),Pp="http://localhost";k$.exports=function(t,r){(typeof t=="string"||Object.prototype.toString.call(t)==="[object String]")&&t.startsWith("//")&&(t=Pp+t);let n=typeof t=="object"?Object.assign(new C$(Pp),t):new C$(t,Pp);if(typeof r=="string"){r=new URLSearchParams(r);for(let s of r.keys()){n.searchParams.delete(s);for(let i of r.getAll(s))n.searchParams.append(s,i)}}else{let s=Object.assign({},t.query,r);for(let i in s){let o=s[i];if(Array.isArray(o)){n.searchParams.delete(i);for(let a of o)n.searchParams.append(i,a)}else n.searchParams.set(i,o)}}return n}});var L$=E((xY,Ip)=>{"use strict";var{randomUUID:S3}=require("node:crypto"),{Readable:E3}=require("node:stream"),ws;function v3(e){return e&&typeof e=="object"&&typeof e.append=="function"&&typeof e.delete=="function"&&typeof e.get=="function"&&typeof e.getAll=="function"&&typeof e.has=="function"&&typeof e.set=="function"&&e[Symbol.toStringTag]==="FormData"}function b3(e){ws=ws??new TextEncoder;let t=`----formdata-${S3()}`,r=`--${t}\r
Content-Disposition: form-data`;let n=u=>u.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),s=u=>u.replace(/\r?\n|\r/g,`\r
`),i=new Uint8Array([13,10]);async function*o(){for(let[u,c]of e)if(typeof c=="string")yield ws.encode(`${r}; name="${n(s(u))}"\r
\r
`),yield ws.encode(`${s(c)}\r
`);else{let l=`${r}; name="${n(s(u))}"`;c.name&&(l+=`; filename="${n(c.name)}"`),l+=`\r
Content-Type: ${c.type||"application/octet-stream"}\r
\r
`,yield ws.encode(l),c.stream?yield*c.stream():yield c,yield i}yield ws.encode(`--${t}--`)}return{stream:E3.from(o()),contentType:`multipart/form-data; boundary=${t}`}}Ip.exports.isFormDataLike=v3;Ip.exports.formDataToStream=b3});var x$=E((FY,Vu)=>{"use strict";var{Readable:j$,addAbortSignal:R3}=require("node:stream"),Ap=require("node:util"),w3=I$(),T3=require("node:assert"),{createDeprecation:O3}=A$(),$3=q$(),{isFormDataLike:P3,formDataToStream:I3}=L$(),{EventEmitter:N3}=require("node:events"),A3=O3({name:"FastifyDeprecationLightMyRequest",code:"FST_LIGHTMYREQUEST_DEP01",message:'You are accessing "request.connection", use "request.socket" instead.'});function C3(e){return e.port?e.host:e.hostname+(e.protocol==="https:"?":443":":80")}var Np=class extends N3{constructor(t){super(),this.remoteAddress=t}};function D$(e){return new t(this);function t(r){Ur.call(r,{...e,Request:void 0}),Object.assign(this,r);for(let n of Object.keys(Ur.prototype))this.constructor.prototype[n]=Ur.prototype[n];return Ap.inherits(this.constructor,e.Request),this}}function Ur(e){j$.call(this,{autoDestroy:!1});let t=$3(e.url||e.path,e.query);this.url=t.pathname+t.search,this.aborted=!1,this.httpVersionMajor=1,this.httpVersionMinor=1,this.httpVersion="1.1",this.method=e.method?e.method.toUpperCase():"GET",this.headers={},this.rawHeaders=[];let r=e.headers||{};for(let o in r){let a=o.toLowerCase();if((a==="user-agent"||a==="content-type")&&r[o]===void 0){this.headers[a]=void 0;continue}let u=r[o];T3(u!==void 0,'invalid value "undefined" for header '+o),this.headers[a]=""+u}if("user-agent"in this.headers||(this.headers["user-agent"]="lightMyRequest"),this.headers.host=this.headers.host||e.authority||C3(t),e.cookies){let{cookies:o}=e,a=Object.keys(o).map(u=>w3.serialize(u,o[u]));this.headers.cookie&&a.unshift(this.headers.cookie),this.headers.cookie=a.join("; ")}this.socket=new Np(e.remoteAddress||"127.0.0.1"),Object.defineProperty(this,"connection",{get(){return A3(),this.socket},configurable:!0});let n=e.payload||e.body||null,s=n&&typeof n.resume=="function";if(P3(n)){let o=I3(n);n=o.stream,s=!0,this.headers["content-type"]=o.contentType,this.headers["transfer-encoding"]="chunked"}n&&typeof n!="string"&&!s&&!Buffer.isBuffer(n)&&(n=JSON.stringify(n),"content-type"in this.headers||(this.headers["content-type"]="application/json")),n&&!s&&!Object.hasOwn(this.headers,"content-length")&&(this.headers["content-length"]=(Buffer.isBuffer(n)?n.length:Buffer.byteLength(n)).toString());for(let o of Object.keys(this.headers))this.rawHeaders.push(o,this.headers[o]);this._lightMyRequest={payload:n,isDone:!1,simulate:e.simulate||{},payloadAsStream:e.payloadAsStream,signal:e.signal};let i=e.signal;i&&R3(i,this);{let o=this._lightMyRequest.payload;o?._readableState?(this._read=k3,o.on("error",a=>{this.destroy(a)}),o.on("end",()=>{this.push(null)})):this._read=q3}return this}function k3(){let e=this._lightMyRequest.payload,t=!0,r=!1,n;for(;t&&(n=e.read());)r=!0,t=this.push(n);t&&!r&&this._lightMyRequest.payload.once("readable",this._read.bind(this))}function q3(){setImmediate(()=>{if(this._lightMyRequest.isDone){this._lightMyRequest.simulate.end!==!1&&this.push(null);return}this._lightMyRequest.isDone=!0,this._lightMyRequest.payload&&(this._lightMyRequest.simulate.split?(this.push(this._lightMyRequest.payload.slice(0,1)),this.push(this._lightMyRequest.payload.slice(1))):this.push(this._lightMyRequest.payload)),this._lightMyRequest.simulate.error&&this.emit("error",new Error("Simulated")),this._lightMyRequest.simulate.close&&this.emit("close"),this._lightMyRequest.simulate.end!==!1&&this.push(null)})}Ap.inherits(Ur,j$);Ap.inherits(D$,Ur);Ur.prototype.destroy=function(e){this.destroyed||this._lightMyRequest.isDone||(this.destroyed=!0,e&&(this._error=!0,process.nextTick(()=>this.emit("error",e))),process.nextTick(()=>this.emit("close")))};Vu.exports=Ur;Vu.exports.Request=Ur;Vu.exports.CustomRequest=D$});var M$=E((MY,Yi)=>{"use strict";var zu={decodeValues:!0,map:!1,silent:!1};function Cp(e){return typeof e=="string"&&!!e.trim()}function kp(e,t){var r=e.split(";").filter(Cp),n=r.shift(),s=L3(n),i=s.name,o=s.value;t=t?Object.assign({},zu,t):zu;try{o=t.decodeValues?decodeURIComponent(o):o}catch(u){console.error("set-cookie-parser encountered an error while decoding a cookie with value '"+o+"'. Set options.decodeValues to false to disable this feature.",u)}var a={name:i,value:o};return r.forEach(function(u){var c=u.split("="),l=c.shift().trimLeft().toLowerCase(),d=c.join("=");l==="expires"?a.expires=new Date(d):l==="max-age"?a.maxAge=parseInt(d,10):l==="secure"?a.secure=!0:l==="httponly"?a.httpOnly=!0:l==="samesite"?a.sameSite=d:l==="partitioned"?a.partitioned=!0:a[l]=d}),a}function L3(e){var t="",r="",n=e.split("=");return n.length>1?(t=n.shift(),r=n.join("=")):r=e,{name:t,value:r}}function F$(e,t){if(t=t?Object.assign({},zu,t):zu,!e)return t.map?{}:[];if(e.headers)if(typeof e.headers.getSetCookie=="function")e=e.headers.getSetCookie();else if(e.headers["set-cookie"])e=e.headers["set-cookie"];else{var r=e.headers[Object.keys(e.headers).find(function(s){return s.toLowerCase()==="set-cookie"})];!r&&e.headers.cookie&&!t.silent&&console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),e=r}if(Array.isArray(e)||(e=[e]),t.map){var n={};return e.filter(Cp).reduce(function(s,i){var o=kp(i,t);return s[o.name]=o,s},n)}else return e.filter(Cp).map(function(s){return kp(s,t)})}function j3(e){if(Array.isArray(e))return e;if(typeof e!="string")return[];var t=[],r=0,n,s,i,o,a;function u(){for(;r<e.length&&/\s/.test(e.charAt(r));)r+=1;return r<e.length}function c(){return s=e.charAt(r),s!=="="&&s!==";"&&s!==","}for(;r<e.length;){for(n=r,a=!1;u();)if(s=e.charAt(r),s===","){for(i=r,r+=1,u(),o=r;r<e.length&&c();)r+=1;r<e.length&&e.charAt(r)==="="?(a=!0,r=o,t.push(e.substring(n,i)),n=r):r=i+1}else r+=1;(!a||r>=e.length)&&t.push(e.substring(n,e.length))}return t}Yi.exports=F$;Yi.exports.parse=F$;Yi.exports.parseString=kp;Yi.exports.splitCookiesString=j3});var B$=E((HY,U$)=>{"use strict";var Xi=require("node:http"),{Writable:D3,Readable:H$,addAbortSignal:x3}=require("node:stream"),F3=require("node:util"),M3=M$();function Br(e,t,r){if(Xi.ServerResponse.call(this,e),e._lightMyRequest?.payloadAsStream){let a=this.emit.bind(this,"drain");this._lightMyRequest={headers:null,trailers:{},stream:new H$({read:a})};let u=e._lightMyRequest.signal;u&&x3(u,this._lightMyRequest.stream)}else this._lightMyRequest={headers:null,trailers:{},payloadChunks:[]};this.setHeader("foo","bar"),this.removeHeader("foo"),this.assignSocket(H3()),this._promiseCallback=typeof r=="function";let n=!1,s=a=>{if(!n){if(n=!0,this._promiseCallback)return process.nextTick(()=>t(a));process.nextTick(()=>t(null,a))}};this._lightMyRequest.onEndSuccess=s;let i=!1,o=a=>{if(n){this._lightMyRequest.stream&&!i&&(a||(a=new Error("response destroyed before completion"),a.code="LIGHT_ECONNRESET"),this._lightMyRequest.stream.destroy(a),this._lightMyRequest.stream.on("error",()=>{}));return}if(n=!0,a||(a=new Error("response destroyed before completion"),a.code="LIGHT_ECONNRESET"),this._promiseCallback)return process.nextTick(()=>r(a));process.nextTick(()=>t(a,null))};this._lightMyRequest.stream?this.once("finish",()=>{i=!0,this._lightMyRequest.stream.push(null)}):this.once("finish",()=>{let a=V$(this);a.raw.req=e,s(a)}),this.connection.once("error",o),this.once("error",o),this.once("close",o)}F3.inherits(Br,Xi.ServerResponse);Br.prototype.setTimeout=function(e,t){return this.timeoutHandle=setTimeout(()=>{this.emit("timeout")},e),this.on("timeout",t),this};Br.prototype.writeHead=function(){let e=Xi.ServerResponse.prototype.writeHead.apply(this,arguments);return z$(this),this._lightMyRequest.stream&&this._lightMyRequest.onEndSuccess(V$(this)),e};Br.prototype.write=function(e,t,r){return this.timeoutHandle&&clearTimeout(this.timeoutHandle),Xi.ServerResponse.prototype.write.call(this,e,t,r),this._lightMyRequest.stream?this._lightMyRequest.stream.push(Buffer.from(e,t)):(this._lightMyRequest.payloadChunks.push(Buffer.from(e,t)),!0)};Br.prototype.end=function(e,t,r){e&&this.write(e,t),Xi.ServerResponse.prototype.end.call(this,r),this.emit("finish"),this.destroy()};Br.prototype.destroy=function(e){this.destroyed||(this.destroyed=!0,e&&process.nextTick(()=>this.emit("error",e)),process.nextTick(()=>this.emit("close")))};Br.prototype.addTrailers=function(e){for(let t in e)this._lightMyRequest.trailers[t.toLowerCase().trim()]=e[t].toString().trim()};function V$(e){e._lightMyRequest.headers===null&&z$(e),V3(e);let t={raw:{res:e},headers:e._lightMyRequest.headers,statusCode:e.statusCode,statusMessage:e.statusMessage,trailers:{},get cookies(){return M3.parse(this)}};if(t.trailers=e._lightMyRequest.trailers,e._lightMyRequest.payloadChunks){let r=Buffer.concat(e._lightMyRequest.payloadChunks);t.rawPayload=r,t.payload=r.toString(),t.body=t.payload,t.json=function(){return JSON.parse(t.payload)}}else t.json=function(){throw new Error("Response payload is not available with payloadAsStream: true")};return t.stream=function(){return e._lightMyRequest.stream?e._lightMyRequest.stream:H$.from(e._lightMyRequest.payloadChunks)},t}function H3(){return new D3({write(e,t,r){setImmediate(r)}})}function V3(e){let t=e._lightMyRequest.headers;for(let r of Object.keys(t)){let n=t[r];Array.isArray(n)?t[r]=n.map(s=>""+s):t[r]=""+n}}function z$(e){e._lightMyRequest.headers=Object.assign({},e.getHeaders()),["Date","Connection","Transfer-Encoding"].forEach(t=>{let r=new RegExp("\\r\\n"+t+": ([^\\r]*)\\r\\n"),n=e._header?.match(r);n&&(e._lightMyRequest.headers[t.toLowerCase()]=n[1])})}U$.exports=Br});var G$=E((VY,qp)=>{"use strict";qp.exports=Le;qp.exports.default=Le;var z3={type:"object",properties:{url:{oneOf:[{type:"string"},{type:"object",properties:{protocol:{type:"string"},hostname:{type:"string"},pathname:{type:"string"}},additionalProperties:!0,required:["pathname"]}]},path:{oneOf:[{type:"string"},{type:"object",properties:{protocol:{type:"string"},hostname:{type:"string"},pathname:{type:"string"}},additionalProperties:!0,required:["pathname"]}]},cookies:{type:"object",additionalProperties:!0},headers:{type:"object",additionalProperties:!0},query:{anyOf:[{type:"object",additionalProperties:!0},{type:"string"}]},simulate:{type:"object",properties:{end:{type:"boolean"},split:{type:"boolean"},error:{type:"boolean"},close:{type:"boolean"}}},authority:{type:"string"},remoteAddress:{type:"string"},method:{type:"string",enum:["ACL","BIND","CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LINK","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","QUERY","REBIND","REPORT","SEARCH","SOURCE","SUBSCRIBE","TRACE","UNBIND","UNLINK","UNLOCK","UNSUBSCRIBE","acl","bind","checkout","connect","copy","delete","get","head","link","lock","m-search","merge","mkactivity","mkcalendar","mkcol","move","notify","options","patch","post","propfind","proppatch","purge","put","query","rebind","report","search","source","subscribe","trace","unbind","unlink","unlock","unsubscribe"]},validate:{type:"boolean"}},additionalProperties:!0,oneOf:[{required:["url"]},{required:["path"]}]};function Le(e,{instancePath:t="",parentData:r,parentDataProperty:n,rootData:s=e}={}){let i=null,o=0,a=o,u=!1,c=null,l=o;if(e&&typeof e=="object"&&!Array.isArray(e)){let m;if(e.url===void 0&&(m="url")){let w={instancePath:t,schemaPath:"#/oneOf/0/required",keyword:"required",params:{missingProperty:m},message:"must have required property '"+m+"'"};i===null?i=[w]:i.push(w),o++}}var p=l===o;p&&(u=!0,c=0);let d=o;if(e&&typeof e=="object"&&!Array.isArray(e)){let m;if(e.path===void 0&&(m="path")){let w={instancePath:t,schemaPath:"#/oneOf/1/required",keyword:"required",params:{missingProperty:m},message:"must have required property '"+m+"'"};i===null?i=[w]:i.push(w),o++}}var p=d===o;if(p&&u?(u=!1,c=[c,1]):p&&(u=!0,c=1),u)o=a,i!==null&&(a?i.length=a:i=null);else{let m={instancePath:t,schemaPath:"#/oneOf",keyword:"oneOf",params:{passingSchemas:c},message:"must match exactly one schema in oneOf"};return i===null?i=[m]:i.push(m),o++,Le.errors=i,!1}if(o===0)if(e&&typeof e=="object"&&!Array.isArray(e)){if(e.url!==void 0){let m=e.url,w=o,T=o,b=!1,O=null,R=o;if(typeof m!="string"){let D=typeof m,I;if(I===void 0)if(D=="number"||D=="boolean")I=""+m;else if(m===null)I="";else{let N={instancePath:t+"/url",schemaPath:"#/properties/url/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[N]:i.push(N),o++}I!==void 0&&(m=I,e!==void 0&&(e.url=I))}var h=R===o;h&&(b=!0,O=0);let P=o;if(o===P)if(m&&typeof m=="object"&&!Array.isArray(m)){let D;if(m.pathname===void 0&&(D="pathname")){let I={instancePath:t+"/url",schemaPath:"#/properties/url/oneOf/1/required",keyword:"required",params:{missingProperty:D},message:"must have required property '"+D+"'"};i===null?i=[I]:i.push(I),o++}else{if(m.protocol!==void 0){let I=m.protocol,N=o;if(typeof I!="string"){let z=typeof I,re;if(re===void 0)if(z=="number"||z=="boolean")re=""+I;else if(I===null)re="";else{let L={instancePath:t+"/url/protocol",schemaPath:"#/properties/url/oneOf/1/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[L]:i.push(L),o++}re!==void 0&&(I=re,m!==void 0&&(m.protocol=re))}var f=N===o}else var f=!0;if(f){if(m.hostname!==void 0){let I=m.hostname,N=o;if(typeof I!="string"){let re=typeof I,L;if(L===void 0)if(re=="number"||re=="boolean")L=""+I;else if(I===null)L="";else{let J={instancePath:t+"/url/hostname",schemaPath:"#/properties/url/oneOf/1/properties/hostname/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[J]:i.push(J),o++}L!==void 0&&(I=L,m!==void 0&&(m.hostname=L))}var f=N===o}else var f=!0;if(f)if(m.pathname!==void 0){let I=m.pathname,N=o;if(typeof I!="string"){let re=typeof I,L;if(L===void 0)if(re=="number"||re=="boolean")L=""+I;else if(I===null)L="";else{let J={instancePath:t+"/url/pathname",schemaPath:"#/properties/url/oneOf/1/properties/pathname/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[J]:i.push(J),o++}L!==void 0&&(I=L,m!==void 0&&(m.pathname=L))}var f=N===o}else var f=!0}}}else{let D={instancePath:t+"/url",schemaPath:"#/properties/url/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[D]:i.push(D),o++}var h=P===o;if(h&&b?(b=!1,O=[O,1]):h&&(b=!0,O=1),b)o=T,i!==null&&(T?i.length=T:i=null);else{let D={instancePath:t+"/url",schemaPath:"#/properties/url/oneOf",keyword:"oneOf",params:{passingSchemas:O},message:"must match exactly one schema in oneOf"};return i===null?i=[D]:i.push(D),o++,Le.errors=i,!1}var y=w===o}else var y=!0;if(y){if(e.path!==void 0){let m=e.path,w=o,T=o,b=!1,O=null,R=o;if(typeof m!="string"){let I=typeof m,N;if(N===void 0)if(I=="number"||I=="boolean")N=""+m;else if(m===null)N="";else{let z={instancePath:t+"/path",schemaPath:"#/properties/path/oneOf/0/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[z]:i.push(z),o++}N!==void 0&&(m=N,e!==void 0&&(e.path=N))}var S=R===o;S&&(b=!0,O=0);let P=o;if(o===P)if(m&&typeof m=="object"&&!Array.isArray(m)){let I;if(m.pathname===void 0&&(I="pathname")){let N={instancePath:t+"/path",schemaPath:"#/properties/path/oneOf/1/required",keyword:"required",params:{missingProperty:I},message:"must have required property '"+I+"'"};i===null?i=[N]:i.push(N),o++}else{if(m.protocol!==void 0){let N=m.protocol,z=o;if(typeof N!="string"){let re=typeof N,L;if(L===void 0)if(re=="number"||re=="boolean")L=""+N;else if(N===null)L="";else{let J={instancePath:t+"/path/protocol",schemaPath:"#/properties/path/oneOf/1/properties/protocol/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[J]:i.push(J),o++}L!==void 0&&(N=L,m!==void 0&&(m.protocol=L))}var _=z===o}else var _=!0;if(_){if(m.hostname!==void 0){let N=m.hostname,z=o;if(typeof N!="string"){let L=typeof N,J;if(J===void 0)if(L=="number"||L=="boolean")J=""+N;else if(N===null)J="";else{let Fe={instancePath:t+"/path/hostname",schemaPath:"#/properties/path/oneOf/1/properties/hostname/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Fe]:i.push(Fe),o++}J!==void 0&&(N=J,m!==void 0&&(m.hostname=J))}var _=z===o}else var _=!0;if(_)if(m.pathname!==void 0){let N=m.pathname,z=o;if(typeof N!="string"){let L=typeof N,J;if(J===void 0)if(L=="number"||L=="boolean")J=""+N;else if(N===null)J="";else{let Fe={instancePath:t+"/path/pathname",schemaPath:"#/properties/path/oneOf/1/properties/pathname/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[Fe]:i.push(Fe),o++}J!==void 0&&(N=J,m!==void 0&&(m.pathname=J))}var _=z===o}else var _=!0}}}else{let I={instancePath:t+"/path",schemaPath:"#/properties/path/oneOf/1/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[I]:i.push(I),o++}var S=P===o;if(S&&b?(b=!1,O=[O,1]):S&&(b=!0,O=1),b)o=T,i!==null&&(T?i.length=T:i=null);else{let I={instancePath:t+"/path",schemaPath:"#/properties/path/oneOf",keyword:"oneOf",params:{passingSchemas:O},message:"must match exactly one schema in oneOf"};return i===null?i=[I]:i.push(I),o++,Le.errors=i,!1}var y=w===o}else var y=!0;if(y){if(e.cookies!==void 0){let m=e.cookies,w=o;if(o===w&&!(m&&typeof m=="object"&&!Array.isArray(m)))return Le.errors=[{instancePath:t+"/cookies",schemaPath:"#/properties/cookies/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var y=w===o}else var y=!0;if(y){if(e.headers!==void 0){let m=e.headers,w=o;if(o===w&&!(m&&typeof m=="object"&&!Array.isArray(m)))return Le.errors=[{instancePath:t+"/headers",schemaPath:"#/properties/headers/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var y=w===o}else var y=!0;if(y){if(e.query!==void 0){let m=e.query,w=o,T=o,b=!1,O=o;if(o===O&&!(m&&typeof m=="object"&&!Array.isArray(m))){let P={instancePath:t+"/query",schemaPath:"#/properties/query/anyOf/0/type",keyword:"type",params:{type:"object"},message:"must be object"};i===null?i=[P]:i.push(P),o++}var v=O===o;if(b=b||v,!b){let P=o;if(typeof m!="string"){let I=typeof m,N;if(N===void 0)if(I=="number"||I=="boolean")N=""+m;else if(m===null)N="";else{let z={instancePath:t+"/query",schemaPath:"#/properties/query/anyOf/1/type",keyword:"type",params:{type:"string"},message:"must be string"};i===null?i=[z]:i.push(z),o++}N!==void 0&&(m=N,e!==void 0&&(e.query=N))}var v=P===o;b=b||v}if(b)o=T,i!==null&&(T?i.length=T:i=null);else{let P={instancePath:t+"/query",schemaPath:"#/properties/query/anyOf",keyword:"anyOf",params:{},message:"must match a schema in anyOf"};return i===null?i=[P]:i.push(P),o++,Le.errors=i,!1}var y=w===o}else var y=!0;if(y){if(e.simulate!==void 0){let m=e.simulate,w=o;if(o===w)if(m&&typeof m=="object"&&!Array.isArray(m)){if(m.end!==void 0){let b=m.end,O=o;if(typeof b!="boolean"){let R;if(R===void 0)if(b==="false"||b===0||b===null)R=!1;else if(b==="true"||b===1)R=!0;else return Le.errors=[{instancePath:t+"/simulate/end",schemaPath:"#/properties/simulate/properties/end/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;R!==void 0&&(b=R,m!==void 0&&(m.end=R))}var g=O===o}else var g=!0;if(g){if(m.split!==void 0){let b=m.split,O=o;if(typeof b!="boolean"){let P;if(P===void 0)if(b==="false"||b===0||b===null)P=!1;else if(b==="true"||b===1)P=!0;else return Le.errors=[{instancePath:t+"/simulate/split",schemaPath:"#/properties/simulate/properties/split/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;P!==void 0&&(b=P,m!==void 0&&(m.split=P))}var g=O===o}else var g=!0;if(g){if(m.error!==void 0){let b=m.error,O=o;if(typeof b!="boolean"){let P;if(P===void 0)if(b==="false"||b===0||b===null)P=!1;else if(b==="true"||b===1)P=!0;else return Le.errors=[{instancePath:t+"/simulate/error",schemaPath:"#/properties/simulate/properties/error/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;P!==void 0&&(b=P,m!==void 0&&(m.error=P))}var g=O===o}else var g=!0;if(g)if(m.close!==void 0){let b=m.close,O=o;if(typeof b!="boolean"){let P;if(P===void 0)if(b==="false"||b===0||b===null)P=!1;else if(b==="true"||b===1)P=!0;else return Le.errors=[{instancePath:t+"/simulate/close",schemaPath:"#/properties/simulate/properties/close/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;P!==void 0&&(b=P,m!==void 0&&(m.close=P))}var g=O===o}else var g=!0}}}else return Le.errors=[{instancePath:t+"/simulate",schemaPath:"#/properties/simulate/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;var y=w===o}else var y=!0;if(y){if(e.authority!==void 0){let m=e.authority,w=o;if(typeof m!="string"){let b=typeof m,O;if(O===void 0)if(b=="number"||b=="boolean")O=""+m;else if(m===null)O="";else return Le.errors=[{instancePath:t+"/authority",schemaPath:"#/properties/authority/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;O!==void 0&&(m=O,e!==void 0&&(e.authority=O))}var y=w===o}else var y=!0;if(y){if(e.remoteAddress!==void 0){let m=e.remoteAddress,w=o;if(typeof m!="string"){let b=typeof m,O;if(O===void 0)if(b=="number"||b=="boolean")O=""+m;else if(m===null)O="";else return Le.errors=[{instancePath:t+"/remoteAddress",schemaPath:"#/properties/remoteAddress/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;O!==void 0&&(m=O,e!==void 0&&(e.remoteAddress=O))}var y=w===o}else var y=!0;if(y){if(e.method!==void 0){let m=e.method,w=o;if(typeof m!="string"){let b=typeof m,O;if(O===void 0)if(b=="number"||b=="boolean")O=""+m;else if(m===null)O="";else return Le.errors=[{instancePath:t+"/method",schemaPath:"#/properties/method/type",keyword:"type",params:{type:"string"},message:"must be string"}],!1;O!==void 0&&(m=O,e!==void 0&&(e.method=O))}if(!(m==="ACL"||m==="BIND"||m==="CHECKOUT"||m==="CONNECT"||m==="COPY"||m==="DELETE"||m==="GET"||m==="HEAD"||m==="LINK"||m==="LOCK"||m==="M-SEARCH"||m==="MERGE"||m==="MKACTIVITY"||m==="MKCALENDAR"||m==="MKCOL"||m==="MOVE"||m==="NOTIFY"||m==="OPTIONS"||m==="PATCH"||m==="POST"||m==="PROPFIND"||m==="PROPPATCH"||m==="PURGE"||m==="PUT"||m==="QUERY"||m==="REBIND"||m==="REPORT"||m==="SEARCH"||m==="SOURCE"||m==="SUBSCRIBE"||m==="TRACE"||m==="UNBIND"||m==="UNLINK"||m==="UNLOCK"||m==="UNSUBSCRIBE"||m==="acl"||m==="bind"||m==="checkout"||m==="connect"||m==="copy"||m==="delete"||m==="get"||m==="head"||m==="link"||m==="lock"||m==="m-search"||m==="merge"||m==="mkactivity"||m==="mkcalendar"||m==="mkcol"||m==="move"||m==="notify"||m==="options"||m==="patch"||m==="post"||m==="propfind"||m==="proppatch"||m==="purge"||m==="put"||m==="query"||m==="rebind"||m==="report"||m==="search"||m==="source"||m==="subscribe"||m==="trace"||m==="unbind"||m==="unlink"||m==="unlock"||m==="unsubscribe"))return Le.errors=[{instancePath:t+"/method",schemaPath:"#/properties/method/enum",keyword:"enum",params:{allowedValues:z3.properties.method.enum},message:"must be equal to one of the allowed values"}],!1;var y=w===o}else var y=!0;if(y)if(e.validate!==void 0){let m=e.validate,w=o;if(typeof m!="boolean"){let b;if(b===void 0)if(m==="false"||m===0||m===null)b=!1;else if(m==="true"||m===1)b=!0;else return Le.errors=[{instancePath:t+"/validate",schemaPath:"#/properties/validate/type",keyword:"type",params:{type:"boolean"},message:"must be boolean"}],!1;b!==void 0&&(m=b,e!==void 0&&(e.validate=b))}var y=w===o}else var y=!0}}}}}}}}}else return Le.errors=[{instancePath:t,schemaPath:"#/type",keyword:"type",params:{type:"object"},message:"must be object"}],!1;return Le.errors=i,o===0}});var W$=E((zY,Zi)=>{"use strict";var U3=require("node:assert"),Lp=x$(),Uu=B$(),Gu="The dispatch function has already been invoked",J$=G$();function jp(e,t,r){return r===void 0?new Qi(e,t):Bu(e,t,r)}function B3(e,t){let r=e._lightMyRequest.payload;if(!r||r._readableState||typeof r.resume!="function")return t();let n=[];r.on("data",s=>n.push(Buffer.from(s))),r.on("end",()=>{let s=Buffer.concat(n);return e.headers["content-length"]=e.headers["content-length"]||""+s.length,delete e.headers["transfer-encoding"],e._lightMyRequest.payload=s,t()}),r.resume()}function K$(e,t,r,n){return r.once("error",function(s){this.destroyed&&n.destroy(s)}),r.once("close",function(){this.destroyed&&!this._error&&n.destroy()}),B3(r,()=>e.call(t,r,n))}function Bu(e,t,r){if(t=typeof t=="string"?{url:t}:t,t.validate!==!1&&(U3(typeof e=="function","dispatchFunc should be a function"),!J$(t)))throw new Error(J$.errors.map(o=>o.message));let n=t.server||{},s=t.Request?Lp.CustomRequest:Lp;if(e.request&&e.request.app===e&&(Object.setPrototypeOf(Object.getPrototypeOf(e.request),s.prototype),Object.setPrototypeOf(Object.getPrototypeOf(e.response),Uu.prototype)),typeof r=="function"){let i=new s(t),o=new Uu(i,r);return K$(e,n,i,o)}else return new Promise((i,o)=>{let a=new s(t),u=new Uu(a,i,o);K$(e,n,a,u)})}function Qi(e,t){typeof t=="string"?this.option={url:t}:this.option=Object.assign({},t),this.dispatch=e,this._hasInvoked=!1,this._promise=null,this.option.autoStart!==!1&&process.nextTick(()=>{this._hasInvoked||this.end()})}var G3=["delete","get","head","options","patch","post","put","trace"];G3.forEach(e=>{Qi.prototype[e]=function(t){if(this._hasInvoked===!0||this._promise)throw new Error(Gu);return this.option.url=t,this.option.method=e.toUpperCase(),this}});var J3=["body","cookies","headers","payload","query"];J3.forEach(e=>{Qi.prototype[e]=function(t){if(this._hasInvoked===!0||this._promise)throw new Error(Gu);return this.option[e]=t,this}});Qi.prototype.end=function(e){if(this._hasInvoked===!0||this._promise)throw new Error(Gu);if(this._hasInvoked=!0,typeof e=="function")Bu(this.dispatch,this.option,e);else return this._promise=Bu(this.dispatch,this.option),this._promise};Object.getOwnPropertyNames(Promise.prototype).forEach(e=>{e!=="constructor"&&(Qi.prototype[e]=function(...t){if(!this._promise){if(this._hasInvoked===!0)throw new Error(Gu);this._hasInvoked=!0,this._promise=Bu(this.dispatch,this.option)}return this._promise[e](...t)})});function K3(e){return e instanceof Lp||e instanceof Uu||e?.constructor?.name==="_CustomLMRRequest"}Zi.exports=jp;Zi.exports.default=jp;Zi.exports.inject=jp;Zi.exports.isInjection=K3});var fP=E((UY,so)=>{"use strict";var W3="5.3.2",Y3=Fm(),Ju=require("node:http"),X3=require("node:diagnostics_channel"),eo,{kAvvioBoot:to,kChildren:Dp,kServerBindings:Y$,kBodyLimit:Q3,kSupportedHTTPMethods:vn,kRoutePrefix:X$,kLogLevel:Z3,kLogSerializers:e6,kHooks:xp,kSchemaController:Gr,kRequestAcceptVersion:t6,kReplySerializerDefault:Q$,kContentTypeParser:r6,kReply:n6,kRequest:s6,kFourOhFour:i6,kState:Ce,kOptions:Fp,kPluginNameChain:ro,kSchemaErrorFormatter:Mp,kErrorHandler:Ku,kKeepAliveConnections:Hp,kChildLoggerFactory:Vp,kGenReqId:zp}=De(),{createServer:o6}=uy(),no=Zo(),Wu=ia(),a6=oa(),bn=zs(),Rn=Hc(),Z$=Ah(),{Hooks:u6,hookRunnerApplication:eP,supportedHooks:Up}=Tr(),{createChildLogger:tP,defaultChildLoggerFactory:l6,createLogger:c6}=xs(),rP=tp(),{getGenReqId:nP,reqIdGenFactory:sP}=Su(),{buildRouting:f6,validateBodyLimitOption:d6}=o$(),h6=h$(),cP=m$(),p6=w$(),m6=O$(),{appendStackTrace:y6,AVVIO_ERRORS_MAP:iP,...wn}=Ve(),{defaultInitOptions:yt}=cP,{FST_ERR_ASYNC_CONSTRAINT:g6,FST_ERR_BAD_URL:_6,FST_ERR_FORCE_CLOSE_CONNECTIONS_IDLE_NOT_AVAILABLE:S6,FST_ERR_OPTIONS_NOT_OBJ:E6,FST_ERR_QSP_NOT_FN:v6,FST_ERR_SCHEMA_CONTROLLER_BUCKET_OPT_NOT_FN:b6,FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_OBJ:R6,FST_ERR_AJV_CUSTOM_OPTIONS_OPT_NOT_ARR:w6,FST_ERR_INSTANCE_ALREADY_LISTENING:T6,FST_ERR_REOPENED_CLOSE_SERVER:O6,FST_ERR_ROUTE_REWRITE_NOT_STR:$6,FST_ERR_SCHEMA_ERROR_FORMATTER_NOT_FN:oP,FST_ERR_ERROR_HANDLER_NOT_FN:P6,FST_ERR_ROUTE_METHOD_INVALID:I6}=wn,{buildErrorHandler:aP}=Ms(),uP=X3.channel("fastify.initialization");function N6(e){let t={};return["errorHandler","logLevel","logSerializers"].concat(Up).forEach(n=>{t[n]=e.store[n]}),Object.assign({},t)}function Bp(e){if(e&&typeof e!="object")throw new E6;if(e=Object.assign({},e),e.querystringParser&&typeof e.querystringParser!="function")throw new v6(typeof e.querystringParser);if(e.schemaController&&e.schemaController.bucket&&typeof e.schemaController.bucket!="function")throw new b6(typeof e.schemaController.bucket);d6(e.bodyLimit);let t=typeof e.requestIdHeader=="string"&&e.requestIdHeader.length!==0?e.requestIdHeader.toLowerCase():e.requestIdHeader===!0&&"request-id",r=sP(t,e.genReqId),n=e.requestIdLogLabel||"reqId",s=e.bodyLimit||yt.bodyLimit,i=e.disableRequestLogging||!1,o=Object.assign({customOptions:{},plugins:[]},e.ajv),a=e.frameworkErrors;if(!o.customOptions||Object.prototype.toString.call(o.customOptions)!=="[object Object]")throw new R6(typeof o.customOptions);if(!o.plugins||!Array.isArray(o.plugins))throw new w6(typeof o.plugins);let{logger:u,hasLogger:c}=c6(e);e.connectionTimeout=e.connectionTimeout||yt.connectionTimeout,e.keepAliveTimeout=e.keepAliveTimeout||yt.keepAliveTimeout,e.maxRequestsPerSocket=e.maxRequestsPerSocket||yt.maxRequestsPerSocket,e.requestTimeout=e.requestTimeout||yt.requestTimeout,e.logger=u,e.requestIdHeader=t,e.requestIdLogLabel=n,e.disableRequestLogging=i,e.ajv=o,e.clientErrorHandler=e.clientErrorHandler||L;let l=cP(e);e.exposeHeadRoutes=l.exposeHeadRoutes;let d=f6({config:{defaultRoute:J,onBadUrl:Fe,constraints:e.constraints,ignoreTrailingSlash:e.ignoreTrailingSlash||yt.ignoreTrailingSlash,ignoreDuplicateSlashes:e.ignoreDuplicateSlashes||yt.ignoreDuplicateSlashes,maxParamLength:e.maxParamLength||yt.maxParamLength,caseSensitive:e.caseSensitive,allowUnsafeRegex:e.allowUnsafeRegex||yt.allowUnsafeRegex,buildPrettyMeta:N6,querystringParser:e.querystringParser,useSemicolonDelimiter:e.useSemicolonDelimiter??yt.useSemicolonDelimiter}}),p=h6(e),f=ot(d,e);e.http2SessionTimeout=l.http2SessionTimeout;let{server:h,listen:y}=o6(e,f),_=typeof h.closeAllConnections=="function",S=typeof h.closeIdleConnections=="function",v=e.forceCloseConnections;if(v==="idle"&&!S)throw new S6;typeof v!="boolean"&&(v=S?"idle":!1);let g=!_&&v===!0?new Set:m6(),m=no.setupResponseListeners,w=Z$.buildSchemaController(null,e.schemaController),T={[Ce]:{listening:!1,closing:!1,started:!1,ready:!1,booting:!1,readyPromise:null},[Hp]:g,[vn]:{bodyless:new Set(["GET","HEAD","TRACE"]),bodywith:new Set(["DELETE","OPTIONS","PATCH","PUT","POST"])},[Fp]:e,[Dp]:[],[Y$]:[],[Q3]:s,[X$]:"",[Z3]:"",[e6]:null,[xp]:new u6,[Gr]:w,[Mp]:null,[Ku]:aP(),[Vp]:l6,[Q$]:null,[r6]:new Rn(s,e.onProtoPoisoning||yt.onProtoPoisoning,e.onConstructorPoisoning||yt.onConstructorPoisoning),[n6]:no.buildReply(no),[s6]:Wu.buildRequest(Wu,e.trustProxy),[i6]:p,[rP.kRegisteredPlugins]:[],[ro]:["fastify"],[to]:null,[zp]:r,routing:f,delete:function(C,j,V){return d.prepareRoute.call(this,{method:"DELETE",url:C,options:j,handler:V})},get:function(C,j,V){return d.prepareRoute.call(this,{method:"GET",url:C,options:j,handler:V})},head:function(C,j,V){return d.prepareRoute.call(this,{method:"HEAD",url:C,options:j,handler:V})},trace:function(C,j,V){return d.prepareRoute.call(this,{method:"TRACE",url:C,options:j,handler:V})},patch:function(C,j,V){return d.prepareRoute.call(this,{method:"PATCH",url:C,options:j,handler:V})},post:function(C,j,V){return d.prepareRoute.call(this,{method:"POST",url:C,options:j,handler:V})},put:function(C,j,V){return d.prepareRoute.call(this,{method:"PUT",url:C,options:j,handler:V})},options:function(C,j,V){return d.prepareRoute.call(this,{method:"OPTIONS",url:C,options:j,handler:V})},all:function(C,j,V){return d.prepareRoute.call(this,{method:this.supportedMethods,url:C,options:j,handler:V})},route:function(C){return d.route.call(this,{options:C})},hasRoute:function(C){return d.hasRoute.call(this,{options:C})},findRoute:function(C){return d.findRoute(C)},log:u,withTypeProvider:N,addHook:z,addSchema:re,getSchema:w.getSchema.bind(w),getSchemas:w.getSchemas.bind(w),setValidatorCompiler:Rr,setSerializerCompiler:ce,setSchemaController:Tn,setReplySerializer:ke,setSchemaErrorFormatter:he,setGenReqId:Ts,addContentTypeParser:Rn.helpers.addContentTypeParser,hasContentTypeParser:Rn.helpers.hasContentTypeParser,getDefaultJsonParser:Rn.defaultParsers.getDefaultJsonParser,defaultTextParser:Rn.defaultParsers.defaultTextParser,removeContentTypeParser:Rn.helpers.removeContentTypeParser,removeAllContentTypeParsers:Rn.helpers.removeAllContentTypeParsers,register:null,after:null,ready:null,onClose:null,close:null,printPlugins:null,hasPlugin:function($){return this[rP.kRegisteredPlugins].includes($)||this[ro].includes($)},listen:y,server:h,addresses:function(){let $=this[Y$].map(C=>C.address());return $.push(this.server.address()),$.filter(C=>C)},decorate:bn.add,hasDecorator:bn.exist,decorateReply:bn.decorateReply,decorateRequest:bn.decorateRequest,hasRequestDecorator:bn.existRequest,hasReplyDecorator:bn.existReply,getDecorator:bn.getInstanceDecorator,addHttpMethod:Ht,inject:D,printRoutes:Q,setNotFoundHandler:je,setErrorHandler:fe,setChildLoggerFactory:Te,initialConfig:l,addConstraintStrategy:d.addConstraintStrategy.bind(d),hasConstraintStrategy:d.hasConstraintStrategy.bind(d)};Object.defineProperties(T,{listeningOrigin:{get(){let $=this.addresses().slice(-1).pop();if(typeof $=="string")return $;let C=$.family==="IPv6"?`[${$.address}]`:$.address;return`${this[Fp].https?"https":"http"}://${C}:${$.port}`}},pluginName:{configurable:!0,get(){return this[ro].length>1?this[ro].join(" -> "):this[ro][0]}},prefix:{configurable:!0,get(){return this[X$]}},validatorCompiler:{configurable:!0,get(){return this[Gr].getValidatorCompiler()}},serializerCompiler:{configurable:!0,get(){return this[Gr].getSerializerCompiler()}},childLoggerFactory:{configurable:!0,get(){return this[Vp]}},version:{configurable:!0,get(){return W3}},errorHandler:{configurable:!0,get(){return this[Ku].func}},genReqId:{configurable:!0,get(){return this[zp]}},supportedMethods:{configurable:!1,get(){return[...this[vn].bodyless,...this[vn].bodywith]}}}),e.schemaErrorFormatter&&(lP(e.schemaErrorFormatter),T[Mp]=e.schemaErrorFormatter.bind(T));let b=Number(e.pluginTimeout),O=Y3(T,{autostart:!1,timeout:isNaN(b)===!1?b:yt.pluginTimeout,expose:{use:"register"}});O.override=p6,O.on("start",()=>T[Ce].started=!0),T[to]=T.ready,T.ready=I,T.printPlugins=O.prettyPrint.bind(O),O.once("preReady",()=>{T.onClose(($,C)=>{T[Ce].closing=!0,d.closeRoutes(),eP("preClose",T[to],T,function(){if(T[Ce].listening){if(v==="idle")$.server.closeIdleConnections();else if(_&&v)$.server.closeAllConnections();else if(v===!0)for(let j of T[Hp])j.destroy(),T[Hp].delete(j)}!e.serverFactory||T[Ce].listening?$.server.close(function(j){j&&j.code!=="ERR_SERVER_NOT_RUNNING"?C(null):C()}):process.nextTick(C,null)})})});let R=new a6({server:T,config:{}});return T.setNotFoundHandler(),p.arrange404(T),d.setup(e,{avvio:O,fourOhFour:p,logger:u,hasLogger:c,setupResponseListeners:m,throwIfAlreadyStarted:P,keepAliveConnections:g}),h.on("clientError",e.clientErrorHandler.bind(T)),uP.hasSubscribers&&uP.publish({fastify:T}),"asyncDispose"in Symbol&&(T[Symbol.asyncDispose]=function(){return T.close()}),T;function P($){if(T[Ce].started)throw new T6($)}function D($,C){if(eo===void 0&&(eo=W$()),T[Ce].started){if(T[Ce].closing){let j=new O6;if(C){C(j);return}else return Promise.reject(j)}return eo(f,$,C)}if(C)this.ready(j=>{j?C(j,null):eo(f,$,C)});else return eo((j,V)=>{this.ready(function(ee){if(ee){V.emit("error",ee);return}f(j,V)})},$)}function I($){if(this[Ce].readyPromise!==null){if($!=null){this[Ce].readyPromise.then(()=>$(null,T),$);return}return this[Ce].readyPromise}let C,j;if(process.nextTick(V),this[Ce].readyPromise=new Promise(function(M,Se){C=M,j=Se}),$)this[Ce].readyPromise.then(()=>$(null,T),$);else return this[Ce].readyPromise;function V(){T[to]((M,Se)=>{M||T[Ce].started||T[Ce].ready||T[Ce].booting?ee(M):(T[Ce].booting=!0,eP("onReady",T[to],T,ee)),Se()})}function ee(M){if(M=M!=null&&iP[M.code]!=null?y6(M,new iP[M.code](M.message)):M,M)return j(M);C(T),T[Ce].booting=!1,T[Ce].ready=!0,T[Ce].readyPromise=null}}function N(){return this}function z($,C){if(P('Cannot call "addHook"!'),C==null)throw new wn.FST_ERR_HOOK_INVALID_HANDLER($,C);if($==="onSend"||$==="preSerialization"||$==="onError"||$==="preParsing"){if(C.constructor.name==="AsyncFunction"&&C.length===4)throw new wn.FST_ERR_HOOK_INVALID_ASYNC_HANDLER}else if($==="onReady"||$==="onListen"){if(C.constructor.name==="AsyncFunction"&&C.length!==0)throw new wn.FST_ERR_HOOK_INVALID_ASYNC_HANDLER}else if($==="onRequestAbort"){if(C.constructor.name==="AsyncFunction"&&C.length!==1)throw new wn.FST_ERR_HOOK_INVALID_ASYNC_HANDLER}else if(C.constructor.name==="AsyncFunction"&&C.length===3)throw new wn.FST_ERR_HOOK_INVALID_ASYNC_HANDLER;return $==="onClose"?this.onClose(C.bind(this)):$==="onReady"||$==="onListen"||$==="onRoute"?this[xp].add($,C):this.after((V,ee)=>{try{j.call(this,$,C),ee(V)}catch(M){ee(M)}}),this;function j(V,ee){this[xp].add(V,ee),this[Dp].forEach(M=>j.call(M,V,ee))}}function re($){return P('Cannot call "addSchema"!'),this[Gr].add($),this[Dp].forEach(C=>C.addSchema($)),this}function L($,C){if($.code==="ECONNRESET"||C.destroyed)return;let j,V,ee,M;$.code==="ERR_HTTP_REQUEST_TIMEOUT"?(V="408",ee=Ju.STATUS_CODES[V],j=`{"error":"${ee}","message":"Client Timeout","statusCode":408}`,M="timeout"):$.code==="HPE_HEADER_OVERFLOW"?(V="431",ee=Ju.STATUS_CODES[V],j=`{"error":"${ee}","message":"Exceeded maximum allowed HTTP header size","statusCode":431}`,M="header_overflow"):(V="400",ee=Ju.STATUS_CODES[V],j=`{"error":"${ee}","message":"Client Error","statusCode":400}`,M="error"),this.log.trace({err:$},`client ${M}`),C.writable&&C.write(`HTTP/1.1 ${V} ${ee}\r
Content-Length: ${j.length}\r
Content-Type: application/json\r
\r
${j}`),C.destroy($)}function J($,C){$.headers["accept-version"]!==void 0&&($.headers[t6]=$.headers["accept-version"],$.headers["accept-version"]=void 0),p.router.lookup($,C)}function Fe($,C,j){if(a){let ee=nP(R.server,C),M=tP(R,u,C,ee),Se=new Wu(ee,null,C,null,M,R),sr=new no(j,Se,M);return i===!1&&M.info({req:Se},"incoming request"),a(new _6($),Se,sr)}let V=`{"error":"Bad Request","code":"FST_ERR_BAD_URL","message":"'${$}' is not a valid url component","statusCode":400}`;j.writeHead(400,{"Content-Type":"application/json","Content-Length":V.length}),j.end(V)}function H($,C,j){if($!==!1)return function(ee){if(ee){if(a){let Se=nP(R.server,C),sr=tP(R,u,C,Se),Pe=new Wu(Se,null,C,null,sr,R),ir=new no(j,Pe,sr);return i===!1&&sr.info({req:Pe},"incoming request"),a(new g6,Pe,ir)}let M='{"error":"Internal Server Error","message":"Unexpected error from async constraint","statusCode":500}';j.writeHead(500,{"Content-Type":"application/json","Content-Length":M.length}),j.end(M)}}}function je($,C){return P('Cannot call "setNotFoundHandler"!'),p.setNotFoundHandler.call(this,$,C,O,d.routeHandler),this}function Rr($){return P('Cannot call "setValidatorCompiler"!'),this[Gr].setValidatorCompiler($),this}function he($){return P('Cannot call "setSchemaErrorFormatter"!'),lP($),this[Mp]=$.bind(this),this}function ce($){return P('Cannot call "setSerializerCompiler"!'),this[Gr].setSerializerCompiler($),this}function Tn($){P('Cannot call "setSchemaController"!');let C=this[Gr],j=Z$.buildSchemaController(C,Object.assign({},C.opts,$));return this[Gr]=j,this.getSchema=j.getSchema.bind(j),this.getSchemas=j.getSchemas.bind(j),this}function ke($){return P('Cannot call "setReplySerializer"!'),this[Q$]=$,this}function fe($){if(P('Cannot call "setErrorHandler"!'),typeof $!="function")throw new P6;return this[Ku]=aP(this[Ku],$.bind(this)),this}function Te($){return P('Cannot call "setChildLoggerFactory"!'),this[Vp]=$,this}function Q($={}){return $.includeMeta=$.includeHooks?$.includeMeta?Up.concat($.includeMeta):Up:$.includeMeta,d.printRoutes($)}function ot($,{rewriteUrl:C,logger:j}){let V;return function(M,Se){if(V===void 0&&(V=$.isAsyncConstraint()),C){M.originalUrl=M.url;let sr=C.call(T,M);if(typeof sr=="string")M.url=sr;else{let Pe=new $6(M.url,typeof sr);M.destroy(Pe)}}$.routing(M,Se,H(V,M,Se))}}function Ts($){return P('Cannot call "setGenReqId"!'),this[zp]=sP(this[Fp].requestIdHeader,$),this}function Ht($,{hasBody:C=!1}={}){if(typeof $!="string"||Ju.METHODS.indexOf($)===-1)throw new I6;C===!0?(this[vn].bodywith.add($),this[vn].bodyless.delete($)):(this[vn].bodywith.delete($),this[vn].bodyless.add($));let j=$.toLowerCase();return this.hasDecorator(j)||this.decorate(j,function(V,ee,M){return d.prepareRoute.call(this,{method:$,url:V,options:ee,handler:M})}),this}}function lP(e){if(typeof e!="function")throw new oP(typeof e);if(e.constructor.name==="AsyncFunction")throw new oP("AsyncFunction")}so.exports=Bp;so.exports.errorCodes=wn;so.exports.fastify=Bp;so.exports.default=Bp});var hP=E((BY,dP)=>{"use strict";var A6=["SIGHUP","SIGINT","SIGQUIT","SIGILL","SIGTRAP","SIGABRT","SIGBUS","SIGFPE","SIGSEGV","SIGUSR2","SIGTERM"];dP.exports={signalEvents:A6}});var mP=E((GY,pP)=>{"use strict";var C6=["uncaughtException","unhandledRejection"];pP.exports={errorEvents:C6}});var gP=E((JY,yP)=>{"use strict";var k6=["beforeExit"];yP.exports={exitEvents:k6}});var EP=E((KY,SP)=>{"use strict";var{signalEvents:Gp}=hP(),{errorEvents:Jp}=mP(),{exitEvents:_P}=gP(),{promisify:q6}=require("node:util"),L6=q6(setTimeout);Kp.closing=!1;function Kp(e,t){typeof e=="function"&&(t=e,e={}),e={delay:1e4,logger:console,...e};let r=typeof e.delay=="number"?e.delay:void 0,n=typeof e.logger=="object"||typeof e.logger=="function"?e.logger:void 0;Gp.forEach(f=>process.once(f,o)),Jp.forEach(f=>process.once(f,u)),_P.forEach(f=>process.once(f,l));let s=Symbol("sleeped");return{close:()=>p({manual:!0}),uninstall:i};function i(){Gp.forEach(f=>process.removeListener(f,o)),Jp.forEach(f=>process.removeListener(f,u)),_P.forEach(f=>process.removeListener(f,l))}function o(f){p({signal:f})}function a(f){n&&n.error(`second ${f}, exiting`),process.exit(1)}function u(f){p({err:f})}function c(f){n&&(n.error("second error, exiting"),n.error(f)),process.exit(1)}function l(){p({})}function d(f){let h=t(f,v);if(h&&typeof h.then=="function")return h;let y,_;return new Promise(function(g,m){y=g,_=m});function v(g){if(y){if(g){_(g);return}y()}}}async function p(f){i(),Gp.forEach(h=>process.on(h,a)),Jp.forEach(h=>process.on(h,c)),Kp.closing=!0;try{await Promise.race([...typeof r=="number"?[L6(r,s)]:[],d(f)])===s?(n&&n.error(`killed by timeout (${r}ms)`),process.exit(1)):f.err?process.exit(1):process.exit(0)}catch(h){n&&n.error(h),process.exit(1)}}}SP.exports=Kp});var bP=em(fP(),1),RP=em(EP(),1);function vP(){return process.stdout.isTTY?{level:"info",transport:{target:"pino-pretty",options:{translateTime:"HH:MM:ss Z",ignore:"pid,hostname"}}}:{level:process.env.LOG_LEVEL??"silent"}}var io=(0,bP.default)({logger:vP(),ajv:{customOptions:{coerceTypes:"array",removeAdditional:"all"}}}).withTypeProvider();async function j6(){(0,RP.default)({delay:500},async({err:e})=>{e!==null&&io.log.error(e),await io.close()}),await io.ready();try{await io.listen({port:3e3})}catch(e){io.log.error(e)}}j6();
/*! Bundled license information:

@fastify/forwarded/index.js:
  (*!
   * forwarded
   * Copyright(c) 2014-2017 Douglas Christopher Wilson
   * MIT Licensed
   *)

@fastify/proxy-addr/index.js:
  (*!
   * proxy-addr
   * Copyright(c) 2021 Fastify collaborators
   * Copyright(c) 2014-2016 Douglas Christopher Wilson
   * MIT Licensed
   *)

toad-cache/dist/toad-cache.cjs:
  (**
   * toad-cache
   *
   * @copyright 2024 Igor Savin <kibertoad@gmail.com>
   * @license MIT
   * @version 3.7.0
   *)

light-my-request/lib/form-data.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)
*/
//# sourceMappingURL=server.js.map
